"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9058],{5666:(Dt,ct,v)=>{v.d(ct,{T:()=>Rt});var o=v(467),I=v(7586),X=v(5558),K=v(5312),t=v(3953),F=v(791),nt=v(4938),j=v(177);function D(M,P){if(1&M&&(t.j41(0,"div",9)(1,"h3",10),t.EFF(2),t.k0s(),t.j41(3,"p",11),t.EFF(4),t.k0s()()),2&M){const g=P.$implicit,l=t.XpG();t.R7$(2),t.JRh(l.getDayInHebrew(g.name)),t.R7$(2),t.JRh(g.date)}}function at(M,P){if(1&M&&(t.j41(0,"div")(1,"p",16),t.EFF(2),t.k0s(),t.j41(3,"p",17),t.EFF(4),t.k0s()()),2&M){const g=t.XpG().$implicit,l=t.XpG().$implicit;t.R7$(2),t.JRh(g.trainings[l].time),t.R7$(2),t.JRh(g.trainings[l].title)}}function q(M,P){1&M&&(t.j41(0,"div")(1,"p",18),t.EFF(2,"-"),t.k0s()())}function z(M,P){if(1&M&&(t.j41(0,"div",14),t.DNE(1,at,5,2,"div",15)(2,q,3,0,"div",15),t.k0s()),2&M){const g=P.$implicit,l=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",g.trainings[l]),t.R7$(),t.Y8G("ngIf",!g.trainings[l])}}function H(M,P){if(1&M&&(t.j41(0,"div",12),t.DNE(1,z,3,2,"div",13),t.k0s()),2&M){const g=t.XpG();t.R7$(),t.Y8G("ngForOf",g.days)}}let $=(()=>{var M;class P{constructor(l,u){this.modalCtrl=l,this.ameliaService=u,this.days=[],this.hebrewDaysMap={Sunday:"\u05e8\u05d0\u05e9\u05d5\u05df",Monday:"\u05e9\u05e0\u05d9",Tuesday:"\u05e9\u05dc\u05d9\u05e9\u05d9",Wednesday:"\u05e8\u05d1\u05d9\u05e2\u05d9",Thursday:"\u05d7\u05de\u05d9\u05e9\u05d9",Friday:"\u05e9\u05d9\u05e9\u05d9",Saturday:"\u05e9\u05d1\u05ea"}}ngOnInit(){this.loadWeeklyTrainings()}loadWeeklyTrainings(){this.ameliaService.loadTrainingsFromLocalStorage();const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.days=[];for(let u=0;u<l.length;u++){const x=l[u],C=I().day(u+1).format("DD/MM/YYYY");this.days.push({name:x,date:C,trainings:this.ameliaService.trainingsByDay[x]||[]})}}getDayInHebrew(l){return this.hebrewDaysMap[l]||l}getMaxTrainingsLength(){return Math.max(...this.days.map(l=>l.trainings.length),0)}getRange(l){return Array.from({length:l},(u,x)=>x)}getDayName(l){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][l%7]}getDateByOffset(l){const u=new Date;return new Date(u.setDate(u.getDate()+l)).toLocaleDateString("en-GB")}dismiss(){this.modalCtrl.dismiss()}}return(M=P).\u0275fac=function(l){return new(l||M)(t.rXU(F.W3),t.rXU(nt.J))},M.\u0275cmp=t.VBU({type:M,selectors:[["app-calendar-popup"]],inputs:{weeklyData:"weeklyData"},decls:13,vars:2,consts:[[1,"modal-title"],["slot","end"],["fill","clear",3,"click"],[1,"modal-content"],[1,"calendar-table-wrapper"],[1,"calendar-table"],[1,"table-header"],["class","day-header",4,"ngFor","ngForOf"],["class","table-row",4,"ngFor","ngForOf"],[1,"day-header"],[1,"dayName"],[1,"dayDate"],[1,"table-row"],["class","table-cell training-cell",4,"ngFor","ngForOf"],[1,"table-cell","training-cell"],[4,"ngIf"],[1,"training-time"],[1,"training-title"],[1,"empty-slot"]],template:function(l,u){1&l&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),t.EFF(3,"\u05d4\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return u.dismiss()}),t.EFF(6,"\u05e1\u05d2\u05d5\u05e8"),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"div",4)(9,"div",5)(10,"div",6),t.DNE(11,D,5,2,"div",7),t.k0s(),t.DNE(12,H,2,1,"div",8),t.k0s()()()),2&l&&(t.R7$(11),t.Y8G("ngForOf",u.days),t.R7$(),t.Y8G("ngForOf",u.getRange(u.getMaxTrainingsLength())))},dependencies:[j.Sq,j.bT,F.Jm,F.QW,F.W9,F.eU,F.BC,F.ai],styles:[".modal-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.modal-content[_ngcontent-%COMP%]{--background: #f8f9fa;padding:16px}.calendar-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;padding:8px}.calendar-table[_ngcontent-%COMP%]{display:grid;gap:1px;min-width:700px;background-color:#ddd}.table-header[_ngcontent-%COMP%]{display:contents}.day-header[_ngcontent-%COMP%]{background:#f60;color:#fff;text-align:center;padding:8px;border-radius:6px 6px 0 0;font-size:14px;font-weight:700}.table-row[_ngcontent-%COMP%]{display:contents}.table-cell[_ngcontent-%COMP%]{background:#fff;text-align:center;padding:8px;font-size:14px;min-height:60px}.training-time[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin:0;color:#333}.training-title[_ngcontent-%COMP%]{font-size:12px;margin:4px 0 0;color:#555}.empty-slot[_ngcontent-%COMP%]{color:#ccc;font-size:14px}@media (max-width: 768px){.calendar-table[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(120px,1fr))}.day-header[_ngcontent-%COMP%], .training-time[_ngcontent-%COMP%]{font-size:12px}}.dayName[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.dayDate[_ngcontent-%COMP%]{font-size:12px;margin-top:-20px;text-decoration:none;font-weight:200}.calendar-popup[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .95)}"]}),P})();var T=v(3656),N=v(1626),S=v(4796),Q=v(3931),rt=v(4341);const gt=["popup"],yt=["trainingContent"],wt=()=>[1,2,3,4],k=(M,P)=>({loading:M,success:P});function U(M,P){1&M&&(t.j41(0,"ion-item",14)(1,"ion-thumbnail",15),t.nrm(2,"ion-skeleton-text",16),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",17),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",18),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",19),t.k0s()()()),2&M&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function mt(M,P){1&M&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",12),t.k0s(),t.DNE(3,U,10,4,"ion-item",13),t.k0s()),2&M&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,wt)))}function _t(M,P){if(1&M&&(t.j41(0,"ion-segment-button",27)(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note"),t.EFF(4),t.k0s()()),2&M){const g=P.$implicit;t.FS9("value",g.date),t.R7$(2),t.JRh(g.day),t.R7$(2),t.JRh(g.formattedDate)}}function Lt(M,P){if(1&M&&(t.j41(0,"ion-select-option",36),t.EFF(1),t.k0s()),2&M){const g=P.$implicit;t.Y8G("value",g),t.R7$(),t.JRh(g)}}function Ct(M,P){if(1&M){const g=t.RV6();t.j41(0,"ion-button",37),t.bIt("click",function(){t.eBV(g);const u=t.XpG(3);return t.Njj(u.resetTypeFilter())}),t.nrm(1,"ion-icon",38),t.k0s()}}function Ft(M,P){if(1&M){const g=t.RV6();t.j41(0,"ion-list",28)(1,"ion-item")(2,"ion-label",29),t.EFF(3,"\u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.j41(4,"ion-select",30),t.mxI("ngModelChange",function(u){t.eBV(g);const x=t.XpG(2);return t.DH7(x.selectedType,u)||(x.selectedType=u),t.Njj(u)}),t.bIt("ionChange",function(){t.eBV(g);const u=t.XpG(2);return t.Njj(u.onTypeChange())}),t.DNE(5,Lt,2,2,"ion-select-option",31),t.k0s(),t.DNE(6,Ct,2,0,"ion-button",32),t.k0s(),t.j41(7,"ion-item")(8,"ion-label",29),t.EFF(9,"\u05d6\u05de\u05d9\u05e0\u05d5\u05ea"),t.k0s(),t.j41(10,"ion-segment",33),t.mxI("ngModelChange",function(u){t.eBV(g);const x=t.XpG(2);return t.DH7(x.availabilityFilter,u)||(x.availabilityFilter=u),t.Njj(u)}),t.bIt("ionChange",function(){t.eBV(g);const u=t.XpG(2);return t.Njj(u.onFilterChange())}),t.j41(11,"ion-segment-button",34)(12,"ion-label"),t.EFF(13,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(14,"ion-segment-button",35)(15,"ion-label"),t.EFF(16,"\u05d6\u05de\u05d9\u05df \u05d1\u05dc\u05d1\u05d3"),t.k0s()()()()()}if(2&M){const g=t.XpG(2);t.R7$(4),t.R50("ngModel",g.selectedType),t.R7$(),t.Y8G("ngForOf",g.availableTypes),t.R7$(),t.Y8G("ngIf",g.selectedType),t.R7$(4),t.R50("ngModel",g.availabilityFilter)}}function Et(M,P){if(1&M){const g=t.RV6();t.j41(0,"div")(1,"ion-segment",20),t.mxI("ngModelChange",function(u){t.eBV(g);const x=t.XpG();return t.DH7(x.selectedDay,u)||(x.selectedDay=u),t.Njj(u)}),t.bIt("ionChange",function(){t.eBV(g);const u=t.XpG();return t.Njj(u.onDayChange())}),t.DNE(2,_t,5,3,"ion-segment-button",21),t.k0s(),t.j41(3,"div",22)(4,"ion-button",23),t.bIt("click",function(){t.eBV(g);const u=t.XpG();return t.Njj(u.toggleFilterDropdown())}),t.nrm(5,"ion-icon",24),t.EFF(6," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s(),t.j41(7,"ion-icon",25),t.bIt("click",function(){t.eBV(g);const u=t.XpG();return t.Njj(u.openCalendarPopup())}),t.k0s()(),t.DNE(8,Ft,17,4,"ion-list",26),t.k0s()}if(2&M){const g=t.XpG();t.R7$(),t.R50("ngModel",g.selectedDay),t.R7$(),t.Y8G("ngForOf",g.days),t.R7$(6),t.Y8G("ngIf",g.showDropdown)}}function ht(M,P){if(1&M&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&M){const g=P.$implicit;t.R7$(),t.SpI(" ",g," ")}}function st(M,P){if(1&M&&(t.j41(0,"div",54)(1,"ul"),t.DNE(2,ht,2,1,"li",55),t.k0s()()),2&M){const g=t.XpG().$implicit;t.R7$(2),t.Y8G("ngForOf",g.current_participants)}}function ut(M,P){1&M&&(t.qex(0),t.j41(1,"button",56),t.nrm(2,"ion-icon",57),t.EFF(3," \u05e8\u05e9\u05d5\u05dd "),t.k0s(),t.bVm())}function R(M,P){1&M&&(t.qex(0),t.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4"),t.bVm())}function E(M,P){1&M&&(t.qex(0),t.nrm(1,"ion-spinner",59),t.bVm())}function G(M,P){1&M&&(t.qex(0),t.nrm(1,"ion-icon",57),t.bVm())}function ft(M,P){if(1&M){const g=t.RV6();t.j41(0,"button",58),t.bIt("click",function(){t.eBV(g);const u=t.XpG(2).$implicit,x=t.XpG();return t.Njj(x.enrollUser(u))}),t.DNE(1,R,2,0,"ng-container",10)(2,E,2,0,"ng-container",10)(3,G,2,0,"ng-container",10),t.k0s()}if(2&M){const g=t.XpG(2).$implicit;t.Y8G("disabled",g.isLoading||g.isSuccess)("ngClass",t.l_i(5,k,g.isLoading,g.isSuccess)),t.R7$(),t.Y8G("ngIf",!g.isLoading&&!g.isSuccess),t.R7$(),t.Y8G("ngIf",g.isLoading),t.R7$(),t.Y8G("ngIf",g.isSuccess)}}function lt(M,P){if(1&M&&t.DNE(0,ft,4,8,"button",53),2&M){const g=t.XpG().$implicit;t.Y8G("ngIf",g.booked<g.total_participants)}}function xt(M,P){1&M&&(t.qex(0),t.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d4\u05de\u05ea\u05e0\u05d4"),t.bVm())}function St(M,P){1&M&&(t.qex(0),t.nrm(1,"ion-spinner",59),t.bVm())}function Pt(M,P){1&M&&(t.qex(0),t.nrm(1,"ion-icon",57),t.bVm())}function Ot(M,P){if(1&M){const g=t.RV6();t.j41(0,"button",58),t.bIt("click",function(){let u;t.eBV(g);const x=t.XpG().$implicit,C=t.XpG();return t.Njj(C.addToStandbyList(null!==(u=null==x?null:x.id)&&void 0!==u?u:0,C.userId,C.userEmail))}),t.DNE(1,xt,2,0,"ng-container",10)(2,St,2,0,"ng-container",10)(3,Pt,2,0,"ng-container",10),t.k0s()}if(2&M){const g=t.XpG(2);t.Y8G("disabled",g.isStandbyLoading||g.isStandbySuccess)("ngClass",t.l_i(5,k,g.isStandbyLoading,g.isStandbySuccess)),t.R7$(),t.Y8G("ngIf",!g.isStandbyLoading&&!g.isStandbySuccess),t.R7$(),t.Y8G("ngIf",g.isStandbyLoading),t.R7$(),t.Y8G("ngIf",g.isStandbySuccess)}}function At(M,P){if(1&M){const g=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"ion-icon",41),t.bIt("click",function(){const u=t.eBV(g).$implicit,x=t.XpG();return t.Njj(x.toggleFavorite(u))}),t.k0s()(),t.j41(5,"div",42)(6,"div",43),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"div",44)(10,"div",45),t.nrm(11,"div",46),t.k0s(),t.j41(12,"div",47)(13,"div",48),t.bIt("mouseenter",function(){const u=t.eBV(g).$implicit,x=t.XpG();return t.Njj(x.showParticipantsPopup(u))})("mouseleave",function(){t.eBV(g);const u=t.XpG();return t.Njj(u.hideParticipantsPopup())}),t.EFF(14),t.nrm(15,"ion-icon",49),t.DNE(16,st,3,1,"div",50),t.k0s()()()(),t.j41(17,"div",51),t.DNE(18,ut,4,0,"ng-container",52)(19,lt,1,1,"ng-template",null,1,t.C5r)(21,Ot,4,8,"button",53),t.k0s()()}if(2&M){const g=P.$implicit,l=t.sdS(20),u=t.XpG();t.R7$(3),t.JRh(g.title.name),t.R7$(),t.AVh("favorite",g.favorite),t.R7$(3),t.SpI(" ",t.i5U(8,12,g.start_time,"HH:mm")," "),t.R7$(4),t.xc7("width",u.calculateProgress(g)+"%"),t.R7$(3),t.Lme(" ",g.booked,"/",g.total_participants," "),t.R7$(2),t.Y8G("ngIf",u.isPopupVisible&&u.activeAppointment===g),t.R7$(2),t.Y8G("ngIf",g.isUserBooked)("ngIfElse",l),t.R7$(3),t.Y8G("ngIf",g.booked==g.total_participants)}}let Rt=(()=>{var M;class P{constructor(l,u,x,C,O,V,J,ot,tt){this.platform=l,this.toastController=u,this.ameliaService=x,this.gestureCtrl=C,this.modalCtrl=O,this.http=V,this.authService=J,this.httpA=ot,this.modalCalendar=tt,this.daysCalendar=[],this.hebrewDaysMap={Sunday:"\u05e8\u05d0\u05e9\u05d5\u05df",Monday:"\u05e9\u05e0\u05d9",Tuesday:"\u05e9\u05dc\u05d9\u05e9\u05d9",Wednesday:"\u05e8\u05d1\u05d9\u05e2\u05d9",Thursday:"\u05d7\u05de\u05d9\u05e9\u05d9",Friday:"\u05e9\u05d9\u05e9\u05d9",Saturday:"\u05e9\u05d1\u05ea"},this.selectedFilterAllFav="all",this.selectedType="",this.availabilityFilter="all",this.showDropdown=!1,this.availableTypes=[],this.availableTimeslots=[],this.bookedAppointments=[],this.combinedList=[],this.days=[],this.showingParticipants=!1,this.isPopupVisible=!1,this.activeAppointment=null,this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.userEmail="",this.isLoading=!0,this.filteredAppointments=[],this.unfilteredList=[],this.showToast=!1,this.toastMessage="",this.toastColor="success",this.errorMessage="",this.isStandbyLoading=!1,this.isStandbySuccess=!1,this.isEnrollLoading=!1,this.isEnrollSuccess=!1,this.customerID="",this.userRole="",this.userId=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.customerID=this.authService.getCustomerID(),this.authService.fetchPackageCustomerId(this.customerID).subscribe({next:bt=>{},error:bt=>{console.error("Error fetching package id",bt)}})}ngOnInit(){var l=this;return(0,o.A)(function*(){l.authService.fetchUserRole().subscribe(u=>{l.authService.storeUserRole(u.roles[0]),l.userRole=u.roles[0]}),"inactive"==l.authService.getUserRole()?(l.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd,  \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc",l.presentToast(l.errorMessage,"danger")):"trial-users"==l.authService.getUserRole()&&(l.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05de\u05e9\u05ea\u05de\u05e9 \u05e0\u05d9\u05e1\u05d9\u05d5\u05df",l.presentToast(l.errorMessage,"danger")),l.ameliaService.fetchTitleTrainings().catch(u=>{console.error("Error fetching initial trainings:",u)}),l.isLoading=!0,l.trainingsByDay=l.ameliaService.getTrainingsTitles(),(!l.trainingsByDay||Object.keys(l.trainingsByDay).every(u=>0===l.trainingsByDay[u].length))&&(yield l.ameliaService.fetchTitleTrainings(),l.trainingsByDay=l.ameliaService.getTrainingsTitles()),Promise.all([l.fetchAvailableTimeslots(),l.fetchBookedAppointments()]).then(()=>{l.combineTimeslotsAndAppointments(),l.unfilteredList=[...l.combinedList],l.selectedDay=l.days.length>0?l.days[0].date:"",l.updateFilteredAppointments();const u=l.getFavoriteTrainings();l.combinedList.forEach(x=>{x.id&&u.includes(x.id)&&(x.favorite=!0)}),l.isLoading=!1}).catch(()=>{l.isLoading=!1}),l.loadWeeklyTrainings(),console.log("days calendar:",l.daysCalendar)})()}presentToast(l,u){var x=this;return(0,o.A)(function*(){yield(yield x.toastController.create({message:l,duration:3e3,color:u,position:"bottom"})).present()})()}ngAfterViewInit(){setTimeout(()=>{this.gestureCtrl.create({el:this.popup.nativeElement,gestureName:"swipe-to-close",onMove:u=>{u.deltaY>100&&this.modalCtrl.dismiss()}}).enable(!0)})}getServicesByRole(){const u=localStorage.getItem("user_role")||"guest";return this.http.get(`https://k-studio.co.il/wp-json/angular/v1/get-services/${u}`)}formatDateTimeInIsraelTime(l,u){const x=new Date(`${l}T${u}`),O=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jerusalem",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(x),[V,J]=O.replace(",","").split(" ");return`${V.replace(/\//g,"-")} ${J}`}fetchAvailableTimeslots(){var l=this;return(0,o.A)(function*(){const u=new Date,x=new Date(u);x.setDate(u.getDate()+20),new Date(u).setDate(u.getDate()+7);const O=V=>`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`;return new Promise((V,J)=>{l.getServicesByRole().subscribe(function(){var ot=(0,o.A)(function*(tt){if(0===tt.length)return J("No service IDs found");const bt=tt.map(Y=>{const et=`${K.c.apiBaseUrl}/slots&serviceId=${Y}&page=booking&startDateTime=${O(u)}&endDateTime=${O(x)}`;return l.platform.is("cordova")?l.httpA.get(et,{},{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}).then(Z=>(console.log("Available Time Slots:",Z),JSON.parse(Z.data))).catch(Z=>{J(`Error fetching timeslots for service ID ${Y}: ${Z}`)}):l.http.get(et,{headers:{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}}).toPromise().then(Z=>(console.log("Available Time Slots:",Z),Z)).catch(Z=>{J(`Error fetching timeslots for service ID ${Y}: ${Z}`)})});Promise.all(bt).then(function(){var Y=(0,o.A)(function*(et){l.availableTimeslots=[];for(const Z of et)if(Z&&Z.data&&Z.data.slots){const dt=Z.data.slots;for(const it of Object.keys(dt)){const It=O(new Date(it));for(const Mt of Object.keys(dt[it])){const Tt=l.formatDateTimeInIsraelTime(It,Mt);let pt={name:yield l.getAppointmentTitleByDateTime(it,Mt)};l.availableTimeslots.push({start_time:Tt,type:"timeslot",title:pt,favorite:!1,current_participants:[],serviceID:12,providerId:169,total_participants:8,booked:0})}}}V()});return function(et){return Y.apply(this,arguments)}}()).catch(Y=>J(Y))});return function(tt){return ot.apply(this,arguments)}}(),ot=>J(ot))})})()}fetchBookedAppointments(){var l=this;const u=new Date,x=new Date;x.setDate(u.getDate()+30);const C=new Date;C.setDate(u.getDate()+7);const O=V=>`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`;return new Promise((V,J)=>{this.platform.ready().then(()=>{var ot;this.getServicesByRole().pipe((0,X.n)(ot=>{const tt=`${K.c.apiBaseUrl}/appointments&dates=${O(u)},${O(x)}`,bt={Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"};return(this.platform.is("cordova")?this.httpA.get(tt,{},bt).then(et=>JSON.parse(et.data)):this.http.get(tt,{headers:bt}).toPromise()).then(et=>({appointmentData:et.data.appointments,serviceIDs:ot}))})).subscribe({next:(ot=(0,o.A)(function*({appointmentData:tt,serviceIDs:bt}){const Y=parseInt(l.authService.getCustomerID()||"0",10),Z=Object.values(tt).flatMap(dt=>dt.appointments).filter(dt=>bt.includes(dt.serviceId)&&new Date(dt.bookingStart)>=u&&dt.bookings.some(it=>"approved"===it.status)).map(function(){var dt=(0,o.A)(function*(it){const It=new Date(it.bookingStart),Mt=it.bookings.some(pt=>pt.customerId===Y&&"approved"===pt.status),Tt=It<=C?yield l.getAppointmentTitleByAppointment(it):"\u05d0\u05d9\u05de\u05d5\u05df \u05e7\u05d1\u05d5\u05e6\u05ea\u05d9";return{id:it.id,start_time:it.bookingStart,end_time:it.bookingEnd,type:"appointment",title:{name:Tt},serviceID:it.serviceId,favorite:!1,current_participants:it.bookings.filter(pt=>"approved"===pt.status).map(pt=>`${pt.customer.firstName} ${pt.customer.lastName}`),total_participants:8,booked:it.bookings.filter(pt=>"approved"===pt.status).length,providerId:it.providerId,isUserBooked:Mt}});return function(it){return dt.apply(this,arguments)}}());l.bookedAppointments=yield Promise.all(Z),V()}),function(bt){return ot.apply(this,arguments)}),error:ot=>J(`Error fetching appointments: ${ot}`)})})})}combineTimeslotsAndAppointments(){this.combinedList=[...this.availableTimeslots,...this.bookedAppointments],this.unfilteredList=[...this.combinedList],this.extractAvailableDays(),this.combinedList.sort((l,u)=>new Date(l.start_time).getTime()-new Date(u.start_time).getTime())}extractAvailableDays(){const l=["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],u=(new Date).toISOString().split("T")[0],x=this.combinedList.filter(C=>!isNaN(new Date(C.start_time).getTime())).map(C=>new Date(C.start_time).toISOString().split("T")[0]);this.days=Array.from(new Set(x)).map(C=>{const O=new Date(C);return{date:C,day:l[O.getDay()],formattedDate:`${O.getDate()}.${O.getMonth()+1}`}}),this.days.sort((C,O)=>C.date===u?-1:O.date===u?1:new Date(C.date).getTime()-new Date(O.date).getTime()),this.selectedDay=this.days.length>0?this.days[0].date:""}extractAvailableTypes(){const l=new Set(this.filteredAppointments.map(u=>u.title.name));this.availableTypes=Array.from(l)}getAppointmentsForSelectedDay(){return this.combinedList.filter(l=>{const u=I(l.start_time);return u.isValid()&&u.format("YYYY-MM-DD")===this.selectedDay})}onDayChange(){this.updateFilteredAppointments()}filterFavAll(l){this.selectedFilterAllFav=l.detail.value,this.updateFilteredAppointments()}toggleAvailabilityFilter(){this.availabilityFilter="all"===this.availabilityFilter?"available":"all",this.updateFilteredAppointments()}updateFilteredAppointments(){let l=[...this.unfilteredList];this.selectedDay&&(l=l.filter(u=>I(u.start_time).format("YYYY-MM-DD")===this.selectedDay)),"available"===this.availabilityFilter&&(l=l.filter(u=>u.booked<u.total_participants)),this.selectedType&&(l=l.filter(u=>u.title.name===this.selectedType)),"favorites"===this.selectedFilterAllFav&&(l=l.filter(u=>u.favorite)),this.filteredAppointments=l,this.extractAvailableTypes()}onFilterChange(){this.updateFilteredAppointments()}onTypeChange(){console.log("Selected type:",this.selectedType),this.updateFilteredAppointments()}resetTypeFilter(){this.selectedType="",this.updateFilteredAppointments()}removePastFavorites(){const l=new Date,x=this.getFavoriteTrainings().filter(C=>{const O=this.combinedList.find(V=>V.id===C);return O&&new Date(O.start_time)>l});this.saveFavoriteTrainings(x)}closeModal(){document.body.classList.remove("no-scroll"),this.modalCtrl.dismiss()}toggleFavorite(l){l.favorite=!l.favorite;const u=this.getFavoriteTrainings();if(l.favorite)u.push(l.id);else{const x=u.indexOf(l.id);x>-1&&u.splice(x,1)}this.saveFavoriteTrainings(u)}getFavoriteTrainings(){const l=localStorage.getItem("favoriteTrainings");return l?JSON.parse(l):[]}saveFavoriteTrainings(l){localStorage.setItem("favoriteTrainings",JSON.stringify(l))}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}calculateProgress(l){if(!l.current_participants||!l.total_participants)return 0;const u=l.current_participants.length/l.total_participants*100;return u>100?100:u}isFull(l){return l.current_participants>=l.total_participants}showParticipantsPopup(l){this.activeAppointment=l,this.isPopupVisible=!0}hideParticipantsPopup(){this.activeAppointment=null,this.isPopupVisible=!1}getAppointmentTitleByAppointment(l){var u=this;return(0,o.A)(function*(){const x=I(l.bookingStart,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"),C=u.getDayFromDate(x.trim()),O=I(l.bookingStart,"YYYY-MM-DD HH:mm:ss").format("HH:mm");if(u.trainingsByDay[C]){const V=u.trainingsByDay[C].find(J=>J.time===O);if(V)return V.title}return"\u05db\u05dc\u05dc\u05d9"})()}getDayFromDate(l){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][I(l,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(l,u){var x=this;return(0,o.A)(function*(){const C=I(l,"YYYY-MM-DD").format("DD/MM/YYYY"),O=x.getDayFromDate(C);if(x.trainingsByDay[O]){const V=x.trainingsByDay[O].find(J=>J.time===u);if(V)return V.title}return"\u05db\u05dc\u05dc\u05d9"})()}addToStandbyList(l,u,x){this.isStandbyLoading=!0,this.isStandbySuccess=!1,this.http.post("https://k-studio.co.il/wp-json/standby-list/v1/add",{appointment_id:l,customer_id:u,email:x}).subscribe(V=>{console.log("User added to standby list",V),this.isStandbyLoading=!1,this.isStandbySuccess=!0,setTimeout(()=>{this.isStandbySuccess=!1},2e3)},V=>{console.error("Error adding user to standby list",V),this.isStandbyLoading=!1,this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})}enrollUser(l){l.isLoading=!0,l.isSuccess=!1;let u=l.serviceID;const C=l.start_time.slice(0,16);let O=l.providerId,V=this.authService.getCustomerID(),J=this.authService.getPackageCustomerId();const bt={type:"appointment",serviceId:u,providerId:O,locationId:null,notifyParticipants:0,bookings:[{customerId:V,status:"approved",duration:3600,persons:1,extras:[],customFields:{},utcOffset:-(new Date).getTimezoneOffset(),packageCustomerService:{packageCustomer:{id:J}}}],bookingStart:C,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};this.platform.ready().then(()=>{const Y=JSON.stringify(bt);this.http.post("https://k-studio.co.il/wp-json/wn/v1/bookTraining",Y,{headers:{"Content-Type":"application/json"}}).subscribe(et=>{var Z,dt;if(null!==(Z=et.data)&&void 0!==Z&&Z.timeSlotUnavailable)this.presentToast(et.message||"The time slot is unavailable","danger");else if(null!==(dt=et.data)&&void 0!==dt&&dt.customerAlreadyBooked)this.presentToast(et.message||"You have already booked this training","success");else if(et.message){l.isSuccess=!0,l.current_participants||(l.current_participants=[]),l.booked+=1;const it=`${this.authService.getUserFullName()}`;l.current_participants.push(it),l.isUserBooked=!0}else l.isSuccess=!0;l.isLoading=!1,setTimeout(()=>{l.isSuccess=!1},2e3)},et=>{console.error("Enrollment failed",JSON.stringify(et)),l.isLoading=!1,et.error&&et.error.includes('"packageCustomerId" is required for booking')?this.presentToast("\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4 \u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4","danger"):this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})})}openCalendarPopup(){var l=this;return(0,o.A)(function*(){var u;const x=yield l.modalCtrl.getTop(),C=yield l.modalCtrl.create({component:$,cssClass:"calendar-popup",presentingElement:x,breakpoints:[0,.85,1],initialBreakpoint:.85});null==x||null===(u=x.querySelector("ion-content"))||void 0===u||u.classList.add("no-gestures"),yield C.present(),C.onDidDismiss().then(()=>{var O;null==x||null===(O=x.querySelector("ion-content"))||void 0===O||O.classList.remove("no-gestures")})})()}loadWeeklyTrainings(){this.ameliaService.loadTrainingsFromLocalStorage();const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.daysCalendar=[];for(let u=0;u<l.length;u++){const x=l[u],C=I().day(u+1).format("DD/MM/YYYY");this.daysCalendar.push({name:x,date:C,trainings:this.ameliaService.trainingsByDay[x]||[]})}}getDayInHebrew(l){return this.hebrewDaysMap[l]||l}getMaxTrainingsLength(){return Math.max(...this.daysCalendar.map(l=>l.trainings.length),0)}getRange(l){return Array.from({length:l},(u,x)=>x)}getDayName(l){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][l%7]}getDateByOffset(l){const u=new Date;return new Date(u.setDate(u.getDate()+l)).toLocaleDateString("en-GB")}}return(M=P).\u0275fac=function(l){return new(l||M)(t.rXU(T.OD),t.rXU(F.K_),t.rXU(nt.J),t.rXU(F.wH),t.rXU(F.W3),t.rXU(N.Qq),t.rXU(S.u),t.rXU(Q.B),t.rXU(F.W3))},M.\u0275cmp=t.VBU({type:M,selectors:[["app-trainings"]],viewQuery:function(l,u){if(1&l&&(t.GBs(gt,5),t.GBs(yt,5)),2&l){let x;t.mGM(x=t.lsd())&&(u.popup=x.first),t.mGM(x=t.lsd())&&(u.trainingContent=x.first)}},inputs:{weeklyData:"weeklyData"},decls:17,vars:4,consts:[["popup","","trainingContent",""],["showEnrollButton",""],[1,"popup-modal-trainings"],[1,"drag-handle"],[1,"content-container"],[1,"sticky-header"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","all",1,"header-tab"],["value","favorites",1,"header-tab"],[4,"ngIf"],["class","card",4,"ngFor","ngForOf"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["scrollable","","mode","md",1,"days-tabs",3,"ngModelChange","ionChange","ngModel"],["class","custom-tabs",3,"value",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],["name","calendar-outline",1,"calendar-icon",3,"click"],["class","filter-dropdown",4,"ngIf"],[1,"custom-tabs",3,"value"],[1,"filter-dropdown"],[2,"text-indent","8px"],["interface","popover","placeholder","\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger","fill","clear",3,"click",4,"ngIf"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","available"],[3,"value"],["color","danger","fill","clear",3,"click"],["name","close-circle"],[1,"card"],[1,"card-header"],["name","heart-outline",3,"click"],[1,"card-content"],[1,"time-date"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress"],[1,"participants-container"],[1,"participants",3,"mouseenter","mouseleave"],["name","people-outline"],["class","participant-popup",4,"ngIf"],[1,"card-footer"],[4,"ngIf","ngIfElse"],["class","action-button",3,"disabled","ngClass","click",4,"ngIf"],[1,"participant-popup"],[4,"ngFor","ngForOf"],["disabled","",1,"action-button","enrolled-button"],["name","checkmark-circle",1,"success-icon"],[1,"action-button",3,"click","disabled","ngClass"],["name","crescent"]],template:function(l,u){if(1&l){const x=t.RV6();t.j41(0,"ion-content",2,0),t.nrm(3,"div",3),t.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"ion-segment",7),t.mxI("ngModelChange",function(O){return t.eBV(x),t.DH7(u.selectedFilterAllFav,O)||(u.selectedFilterAllFav=O),t.Njj(O)}),t.bIt("ionChange",function(O){return t.eBV(x),t.Njj(u.filterFavAll(O))}),t.j41(8,"ion-segment-button",8)(9,"ion-label"),t.EFF(10,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(11,"ion-segment-button",9)(12,"ion-label"),t.EFF(13,"\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd"),t.k0s()()()(),t.DNE(14,mt,4,3,"ion-list",10)(15,Et,9,3,"div",10)(16,At,22,15,"div",11),t.k0s()()()}2&l&&(t.R7$(7),t.R50("ngModel",u.selectedFilterAllFav),t.R7$(7),t.Y8G("ngIf",u.isLoading),t.R7$(),t.Y8G("ngIf",!u.isLoading),t.R7$(),t.Y8G("ngForOf",u.filteredAppointments))},dependencies:[j.YU,j.Sq,j.bT,rt.BC,rt.vS,F.Jm,F.W9,F.iq,F.uz,F.he,F.nf,F.AF,F.JI,F.Gp,F.eP,F.Nm,F.Ip,F.ds,F.w2,F.Zx,F.Je,j.vh],styles:['.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#fff}.scrollable-list[_ngcontent-%COMP%]{height:calc(100vh - 130px);overflow-y:auto}.filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative}.calendar-icon[_ngcontent-%COMP%]{position:absolute;left:16px;font-size:24px;top:50%;transform:translateY(-50%)}.filter-button[_ngcontent-%COMP%]{font-size:16px;padding:8px 16px}.training-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin-bottom:20px;width:100%;box-sizing:border-box}.training-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.favorite-icon[_ngcontent-%COMP%]{font-size:24px;color:#5a5a5a}.training-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;margin-top:-30px;color:#333;font-family:Alef}.training-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:-20px;font-family:Alef}.progress-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}ion-progress-bar[_ngcontent-%COMP%]{--progress-background: #E0E0E0;--background: #9B59B6;border-radius:10px;height:10px;flex-grow:1;margin-left:10px}ion-label[_ngcontent-%COMP%]{font-size:2em;color:#333}ion-button[_ngcontent-%COMP%]{font-weight:700;--border-radius: 25px}.segment-tab[_ngcontent-%COMP%]   .days-tabs[_ngcontent-%COMP%]{overflow-x:hidden;--background: #fff;--border-radius: 10px;margin-top:10px}.filter-segment[_ngcontent-%COMP%]{color:red}ion-segment-button[_ngcontent-%COMP%]{--color-checked: #000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}ion-segment-button[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1em;color:#666;font-weight:700;font-family:Alef}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0;--inner-padding-start: 0;--padding-start: 0;--padding-end: 0;padding:0}.header-tab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.custom-tabs[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 4px 12px #0000000d;position:relative;--background-activated: transparent;--background-focused: transparent;--background: transparent;font-size:1em;--color-checked: #333;--color: #666;padding-bottom:10px;width:90%;margin-left:10px;--indicator-color: transparent}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto auto}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.clear-filter-icon[_ngcontent-%COMP%]{font-size:24px;color:#e74c3c;margin-left:10px;cursor:pointer}.filter-dropdown[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999;--color: #333;--background: #fff;--border-radius: 10px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1)}.popup-modal-trainings[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:10px;height:1px;background-color:transparent;border-radius:2.5px;margin:0 auto 10px}.content-container[_ngcontent-%COMP%]{padding:15px;justify-content:center}ion-content[_ngcontent-%COMP%]{--background: white}ion-tab-bar[_ngcontent-%COMP%]{--background: #fff;--color-selected: #3498db;--color: #666}ion-tab-button[_ngcontent-%COMP%]{--color-selected: #666;--color: #666}.card[_ngcontent-%COMP%]{background-color:#fff;padding:15px;margin:10px 0;border-radius:12px;box-shadow:0 4px 8px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;font-family:Alef}.card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;cursor:pointer}.card-header[_ngcontent-%COMP%]   ion-icon.favorite[_ngcontent-%COMP%]{color:red}.time-date[_ngcontent-%COMP%]{font-size:14px;color:gray}.segment-button[_ngcontent-%COMP%]:not(.segment-button-checked):after{height:0}.progress-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.progress-bar[_ngcontent-%COMP%]{width:80%;background-color:#e0e0e0;border-radius:8px;height:6px}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:6px;border-radius:8px;background-color:#59c7cd}.participants[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.participants[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:4px}.card-footer[_ngcontent-%COMP%]{margin-top:10px}.action-button[_ngcontent-%COMP%]{width:100%;background-color:#454545;color:#fff;border:none;padding:10px;border-radius:8px;text-align:center;font-size:14px;cursor:pointer;transition:background-color .3s ease}.action-button.loading[_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.action-button.success[_ngcontent-%COMP%]{background-color:#4caf50}.success-icon[_ngcontent-%COMP%]{color:#fff;font-size:14px}ion-spinner[_ngcontent-%COMP%]{height:10px;width:10px}.action-button.full[_ngcontent-%COMP%]{background-color:#757575}.enrolled-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;cursor:not-allowed}.participants-container[_ngcontent-%COMP%]{background-color:#c5c5c563;position:relative;width:50px;border-radius:7px}.participant-popup[_ngcontent-%COMP%]{position:absolute;top:-10px;left:60px;background-color:#fff;border:none;padding:12px;box-shadow:0 8px 16px #00000026;width:180px;z-index:10;border-radius:12px;transition:opacity .3s ease,transform .3s ease;opacity:0;transform:translateY(-10px)}.participant-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px}.participant-popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.participant-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.participants[_ngcontent-%COMP%]{cursor:pointer;position:relative;justify-content:center}.participants[_ngcontent-%COMP%]:hover{text-decoration:underline}.participants[_ngcontent-%COMP%]:hover   .participant-popup[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}ion-modal#calendar-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#calendar-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#calendar-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;width:48px;height:48px;padding:4px 0;color:#aaa}ion-modal#calendar-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.modal-content[_ngcontent-%COMP%]{--background: #f8f9fa;padding:16px}.calendar-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;padding:8px}.calendar-table[_ngcontent-%COMP%]{display:grid;gap:1px;min-width:700px;background-color:#ddd}.table-header[_ngcontent-%COMP%]{display:contents}.day-header[_ngcontent-%COMP%]{background:#f60;color:#fff;text-align:center;padding:8px;border-radius:6px 6px 0 0;font-size:14px;font-weight:700}.table-row[_ngcontent-%COMP%]{display:contents}.table-cell[_ngcontent-%COMP%]{background:#fff;text-align:center;padding:8px;font-size:14px;min-height:60px}.training-time[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin:0;color:#333}.training-title[_ngcontent-%COMP%]{font-size:12px;margin:4px 0 0;color:#555}.empty-slot[_ngcontent-%COMP%]{color:#ccc;font-size:14px}@media (max-width: 768px){.calendar-table[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(120px,1fr))}.day-header[_ngcontent-%COMP%], .training-time[_ngcontent-%COMP%]{font-size:12px}}.dayName[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.dayDate[_ngcontent-%COMP%]{font-size:12px;margin-top:-20px;text-decoration:none;font-weight:200}']}),P})()},5312:(Dt,ct,v)=>{v.d(ct,{c:()=>o});const o={production:!0,apiBaseUrl:"https://k-studio.co.il/wp-admin/admin-ajax.php?action=wpamelia_api&call=/api/v1"}},9584:(Dt,ct,v)=>{v.d(ct,{B:()=>H});var o=v(8359);class I extends o.yU{constructor(T,N){super()}schedule(T,N=0){return this}}const X={setInterval($,T,...N){const{delegate:S}=X;return null!=S&&S.setInterval?S.setInterval($,T,...N):setInterval($,T,...N)},clearInterval($){const{delegate:T}=X;return((null==T?void 0:T.clearInterval)||clearInterval)($)},delegate:void 0};var K=v(7908);const F={now:()=>(F.delegate||Date).now(),delegate:void 0};class nt{constructor(T,N=nt.now){this.schedulerActionCtor=T,this.now=N}schedule(T,N=0,S){return new this.schedulerActionCtor(this,T).schedule(S,N)}}nt.now=F.now;const D=new class j extends nt{constructor(T,N=nt.now){super(T,N),this.actions=[],this._active=!1}flush(T){const{actions:N}=this;if(this._active)return void N.push(T);let S;this._active=!0;do{if(S=T.execute(T.state,T.delay))break}while(T=N.shift());if(this._active=!1,S){for(;T=N.shift();)T.unsubscribe();throw S}}}(class t extends I{constructor(T,N){super(T,N),this.scheduler=T,this.work=N,this.pending=!1}schedule(T,N=0){var S;if(this.closed)return this;this.state=T;const Q=this.id,rt=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(rt,Q,N)),this.pending=!0,this.delay=N,this.id=null!==(S=this.id)&&void 0!==S?S:this.requestAsyncId(rt,this.id,N),this}requestAsyncId(T,N,S=0){return X.setInterval(T.flush.bind(T,this),S)}recycleAsyncId(T,N,S=0){if(null!=S&&this.delay===S&&!1===this.pending)return N;null!=N&&X.clearInterval(N)}execute(T,N){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const S=this._execute(T,N);if(S)return S;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(T,N){let Q,S=!1;try{this.work(T)}catch(rt){S=!0,Q=rt||new Error("Scheduled action threw falsy error")}if(S)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:T,scheduler:N}=this,{actions:S}=N;this.work=this.state=this.scheduler=null,this.pending=!1,(0,K.o)(S,this),null!=T&&(this.id=this.recycleAsyncId(N,T,null)),this.delay=null,super.unsubscribe()}}});var q=v(9974),z=v(4360);function H($,T=D){return(0,q.N)((N,S)=>{let Q=null,rt=null,gt=null;const yt=()=>{if(Q){Q.unsubscribe(),Q=null;const k=rt;rt=null,S.next(k)}};function wt(){const k=gt+$,U=T.now();if(U<k)return Q=this.schedule(void 0,k-U),void S.add(Q);yt()}N.subscribe((0,z._)(S,k=>{rt=k,gt=T.now(),Q||(Q=T.schedule(wt,$),S.add(Q))},()=>{yt(),S.complete()},void 0,()=>{rt=Q=null}))})}},5262:(Dt,ct,v)=>{v.d(ct,{Bu:()=>P,Q_:()=>B,_G:()=>Zt,w6:()=>Wt});var o=v(177),I=v(3953),X=v(6860),K=v(1413),t=v(8359),j=(v(4402),v(7673),v(7336)),D=v(8141),at=v(9584),q=v(5964),z=v(6354),H=v(6697),T=v(4085),N=v(4572),S=v(8793),Q=v(1985),gt=v(9172),yt=v(6977);const k=new Set;let U,mt=(()=>{var h;class i{constructor(c,_){this._platform=c,this._nonce=_,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Lt}matchMedia(c){return(this._platform.WEBKIT||this._platform.BLINK)&&function _t(h,i){if(!k.has(h))try{U||(U=document.createElement("style"),i&&U.setAttribute("nonce",i),U.setAttribute("type","text/css"),document.head.appendChild(U)),U.sheet&&(U.sheet.insertRule(`@media ${h} {body{ }}`,0),k.add(h))}catch(s){console.error(s)}}(c,this._nonce),this._matchMedia(c)}}return(h=i).\u0275fac=function(c){return new(c||h)(I.KVO(X.OD),I.KVO(I.BIS,8))},h.\u0275prov=I.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})();function Lt(h){return{matches:"all"===h||""===h,media:h,addListener:()=>{},removeListener:()=>{}}}let Ct=(()=>{var h;class i{constructor(c,_){this._mediaMatcher=c,this._zone=_,this._queries=new Map,this._destroySubject=new K.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(c){return Ft((0,T.FG)(c)).some(y=>this._registerQuery(y).mql.matches)}observe(c){const y=Ft((0,T.FG)(c)).map(L=>this._registerQuery(L).observable);let A=(0,N.z)(y);return A=(0,S.x)(A.pipe((0,H.s)(1)),A.pipe(function rt(h){return(0,q.p)((i,s)=>h<=s)}(1),(0,at.B)(0))),A.pipe((0,z.T)(L=>{const W={matches:!1,breakpoints:{}};return L.forEach(({matches:kt,query:jt})=>{W.matches=W.matches||kt,W.breakpoints[jt]=kt}),W}))}_registerQuery(c){if(this._queries.has(c))return this._queries.get(c);const _=this._mediaMatcher.matchMedia(c),A={observable:new Q.c(L=>{const W=kt=>this._zone.run(()=>L.next(kt));return _.addListener(W),()=>{_.removeListener(W)}}).pipe((0,gt.Z)(_),(0,z.T)(({matches:L})=>({query:c,matches:L})),(0,yt.Q)(this._destroySubject)),mql:_};return this._queries.set(c,A),A}}return(h=i).\u0275fac=function(c){return new(c||h)(I.KVO(mt),I.KVO(I.SKi))},h.\u0275prov=I.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})();function Ft(h){return h.map(i=>i.split(",")).reduce((i,s)=>i.concat(s)).map(i=>i.trim())}class At{constructor(i,s){this._letterKeyStream=new K.B,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new K.B,this.selectedItem=this._selectedItem;const c="number"==typeof(null==s?void 0:s.debounceInterval)?s.debounceInterval:200;null!=s&&s.skipPredicate&&(this._skipPredicateFn=s.skipPredicate),this.setItems(i),this._setupKeyHandler(c)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const s=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(s>=j.A&&s<=j.Z||s>=j.f2&&s<=j.bn)&&this._letterKeyStream.next(String.fromCharCode(s))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe((0,D.M)(s=>this._pressedLetters.push(s)),(0,at.B)(i),(0,q.p)(()=>this._pressedLetters.length>0),(0,z.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(s=>{for(let y=1;y<this._items.length+1;y++){var c,_;const L=this._items[(this._selectedItemIndex+y)%this._items.length];if((null===(c=this._skipPredicateFn)||void 0===c||!c.call(this,L))&&0===(null===(_=L.getLabel)||void 0===_?void 0:_.call(L).toLocaleUpperCase().trim().indexOf(s))){this._selectedItem.next(L);break}}this._pressedLetters=[]})}}class Rt{constructor(i,s){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=t.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=c=>c.disabled,this.tabOut=new K.B,this.change=new K.B,i instanceof I.rOR?this._itemChangesSubscription=i.changes.subscribe(c=>this._itemsChanged(c.toArray())):(0,I.Hps)(i)&&(this._effectRef=(0,I.QZP)(()=>this._itemsChanged(i()),{injector:s}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();const s=this._getItemsArray();return this._typeahead=new At(s,{debounceInterval:"number"==typeof i?i:void 0,skipPredicate:c=>this._skipPredicateFn(c)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(c=>{this.setActiveItem(c)}),this}cancelTypeahead(){var i;return null===(i=this._typeahead)||void 0===i||i.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,s=10){return this._pageUpAndDown={enabled:i,delta:s},this}setActiveItem(i){const s=this._activeItem;this.updateActiveItem(i),this._activeItem!==s&&this.change.next(this._activeItemIndex)}onKeydown(i){var s;const c=i.keyCode,y=["altKey","ctrlKey","metaKey","shiftKey"].every(L=>!i[L]||this._allowedModifierKeys.indexOf(L)>-1);switch(c){case j.wn:return void this.tabOut.next();case j.n6:if(this._vertical&&y){this.setNextItemActive();break}return;case j.i7:if(this._vertical&&y){this.setPreviousItemActive();break}return;case j.LE:if(this._horizontal&&y){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case j.UQ:if(this._horizontal&&y){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case j.yZ:if(this._homeAndEnd&&y){this.setFirstItemActive();break}return;case j.Kp:if(this._homeAndEnd&&y){this.setLastItemActive();break}return;case j.w_:if(this._pageUpAndDown.enabled&&y){const L=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(L>0?L:0,1);break}return;case j.dB:if(this._pageUpAndDown.enabled&&y){const L=this._activeItemIndex+this._pageUpAndDown.delta,W=this._getItemsArray().length;this._setActiveItemByIndex(L<W?L:W-1,-1);break}return;default:var A;return void((y||(0,j.rp)(i,"shiftKey"))&&(null===(A=this._typeahead)||void 0===A||A.handleKey(i)))}null===(s=this._typeahead)||void 0===s||s.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){var s;const c=this._getItemsArray(),_="number"==typeof i?i:c.indexOf(i),y=c[_];this._activeItem=null==y?null:y,this._activeItemIndex=_,null===(s=this._typeahead)||void 0===s||s.setCurrentSelectedItemIndex(_)}destroy(){var i,s,c;this._typeaheadSubscription.unsubscribe(),null===(i=this._itemChangesSubscription)||void 0===i||i.unsubscribe(),null===(s=this._effectRef)||void 0===s||s.destroy(),null===(c=this._typeahead)||void 0===c||c.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const s=this._getItemsArray();for(let c=1;c<=s.length;c++){const _=(this._activeItemIndex+i*c+s.length)%s.length;if(!this._skipPredicateFn(s[_]))return void this.setActiveItem(_)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,s){const c=this._getItemsArray();if(c[i]){for(;this._skipPredicateFn(c[i]);)if(!c[i+=s])return;this.setActiveItem(i)}}_getItemsArray(){return(0,I.Hps)(this._items)?this._items():this._items instanceof I.rOR?this._items.toArray():this._items}_itemsChanged(i){var s;if(null===(s=this._typeahead)||void 0===s||s.setItems(i),this._activeItem){const _=i.indexOf(this._activeItem);var c;_>-1&&_!==this._activeItemIndex&&(this._activeItemIndex=_,null===(c=this._typeahead)||void 0===c||c.setCurrentSelectedItemIndex(_))}}}class P extends Rt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}function Zt(h){return 0===h.buttons||0===h.detail}function Wt(h){const i=h.touches&&h.touches[0]||h.changedTouches&&h.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}var r=function(h){return h[h.NONE=0]="NONE",h[h.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",h[h.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",h}(r||{});const d="cdk-high-contrast-black-on-white",f="cdk-high-contrast-white-on-black",w="cdk-high-contrast-active";let B=(()=>{var h;class i{constructor(c,_){this._platform=c,this._document=_,this._breakpointSubscription=(0,I.WQX)(Ct).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return r.NONE;const c=this._document.createElement("div");c.style.backgroundColor="rgb(1,2,3)",c.style.position="absolute",this._document.body.appendChild(c);const _=this._document.defaultView||window,y=_&&_.getComputedStyle?_.getComputedStyle(c):null,A=(y&&y.backgroundColor||"").replace(/ /g,"");switch(c.remove(),A){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return r.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return r.BLACK_ON_WHITE}return r.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const c=this._document.body.classList;c.remove(w,d,f),this._hasCheckedHighContrastMode=!0;const _=this.getHighContrastMode();_===r.BLACK_ON_WHITE?c.add(w,d):_===r.WHITE_ON_BLACK&&c.add(w,f)}}}return(h=i).\u0275fac=function(c){return new(c||h)(I.KVO(X.OD),I.KVO(o.qQ))},h.\u0275prov=I.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})()},4085:(Dt,ct,v)=>{v.d(ct,{FG:()=>t,OE:()=>X,he:()=>I,i8:()=>nt});var o=v(3953);function I(D){return null!=D&&"false"!=`${D}`}function X(D,at=0){return function K(D){return!isNaN(parseFloat(D))&&!isNaN(Number(D))}(D)?Number(D):2===arguments.length?at:0}function t(D){return Array.isArray(D)?D:[D]}function nt(D){return D instanceof o.aKT?D.nativeElement:D}},7336:(Dt,ct,v)=>{v.d(ct,{A:()=>xt,A$:()=>j,FX:()=>F,Fm:()=>t,Ge:()=>Tt,Kp:()=>T,LE:()=>rt,UQ:()=>S,W3:()=>nt,Z:()=>Mt,bn:()=>R,dB:()=>$,eg:()=>ce,f2:()=>mt,i7:()=>Q,n6:()=>gt,rp:()=>le,t6:()=>z,w_:()=>H,wn:()=>X,yZ:()=>N});const X=9,t=13,F=16,nt=17,j=18,z=32,H=33,$=34,T=35,N=36,S=37,Q=38,rt=39,gt=40,mt=48,R=57,xt=65,Mt=90,Tt=91,ce=224;function le(Kt,...se){return se.length?se.some(de=>Kt[de]):Kt.altKey||Kt.shiftKey||Kt.ctrlKey||Kt.metaKey}},6860:(Dt,ct,v)=>{v.d(ct,{BQ:()=>q,Fb:()=>yt,OD:()=>K,v8:()=>wt,vc:()=>gt});var o=v(3953),I=v(177);let X;try{X=typeof Intl<"u"&&Intl.v8BreakIterator}catch{X=!1}let D,K=(()=>{var k;class U{constructor(_t){this._platformId=_t,this.isBrowser=this._platformId?(0,I.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!X)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(k=U).\u0275fac=function(_t){return new(_t||k)(o.KVO(o.Agw))},k.\u0275prov=o.jDH({token:k,factory:k.\u0275fac,providedIn:"root"}),U})();function q(k){return function at(){if(null==D&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>D=!0}))}finally{D=D||!1}return D}()?k:!!k.capture}function gt(){let k=typeof document<"u"&&document?document.activeElement:null;for(;k&&k.shadowRoot;){const U=k.shadowRoot.activeElement;if(U===k)break;k=U}return k}function yt(k){return k.composedPath?k.composedPath()[0]:k.target}function wt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},8834:(Dt,ct,v)=>{v.d(ct,{Hl:()=>ht});var o=v(3953),I=v(8820);let ht=(()=>{var st;class ut{}return(st=ut).\u0275fac=function(E){return new(E||st)},st.\u0275mod=o.$C({type:st}),st.\u0275inj=o.G2t({imports:[I.yE,I.pZ,I.yE]}),ut})()},8820:(Dt,ct,v)=>{v.d(ct,{$E:()=>Ut,yE:()=>Et,O5:()=>$t,pZ:()=>Vt,ug:()=>Nt});var o=v(3953),I=v(5262),X=v(177);let at=(()=>{var a;class n{}return(a=n).\u0275fac=function(d){return new(d||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({}),n})();var z=v(6860),H=v(4085);const Ft=new o.nKC("mat-sanity-checks",{providedIn:"root",factory:function Ct(){return!0}});let Et=(()=>{var a;class n{constructor(d,f,w){this._sanityChecks=f,this._document=w,this._hasDoneGlobalChecks=!1,d._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(d){return!(0,z.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[d])}}return(a=n).\u0275fac=function(d){return new(d||a)(o.KVO(I.Q_),o.KVO(Ft,8),o.KVO(X.qQ))},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[at,at]}),n})();var Y=function(a){return a[a.FADING_IN=0]="FADING_IN",a[a.VISIBLE=1]="VISIBLE",a[a.FADING_OUT=2]="FADING_OUT",a[a.HIDDEN=3]="HIDDEN",a}(Y||{});class et{constructor(n,r,d,f=!1){this._renderer=n,this.element=r,this.config=d,this._animationForciblyDisabledThroughCss=f,this.state=Y.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Z=(0,z.BQ)({passive:!0,capture:!0});class dt{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const r=(0,z.Fb)(n);var d;r&&(null===(d=this._events.get(n.type))||void 0===d||d.forEach((f,w)=>{(w===r||w.contains(r))&&f.forEach(B=>B.handleEvent(n))}))}}addHandler(n,r,d,f){const w=this._events.get(r);if(w){const B=w.get(d);B?B.add(f):w.set(d,new Set([f]))}else this._events.set(r,new Map([[d,new Set([f])]])),n.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,Z)})}removeHandler(n,r,d){const f=this._events.get(n);if(!f)return;const w=f.get(r);w&&(w.delete(d),0===w.size&&f.delete(r),0===f.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,Z)))}}const it={enterDuration:225,exitDuration:150},Mt=(0,z.BQ)({passive:!0,capture:!0}),Tt=["mousedown","touchstart"],pt=["mouseup","mouseleave","touchend","touchcancel"];class Nt{constructor(n,r,d,f){this._target=n,this._ngZone=r,this._platform=f,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,f.isBrowser&&(this._containerElement=(0,H.i8)(d))}fadeInRipple(n,r,d={}){const f=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),w={...it,...d.animation};d.centered&&(n=f.left+f.width/2,r=f.top+f.height/2);const B=d.radius||function Bt(a,n,r){const d=Math.max(Math.abs(a-r.left),Math.abs(a-r.right)),f=Math.max(Math.abs(n-r.top),Math.abs(n-r.bottom));return Math.sqrt(d*d+f*f)}(n,r,f),vt=n-f.left,h=r-f.top,i=w.enterDuration,s=document.createElement("div");s.classList.add("mat-ripple-element"),s.style.left=vt-B+"px",s.style.top=h-B+"px",s.style.height=2*B+"px",s.style.width=2*B+"px",null!=d.color&&(s.style.backgroundColor=d.color),s.style.transitionDuration=`${i}ms`,this._containerElement.appendChild(s);const c=window.getComputedStyle(s),y=c.transitionDuration,A="none"===c.transitionProperty||"0s"===y||"0s, 0s"===y||0===f.width&&0===f.height,L=new et(this,s,d,A);s.style.transform="scale3d(1, 1, 1)",L.state=Y.FADING_IN,d.persistent||(this._mostRecentTransientRipple=L);let W=null;return!A&&(i||w.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const kt=()=>{W&&(W.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(L)},jt=()=>this._destroyRipple(L),re=setTimeout(jt,i+100);s.addEventListener("transitionend",kt),s.addEventListener("transitioncancel",jt),W={onTransitionEnd:kt,onTransitionCancel:jt,fallbackTimer:re}}),this._activeRipples.set(L,W),(A||!i)&&this._finishRippleTransition(L),L}fadeOutRipple(n){if(n.state===Y.FADING_OUT||n.state===Y.HIDDEN)return;const r=n.element,d={...it,...n.config.animation};r.style.transitionDuration=`${d.exitDuration}ms`,r.style.opacity="0",n.state=Y.FADING_OUT,(n._animationForciblyDisabledThroughCss||!d.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const r=(0,H.i8)(n);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,Tt.forEach(d=>{Nt._eventManager.addHandler(this._ngZone,d,r,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{pt.forEach(r=>{this._triggerElement.addEventListener(r,this,Mt)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===Y.FADING_IN?this._startFadeOutTransition(n):n.state===Y.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){const r=n===this._mostRecentTransientRipple,{persistent:d}=n.config;n.state=Y.VISIBLE,!d&&(!r||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){var r;const d=null!==(r=this._activeRipples.get(n))&&void 0!==r?r:null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=Y.HIDDEN,null!==d&&(n.element.removeEventListener("transitionend",d.onTransitionEnd),n.element.removeEventListener("transitioncancel",d.onTransitionCancel),null!==d.fallbackTimer&&clearTimeout(d.fallbackTimer)),n.element.remove()}_onMousedown(n){const r=(0,I._G)(n),d=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!d&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!(0,I.w6)(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const r=n.changedTouches;if(r)for(let d=0;d<r.length;d++)this.fadeInRipple(r[d].clientX,r[d].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(n.state===Y.VISIBLE||n.config.terminateOnPointerUp&&n.state===Y.FADING_IN)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(Tt.forEach(r=>Nt._eventManager.removeHandler(r,n,this)),this._pointerUpEventsRegistered&&(pt.forEach(r=>n.removeEventListener(r,this,Mt)),this._pointerUpEventsRegistered=!1))}}Nt._eventManager=new dt;const Ut=new o.nKC("mat-ripple-global-options");let Vt=(()=>{var a;class n{}return(a=n).\u0275fac=function(d){return new(d||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[Et,Et]}),n})(),$t=(()=>{var a;class n{}return(a=n).\u0275fac=function(d){return new(d||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[Et]}),n})()},2054:(Dt,ct,v)=>{v.d(ct,{Fg:()=>qt});var o=v(3953),K=(v(4085),v(6860),v(8820));v(8359),v(6365),v(8750),v(983),v(3794),v(6648),v(1413),v(1985),v(6354),v(5964),v(9584);let Q=(()=>{var m;class p{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return(m=p).\u0275fac=function(e){return new(e||m)},m.\u0275prov=o.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),p})(),yt=(()=>{var m;class p{}return(m=p).\u0275fac=function(e){return new(e||m)},m.\u0275mod=o.$C({type:m}),m.\u0275inj=o.G2t({providers:[Q]}),p})();var wt=v(177);let U=(()=>{var m;class p{}return(m=p).\u0275fac=function(e){return new(e||m)},m.\u0275mod=o.$C({type:m}),m.\u0275inj=o.G2t({imports:[K.yE,K.yE]}),p})();v(5262),v(4402),v(7673),v(7336),v(4341),v(6977);let qt=(()=>{var m;class p{}return(m=p).\u0275fac=function(e){return new(e||m)},m.\u0275mod=o.$C({type:m}),m.\u0275inj=o.G2t({imports:[yt,wt.MD,K.yE,K.pZ,K.O5,U]}),p})()},5911:(Dt,ct,v)=>{v.d(ct,{s5:()=>j});var o=v(3953),I=v(8820);let j=(()=>{var D;class at{}return(D=at).\u0275fac=function(z){return new(z||D)},D.\u0275mod=o.$C({type:D}),D.\u0275inj=o.G2t({imports:[I.yE,I.yE]}),at})()}}]);