"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[379],{6003:(j,D,g)=>{g.d(D,{_:()=>_});var l=g(467),f=g(4412),p=g(1626),n=g(4843),s=g(3953),h=g(4796);let _=(()=>{var C;class b{constructor(u,M){this.http=u,this.authService=M,this.badgeCount=new f.t(0),this.badgeCount$=this.badgeCount.asObservable()}fetchAndSetBadgeCount(){var u=this;return(0,l.A)(function*(){let P=new p.Nl;const y=u.authService.getUserRole(),x=u.authService.getUserEmail();"team"===y&&x&&(P=P.set("trainer_email",x));try{const E=(yield(0,n._)(u.http.get("https://k-studio.co.il/wp-json/custom-api/v1/past-trainings",{params:P}))).filter(T=>!T.hasBeenSubmitted).length;u.badgeCount.next(E)}catch(v){console.error("Error fetching data for badge count",v),u.badgeCount.next(0)}})()}updateCountFromLoadedData(u){const M=u.filter(P=>!P.hasBeenSubmitted).length;this.badgeCount.next(M)}}return(C=b).\u0275fac=function(u){return new(u||C)(s.KVO(p.Qq),s.KVO(h.u))},C.\u0275prov=s.jDH({token:C,factory:C.\u0275fac,providedIn:"root"}),b})()},379:(j,D,g)=>{g.d(D,{t:()=>on});var l=g(467),f=g(1626),p=g(4843),n=g(3953),s=g(791),h=g(4796),_=g(177);function C(i,c){if(1&i&&(n.j41(0,"div",15)(1,"h4"),n.EFF(2),n.k0s(),n.j41(3,"p"),n.EFF(4),n.nI1(5,"date"),n.nI1(6,"date"),n.k0s()()),2&i){const o=n.XpG();n.R7$(2),n.JRh(o.training.name),n.R7$(2),n.E5c("",n.i5U(5,4,o.training.start_time,"dd/MM/yyyy")," | ",n.i5U(6,7,o.training.start_time,"HH:mm")," | ",o.training.trainer_name," ")}}function b(i,c){1&i&&(n.j41(0,"div",16),n.nrm(1,"ion-spinner",17),n.j41(2,"p"),n.EFF(3,"\u05d8\u05d5\u05e2\u05df \u05de\u05ea\u05d0\u05de\u05e0\u05d9\u05dd..."),n.k0s()())}function k(i,c){1&i&&(n.j41(0,"div",18),n.nrm(1,"ion-icon",19),n.j41(2,"h3"),n.EFF(3,"\u05d0\u05d9\u05df \u05de\u05ea\u05d0\u05de\u05e0\u05d9\u05dd \u05e8\u05e9\u05d5\u05de\u05d9\u05dd"),n.k0s(),n.j41(4,"p"),n.EFF(5,"\u05dc\u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4 \u05dc\u05d0 \u05e8\u05e9\u05d5\u05de\u05d9\u05dd \u05de\u05ea\u05d0\u05de\u05e0\u05d9\u05dd."),n.k0s()())}function u(i,c){if(1&i){const o=n.RV6();n.j41(0,"ion-card",22)(1,"ion-card-header")(2,"div",23)(3,"div",24)(4,"h3"),n.EFF(5),n.k0s(),n.j41(6,"p",25),n.nrm(7,"ion-icon",26),n.EFF(8),n.k0s()(),n.j41(9,"div",27)(10,"ion-button",28),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.markStatus(e,"attended"))}),n.nrm(11,"ion-icon",29),n.k0s(),n.j41(12,"ion-button",28),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.markStatus(e,"absent"))}),n.nrm(13,"ion-icon",30),n.k0s()()()()()}if(2&i){const o=c.$implicit,t=n.XpG(2);n.R7$(5),n.JRh(o.name),n.R7$(),n.BMQ("color",t.getStatusColor(o.status)),n.R7$(),n.Y8G("name",t.getStatusIcon(o.status)),n.R7$(),n.SpI(" ",t.getStatusText(o.status)," "),n.R7$(2),n.Y8G("color","attended"===o.status?"success":"medium"),n.R7$(2),n.Y8G("color","absent"===o.status?"danger":"medium")}}function M(i,c){if(1&i&&(n.j41(0,"div",20),n.DNE(1,u,14,6,"ion-card",21),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.attendees)("ngForTrackBy",o.trackById)}}function P(i,c){1&i&&n.nrm(0,"ion-spinner",17)}function y(i,c){1&i&&(n.j41(0,"span"),n.EFF(1,"\u05e9\u05de\u05d9\u05e8\u05ea \u05e0\u05d5\u05db\u05d7\u05d5\u05ea"),n.k0s())}function x(i,c){if(1&i){const o=n.RV6();n.j41(0,"div",31)(1,"ion-button",32),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.saveAttendance())}),n.DNE(2,P,1,0,"ion-spinner",33)(3,y,2,0,"span",34),n.k0s()()}if(2&i){const o=n.XpG();n.AVh("visible",o.hasChanges),n.R7$(),n.Y8G("disabled",!o.hasChanges||o.isSaving),n.R7$(),n.Y8G("ngIf",o.isSaving),n.R7$(),n.Y8G("ngIf",!o.isSaving)}}let v=(()=>{var i;class c{constructor(t,e,a,r){this.modalCtrl=t,this.http=e,this.authService=a,this.toastCtrl=r,this.isLoading=!0,this.isSaving=!1,this.hasChanges=!1,this.attendees=[],this.initialStatuses=new Map,this.presentCount=0,this.absentCount=0,this.notMarkedCount=0}ngOnInit(){this.loadAttendees()}loadAttendees(){var t=this;return(0,l.A)(function*(){t.isLoading=!0;const e=`https://k-studio.co.il/wp-json/custom-api/v1/training-attendees/${t.training.id}`;try{const a=yield(0,p._)(t.http.get(e));t.attendees=a,t.attendees.forEach(r=>t.initialStatuses.set(r.id,r.status)),t.updateSummary()}catch(a){console.error("Error loading attendees",a),t.presentToast("Failed to load attendees.","danger")}finally{t.isLoading=!1}})()}markStatus(t,e){t.status=t.status===e?"not_marked":e,this.checkForChanges(),this.updateSummary()}checkForChanges(){this.hasChanges=!1;for(const t of this.attendees)if(t.status!==this.initialStatuses.get(t.id))return void(this.hasChanges=!0)}updateSummary(){this.presentCount=this.attendees.filter(t=>"attended"===t.status).length,this.absentCount=this.attendees.filter(t=>"absent"===t.status).length,this.notMarkedCount=this.attendees.filter(t=>"not_marked"===t.status).length}saveAttendance(){var t=this;return(0,l.A)(function*(){t.isSaving=!0;const a={appointmentId:t.training.id,trainerEmail:t.authService.getUserEmail(),attendance:t.attendees.filter(r=>"not_marked"!==r.status)};try{yield(0,p._)(t.http.post("https://k-studio.co.il/wp-json/custom-api/v1/save-attendance",a)),t.presentToast("\u05d4\u05e0\u05d5\u05db\u05d7\u05d5\u05ea \u05e0\u05e9\u05de\u05e8\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!","success"),t.modalCtrl.dismiss({saved:!0})}catch(r){console.error("Error saving attendance",r),t.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05de\u05d9\u05e8\u05ea \u05d4\u05e0\u05d5\u05db\u05d7\u05d5\u05ea.","danger")}finally{t.isSaving=!1}})()}getStatusText(t){switch(t){case"attended":return"\u05d4\u05d2\u05d9\u05e2\u05d4";case"absent":return"\u05dc\u05d0 \u05d4\u05d2\u05d9\u05e2\u05d4";default:return"\u05dc\u05d0 \u05e1\u05d5\u05de\u05df"}}getStatusColor(t){switch(t){case"attended":return"success";case"absent":return"danger";default:return"medium"}}getStatusIcon(t){switch(t){case"attended":return"checkmark-circle-outline";case"absent":return"close-circle-outline";default:return"ellipse-outline"}}trackById(t,e){return e.id}presentToast(t,e){var a=this;return(0,l.A)(function*(){(yield a.toastCtrl.create({message:t,duration:3e3,color:e,position:"bottom"})).present()})()}closeModal(){this.modalCtrl.dismiss({saved:!1})}}return(i=c).\u0275fac=function(t){return new(t||i)(n.rXU(s.W3),n.rXU(f.Qq),n.rXU(h.u),n.rXU(s.K_))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-attendance-marker"]],inputs:{training:"training"},decls:31,vars:8,consts:[[1,"popup-modal"],[1,"drag-handle"],[1,"page-content-wrapper"],[1,"sticky-header"],[1,"header-title"],["class","training-info",4,"ngIf"],[1,"attendance-summary"],[1,"summary-item"],["name","checkmark-circle-outline","color","success"],["name","close-circle-outline","color","danger"],["name","help-circle-outline","color","medium"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","customers-list",4,"ngIf"],["class","save-button-container",3,"visible",4,"ngIf"],[1,"training-info"],[1,"loading-container"],["name","crescent"],[1,"empty-state"],["name","people-outline"],[1,"customers-list"],["class","customer-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"customer-card"],[1,"customer-info"],[1,"customer-details"],[1,"status-text"],[3,"name"],[1,"status-buttons"],["fill","solid",3,"click","color"],["slot","icon-only","name","checkmark-outline"],["slot","icon-only","name","close-outline"],[1,"save-button-container"],["expand","block",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),n.EFF(6,"\u05e1\u05d9\u05de\u05d5\u05df \u05e0\u05d5\u05db\u05d7\u05d5\u05ea"),n.k0s()(),n.DNE(7,C,7,10,"div",5),n.j41(8,"div",6)(9,"div",7),n.nrm(10,"ion-icon",8),n.j41(11,"span"),n.EFF(12,"\u05e0\u05d5\u05db\u05d7\u05d9\u05dd"),n.nrm(13,"br"),n.EFF(14),n.k0s()(),n.j41(15,"div",7),n.nrm(16,"ion-icon",9),n.j41(17,"span"),n.EFF(18,"\u05e0\u05e2\u05d3\u05e8\u05d5"),n.nrm(19,"br"),n.EFF(20),n.k0s()(),n.j41(21,"div",7),n.nrm(22,"ion-icon",10),n.j41(23,"span"),n.EFF(24,"\u05dc\u05d0 \u05e1\u05d5\u05de\u05df"),n.nrm(25,"br"),n.EFF(26),n.k0s()()()(),n.DNE(27,b,4,0,"div",11)(28,k,6,0,"div",12)(29,M,2,2,"div",13)(30,x,4,5,"div",14),n.k0s()()),2&t&&(n.R7$(7),n.Y8G("ngIf",e.training),n.R7$(7),n.JRh(e.presentCount),n.R7$(6),n.JRh(e.absentCount),n.R7$(6),n.JRh(e.notMarkedCount),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.Y8G("ngIf",!e.isLoading&&0===e.attendees.length),n.R7$(),n.Y8G("ngIf",!e.isLoading&&e.attendees.length>0),n.R7$(),n.Y8G("ngIf",!e.isLoading&&e.attendees.length>0))},dependencies:[_.Sq,_.bT,s.Jm,s.b_,s.ME,s.W9,s.iq,s.w2,_.vh],styles:["[_nghost-%COMP%]   ion-content.popup-modal[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: #ffffff;border-radius:24px 24px 0 0;padding:0;box-shadow:0 -8px 32px #0000001f;overflow:hidden}.drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:linear-gradient(to bottom,#fff,#fafafa)}.sticky-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #f1f5f9;padding:0 0 20px;position:sticky;top:0;z-index:10}.sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px 0;justify-content:center}.sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.375rem;margin:0;color:#1e293b;letter-spacing:-.025em}.sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]{padding:16px 24px 0}.sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-weight:600;font-size:1.125rem;color:#1e293b;margin:0 0 8px}.sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#64748b;font-size:.875rem;margin:0 0 16px}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;padding:16px 24px 0}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px;background:#f8fafc;border-radius:12px;border:1px solid #f1f5f9;min-width:80px}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[color=success][_ngcontent-%COMP%]{color:#10b981}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[color=danger][_ngcontent-%COMP%]{color:#ef4444}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[color=medium][_ngcontent-%COMP%]{color:#64748b}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:.8125rem;color:#475569;text-align:center;line-height:1.2}.loading-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #667eea;transform:scale(1.2);margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.customers-list[_ngcontent-%COMP%]{flex:1;padding:24px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #f1f5f9;border-radius:16px;margin:0 0 16px;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a;border-color:#e2e8f0}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:20px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]{text-align:right;flex:1}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0 0 6px;letter-spacing:-.025em}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;font-size:.875rem;font-weight:500;padding:4px 12px;border-radius:20px;width:-moz-fit-content;width:fit-content;margin:0 0 0 auto}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[color=success][_ngcontent-%COMP%]{color:#059669;background:#10b9811a}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[color=danger][_ngcontent-%COMP%]{color:#dc2626;background:#ef44441a}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[color=medium][_ngcontent-%COMP%]{color:#64748b;background:#64748b1a}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-start: 12px;--padding-end: 12px;--min-width: 48px;--min-height: 48px;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8fafc}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=success][_ngcontent-%COMP%]{--background: #10b981;--background-activated: #059669;--color: white;--box-shadow: 0 2px 8px rgba(16, 185, 129, .25)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=success][_ngcontent-%COMP%]:hover{--box-shadow: 0 4px 12px rgba(16, 185, 129, .35)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]{--background: #ef4444;--background-activated: #dc2626;--color: white;--box-shadow: 0 2px 8px rgba(239, 68, 68, .25)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]:hover{--box-shadow: 0 4px 12px rgba(239, 68, 68, .35)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=medium][_ngcontent-%COMP%]{--background: #f8fafc;--background-activated: #f1f5f9;--color: #64748b;border-color:#e2e8f0}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=medium][_ngcontent-%COMP%]:hover{--background: #f1f5f9;border-color:#cbd5e1}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:#cbd5e1;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#475569;font-size:1.25rem;font-weight:600;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0}.save-button-container[_ngcontent-%COMP%]{padding:24px;background:#fff;border-top:1px solid #f1f5f9;position:sticky;bottom:0;transform:translateY(100%);transition:transform .4s cubic-bezier(.4,0,.2,1)}.save-button-container.visible[_ngcontent-%COMP%]{transform:translateY(0)}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 16px;--background: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);--background-activated: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);--box-shadow: 0 4px 20px rgba(102, 126, 234, .35);--color: white;font-weight:600;font-size:1rem;letter-spacing:.025em;height:56px;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);--box-shadow: 0 8px 25px rgba(102, 126, 234, .45)}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:disabled{opacity:.6;transform:none}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: white;margin-right:8px}"]}),c})();function E(i,c){if(1&i&&(n.j41(0,"div",17)(1,"div",18)(2,"div",19)(3,"h4"),n.EFF(4),n.k0s(),n.j41(5,"span",20),n.EFF(6),n.nI1(7,"date"),n.k0s(),n.j41(8,"span",21),n.EFF(9),n.nI1(10,"date"),n.k0s()()()()),2&i){const o=n.XpG();n.R7$(4),n.JRh(o.training.training_name),n.R7$(2),n.JRh(n.i5U(7,3,o.training.start_time,"dd/MM/yyyy")),n.R7$(3),n.JRh(n.i5U(10,6,o.training.start_time,"HH:mm"))}}function T(i,c){if(1&i){const o=n.RV6();n.j41(0,"div",22)(1,"div",23)(2,"div",24),n.nrm(3,"ion-icon",25),n.j41(4,"span"),n.EFF(5,"\u05de\u05d0\u05de\u05df \u05e0\u05d5\u05db\u05d7\u05d9"),n.k0s()(),n.j41(6,"div",26)(7,"div",27),n.EFF(8),n.k0s(),n.j41(9,"div",28),n.EFF(10),n.k0s()(),n.j41(11,"button",29),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.removeAssignment())}),n.nrm(12,"ion-icon",30),n.k0s()()()}if(2&i){const o=n.XpG();n.R7$(8),n.JRh(o.currentAssignedTrainer.name),n.R7$(2),n.JRh(o.currentAssignedTrainer.email),n.R7$(),n.Y8G("disabled",o.isSaving)}}function R(i,c){1&i&&(n.j41(0,"div",31)(1,"div",32),n.nrm(2,"ion-spinner",33),n.j41(3,"p"),n.EFF(4,"\u05d8\u05d5\u05e2\u05df \u05de\u05d0\u05de\u05e0\u05d9\u05dd..."),n.k0s()()())}function I(i,c){1&i&&(n.j41(0,"div",34)(1,"div",35),n.nrm(2,"ion-icon",36),n.j41(3,"h3"),n.EFF(4,"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05de\u05d0\u05de\u05e0\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd"),n.k0s(),n.j41(5,"p"),n.EFF(6,"\u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1 \u05de\u05d0\u05d5\u05d7\u05e8 \u05d9\u05d5\u05ea\u05e8"),n.k0s()()())}function $(i,c){1&i&&(n.j41(0,"span",49),n.EFF(1,"\u05de\u05d0\u05de\u05df \u05e0\u05d5\u05db\u05d7\u05d9"),n.k0s())}function S(i,c){if(1&i){const o=n.RV6();n.j41(0,"div",42),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.selectTrainer(e.email))}),n.j41(1,"div",43)(2,"div",44),n.EFF(3),n.k0s()(),n.j41(4,"div",45)(5,"h5"),n.EFF(6),n.k0s(),n.j41(7,"p"),n.EFF(8),n.k0s(),n.DNE(9,$,2,0,"span",46),n.k0s(),n.j41(10,"div",47),n.nrm(11,"ion-icon",48),n.k0s()()}if(2&i){const o=c.$implicit,t=n.XpG(2);n.AVh("selected",t.isSelected(o.email))("currently-assigned",t.isCurrentlyAssigned(o.email)),n.R7$(3),n.SpI(" ",o.name.charAt(0).toUpperCase()," "),n.R7$(3),n.JRh(o.name),n.R7$(2),n.JRh(o.email),n.R7$(),n.Y8G("ngIf",t.isCurrentlyAssigned(o.email)),n.R7$(),n.AVh("active",t.isSelected(o.email))}}function G(i,c){if(1&i&&(n.j41(0,"div",37)(1,"div",38)(2,"h4"),n.EFF(3),n.k0s(),n.j41(4,"span",39),n.EFF(5),n.k0s()(),n.j41(6,"div",40),n.DNE(7,S,12,10,"div",41),n.k0s()()),2&i){const o=n.XpG();n.R7$(3),n.JRh(o.currentAssignedTrainer?"\u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df \u05d7\u05d3\u05e9":"\u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df"),n.R7$(2),n.SpI("",o.teamMembers.length," \u05de\u05d0\u05de\u05e0\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd"),n.R7$(2),n.Y8G("ngForOf",o.teamMembers)("ngForTrackBy",o.trackByEmail)}}function z(i,c){1&i&&n.nrm(0,"ion-spinner",33)}function Y(i,c){if(1&i&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.JRh(o.saveButtonText)}}let B=(()=>{var i;class c{constructor(t,e,a){this.modalCtrl=t,this.http=e,this.toastCtrl=a,this.teamMembers=[],this.selectedTrainerEmail="",this.isLoading=!0,this.isSaving=!1,this.currentAssignedTrainer=null}ngOnInit(){console.log("Training data received:",this.training),this.loadTeamMembers(),this.initializeSelectedTrainer()}initializeSelectedTrainer(){var t,e;console.log("Current training:",this.training),console.log("Assigned trainer:",null===(t=this.training)||void 0===t?void 0:t.assigned_trainer),null!==(e=this.training)&&void 0!==e&&e.assigned_trainer?(this.selectedTrainerEmail=this.training.assigned_trainer.email,this.currentAssignedTrainer={email:this.training.assigned_trainer.email,name:this.training.assigned_trainer.name},console.log("Set current assigned trainer:",this.currentAssignedTrainer)):console.log("No assigned trainer found")}loadTeamMembers(){var t=this;return(0,l.A)(function*(){t.isLoading=!0;try{const a=yield(0,p._)(t.http.get("https://k-studio.co.il/wp-json/custom-api/v1/team-members"));if(t.teamMembers=a.map(r=>({email:r.email,name:r.name})),console.log("Team members loaded:",t.teamMembers),console.log("Current assigned trainer:",t.currentAssignedTrainer),t.currentAssignedTrainer){const r=t.teamMembers.find(d=>d.email===t.currentAssignedTrainer.email);console.log("Assigned trainer found in team members:",r)}}catch(a){console.error("Error loading team members",a),t.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")}finally{t.isLoading=!1}})()}trackByEmail(t,e){return e.email}selectTrainer(t){this.selectedTrainerEmail=t}isSelected(t){return this.selectedTrainerEmail===t}isCurrentlyAssigned(t){var e;return(null===(e=this.currentAssignedTrainer)||void 0===e?void 0:e.email)===t}removeAssignment(){var t=this;return(0,l.A)(function*(){t.isSaving=!0;const a={appointmentId:t.training.id};try{yield(0,p._)(t.http.post("https://k-studio.co.il/wp-json/custom-api/v1/remove-trainer",a)),t.presentToast("\u05de\u05d7\u05d9\u05e7\u05d4 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","success"),t.modalCtrl.dismiss({assigned:!1,removed:!0})}catch(r){console.error("\u05e9\u05d2\u05d9\u05d0\u05d4",r),t.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")}finally{t.isSaving=!1}})()}saveAssignment(){var t=this;return(0,l.A)(function*(){var e;if(!t.selectedTrainerEmail)return void t.presentToast("\u05d0\u05e0\u05d0 \u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df","warning");if((null===(e=t.currentAssignedTrainer)||void 0===e?void 0:e.email)===t.selectedTrainerEmail)return void t.presentToast("\u05d4\u05de\u05d0\u05de\u05df \u05db\u05d1\u05e8 \u05e9\u05d5\u05d1\u05e5 \u05dc\u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4","warning");t.isSaving=!0;const r={appointmentId:t.training.id,trainerEmail:t.selectedTrainerEmail};try{yield(0,p._)(t.http.post("https://k-studio.co.il/wp-json/custom-api/v1/assign-trainer",r)),t.presentToast("\u05d4\u05de\u05d0\u05de\u05df \u05e9\u05d5\u05d1\u05e5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!","success"),t.modalCtrl.dismiss({assigned:!0,reassigned:!!t.currentAssignedTrainer})}catch(d){console.error("\u05e9\u05d2\u05d9\u05d0\u05d4",d),t.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")}finally{t.isSaving=!1}})()}presentToast(t,e){var a=this;return(0,l.A)(function*(){(yield a.toastCtrl.create({message:t,duration:3e3,color:e,position:"bottom"})).present()})()}closeModal(){this.modalCtrl.dismiss()}get hasChanges(){var t;return this.selectedTrainerEmail!==((null===(t=this.currentAssignedTrainer)||void 0===t?void 0:t.email)||"")}get saveButtonText(){return this.isSaving?"":this.selectedTrainerEmail?this.currentAssignedTrainer?this.selectedTrainerEmail===this.currentAssignedTrainer.email?"\u05de\u05d0\u05de\u05df \u05db\u05d1\u05e8 \u05de\u05e9\u05d5\u05d1\u05e5":"\u05d4\u05d7\u05dc\u05e3 \u05de\u05d0\u05de\u05df":"\u05e9\u05de\u05d5\u05e8 \u05e9\u05d9\u05d1\u05d5\u05e5":"\u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df"}}return(i=c).\u0275fac=function(t){return new(t||i)(n.rXU(s.W3),n.rXU(f.Qq),n.rXU(s.K_))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-assign-trainer-modal"]],inputs:{training:"training"},decls:19,vars:10,consts:[[1,"popup-modal"],[1,"drag-handle"],[1,"page-content-wrapper"],[1,"sticky-header"],[1,"header-content"],[1,"close-button",3,"click"],["name","close-outline"],[1,"spacer"],["class","training-info",4,"ngIf"],["class","current-assignment",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","trainers-container",4,"ngIf"],[1,"save-button-container"],["expand","block",1,"save-button",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"training-info"],[1,"training-card"],[1,"training-meta"],[1,"date"],[1,"time"],[1,"current-assignment"],[1,"assignment-info"],[1,"assignment-header"],["name","person-circle-outline"],[1,"trainer-details"],[1,"trainer-name"],[1,"trainer-email"],[1,"remove-button",3,"click","disabled"],["name","trash-outline"],[1,"loading-container"],[1,"loading-content"],["name","crescent"],[1,"empty-state"],[1,"empty-content"],["name","people-outline","size","large"],[1,"trainers-container"],[1,"section-title"],[1,"count"],[1,"trainers-grid"],["class","trainer-card",3,"selected","currently-assigned","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"trainer-card",3,"click"],[1,"trainer-avatar"],[1,"avatar-placeholder"],[1,"trainer-info"],["class","current-badge",4,"ngIf"],[1,"selection-indicator"],["name","checkmark-outline"],[1,"current-badge"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),n.bIt("click",function(){return e.closeModal()}),n.nrm(6,"ion-icon",6),n.k0s(),n.j41(7,"h3"),n.EFF(8,"\u05e9\u05d9\u05d1\u05d5\u05e5 \u05de\u05d0\u05de\u05df"),n.k0s(),n.nrm(9,"div",7),n.k0s(),n.DNE(10,E,11,9,"div",8)(11,T,13,3,"div",9),n.k0s(),n.DNE(12,R,5,0,"div",10)(13,I,7,0,"div",11)(14,G,8,4,"div",12),n.j41(15,"div",13)(16,"ion-button",14),n.bIt("click",function(){return e.saveAssignment()}),n.DNE(17,z,1,0,"ion-spinner",15)(18,Y,2,1,"span",16),n.k0s()()()()),2&t&&(n.R7$(10),n.Y8G("ngIf",e.training),n.R7$(),n.Y8G("ngIf",e.currentAssignedTrainer&&!e.isLoading),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.Y8G("ngIf",!e.isLoading&&0===e.teamMembers.length),n.R7$(),n.Y8G("ngIf",!e.isLoading&&e.teamMembers.length),n.R7$(),n.AVh("visible",e.selectedTrainerEmail),n.R7$(),n.Y8G("disabled",e.isSaving||!e.selectedTrainerEmail||!e.hasChanges),n.R7$(),n.Y8G("ngIf",e.isSaving),n.R7$(),n.Y8G("ngIf",!e.isSaving))},dependencies:[_.Sq,_.bT,s.Jm,s.W9,s.iq,s.w2,_.vh],styles:['.popup-modal[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: #ffffff;border-radius:24px 24px 0 0;padding:0;box-shadow:0 -8px 32px #0000001f;overflow:hidden;display:flex;flex-direction:column;height:100%}.popup-modal[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.popup-modal[_ngcontent-%COMP%]   .page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:linear-gradient(to bottom,#fff,#fafafa)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #f1f5f9;padding:0 0 20px;position:sticky;top:0;z-index:10;flex-shrink:0}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px 0;justify-content:space-between}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:scale(1.05)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#64748b}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.375rem;margin:0;color:#1e293b;letter-spacing:-.025em}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]{padding:16px 24px 0}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00cbbf,#048b83);padding:20px;border-radius:16px;color:#fff;box-shadow:0 4px 20px #667eea40}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 -1px;font-weight:600;font-size:1.125rem;color:#fff}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   .training-meta[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;font-size:.875rem;opacity:.9}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   .training-meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   .training-meta[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background:#ffffff26;padding:4px 12px;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]{padding:16px 24px 0}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:16px;padding:16px;display:flex;align-items:center;gap:12px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .assignment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#64748b;font-size:.875rem;font-weight:500}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .assignment-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .trainer-details[_ngcontent-%COMP%]{flex:1}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .trainer-details[_ngcontent-%COMP%]   .trainer-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:1rem}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .trainer-details[_ngcontent-%COMP%]   .trainer-email[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{background:#fee2e2;border:1px solid #fecaca;border-radius:8px;padding:8px;cursor:pointer;transition:all .2s ease}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{background:#fecaca;transform:scale(1.05)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626;font-size:16px}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:60px 24px}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #667eea;transform:scale(1.2);margin-bottom:16px}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:60px 24px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{text-align:center}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#cbd5e1;margin-bottom:16px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#475569;font-size:1.25rem;font-weight:600;margin:0 0 8px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:24px 24px 20px;flex-shrink:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;background:#f1f5f9;padding:4px 12px;border-radius:20px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0 24px;display:flex;flex-direction:column;gap:12px;min-height:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]:after{content:"";height:12px;flex-shrink:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #f1f5f9;border-radius:16px;padding:20px;display:flex;align-items:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;flex-shrink:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#00cbbf,#048b83);opacity:0;transition:opacity .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#e2e8f0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.currently-assigned[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#ecfdf5,#d1fae5)}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.currently-assigned[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#10b981}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]{border-color:#667eea;background:linear-gradient(135deg,#00cbbf,#048b83);transform:translateY(-2px);box-shadow:0 8px 25px #667eea59}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]:before{opacity:1}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{background:#fff3;color:#fff;border-color:#ffffff4d}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   .current-badge[_ngcontent-%COMP%]{background:#fff3;color:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]{position:relative;z-index:1}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1.125rem;color:#475569;border:2px solid #e2e8f0;transition:all .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1;margin-right:10px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 -8px;font-size:1rem;font-weight:600;color:#1e293b;transition:color .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:.875rem;color:#64748b;transition:color .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   .current-badge[_ngcontent-%COMP%]{background:#10b981;color:#fff;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:500;display:inline-block;transition:all .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{position:relative;z-index:1;width:24px;height:24px;border-radius:50%;border:2px solid #e2e8f0;display:flex;align-items:center;justify-content:center;transition:all .3s ease;background:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:transparent;transition:color .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator.active[_ngcontent-%COMP%]{border-color:#fff;background:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#667eea}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]{padding:16px 24px;background:#fff;border-top:1px solid #f1f5f9;flex-shrink:0;transform:translateY(100%);transition:transform .4s cubic-bezier(.4,0,.2,1);box-shadow:0 -4px 20px #0000001a}.popup-modal[_ngcontent-%COMP%]   .save-button-container.visible[_ngcontent-%COMP%]{transform:translateY(-100px);z-index:100}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{--border-radius: 16px;--background: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);--background-activated: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);--box-shadow: 0 4px 20px rgba(102, 126, 234, .35);--color: white;font-weight:600;font-size:1rem;letter-spacing:.025em;height:56px;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);--box-shadow: 0 8px 25px rgba(102, 126, 234, .45)}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{opacity:.6;transform:none}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: white;margin-right:8px}']}),c})();var N=g(6003);const F=()=>[1,2,3,4,5];function U(i,c){if(1&i){const o=n.RV6();n.j41(0,"ion-segment",9),n.bIt("ionChange",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.segmentChanged(e))}),n.j41(1,"ion-segment-button",10)(2,"ion-label"),n.EFF(3,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9 \u05e2\u05d1\u05e8"),n.k0s()(),n.j41(4,"ion-segment-button",11)(5,"ion-label"),n.EFF(6,"\u05e9\u05d9\u05d1\u05d5\u05e5 \u05de\u05d0\u05de\u05e0\u05d9\u05dd"),n.k0s()()()}if(2&i){const o=n.XpG();n.Y8G("value",o.currentSegment)}}function L(i,c){1&i&&n.nrm(0,"div",14)}function X(i,c){1&i&&(n.j41(0,"div",12),n.DNE(1,L,1,0,"div",13),n.k0s()),2&i&&(n.R7$(),n.Y8G("ngForOf",n.lJ4(1,F)))}function V(i,c){if(1&i&&(n.j41(0,"span",25),n.EFF(1),n.k0s()),2&i){const o=n.XpG().$implicit,t=n.XpG(2);n.Y8G("ngClass",t.getProviderClass(o.providerName)),n.R7$(),n.SpI(" ",o.providerName," ")}}function J(i,c){if(1&i){const o=n.RV6();n.j41(0,"ion-card",20),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.openAttendanceMarker(e))}),n.j41(1,"ion-card-header")(2,"div",21),n.nrm(3,"ion-icon",22),n.k0s(),n.j41(4,"div",23)(5,"h2"),n.EFF(6),n.DNE(7,V,2,2,"span",24),n.k0s(),n.j41(8,"p"),n.EFF(9),n.k0s(),n.j41(10,"p"),n.EFF(11),n.nI1(12,"date"),n.nI1(13,"date"),n.k0s()()()()}if(2&i){const o=c.$implicit;n.R7$(3),n.Y8G("name",o.hasBeenSubmitted?"checkmark-done-circle":"ellipse-outline")("color",o.hasBeenSubmitted?"success":"medium"),n.R7$(3),n.SpI(" ",o.training_name," "),n.R7$(),n.Y8G("ngIf",o.providerName),n.R7$(2),n.SpI(" \u05de\u05d0\u05de\u05e0\u05ea: ",o.trainer_name,""),n.R7$(2),n.Lme("",n.i5U(12,7,o.start_time,"dd/MM/yyyy")," | ",n.i5U(13,10,o.start_time,"HH:mm"),"")}}function W(i,c){1&i&&(n.j41(0,"div",26),n.nrm(1,"ion-icon",27),n.j41(2,"h3"),n.EFF(3,"\u05d0\u05d9\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9 \u05e2\u05d1\u05e8 \u05dc\u05d4\u05e6\u05d2\u05d4"),n.k0s(),n.j41(4,"p"),n.EFF(5,"\u05db\u05d0\u05e9\u05e8 \u05d9\u05d4\u05d9\u05d5 \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05d4\u05dd \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05db\u05d0\u05df"),n.k0s()())}function H(i,c){if(1&i){const o=n.RV6();n.j41(0,"div",15),n.DNE(1,J,14,13,"ion-card",16),n.j41(2,"ion-infinite-scroll",17),n.bIt("ionInfinite",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.loadMorePastTrainings(e))}),n.nrm(3,"ion-infinite-scroll-content",18),n.k0s(),n.DNE(4,W,6,0,"div",19),n.k0s()}if(2&i){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.pastTrainings),n.R7$(),n.Y8G("disabled",o.allPastTrainingsLoaded),n.R7$(2),n.Y8G("ngIf",!o.isLoading&&0===o.pastTrainings.length)}}function K(i,c){1&i&&n.nrm(0,"div",14)}function Q(i,c){1&i&&(n.j41(0,"div",12),n.DNE(1,K,1,0,"div",13),n.k0s()),2&i&&(n.R7$(),n.Y8G("ngForOf",n.lJ4(1,F)))}function Z(i,c){if(1&i&&(n.j41(0,"span",25),n.EFF(1),n.k0s()),2&i){const o=n.XpG().$implicit,t=n.XpG(2);n.Y8G("ngClass",t.getProviderClass(o.providerName)),n.R7$(),n.SpI(" ",o.providerName," ")}}function q(i,c){if(1&i&&(n.j41(0,"div",33),n.nrm(1,"ion-icon",34),n.j41(2,"span"),n.EFF(3),n.k0s()()),2&i){const o=n.XpG().$implicit;n.R7$(3),n.SpI("\u05de\u05e9\u05d5\u05d1\u05e5: ",o.assigned_trainer_name,"")}}function nn(i,c){if(1&i){const o=n.RV6();n.j41(0,"ion-card",29)(1,"ion-card-header")(2,"ion-button",30),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.openTrainerAssignmentModal(e))}),n.nrm(3,"ion-icon",31),n.EFF(4),n.k0s(),n.j41(5,"div",23)(6,"h2"),n.EFF(7),n.DNE(8,Z,2,2,"span",24),n.k0s(),n.j41(9,"p"),n.EFF(10),n.k0s(),n.j41(11,"p"),n.EFF(12),n.nI1(13,"date"),n.nI1(14,"date"),n.k0s(),n.DNE(15,q,4,1,"div",32),n.k0s()()()}if(2&i){const o=c.$implicit;n.R7$(3),n.Y8G("name",o.assigned_trainer_name?"swap-horizontal-outline":"person-add-outline"),n.R7$(),n.SpI(" ",o.assigned_trainer_name?"\u05e9\u05e0\u05d4 \u05e9\u05d9\u05d1\u05d5\u05e5":"\u05e9\u05d1\u05e5 \u05de\u05d0\u05de\u05df"," "),n.R7$(3),n.SpI(" ",o.training_name," "),n.R7$(),n.Y8G("ngIf",o.providerName),n.R7$(2),n.SpI("\u05de\u05d0\u05de\u05e0\u05ea: ",o.trainer_name," "),n.R7$(2),n.Lme("",n.i5U(13,8,o.start_time,"dd/MM/yyyy")," | ",n.i5U(14,11,o.start_time,"HH:mm"),""),n.R7$(3),n.Y8G("ngIf",o.assigned_trainer_name)}}function tn(i,c){1&i&&(n.j41(0,"div",26),n.nrm(1,"ion-icon",35),n.j41(2,"h3"),n.EFF(3,"\u05d0\u05d9\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05de\u05de\u05ea\u05d9\u05e0\u05d9\u05dd \u05dc\u05e9\u05d9\u05d1\u05d5\u05e5"),n.k0s(),n.j41(4,"p"),n.EFF(5,"\u05db\u05d0\u05e9\u05e8 \u05d9\u05d4\u05d9\u05d5 \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d7\u05d3\u05e9\u05d9\u05dd, \u05d4\u05dd \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05db\u05d0\u05df"),n.k0s()())}function en(i,c){if(1&i&&(n.j41(0,"div",15),n.DNE(1,nn,16,14,"ion-card",28)(2,tn,6,0,"div",19),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.upcomingTrainings),n.R7$(),n.Y8G("ngIf",!o.isLoadingUpcoming&&0===o.upcomingTrainings.length)}}let on=(()=>{var i;class c{getProviderClass(t){switch(t){case"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4":return"provider-ben-yehuda";case"\u05d4\u05d9\u05e8\u05e7\u05d5\u05df":return"provider-hayarkon";case"\u05d3\u05d9\u05d6\u05e0\u05d2\u05d5\u05e3":return"provider-dizengoff";case"\u05e8\u05d5\u05d8\u05e9\u05d9\u05dc\u05d3":return"provider-rothschild";case"\u05d0\u05dc\u05e0\u05d1\u05d9":return"provider-allenby";case"\u05db\u05e8\u05de\u05dc":return"provider-carmel";default:return""}}constructor(t,e,a,r){this.http=t,this.modalCtrl=e,this.authService=a,this.attendanceBadgeService=r,this.isLoading=!0,this.pastTrainings=[],this.userRole="",this.currentSegment="past",this.isLoadingUpcoming=!0,this.upcomingTrainings=[],this.pastTrainingsPage=1,this.allPastTrainingsLoaded=!1,this.weeklyMain={},this.weeklySecond={},this.providerNames={169:"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4",172:"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4",643:"\u05d4\u05d9\u05e8\u05e7\u05d5\u05df",644:"\u05d4\u05d9\u05e8\u05e7\u05d5\u05df"},this.userRole=this.authService.getUserRole()}getProviderName(t){return this.providerNames[t]||`\u05e1\u05e4\u05e7 ${t}`}pullWeeklyFromStorage(){try{var t,e;this.weeklyMain=JSON.parse(null!==(t=localStorage.getItem("weeklyTrainings_main"))&&void 0!==t?t:"{}"),this.weeklySecond=JSON.parse(null!==(e=localStorage.getItem("weeklyTrainings_second"))&&void 0!==e?e:"{}")}catch{}}ngOnInit(){this.pullWeeklyFromStorage(),console.log("weekly main:",this.weeklyMain),console.log("weekly second:",this.weeklySecond),this.loadInitialData()}scheduleForProvider(t){return console.log("ID is:",t),169===t||172===t?this.weeklySecond:this.weeklyMain}enrichTraining(t){var e=this;return(0,l.A)(function*(){if(t.providerId){t.providerName=e.getProviderName(t.providerId);const r=e.lookupTitle(t.start_time,t.providerId);r&&(t.training_name=r)}else try{var a;const r=yield(0,p._)(e.http.get(`https://k-studio.co.il/wp-json/custom-api/v1/appointment/${t.id}`));t.providerId=null!==(a=null==r?void 0:r.providerId)&&void 0!==a?a:null,t.providerName=e.getProviderName(t.providerId);const d=e.lookupTitle(t.start_time,t.providerId);d&&(t.training_name=d)}catch(r){console.warn("enrichTraining failed",t.id,r)}})()}lookupTitle(t,e){var a;console.log("lookupTitle called with:",{startIso:t,providerId:e});const d=new Date(t),m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()],O=d.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),A=null===(a=this.scheduleForProvider(e)[m])||void 0===a?void 0:a.find(an=>an.time===O);return A?A.title:null}openTrainerAssignmentModal(t){var e=this;return(0,l.A)(function*(){var a;null===(a=document.activeElement)||void 0===a||a.blur();const r=yield e.modalCtrl.create({component:B,componentProps:{training:t},cssClass:"popup-modal",breakpoints:[0,.95,1],initialBreakpoint:.95,handle:!0,backdropDismiss:!1});yield r.present();const{data:d}=yield r.onDidDismiss();null!=d&&d.assigned&&e.loadUpcomingTrainingsForAssignment()})()}loadUpcomingTrainingsForAssignment(){var t=this;return(0,l.A)(function*(){const e=(new f.Nl).set("days","7");t.isLoadingUpcoming=!0;try{const a=yield(0,p._)(t.http.get("https://k-studio.co.il/wp-json/custom-api/v1/upcoming-trainings",{params:e}));yield Promise.all(a.map(r=>t.enrichTraining(r))),t.upcomingTrainings=a,console.log("upcomingTrainings:",t.upcomingTrainings)}catch(a){console.error("Error loading upcoming trainings",a)}finally{t.isLoadingUpcoming=!1}})()}segmentChanged(t){this.currentSegment=t.detail.value}loadTrainings(t){var e=this;return(0,l.A)(function*(){1===e.pastTrainingsPage&&(e.isLoading=!0);let r=(new f.Nl).set("page",e.pastTrainingsPage.toString());const d=e.authService.getUserEmail();"team"===e.userRole&&d&&(r=r.set("trainer_email",d));try{const m=yield(0,p._)(e.http.get("https://k-studio.co.il/wp-json/custom-api/v1/past-trainings",{params:r}));yield Promise.all(m.map(O=>e.enrichTraining(O))),e.pastTrainings.push(...m),e.attendanceBadgeService.updateCountFromLoadedData(e.pastTrainings),m.length<15&&(e.allPastTrainingsLoaded=!0),null==t||t.target.complete()}catch(m){console.error("Error loading past trainings",m)}finally{e.isLoading=!1}console.log("pastTrainings:",e.pastTrainings)})()}loadMorePastTrainings(t){this.pastTrainingsPage++,this.loadTrainings(t)}loadInitialData(){this.pastTrainings=[],this.pastTrainingsPage=1,this.allPastTrainingsLoaded=!1,this.loadTrainings(),"administrator"===this.userRole&&this.loadUpcomingTrainingsForAssignment()}openAttendanceMarker(t){var e=this;return(0,l.A)(function*(){const a=yield e.modalCtrl.create({component:v,componentProps:{training:{id:t.id,name:t.training_name,start_time:t.start_time,trainer_name:t.trainer_name}},cssClass:"attendance-marker-modal",breakpoints:[0,1],initialBreakpoint:1});yield a.present();const{data:r}=yield a.onDidDismiss();if(null!=r&&r.saved)try{const d=`https://k-studio.co.il/wp-json/custom-api/v1/past-training/${t.id}`,m=yield(0,p._)(e.http.get(d));console.log("freshTraining:",m),yield e.enrichTraining(m);const O=e.pastTrainings.findIndex(w=>w.id===t.id);-1!==O&&(e.pastTrainings[O]=m,e.attendanceBadgeService.updateCountFromLoadedData(e.pastTrainings))}catch(d){console.error("Failed to refresh training data, reloading list as a fallback.",d),e.loadInitialData()}})()}closeModal(){this.modalCtrl.dismiss()}}return(i=c).\u0275fac=function(t){return new(t||i)(n.rXU(f.Qq),n.rXU(s.W3),n.rXU(h.u),n.rXU(N._))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-attendance-dashboard"]],decls:14,vars:7,consts:[[1,"popup-modal"],[1,"drag-handle"],[1,"page-content-wrapper"],[1,"sticky-header"],[1,"header-title"],[3,"value","ionChange",4,"ngIf"],[3,"hidden"],["class","skeleton-list",4,"ngIf"],["class","scrollable-list",4,"ngIf"],[3,"ionChange","value"],["value","past"],["value","upcoming"],[1,"skeleton-list"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"scrollable-list"],["class","clickable",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite","disabled"],["loadingSpinner","crescent"],["class","empty-state",4,"ngIf"],[1,"clickable",3,"click"],[1,"icon-container"],[3,"name","color"],[1,"training-details"],["class","provider-tag",3,"ngClass",4,"ngIf"],[1,"provider-tag",3,"ngClass"],[1,"empty-state"],["name","calendar-outline"],["class","assignment-card",4,"ngFor","ngForOf"],[1,"assignment-card"],["fill","solid",1,"assign-button",3,"click"],["slot","start",3,"name"],["class","assigned-trainer",4,"ngIf"],[1,"assigned-trainer"],["name","person-circle"],["name","people-outline"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),n.EFF(6,"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e0\u05d5\u05db\u05d7\u05d5\u05ea \u05d5\u05e9\u05d9\u05d1\u05d5\u05e6\u05d9\u05dd"),n.k0s()(),n.DNE(7,U,7,1,"ion-segment",5),n.k0s(),n.j41(8,"div",6),n.DNE(9,X,2,2,"div",7)(10,H,5,3,"div",8),n.k0s(),n.j41(11,"div",6),n.DNE(12,Q,2,2,"div",7)(13,en,3,2,"div",8),n.k0s()()()),2&t&&(n.R7$(7),n.Y8G("ngIf","administrator"===e.userRole),n.R7$(),n.Y8G("hidden","past"!==e.currentSegment),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.Y8G("ngIf",!e.isLoading),n.R7$(),n.Y8G("hidden","upcoming"!==e.currentSegment),n.R7$(),n.Y8G("ngIf",e.isLoadingUpcoming),n.R7$(),n.Y8G("ngIf",!e.isLoadingUpcoming))},dependencies:[_.YU,_.Sq,_.bT,s.Jm,s.b_,s.ME,s.W9,s.iq,s.Ax,s.Hp,s.he,s.Gp,s.eP,s.Je,_.vh],styles:['.popup-modal[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: #ffffff;border-radius:24px 24px 0 0;padding:0;box-shadow:0 -8px 32px #0000001f;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.popup-modal[_ngcontent-%COMP%]   .page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:linear-gradient(to bottom,#fff,#fafafa)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #f1f5f9;padding:0 0 20px;position:sticky;top:0;z-index:10}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px 0;justify-content:center}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.375rem;margin:0;color:#1e293b;letter-spacing:-.025em}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{--background: #f8fafc;box-shadow:0 2px 8px #0000000f;margin:auto;padding-top:10px;height:65px;width:95%}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: #64748b;--color-checked: #ffffff;--indicator-color: transparent;--indicator-color-checked: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);font-weight:500;font-size:.875rem;margin:0;transition:all .3s cubic-bezier(.4,0,.2,1);border-radius:20px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00cbbf,#048b83);box-shadow:0 2px 8px #667eea40;transform:translateY(-1px);border-radius:20px}.popup-modal[_ngcontent-%COMP%]   .scrollable-list[_ngcontent-%COMP%]{flex:1;padding:24px}.popup-modal[_ngcontent-%COMP%]   .skeleton-list[_ngcontent-%COMP%]{padding:24px}.popup-modal[_ngcontent-%COMP%]   .skeleton-list[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #f1f5f9;border-radius:16px;height:80px;margin-bottom:16px;position:relative;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   .skeleton-list[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;height:100%;width:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.6),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #f1f5f9;border-radius:16px;margin:0 0 16px;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   ion-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.popup-modal[_ngcontent-%COMP%]   ion-card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#e2e8f0}.popup-modal[_ngcontent-%COMP%]   ion-card.clickable[_ngcontent-%COMP%]:active{transform:translateY(0)}.popup-modal[_ngcontent-%COMP%]   ion-card.assignment-card[_ngcontent-%COMP%]   .assign-button[_ngcontent-%COMP%]{--border-radius: 12px;--background: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);--background-activated: linear-gradient(135deg, #00cbbf 0%, #048b83 100%);--box-shadow: 0 2px 8px rgba(102, 126, 234, .25);--color: white;font-weight:500;font-size:.875rem;height:40px;min-width:120px;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.popup-modal[_ngcontent-%COMP%]   ion-card.assignment-card[_ngcontent-%COMP%]   .assign-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);--box-shadow: 0 4px 12px rgba(102, 126, 234, .35)}.popup-modal[_ngcontent-%COMP%]   ion-card.assignment-card[_ngcontent-%COMP%]   .assign-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center;padding:20px;gap:16px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);transition:all .3s ease}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[color=success][_ngcontent-%COMP%]{color:#10b981}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[color=medium][_ngcontent-%COMP%]{color:#64748b}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]{flex:1;text-align:right}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0 0 4px;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;padding:2px 6px;border-radius:6px;white-space:nowrap;flex-shrink:0;min-width:auto;text-align:center;line-height:1.2;color:#fff;box-shadow:0 1px 3px #00000040;background:linear-gradient(135deg,#00cbbf,#048b83)}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag.provider-ben-yehuda[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0891b2);box-shadow:0 1px 3px #06b6d44d}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag.provider-hayarkon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 1px 3px #10b9814d}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag.provider-dizengoff[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);box-shadow:0 1px 3px #f59e0b4d}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag.provider-rothschild[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ec4899,#be185d);box-shadow:0 1px 3px #ec48994d}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag.provider-allenby[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);box-shadow:0 1px 3px #8b5cf64d}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag.provider-carmel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 1px 3px #ef44444d}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .provider-tag[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 6px #00000059}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:0;text-align:right}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   .assigned-trainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;margin-top:8px;padding:6px 12px;background:#10b9811a;border-radius:20px;font-size:.8125rem;color:#059669;font-weight:500;width:-moz-fit-content;width:fit-content;margin-left:auto}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   .assigned-trainer[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;margin-top:8px;padding:6px 12px;background:#667eea1a;border-radius:20px;font-size:.8125rem;color:#667eea;font-weight:500;width:-moz-fit-content;width:fit-content;margin-left:auto}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:#cbd5e1;margin-bottom:16px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#475569;font-size:1.25rem;font-weight:600;margin:0 0 8px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0}.popup-modal[_ngcontent-%COMP%]   ion-infinite-scroll[_ngcontent-%COMP%]   .infinite-scroll-content[_ngcontent-%COMP%]{padding:20px;text-align:center}.popup-modal[_ngcontent-%COMP%]   ion-infinite-scroll[_ngcontent-%COMP%]   .infinite-scroll-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #667eea}']}),c})()}}]);