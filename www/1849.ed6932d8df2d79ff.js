"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1849],{8483:(kt,nt,M)=>{M.d(nt,{T:()=>Nt});var o=M(467),A=M(1626),K=M(7586),J=M(9350),ct=M(7707);function tt(g,x){const b="object"==typeof x;return new Promise((s,c)=>{const v=new ct.Ms({next:k=>{s(k),v.unsubscribe()},error:c,complete:()=>{b?s(x.defaultValue):c(new J.G)}});g.subscribe(v)})}var t=M(3953),D=M(791),F=M(4938),W=M(177);function q(g,x){if(1&g&&(t.j41(0,"div",9)(1,"h3",10),t.EFF(2),t.k0s(),t.j41(3,"p",11),t.EFF(4),t.k0s()()),2&g){const b=x.$implicit,s=t.XpG();t.R7$(2),t.JRh(s.getDayInHebrew(b.name)),t.R7$(2),t.JRh(b.date)}}function $(g,x){if(1&g&&(t.j41(0,"div")(1,"p",16),t.EFF(2),t.k0s(),t.j41(3,"p",17),t.EFF(4),t.k0s()()),2&g){const b=t.XpG().$implicit,s=t.XpG().$implicit;t.R7$(2),t.JRh(b.trainings[s].time),t.R7$(2),t.JRh(b.trainings[s].title)}}function X(g,x){1&g&&(t.j41(0,"div")(1,"p",18),t.EFF(2,"-"),t.k0s()())}function U(g,x){if(1&g&&(t.j41(0,"div",14),t.DNE(1,$,5,2,"div",15)(2,X,3,0,"div",15),t.k0s()),2&g){const b=x.$implicit,s=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",b.trainings[s]),t.R7$(),t.Y8G("ngIf",!b.trainings[s])}}function C(g,x){if(1&g&&(t.j41(0,"div",12),t.DNE(1,U,3,2,"div",13),t.k0s()),2&g){const b=t.XpG();t.R7$(),t.Y8G("ngForOf",b.days)}}let B=(()=>{var g;class x{constructor(s,c){this.modalCtrl=s,this.ameliaService=c,this.branch="main",this.days=[],this.hebrewDaysMap={Sunday:"\u05e8\u05d0\u05e9\u05d5\u05df",Monday:"\u05e9\u05e0\u05d9",Tuesday:"\u05e9\u05dc\u05d9\u05e9\u05d9",Wednesday:"\u05e8\u05d1\u05d9\u05e2\u05d9",Thursday:"\u05d7\u05de\u05d9\u05e9\u05d9",Friday:"\u05e9\u05d9\u05e9\u05d9",Saturday:"\u05e9\u05d1\u05ea"},this.daysOfWeekEnglish=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}ngOnInit(){this.loadWeeklyTrainings()}loadWeeklyTrainings(){const s=this.ameliaService.getTrainingsTitles(this.branch);this.days=this.daysOfWeekEnglish.map((c,v)=>({name:c,date:K().day(v).format("DD/MM/YYYY"),trainings:s[c]||[]}))}refreshTrainings(){var s=this;return(0,o.A)(function*(){try{yield s.ameliaService.fetchTitleTrainings("main"),s.loadWeeklyTrainings()}catch(c){console.error("Error refreshing trainings:",c)}try{yield s.ameliaService.fetchTitleTrainings("second"),s.loadWeeklyTrainings()}catch(c){console.error("Error refreshing trainings:",c)}})()}getDayInHebrew(s){return this.hebrewDaysMap[s]||s}getMaxTrainingsLength(){return Math.max(...this.days.map(s=>s.trainings.length),0)}getRange(s){return Array.from({length:s},(c,v)=>v)}getDayName(s){return this.daysOfWeekEnglish[s%7]}getDateByOffset(s){return K().add(s,"days").format("DD/MM/YYYY")}getBranchTitle(){return"main"===this.branch?"\u05e1\u05e0\u05d9\u05e3 \u05e8\u05d0\u05e9\u05d9":"\u05e1\u05e0\u05d9\u05e3 \u05de\u05e9\u05e0\u05d9"}dismiss(){this.modalCtrl.dismiss()}}return(g=x).\u0275fac=function(s){return new(s||g)(t.rXU(D.W3),t.rXU(F.J))},g.\u0275cmp=t.VBU({type:g,selectors:[["app-calendar-popup"]],inputs:{weeklyData:"weeklyData",branch:"branch"},decls:13,vars:2,consts:[[1,"modal-title"],["slot","end"],["fill","clear",3,"click"],[1,"modal-content"],[1,"calendar-table-wrapper"],[1,"calendar-table"],[1,"table-header"],["class","day-header",4,"ngFor","ngForOf"],["class","table-row",4,"ngFor","ngForOf"],[1,"day-header"],[1,"dayName"],[1,"dayDate"],[1,"table-row"],["class","table-cell training-cell",4,"ngFor","ngForOf"],[1,"table-cell","training-cell"],[4,"ngIf"],[1,"training-time"],[1,"training-title"],[1,"empty-slot"]],template:function(s,c){1&s&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),t.EFF(3,"\u05d4\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return c.dismiss()}),t.EFF(6,"\u05e1\u05d2\u05d5\u05e8"),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"div",4)(9,"div",5)(10,"div",6),t.DNE(11,q,5,2,"div",7),t.k0s(),t.DNE(12,C,2,1,"div",8),t.k0s()()()),2&s&&(t.R7$(11),t.Y8G("ngForOf",c.days),t.R7$(),t.Y8G("ngForOf",c.getRange(c.getMaxTrainingsLength())))},dependencies:[W.Sq,W.bT,D.Jm,D.QW,D.W9,D.eU,D.BC,D.ai],styles:[".modal-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.modal-content[_ngcontent-%COMP%]{--background: #f8f9fa;padding:16px}.calendar-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;padding:8px}.calendar-table[_ngcontent-%COMP%]{display:grid;gap:1px;min-width:700px;background-color:#ddd}.table-header[_ngcontent-%COMP%]{display:contents}.day-header[_ngcontent-%COMP%]{background:#f60;color:#fff;text-align:center;padding:8px;border-radius:6px 6px 0 0;font-size:14px;font-weight:700}.table-row[_ngcontent-%COMP%]{display:contents}.table-cell[_ngcontent-%COMP%]{background:#fff;text-align:center;padding:8px;font-size:14px;min-height:60px}.training-time[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin:0;color:#333}.training-title[_ngcontent-%COMP%]{font-size:12px;margin:4px 0 0;color:#555}.empty-slot[_ngcontent-%COMP%]{color:#ccc;font-size:14px}@media (max-width: 768px){.calendar-table[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(120px,1fr))}.day-header[_ngcontent-%COMP%], .training-time[_ngcontent-%COMP%]{font-size:12px}}.dayName[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.dayDate[_ngcontent-%COMP%]{font-size:12px;margin-top:-20px;text-decoration:none;font-weight:200}"]}),x})();var S=M(1413),Z=M(1985),at=M(8359),_t=M(6129);class ht extends S.B{constructor(x=1/0,b=1/0,s=_t.U){super(),this._bufferSize=x,this._windowTime=b,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=b===1/0,this._bufferSize=Math.max(1,x),this._windowTime=Math.max(1,b)}next(x){const{isStopped:b,_buffer:s,_infiniteTimeWindow:c,_timestampProvider:v,_windowTime:k}=this;b||(s.push(x),!c&&s.push(v.now()+k)),this._trimBuffer(),super.next(x)}_subscribe(x){this._throwIfClosed(),this._trimBuffer();const b=this._innerSubscribe(x),{_infiniteTimeWindow:s,_buffer:c}=this,v=c.slice();for(let k=0;k<v.length&&!x.closed;k+=s?1:2)x.next(v[k]);return this._checkFinalizedStatuses(x),b}_trimBuffer(){const{_bufferSize:x,_timestampProvider:b,_buffer:s,_infiniteTimeWindow:c}=this,v=(c?1:2)*x;if(x<1/0&&v<s.length&&s.splice(0,s.length-v),!c){const k=b.now();let E=0;for(let R=1;R<s.length&&s[R]<=k;R+=2)E=R;E&&s.splice(0,E+1)}}}const yt={url:"",deserializer:g=>JSON.parse(g.data),serializer:g=>JSON.stringify(g)};class z extends S.k{constructor(x,b){if(super(),this._socket=null,x instanceof Z.c)this.destination=b,this.source=x;else{const s=this._config=Object.assign({},yt);if(this._output=new S.B,"string"==typeof x)s.url=x;else for(const c in x)x.hasOwnProperty(c)&&(s[c]=x[c]);if(!s.WebSocketCtor&&WebSocket)s.WebSocketCtor=WebSocket;else if(!s.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new ht}}lift(x){const b=new z(this._config,this.destination);return b.operator=x,b.source=this,b}_resetState(){this._socket=null,this.source||(this.destination=new ht),this._output=new S.B}multiplex(x,b,s){const c=this;return new Z.c(v=>{try{c.next(x())}catch(E){v.error(E)}const k=c.subscribe({next:E=>{try{s(E)&&v.next(E)}catch(R){v.error(R)}},error:E=>v.error(E),complete:()=>v.complete()});return()=>{try{c.next(b())}catch(E){v.error(E)}k.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:x,protocol:b,url:s,binaryType:c}=this._config,v=this._output;let k=null;try{k=b?new x(s,b):new x(s),this._socket=k,c&&(this._socket.binaryType=c)}catch(R){return void v.error(R)}const E=new at.yU(()=>{this._socket=null,k&&1===k.readyState&&k.close()});k.onopen=R=>{const{_socket:V}=this;if(!V)return k.close(),void this._resetState();const{openObserver:H}=this._config;H&&H.next(R);const Y=this.destination;this.destination=ct.vU.create(et=>{if(1===k.readyState)try{const{serializer:mt}=this._config;k.send(mt(et))}catch(mt){this.destination.error(mt)}},et=>{const{closingObserver:mt}=this._config;mt&&mt.next(void 0),et&&et.code?k.close(et.code,et.reason):v.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:et}=this._config;et&&et.next(void 0),k.close(),this._resetState()}),Y&&Y instanceof ht&&E.add(Y.subscribe(this.destination))},k.onerror=R=>{this._resetState(),v.error(R)},k.onclose=R=>{k===this._socket&&this._resetState();const{closeObserver:V}=this._config;V&&V.next(R),R.wasClean?v.complete():v.error(R)},k.onmessage=R=>{try{const{deserializer:V}=this._config;v.next(V(R))}catch(V){v.error(V)}}}_subscribe(x){const{source:b}=this;return b?b.subscribe(x):(this._socket||this._connectSocket(),this._output.subscribe(x),x.add(()=>{const{_socket:s}=this;0===this._output.observers.length&&(s&&(1===s.readyState||0===s.readyState)&&s.close(),this._resetState())}),x)}unsubscribe(){const{_socket:x}=this;x&&(1===x.readyState||0===x.readyState)&&x.close(),this._resetState(),super.unsubscribe()}}let lt=(()=>{var g;class x{constructor(){this.socket$=new z("wss://kstudio-websocket-production.up.railway.app")}sendMessage(s,c){this.socket$.next({action:s,...c})}getMessages(){return this.socket$.asObservable()}closeConnection(){this.socket$.complete()}}return(g=x).\u0275fac=function(s){return new(s||g)},g.\u0275prov=t.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),x})();var pt=M(3656),Ft=M(4796),Et=M(3931),wt=M(4341);const It=["popup"],ut=()=>[1,2,3,4],it=g=>({"background-color":g}),dt=(g,x,b,s)=>({"standby-enrolled":g,loading:x,success:b,error:s}),N=(g,x)=>({loading:g,success:x});function O(g,x){1&g&&(t.j41(0,"ion-segment-button",12)(1,"ion-label"),t.EFF(2,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),t.k0s()())}function G(g,x){1&g&&(t.j41(0,"ion-segment-button",13)(1,"ion-label"),t.EFF(2,"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"),t.k0s()())}function bt(g,x){if(1&g&&(t.j41(0,"ion-segment-button",18)(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note"),t.EFF(4),t.k0s()()),2&g){const b=x.$implicit,s=t.XpG(2);t.FS9("value",b.date),t.Y8G("ngClass","shalom"===s.selectedFilterAllFav?"custom-underline-shalom":"favorites"===s.selectedFilterAllFav?"custom-underline-favorites":"custom-underline-default"),t.R7$(2),t.JRh(b.day),t.R7$(2),t.JRh(b.formattedDate)}}function ot(g,x){if(1&g){const b=t.RV6();t.j41(0,"ion-icon",23),t.bIt("click",function(){t.eBV(b);const c=t.XpG(3);return t.Njj(c.openCalendarPopup())}),t.k0s()}}function gt(g,x){if(1&g){const b=t.RV6();t.j41(0,"div",19)(1,"ion-button",20),t.bIt("click",function(){t.eBV(b);const c=t.XpG(2);return t.Njj(c.toggleFilterDropdown())}),t.nrm(2,"ion-icon",21),t.EFF(3," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s(),t.DNE(4,ot,1,0,"ion-icon",22),t.k0s()}if(2&g){const b=t.XpG(2);t.R7$(4),t.Y8G("ngIf",!b.isTrainer)}}function Ot(g,x){if(1&g&&(t.j41(0,"ion-select-option",32),t.EFF(1),t.k0s()),2&g){const b=x.$implicit;t.Y8G("value",b),t.R7$(),t.JRh(b)}}function Bt(g,x){if(1&g){const b=t.RV6();t.j41(0,"ion-button",33),t.bIt("click",function(){t.eBV(b);const c=t.XpG(3);return t.Njj(c.resetTypeFilter())}),t.nrm(1,"ion-icon",34),t.k0s()}}function Dt(g,x){if(1&g){const b=t.RV6();t.j41(0,"ion-list",24)(1,"ion-item")(2,"ion-label",25),t.EFF(3,"\u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.j41(4,"ion-select",26),t.mxI("ngModelChange",function(c){t.eBV(b);const v=t.XpG(2);return t.DH7(v.selectedType,c)||(v.selectedType=c),t.Njj(c)}),t.bIt("ionChange",function(){t.eBV(b);const c=t.XpG(2);return t.Njj(c.onTypeChange())}),t.DNE(5,Ot,2,2,"ion-select-option",27),t.k0s(),t.DNE(6,Bt,2,0,"ion-button",28),t.k0s(),t.j41(7,"ion-item")(8,"ion-label",25),t.EFF(9,"\u05d6\u05de\u05d9\u05e0\u05d5\u05ea"),t.k0s(),t.j41(10,"ion-segment",29),t.mxI("ngModelChange",function(c){t.eBV(b);const v=t.XpG(2);return t.DH7(v.availabilityFilter,c)||(v.availabilityFilter=c),t.Njj(c)}),t.bIt("ionChange",function(){t.eBV(b);const c=t.XpG(2);return t.Njj(c.onFilterChange())}),t.j41(11,"ion-segment-button",30)(12,"ion-label"),t.EFF(13,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(14,"ion-segment-button",31)(15,"ion-label"),t.EFF(16,"\u05d6\u05de\u05d9\u05df \u05d1\u05dc\u05d1\u05d3"),t.k0s()()()()()}if(2&g){const b=t.XpG(2);t.R7$(4),t.R50("ngModel",b.selectedType),t.R7$(),t.Y8G("ngForOf",b.availableTypes),t.R7$(),t.Y8G("ngIf",b.selectedType),t.R7$(4),t.R50("ngModel",b.availabilityFilter)}}function Tt(g,x){if(1&g){const b=t.RV6();t.j41(0,"div")(1,"ion-segment",14),t.mxI("ngModelChange",function(c){t.eBV(b);const v=t.XpG();return t.DH7(v.selectedDay,c)||(v.selectedDay=c),t.Njj(c)}),t.bIt("ionChange",function(c){let v;t.eBV(b);const k=t.XpG();return t.Njj(k.onDayChange(null!==(v=c.detail.value)&&void 0!==v?v:""))}),t.DNE(2,bt,5,4,"ion-segment-button",15),t.k0s(),t.DNE(3,gt,5,1,"div",16)(4,Dt,17,4,"ion-list",17),t.k0s()}if(2&g){const b=t.XpG();t.R7$(),t.R50("ngModel",b.selectedDay),t.R7$(),t.Y8G("ngForOf",b.days),t.R7$(),t.Y8G("ngIf",!b.showSkeleton),t.R7$(),t.Y8G("ngIf",b.showDropdown)}}function Lt(g,x){1&g&&(t.j41(0,"ion-item",37)(1,"ion-thumbnail",38),t.nrm(2,"ion-skeleton-text",39),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",40),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",41),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",42),t.k0s()()()),2&g&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function Yt(g,x){1&g&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",35),t.k0s(),t.DNE(3,Lt,10,4,"ion-item",36),t.k0s()),2&g&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,ut)))}function jt(g,x){if(1&g&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&g){const b=x.$implicit;t.R7$(),t.SpI(" ",b," ")}}function St(g,x){if(1&g&&(t.j41(0,"div",56)(1,"ul"),t.DNE(2,jt,2,1,"li",57),t.k0s()()),2&g){const b=t.XpG().$implicit;t.R7$(2),t.Y8G("ngForOf",b.current_participants)}}function At(g,x){1&g&&(t.qex(0),t.j41(1,"button",58),t.nrm(2,"ion-icon",59),t.EFF(3," \u05e8\u05e9\u05d5\u05dd "),t.k0s(),t.bVm())}function Rt(g,x){1&g&&(t.qex(0),t.EFF(1," \u05e8\u05e9\u05d5\u05dd \u05dc\u05d4\u05de\u05ea\u05e0\u05d4 "),t.bVm())}function Kt(g,x){1&g&&(t.qex(0),t.EFF(1," \u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d4\u05de\u05ea\u05e0\u05d4 "),t.bVm())}function zt(g,x){1&g&&(t.qex(0),t.nrm(1,"ion-spinner",63),t.bVm())}function $t(g,x){1&g&&(t.qex(0),t.nrm(1,"ion-icon",59),t.bVm())}function Ht(g,x){1&g&&(t.qex(0),t.nrm(1,"ion-icon",64),t.bVm())}function Wt(g,x){if(1&g){const b=t.RV6();t.j41(0,"button",62),t.bIt("click",function(){let c;t.eBV(b);const v=t.XpG(2).$implicit,k=t.XpG();return t.Njj(k.addToStandbyList(null!==(c=null==v?null:v.id)&&void 0!==c?c:0,k.userId,k.userEmail))}),t.DNE(1,Rt,2,0,"ng-container",10)(2,Kt,2,0,"ng-container",10)(3,zt,2,0,"ng-container",10)(4,$t,2,0,"ng-container",10)(5,Ht,2,0,"ng-container",10),t.k0s()}if(2&g){const b=t.XpG(2).$implicit,s=t.XpG();t.Y8G("ngClass",t.ziG(7,dt,b.isStandbyEnrolled,s.isStandbyLoading&&!b.isStandbyEnrolled,s.isStandbySuccess&&!b.isStandbyEnrolled,b.isError&&!b.isStandbyEnrolled))("disabled",b.isStandbyEnrolled||s.isStandbyLoading||s.isStandbySuccess||b.isError),t.R7$(),t.Y8G("ngIf",b.isStandbyEnrolled),t.R7$(),t.Y8G("ngIf",!(b.isStandbyEnrolled||s.isStandbyLoading||s.isStandbySuccess||b.isError)),t.R7$(),t.Y8G("ngIf",!b.isStandbyEnrolled&&s.isStandbyLoading),t.R7$(),t.Y8G("ngIf",!b.isStandbyEnrolled&&s.isStandbySuccess),t.R7$(),t.Y8G("ngIf",!b.isStandbyEnrolled&&b.isError)}}function Xt(g,x){1&g&&(t.qex(0),t.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4"),t.bVm())}function xt(g,x){1&g&&(t.qex(0),t.nrm(1,"ion-spinner",63),t.bVm())}function Zt(g,x){1&g&&(t.qex(0),t.nrm(1,"ion-icon",59),t.bVm())}function st(g,x){if(1&g){const b=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(b);const c=t.XpG(2).$implicit,v=t.XpG();return t.Njj(v.enrollUser(c))}),t.DNE(1,Xt,2,0,"ng-container",10)(2,xt,2,0,"ng-container",10)(3,Zt,2,0,"ng-container",10),t.k0s()}if(2&g){const b=t.XpG(2).$implicit;t.Y8G("disabled",b.isLoading||b.isSuccess)("ngClass",t.l_i(5,N,b.isLoading,b.isSuccess)),t.R7$(),t.Y8G("ngIf",!b.isLoading&&!b.isSuccess),t.R7$(),t.Y8G("ngIf",b.isLoading),t.R7$(),t.Y8G("ngIf",b.isSuccess)}}function Pt(g,x){if(1&g&&(t.qex(0),t.DNE(1,Wt,6,12,"button",60)(2,st,4,8,"button",61),t.bVm()),2&g){const b=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",b.booked===b.total_participants),t.R7$(),t.Y8G("ngIf",b.booked<b.total_participants)}}function Ct(g,x){if(1&g){const b=t.RV6();t.j41(0,"div",43)(1,"div",44)(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"ion-icon",45),t.bIt("click",function(){const c=t.eBV(b).$implicit,v=t.XpG();return t.Njj(v.toggleFavorite(c))}),t.k0s()(),t.j41(5,"div",46)(6,"div",47),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"div",48)(10,"div",49),t.nrm(11,"div",50),t.k0s(),t.j41(12,"div",51)(13,"div",52),t.bIt("mouseenter",function(){const c=t.eBV(b).$implicit,v=t.XpG();return t.Njj(v.showParticipantsPopup(c))})("mouseleave",function(){t.eBV(b);const c=t.XpG();return t.Njj(c.hideParticipantsPopup())}),t.EFF(14),t.nrm(15,"ion-icon",53),t.DNE(16,St,3,1,"div",54),t.k0s()()()(),t.j41(17,"div",55),t.DNE(18,At,4,0,"ng-container",10)(19,Pt,3,2,"ng-container",10),t.k0s()()}if(2&g){const b=x.$implicit,s=t.XpG();t.R7$(3),t.JRh(b.title.name),t.R7$(),t.AVh("favorite",b.favorite),t.R7$(3),t.SpI(" ",t.i5U(8,12,b.start_time,"HH:mm")," "),t.R7$(4),t.xc7("width",s.calculateProgress(b)+"%"),t.Y8G("ngStyle",t.eq3(15,it,"shalom"===s.selectedFilterAllFav?"#ff8366":"#59c7cd")),t.R7$(3),t.Lme(" ",b.booked,"/",b.total_participants," "),t.R7$(2),t.Y8G("ngIf",s.isPopupVisible&&s.activeAppointment===b),t.R7$(2),t.Y8G("ngIf",b.isUserBooked),t.R7$(),t.Y8G("ngIf",!b.isUserBooked)}}let Nt=(()=>{var g;class x{get showSkeleton(){return"shalom"===this.selectedFilterAllFav&&this.isShalomLoading||"all"===this.selectedFilterAllFav&&this.isBenYehudaLoading}constructor(s,c,v,k,E,R,V,H,Y,et){this.websocketService=s,this.platform=c,this.toastController=v,this.ameliaService=k,this.gestureCtrl=E,this.modalCtrl=R,this.http=V,this.authService=H,this.httpA=Y,this.modalCalendar=et,this.customerID="",this.userEmail="",this.userFavLocation="",this.userRole="",this.showingParticipants=!1,this.isPopupVisible=!1,this.activeAppointment=null,this.selectedFilterAllFav="all",this.selectedType="",this.availabilityFilter="all",this.showDropdown=!1,this.availableTypes=[],this.filteredAppointments=[],this.bookedAppointments=[],this.combinedList=[],this.days=[],this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.availableTimeslots=[],this.unfilteredList=[],this.isLoading=!0,this.isStandbyLoading=!1,this.isStandbySuccess=!1,this.isEnrollLoading=!1,this.isEnrollSuccess=!1,this.showToast=!1,this.toastMessage="",this.toastColor="success",this.errorMessage="",this.currentDateRange=null,this.loadedStartDate=new Date,this.loadedEndDate=new Date,this.allAvailableDays=[],this.tabLoadingState=!1,this.lastFetched=null,this.benYehudaDays=[],this.shalomDays=[],this.benYehudaAppointments=[],this.shalomAppointments=[],this.benYehudaTimeslots=[],this.shalomTimeslots=[],this.benYehudaLoaded=!1,this.shalomLoaded=!1,this.isShalomLoading=!1,this.isBenYehudaLoading=!0,this.isTrainer=!1,"trainer"===this.authService.getUserRole()&&(this.isTrainer=!0),this.userId=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.customerID=this.authService.getCustomerID(),this.userFavLocation=this.authService.getUserFavLocation(),this.authService.fetchPackageCustomerId(this.customerID).subscribe({error:mt=>{console.error("Error fetching package id",mt)}})}ngOnInit(){var s=this;return(0,o.A)(function*(){s.fetchInitialTrainings(),s.listenForUpdates(),s.isLoading=!0;try{const c=yield tt(s.authService.fetchUserFavLocation());console.timeEnd("Fetch user favorite location"),s.userFavLocation=c.favorite_location,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===s.userFavLocation||"\u05d4\u05db\u05dc"===s.userFavLocation?s.selectedFilterAllFav="all":"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===s.userFavLocation&&(s.selectedFilterAllFav="shalom"),"inactive"===s.userRole?s.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc","danger"):"trial-users"===s.userRole&&s.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05de\u05e9\u05ea\u05de\u05e9 \u05e0\u05d9\u05e1\u05d9\u05d5\u05df","danger"),console.time("Load initial data"),yield s.loadInitialData(),console.timeEnd("Load initial data")}catch(c){console.error("Error during initialization:",c),s.presentToast("Error loading user data","danger")}finally{s.isLoading=!1,console.timeEnd("ngOnInit")}})()}ngAfterViewInit(){}ngOnDestroy(){this.websocketService.closeConnection()}fetchInitialTrainings(){var s=this;return(0,o.A)(function*(){yield s.fetchTrainingsForDateRange(new Date,new Date,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),s.lastFetched=new Date})()}listenForUpdates(){this.websocketService.getMessages().subscribe(s=>{console.log("WebSocket message received:",s),"updateTrainings"===s.action&&(console.log("Training update detected:",s.data),this.checkForNewTrainings())})}checkForNewTrainings(){var s=this;return(0,o.A)(function*(){if(s.lastFetched){const c=new Date;yield s.fetchTrainingsForDateRange(s.lastFetched,c,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),s.lastFetched=c}})()}presentToast(s,c){var v=this;return(0,o.A)(function*(){yield(yield v.toastController.create({message:s,duration:3e3,color:c,position:"bottom"})).present()})()}formatDateTimeInIsraelTime(s,c){const v=new Date(`${s}T${c}`),E=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jerusalem",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(v),[R,V]=E.replace(",","").split(" ");return`${R.replace(/\//g,"-")} ${V}`}extractAvailableDays(){const s=["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],c=(new Date).toISOString().split("T")[0],v=this.combinedList.filter(E=>!isNaN(new Date(E.start_time).getTime())).map(E=>new Date(E.start_time).toISOString().split("T")[0]),k=Array.from(new Set(v)).map(E=>{const R=new Date(E);return{date:E,day:s[R.getDay()],formattedDate:`${R.getDate()}.${R.getMonth()+1}`}});k.sort((E,R)=>E.date===c?-1:R.date===c?1:new Date(E.date).getTime()-new Date(R.date).getTime()),"all"===this.selectedFilterAllFav?this.benYehudaDays=k:"shalom"===this.selectedFilterAllFav&&(this.shalomDays=k),this.days="all"===this.selectedFilterAllFav?this.benYehudaDays:this.shalomDays,this.selectedDay=this.days.length>0?this.days[0].date:""}extractAvailableTypes(){const s=new Set(this.filteredAppointments.map(c=>c.title.name));this.availableTypes=Array.from(s)}getAppointmentsForSelectedDay(){return this.combinedList.filter(s=>{const c=K(s.start_time);return c.isValid()&&c.format("YYYY-MM-DD")===this.selectedDay})}loadInitialData(){var s=this;return(0,o.A)(function*(){s.isLoading=!0,s.isBenYehudaLoading=!0;try{const c=new Date,v=new Date(c);v.setDate(c.getDate()+20),s.currentDateRange={start:c,end:v},yield s.fetchTrainingsForDateRange(c,v,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4")}catch(c){console.error("Error loading initial data:",c),yield s.presentToast("Error loading trainings","danger")}finally{s.isLoading=!1,s.isBenYehudaLoading=!1}})()}fetchTrainingsForDateRange(s,c,v){var k=this;return(0,o.A)(function*(){if("\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===v&&k.benYehudaLoaded)return k.combinedList=[...k.benYehudaAppointments],k.unfilteredList=[...k.combinedList],void k.updateFilteredAppointments();if("\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===v&&k.shalomLoaded)return k.combinedList=[...k.shalomAppointments],k.unfilteredList=[...k.combinedList],void k.updateFilteredAppointments();const E=k.authService.getUserID(),R=V=>K(V).format("YYYY-MM-DD");try{const V=R(s),et=`https://k-studio.co.il/wp-json/custom-api/v1/get-trainings?startDate=${V}&endDate=${R(c)}&userID=${E}&location=${encodeURIComponent(v)}`,mt=yield tt(k.http.get(et));for(let rt=new Date(s);rt<=c;rt.setDate(rt.getDate()+1)){const Mt=R(new Date(rt));k.allAvailableDays.includes(Mt)||k.allAvailableDays.push(Mt)}yield k.combineTimeslotsAndAppointments(mt),"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===v?(k.benYehudaAppointments=[...k.combinedList],k.benYehudaLoaded=!0):"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===v&&(k.shalomAppointments=[...k.combinedList],k.shalomLoaded=!0)}catch(V){throw console.error("Error fetching trainings:",V),V}})()}combineTimeslotsAndAppointments(s){var c=this;return(0,o.A)(function*(){try{const v=s.filter(H=>"timeslot"===H.type),k=s.filter(H=>"appointment"===H.type),E="all"===c.selectedFilterAllFav;E?(c.benYehudaTimeslots=v,c.benYehudaAppointments=k):(c.shalomTimeslots=v,c.shalomAppointments=k),c.combinedList=[...E?c.benYehudaTimeslots:c.shalomTimeslots,...E?c.benYehudaAppointments:c.shalomAppointments],c.combinedList.sort((H,Y)=>new Date(H.start_time).getTime()-new Date(Y.start_time).getTime()),c.unfilteredList=[...c.combinedList],c.extractAvailableDays();const R=c.authService.getUserFullName(),V=c.combinedList.map(function(){var H=(0,o.A)(function*(Y){Y.start_time&&!isNaN(Date.parse(Y.start_time))?(Y.isStandbyEnrolled=Y.booked>=Y.total_participants&&void 0!==Y.id&&(yield c.checkStandbyEnrollment(c.userEmail,Y.id)),Array.isArray(Y.current_participants)?Y.isUserBooked=Y.current_participants.some(et=>et===R):(console.warn("current_participants is not an array for training:",Y),Y.isUserBooked=!1)):console.error("Invalid start_time for training:",Y)});return function(Y){return H.apply(this,arguments)}}());yield Promise.all(V),c.filteredAppointments=[...c.combinedList],c.updateFilteredAppointments()}catch(v){console.error("Error combining timeslots and appointments:",v)}})()}onDayChange(s){this.selectedDay=String(s||""),this.updateFilteredAppointments()}filterFavAll(s){var c=this;return(0,o.A)(function*(){const v=s.detail.value;if(c.combinedList=[],c.filteredAppointments=[],c.days=[],"favorites"===v){c.tabLoadingState=!0;try{const V=[...c.benYehudaAppointments,...c.shalomAppointments],H=[...c.benYehudaTimeslots,...c.shalomTimeslots];c.combinedList=[...H,...V],c.unfilteredList=[...c.combinedList],c.updateFilteredAppointments()}finally{c.tabLoadingState=!1}return}const E={all:"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4",shalom:"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"}[v],R="all"===v?c.benYehudaLoaded:c.shalomLoaded;"all"===v?(c.isBenYehudaLoading=!0,setTimeout(()=>{},0)):"shalom"===v&&(c.isShalomLoading=!0);try{if("all"===v?(c.days=c.benYehudaDays,c.benYehudaLoaded&&(c.combinedList=[...c.benYehudaTimeslots,...c.benYehudaAppointments],c.unfilteredList=[...c.combinedList],c.selectedDay=c.benYehudaDays.length>0?c.benYehudaDays[0].date:"",c.updateFilteredAppointments())):"shalom"===v&&(c.days=c.shalomDays,c.shalomLoaded&&(c.combinedList=[...c.shalomTimeslots,...c.shalomAppointments],c.unfilteredList=[...c.combinedList],c.selectedDay=c.shalomDays.length>0?c.shalomDays[0].date:"",console.log("combined List:",c.combinedList),c.updateFilteredAppointments())),!R){const V=new Date,H=new Date;H.setDate(V.getDate()+30),yield c.fetchTrainingsForDateRange(V,H,E)}}finally{"all"===v?c.isBenYehudaLoading=!1:c.isShalomLoading=!1}})()}toggleAvailabilityFilter(){this.availabilityFilter="all"===this.availabilityFilter?"available":"all",this.updateFilteredAppointments()}updateFilteredAppointments(){let s=[...this.unfilteredList];this.selectedDay&&(s=s.filter(c=>K(c.start_time).format("YYYY-MM-DD")===this.selectedDay)),"available"===this.availabilityFilter&&(s=s.filter(c=>c.booked<c.total_participants)),this.selectedType&&(s=s.filter(c=>c.title.name===this.selectedType)),"favorites"===this.selectedFilterAllFav&&(s=s.filter(c=>c.favorite)),s.sort((c,v)=>new Date(c.start_time).getTime()-new Date(v.start_time).getTime()),this.filteredAppointments=[...s],this.extractAvailableTypes()}onFilterChange(){this.updateFilteredAppointments()}onTypeChange(){console.log("Selected type:",this.selectedType),this.updateFilteredAppointments()}resetTypeFilter(){this.selectedType="",this.updateFilteredAppointments()}removePastFavorites(){const s=new Date,v=this.getFavoriteTrainings().filter(k=>{const E=this.combinedList.find(R=>R.id===k);return E&&new Date(E.start_time)>s});this.saveFavoriteTrainings(v)}closeModal(){document.body.classList.remove("no-scroll"),this.modalCtrl.dismiss()}toggleFavorite(s){s.favorite=!s.favorite;const c=this.getFavoriteTrainings();if(s.favorite)c.push(s.id);else{const v=c.indexOf(s.id);v>-1&&c.splice(v,1)}this.saveFavoriteTrainings(c)}getFavoriteTrainings(){const s=localStorage.getItem("favoriteTrainings");return s?JSON.parse(s):[]}saveFavoriteTrainings(s){localStorage.setItem("favoriteTrainings",JSON.stringify(s))}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}calculateProgress(s){if(!s.current_participants||!s.total_participants)return 0;const c=s.current_participants.length/s.total_participants*100;return c>100?100:c}showParticipantsPopup(s){this.activeAppointment=s,this.isPopupVisible=!0}hideParticipantsPopup(){this.activeAppointment=null,this.isPopupVisible=!1}addToStandbyList(s,c,v){this.isStandbyLoading=!0,this.isStandbySuccess=!1,this.http.post("https://k-studio.co.il/wp-json/standby-list/v1/add",{appointment_id:s,customer_id:c,email:v}).subscribe(R=>{console.log("User added to standby list",R),this.isStandbyLoading=!1,this.isStandbySuccess=!0},R=>{console.error("Error adding user to standby list",R),this.isStandbyLoading=!1,this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})}checkStandbyEnrollment(s,c){const k=(new A.Nl).set("email",s).set("trainingId",c.toString());return tt(this.http.get("https://k-studio.co.il/wp-json/standby-list/v1/check",{params:k})).then(E=>E.isEnrolled).catch(E=>(console.error("Error checking standby enrollment",E),!1))}enrollUser(s){console.log("appointment requested",s),s.isLoading=!0,s.isSuccess=!1,s.isError=!1;let c=s.serviceID;const k=s.start_time.slice(0,16);let E=s.providerId;console.log("providerID",E);let R=this.authService.getCustomerID(),V=this.authService.getPackageCustomerId();const et={type:"appointment",serviceId:c,providerId:E,locationId:null,notifyParticipants:0,bookings:[{customerId:R,status:"approved",duration:3600,persons:1,extras:[],customFields:{},utcOffset:-(new Date).getTimezoneOffset(),packageCustomerService:{packageCustomer:{id:V}}}],bookingStart:k,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};console.log("enrollData",et),this.platform.ready().then(()=>{const mt=JSON.stringify(et);this.http.post("https://k-studio.co.il/wp-json/wn/v1/bookTrainingNEW",mt,{headers:{"Content-Type":"application/json"}}).subscribe(rt=>{var Mt,Ut;if(null===rt.message||null===rt.data)return this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4: \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4 \u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4","danger"),s.isError=!0,void(s.isLoading=!1);if(null!==(Mt=rt.data)&&void 0!==Mt&&Mt.timeSlotUnavailable)this.presentToast(rt.message||"The time slot is unavailable","danger");else if(null!==(Ut=rt.data)&&void 0!==Ut&&Ut.customerAlreadyBooked)this.presentToast(rt.message||"You have already booked this training","success");else if(rt.message){s.isSuccess=!0,s.current_participants||(s.current_participants=[]),s.booked+=1;const Vt=`${this.authService.getUserFullName()}`;s.current_participants.push(Vt),s.isUserBooked=!0}else s.isSuccess=!0;s.isLoading=!1,setTimeout(()=>{s.isSuccess=!1},2e3)},rt=>{console.error("Enrollment failed",JSON.stringify(rt)),s.isLoading=!1,rt.error&&rt.error.includes('"packageCustomerId" is required for booking')?this.presentToast("\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4 \u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4","danger"):this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger"),s.isError=!0})})}openCalendarPopup(){var s=this;return(0,o.A)(function*(){let c="";"all"===s.selectedFilterAllFav?c="main":"shalom"===s.selectedFilterAllFav&&(c="second"),console.log("branch:",c),yield(yield s.modalCalendar.create({component:B,componentProps:{branch:c}})).present()})()}getWeeklyTrainings(){return[]}}return(g=x).\u0275fac=function(s){return new(s||g)(t.rXU(lt),t.rXU(pt.OD),t.rXU(D.K_),t.rXU(F.J),t.rXU(D.wH),t.rXU(D.W3),t.rXU(A.Qq),t.rXU(Ft.u),t.rXU(Et.B),t.rXU(D.W3))},g.\u0275cmp=t.VBU({type:g,selectors:[["app-trainings"]],viewQuery:function(s,c){if(1&s&&t.GBs(It,5),2&s){let v;t.mGM(v=t.lsd())&&(c.popup=v.first)}},decls:15,vars:6,consts:[["popup",""],[1,"popup-modal-trainings"],[1,"drag-handle"],[1,"content-container"],[1,"sticky-header"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","all","class","header-tab",4,"ngIf"],["value","shalom","class","header-tab segment-button-checked-shalom",4,"ngIf"],["value","favorites",1,"header-tab","segment-button-checked-fav"],[4,"ngIf"],["class","card",4,"ngFor","ngForOf"],["value","all",1,"header-tab"],["value","shalom",1,"header-tab","segment-button-checked-shalom"],["scrollable","","mode","md",1,"days-tabs",3,"ngModelChange","ionChange","ngModel"],["class","custom-tabs",3,"value","ngClass",4,"ngFor","ngForOf"],["class","filter-header",4,"ngIf"],["class","filter-dropdown",4,"ngIf"],[1,"custom-tabs",3,"value","ngClass"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],["name","calendar-outline","class","calendar-icon",3,"click",4,"ngIf"],["name","calendar-outline",1,"calendar-icon",3,"click"],[1,"filter-dropdown"],[2,"text-indent","8px"],["interface","popover","placeholder","\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger","fill","clear",3,"click",4,"ngIf"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","available"],[3,"value"],["color","danger","fill","clear",3,"click"],["name","close-circle"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],[1,"card"],[1,"card-header"],["name","heart-outline",3,"click"],[1,"card-content"],[1,"time-date"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress",3,"ngStyle"],[1,"participants-container"],[1,"participants",3,"mouseenter","mouseleave"],["name","people-outline"],["class","participant-popup",4,"ngIf"],[1,"card-footer"],[1,"participant-popup"],[4,"ngFor","ngForOf"],["disabled","",1,"action-button","enrolled-button"],["name","checkmark-circle",1,"success-icon"],["class","action-button",3,"ngClass","disabled","click",4,"ngIf"],["class","action-button",3,"disabled","ngClass","click",4,"ngIf"],[1,"action-button",3,"click","ngClass","disabled"],["name","crescent"],["name","close-circle",1,"error-icon"],[1,"action-button",3,"click","disabled","ngClass"]],template:function(s,c){if(1&s){const v=t.RV6();t.j41(0,"ion-content",1,0),t.nrm(2,"div",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"ion-segment",6),t.mxI("ngModelChange",function(E){return t.eBV(v),t.DH7(c.selectedFilterAllFav,E)||(c.selectedFilterAllFav=E),t.Njj(E)}),t.bIt("ionChange",function(E){return t.eBV(v),t.Njj(c.filterFavAll(E))}),t.DNE(7,O,3,0,"ion-segment-button",7)(8,G,3,0,"ion-segment-button",8),t.j41(9,"ion-segment-button",9)(10,"ion-label"),t.EFF(11,"\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd"),t.k0s()()()(),t.DNE(12,Tt,5,4,"div",10)(13,Yt,4,3,"ion-list",10)(14,Ct,20,17,"div",11),t.k0s()()()}2&s&&(t.R7$(6),t.R50("ngModel",c.selectedFilterAllFav),t.R7$(),t.Y8G("ngIf","\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===c.userFavLocation||"\u05d4\u05db\u05dc"===c.userFavLocation),t.R7$(),t.Y8G("ngIf","\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===c.userFavLocation||"\u05d4\u05db\u05dc"===c.userFavLocation),t.R7$(4),t.Y8G("ngIf",!c.showSkeleton),t.R7$(),t.Y8G("ngIf",c.showSkeleton),t.R7$(),t.Y8G("ngForOf",c.filteredAppointments))},dependencies:[W.YU,W.Sq,W.bT,W.B3,wt.BC,wt.vS,D.Jm,D.W9,D.iq,D.uz,D.he,D.nf,D.AF,D.JI,D.Gp,D.eP,D.Nm,D.Ip,D.ds,D.w2,D.Zx,D.Je,W.vh],styles:['@charset "UTF-8";.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#fff}.scrollable-list[_ngcontent-%COMP%]{height:calc(100vh - 130px);overflow-y:auto}.filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative}.calendar-icon[_ngcontent-%COMP%]{position:absolute;left:16px;font-size:24px;top:50%;transform:translateY(-50%)}.filter-button[_ngcontent-%COMP%]{font-size:16px;padding:8px 16px}.training-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin-bottom:20px;width:100%;box-sizing:border-box}.training-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.favorite-icon[_ngcontent-%COMP%]{font-size:24px;color:#5a5a5a}.training-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;margin-top:-30px;color:#333;font-family:Alef}.training-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:-20px;font-family:Alef}.progress-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}ion-progress-bar[_ngcontent-%COMP%]{--progress-background: #E0E0E0;--background: #9B59B6;border-radius:10px;height:10px;flex-grow:1;margin-left:10px}ion-label[_ngcontent-%COMP%]{font-size:2em;color:#333}ion-button[_ngcontent-%COMP%]{font-weight:700;--border-radius: 25px}.segment-tab[_ngcontent-%COMP%]   .days-tabs[_ngcontent-%COMP%]{overflow-x:hidden;--background: #fff;--border-radius: 10px;margin-top:10px}.filter-segment[_ngcontent-%COMP%]{color:red}ion-segment-button[_ngcontent-%COMP%]{--color-checked: #000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}ion-segment-button[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1em;color:#666;font-weight:700;font-family:Alef}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0;--inner-padding-start: 0;--padding-start: 0;--padding-end: 0;padding:0}.header-tab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{display:flex;width:100%}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab[_ngcontent-%COMP%]{transition:all .3s ease}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab.dragging-mode[_ngcontent-%COMP%]{cursor:move;opacity:.7;transform:scale(1.05)}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab[_ngcontent-%COMP%]   .hide-tab-btn[_ngcontent-%COMP%]{margin-left:10px;color:red;cursor:pointer;opacity:.7;transition:opacity .2s}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab[_ngcontent-%COMP%]   .hide-tab-btn[_ngcontent-%COMP%]:hover{opacity:1}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;background-color:#f0f0f0}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.custom-tabs[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 4px 12px #0000000d;position:relative;--background-activated: transparent;--background-focused: transparent;--background: transparent;font-size:1em;--color-checked: #333;--color: #666;padding-bottom:10px;width:90%;margin-left:10px;--indicator-color: transparent}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.custom-underline-default.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.custom-underline-shalom.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#ff8366;border-radius:12px;transition:all .3s ease}.custom-underline-favorites.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#373737;border-radius:12px;transition:all .3s ease}.segment-button-checked-shalom[_ngcontent-%COMP%]:after{background:#ff8366}.segment-button-checked-fav[_ngcontent-%COMP%]:after{background:#373737}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto auto}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.clear-filter-icon[_ngcontent-%COMP%]{font-size:24px;color:#e74c3c;margin-left:10px;cursor:pointer}.filter-dropdown[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999;--color: #333;--background: #fff;--border-radius: 10px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1)}.popup-modal-trainings[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:10px;height:1px;background-color:transparent;border-radius:2.5px;margin:0 auto 10px}.content-container[_ngcontent-%COMP%]{padding:15px;justify-content:center}ion-content[_ngcontent-%COMP%]{--background: white}ion-tab-bar[_ngcontent-%COMP%]{--background: #fff;--color-selected: #3498db;--color: #666}ion-tab-button[_ngcontent-%COMP%]{--color-selected: #666;--color: #666}.card[_ngcontent-%COMP%]{background-color:#fff;padding:15px;margin:10px 0;border-radius:12px;box-shadow:0 4px 8px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;font-family:Alef}.card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;cursor:pointer}.card-header[_ngcontent-%COMP%]   ion-icon.favorite[_ngcontent-%COMP%]{color:red}.time-date[_ngcontent-%COMP%]{font-size:14px;color:gray}.segment-button[_ngcontent-%COMP%]:not(.segment-button-checked):after{height:0}.progress-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.progress-bar[_ngcontent-%COMP%]{width:80%;background-color:#e0e0e0;border-radius:8px;height:6px}.progress-default[_ngcontent-%COMP%]{background-color:#59c7cd}.progress-shalom[_ngcontent-%COMP%]{background-color:#ff8366}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:6px;border-radius:8px;background-color:#59c7cd}.participants[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.participants[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:4px}.card-footer[_ngcontent-%COMP%]{margin-top:10px}.action-button[_ngcontent-%COMP%]{width:100%;background-color:#454545;color:#fff;border:none;padding:10px;border-radius:8px;text-align:center;font-size:14px;cursor:pointer;transition:background-color .3s ease}.action-button.loading[_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.action-button.success[_ngcontent-%COMP%]{background-color:#4caf50}.success-icon[_ngcontent-%COMP%]{color:#fff;font-size:14px}ion-spinner[_ngcontent-%COMP%]{height:10px;width:10px}.action-button.full[_ngcontent-%COMP%]{background-color:#757575}.enrolled-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;cursor:not-allowed}.participants-container[_ngcontent-%COMP%]{background-color:#c5c5c563;position:relative;width:50px;border-radius:7px}.participant-popup[_ngcontent-%COMP%]{position:absolute;top:-10px;left:60px;background-color:#fff;border:none;padding:12px;box-shadow:0 8px 16px #00000026;width:180px;z-index:10;border-radius:12px;max-height:200px;overflow-y:auto;transition:opacity .3s ease,transform .3s ease;opacity:0;transform:translateY(-10px)}.participant-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px}.participant-popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.participant-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.participants[_ngcontent-%COMP%]{cursor:pointer;position:relative;justify-content:center}.participants[_ngcontent-%COMP%]:hover{text-decoration:underline}.participants[_ngcontent-%COMP%]:hover   .participant-popup[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.action-button.standby-enrolled[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#757575;cursor:not-allowed}.action-button.error[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff}.action-button[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:14px;color:#fff}']}),x})()},9431:(kt,nt,M)=>{M.d(nt,{B:()=>X});var o=M(8359);class A extends o.yU{constructor(C,B){super()}schedule(C,B=0){return this}}const K={setInterval(U,C,...B){const{delegate:S}=K;return null!=S&&S.setInterval?S.setInterval(U,C,...B):setInterval(U,C,...B)},clearInterval(U){const{delegate:C}=K;return((null==C?void 0:C.clearInterval)||clearInterval)(U)},delegate:void 0};var J=M(7908),tt=M(6129);class t{constructor(C,B=t.now){this.schedulerActionCtor=C,this.now=B}schedule(C,B=0,S){return new this.schedulerActionCtor(this,C).schedule(S,B)}}t.now=tt.U.now;const F=new class D extends t{constructor(C,B=t.now){super(C,B),this.actions=[],this._active=!1}flush(C){const{actions:B}=this;if(this._active)return void B.push(C);let S;this._active=!0;do{if(S=C.execute(C.state,C.delay))break}while(C=B.shift());if(this._active=!1,S){for(;C=B.shift();)C.unsubscribe();throw S}}}(class ct extends A{constructor(C,B){super(C,B),this.scheduler=C,this.work=B,this.pending=!1}schedule(C,B=0){var S;if(this.closed)return this;this.state=C;const Z=this.id,at=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(at,Z,B)),this.pending=!0,this.delay=B,this.id=null!==(S=this.id)&&void 0!==S?S:this.requestAsyncId(at,this.id,B),this}requestAsyncId(C,B,S=0){return K.setInterval(C.flush.bind(C,this),S)}recycleAsyncId(C,B,S=0){if(null!=S&&this.delay===S&&!1===this.pending)return B;null!=B&&K.clearInterval(B)}execute(C,B){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const S=this._execute(C,B);if(S)return S;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(C,B){let Z,S=!1;try{this.work(C)}catch(at){S=!0,Z=at||new Error("Scheduled action threw falsy error")}if(S)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:C,scheduler:B}=this,{actions:S}=B;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.o)(S,this),null!=C&&(this.id=this.recycleAsyncId(B,C,null)),this.delay=null,super.unsubscribe()}}});var q=M(9974),$=M(4360);function X(U,C=F){return(0,q.N)((B,S)=>{let Z=null,at=null,_t=null;const ht=()=>{if(Z){Z.unsubscribe(),Z=null;const I=at;at=null,S.next(I)}};function yt(){const I=_t+U,z=C.now();if(z<I)return Z=this.schedule(void 0,I-z),void S.add(Z);ht()}B.subscribe((0,$._)(S,I=>{at=I,_t=C.now(),Z||(Z=C.schedule(yt,U),S.add(Z))},()=>{ht(),S.complete()},void 0,()=>{at=Z=null}))})}},6129:(kt,nt,M)=>{M.d(nt,{U:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},5262:(kt,nt,M)=>{M.d(nt,{Bu:()=>jt,Q_:()=>j,_G:()=>rt,w6:()=>Mt});var o=M(177),A=M(3953),K=M(6860),J=M(1413),ct=M(8359),D=(M(4402),M(7673),M(7336)),F=M(8141),W=M(9431),q=M(5964),$=M(6354),X=M(6697),C=M(4085),B=M(4572),S=M(8793),Z=M(1985),_t=M(9172),ht=M(6977);const I=new Set;let z,lt=(()=>{var h;class i{constructor(d,f){this._platform=d,this._nonce=f,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ft}matchMedia(d){return(this._platform.WEBKIT||this._platform.BLINK)&&function pt(h,i){if(!I.has(h))try{z||(z=document.createElement("style"),i&&z.setAttribute("nonce",i),z.setAttribute("type","text/css"),document.head.appendChild(z)),z.sheet&&(z.sheet.insertRule(`@media ${h} {body{ }}`,0),I.add(h))}catch(l){console.error(l)}}(d,this._nonce),this._matchMedia(d)}}return(h=i).\u0275fac=function(d){return new(d||h)(A.KVO(K.OD),A.KVO(A.BIS,8))},h.\u0275prov=A.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})();function Ft(h){return{matches:"all"===h||""===h,media:h,addListener:()=>{},removeListener:()=>{}}}let Et=(()=>{var h;class i{constructor(d,f){this._mediaMatcher=d,this._zone=f,this._queries=new Map,this._destroySubject=new J.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(d){return wt((0,C.FG)(d)).some(w=>this._registerQuery(w).mql.matches)}observe(d){const w=wt((0,C.FG)(d)).map(P=>this._registerQuery(P).observable);let L=(0,B.z)(w);return L=(0,S.x)(L.pipe((0,X.s)(1)),L.pipe(function at(h){return(0,q.p)((i,l)=>h<=l)}(1),(0,W.B)(0))),L.pipe((0,$.T)(P=>{const Q={matches:!1,breakpoints:{}};return P.forEach(({matches:vt,query:Gt})=>{Q.matches=Q.matches||vt,Q.breakpoints[Gt]=vt}),Q}))}_registerQuery(d){if(this._queries.has(d))return this._queries.get(d);const f=this._mediaMatcher.matchMedia(d),L={observable:new Z.c(P=>{const Q=vt=>this._zone.run(()=>P.next(vt));return f.addListener(Q),()=>{f.removeListener(Q)}}).pipe((0,_t.Z)(f),(0,$.T)(({matches:P})=>({query:d,matches:P})),(0,ht.Q)(this._destroySubject)),mql:f};return this._queries.set(d,L),L}}return(h=i).\u0275fac=function(d){return new(d||h)(A.KVO(lt),A.KVO(A.SKi))},h.\u0275prov=A.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})();function wt(h){return h.map(i=>i.split(",")).reduce((i,l)=>i.concat(l)).map(i=>i.trim())}class Tt{constructor(i,l){this._letterKeyStream=new J.B,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new J.B,this.selectedItem=this._selectedItem;const d="number"==typeof(null==l?void 0:l.debounceInterval)?l.debounceInterval:200;null!=l&&l.skipPredicate&&(this._skipPredicateFn=l.skipPredicate),this.setItems(i),this._setupKeyHandler(d)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const l=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(l>=D.A&&l<=D.Z||l>=D.f2&&l<=D.bn)&&this._letterKeyStream.next(String.fromCharCode(l))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe((0,F.M)(l=>this._pressedLetters.push(l)),(0,W.B)(i),(0,q.p)(()=>this._pressedLetters.length>0),(0,$.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(l=>{for(let w=1;w<this._items.length+1;w++){var d,f;const P=this._items[(this._selectedItemIndex+w)%this._items.length];if((null===(d=this._skipPredicateFn)||void 0===d||!d.call(this,P))&&0===(null===(f=P.getLabel)||void 0===f?void 0:f.call(P).toLocaleUpperCase().trim().indexOf(l))){this._selectedItem.next(P);break}}this._pressedLetters=[]})}}class Lt{constructor(i,l){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=ct.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=d=>d.disabled,this.tabOut=new J.B,this.change=new J.B,i instanceof A.rOR?this._itemChangesSubscription=i.changes.subscribe(d=>this._itemsChanged(d.toArray())):(0,A.Hps)(i)&&(this._effectRef=(0,A.QZP)(()=>this._itemsChanged(i()),{injector:l}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();const l=this._getItemsArray();return this._typeahead=new Tt(l,{debounceInterval:"number"==typeof i?i:void 0,skipPredicate:d=>this._skipPredicateFn(d)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(d=>{this.setActiveItem(d)}),this}cancelTypeahead(){var i;return null===(i=this._typeahead)||void 0===i||i.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,l=10){return this._pageUpAndDown={enabled:i,delta:l},this}setActiveItem(i){const l=this._activeItem;this.updateActiveItem(i),this._activeItem!==l&&this.change.next(this._activeItemIndex)}onKeydown(i){var l;const d=i.keyCode,w=["altKey","ctrlKey","metaKey","shiftKey"].every(P=>!i[P]||this._allowedModifierKeys.indexOf(P)>-1);switch(d){case D.wn:return void this.tabOut.next();case D.n6:if(this._vertical&&w){this.setNextItemActive();break}return;case D.i7:if(this._vertical&&w){this.setPreviousItemActive();break}return;case D.LE:if(this._horizontal&&w){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case D.UQ:if(this._horizontal&&w){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case D.yZ:if(this._homeAndEnd&&w){this.setFirstItemActive();break}return;case D.Kp:if(this._homeAndEnd&&w){this.setLastItemActive();break}return;case D.w_:if(this._pageUpAndDown.enabled&&w){const P=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(P>0?P:0,1);break}return;case D.dB:if(this._pageUpAndDown.enabled&&w){const P=this._activeItemIndex+this._pageUpAndDown.delta,Q=this._getItemsArray().length;this._setActiveItemByIndex(P<Q?P:Q-1,-1);break}return;default:var L;return void((w||(0,D.rp)(i,"shiftKey"))&&(null===(L=this._typeahead)||void 0===L||L.handleKey(i)))}null===(l=this._typeahead)||void 0===l||l.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){var l;const d=this._getItemsArray(),f="number"==typeof i?i:d.indexOf(i),w=d[f];this._activeItem=null==w?null:w,this._activeItemIndex=f,null===(l=this._typeahead)||void 0===l||l.setCurrentSelectedItemIndex(f)}destroy(){var i,l,d;this._typeaheadSubscription.unsubscribe(),null===(i=this._itemChangesSubscription)||void 0===i||i.unsubscribe(),null===(l=this._effectRef)||void 0===l||l.destroy(),null===(d=this._typeahead)||void 0===d||d.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const l=this._getItemsArray();for(let d=1;d<=l.length;d++){const f=(this._activeItemIndex+i*d+l.length)%l.length;if(!this._skipPredicateFn(l[f]))return void this.setActiveItem(f)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,l){const d=this._getItemsArray();if(d[i]){for(;this._skipPredicateFn(d[i]);)if(!d[i+=l])return;this.setActiveItem(i)}}_getItemsArray(){return(0,A.Hps)(this._items)?this._items():this._items instanceof A.rOR?this._items.toArray():this._items}_itemsChanged(i){var l;if(null===(l=this._typeahead)||void 0===l||l.setItems(i),this._activeItem){const f=i.indexOf(this._activeItem);var d;f>-1&&f!==this._activeItemIndex&&(this._activeItemIndex=f,null===(d=this._typeahead)||void 0===d||d.setCurrentSelectedItemIndex(f))}}}class jt extends Lt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}function rt(h){return 0===h.buttons||0===h.detail}function Mt(h){const i=h.touches&&h.touches[0]||h.changedTouches&&h.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}var r=function(h){return h[h.NONE=0]="NONE",h[h.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",h[h.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",h}(r||{});const m="cdk-high-contrast-black-on-white",y="cdk-high-contrast-white-on-black",T="cdk-high-contrast-active";let j=(()=>{var h;class i{constructor(d,f){this._platform=d,this._document=f,this._breakpointSubscription=(0,A.WQX)(Et).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return r.NONE;const d=this._document.createElement("div");d.style.backgroundColor="rgb(1,2,3)",d.style.position="absolute",this._document.body.appendChild(d);const f=this._document.defaultView||window,w=f&&f.getComputedStyle?f.getComputedStyle(d):null,L=(w&&w.backgroundColor||"").replace(/ /g,"");switch(d.remove(),L){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return r.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return r.BLACK_ON_WHITE}return r.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const d=this._document.body.classList;d.remove(T,m,y),this._hasCheckedHighContrastMode=!0;const f=this.getHighContrastMode();f===r.BLACK_ON_WHITE?d.add(T,m):f===r.WHITE_ON_BLACK&&d.add(T,y)}}}return(h=i).\u0275fac=function(d){return new(d||h)(A.KVO(K.OD),A.KVO(o.qQ))},h.\u0275prov=A.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})()},4085:(kt,nt,M)=>{M.d(nt,{FG:()=>ct,OE:()=>K,he:()=>A,i8:()=>t});var o=M(3953);function A(F){return null!=F&&"false"!=`${F}`}function K(F,W=0){return function J(F){return!isNaN(parseFloat(F))&&!isNaN(Number(F))}(F)?Number(F):2===arguments.length?W:0}function ct(F){return Array.isArray(F)?F:[F]}function t(F){return F instanceof o.aKT?F.nativeElement:F}},7336:(kt,nt,M)=>{M.d(nt,{A:()=>gt,A$:()=>D,FX:()=>tt,Fm:()=>ct,Ge:()=>s,Kp:()=>C,LE:()=>at,UQ:()=>S,W3:()=>t,Z:()=>b,bn:()=>N,dB:()=>U,eg:()=>ce,f2:()=>lt,i7:()=>Z,n6:()=>_t,rp:()=>le,t6:()=>$,w_:()=>X,wn:()=>K,yZ:()=>B});const K=9,ct=13,tt=16,t=17,D=18,$=32,X=33,U=34,C=35,B=36,S=37,Z=38,at=39,_t=40,lt=48,N=57,gt=65,b=90,s=91,ce=224;function le(Jt,...se){return se.length?se.some(de=>Jt[de]):Jt.altKey||Jt.shiftKey||Jt.ctrlKey||Jt.metaKey}},6860:(kt,nt,M)=>{M.d(nt,{BQ:()=>q,Fb:()=>ht,OD:()=>J,v8:()=>yt,vc:()=>_t});var o=M(3953),A=M(177);let K;try{K=typeof Intl<"u"&&Intl.v8BreakIterator}catch{K=!1}let F,J=(()=>{var I;class z{constructor(pt){this._platformId=pt,this.isBrowser=this._platformId?(0,A.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!K)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(I=z).\u0275fac=function(pt){return new(pt||I)(o.KVO(o.Agw))},I.\u0275prov=o.jDH({token:I,factory:I.\u0275fac,providedIn:"root"}),z})();function q(I){return function W(){if(null==F&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>F=!0}))}finally{F=F||!1}return F}()?I:!!I.capture}function _t(){let I=typeof document<"u"&&document?document.activeElement:null;for(;I&&I.shadowRoot;){const z=I.shadowRoot.activeElement;if(z===I)break;I=z}return I}function ht(I){return I.composedPath?I.composedPath()[0]:I.target}function yt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},8834:(kt,nt,M)=>{M.d(nt,{Hl:()=>ut});var o=M(3953),A=M(8820);let ut=(()=>{var it;class dt{}return(it=dt).\u0275fac=function(O){return new(O||it)},it.\u0275mod=o.$C({type:it}),it.\u0275inj=o.G2t({imports:[A.yE,A.pZ,A.yE]}),dt})()},8820:(kt,nt,M)=>{M.d(nt,{$E:()=>E,yE:()=>It,O5:()=>Y,pZ:()=>V,ug:()=>v});var o=M(3953),A=M(5262),K=M(177);let W=(()=>{var a;class n{}return(a=n).\u0275fac=function(m){return new(m||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({}),n})();var $=M(6860),X=M(4085);const wt=new o.nKC("mat-sanity-checks",{providedIn:"root",factory:function Et(){return!0}});let It=(()=>{var a;class n{constructor(m,y,T){this._sanityChecks=y,this._document=T,this._hasDoneGlobalChecks=!1,m._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(m){return!(0,$.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[m])}}return(a=n).\u0275fac=function(m){return new(m||a)(o.KVO(A.Q_),o.KVO(wt,8),o.KVO(K.qQ))},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[W,W]}),n})();var st=function(a){return a[a.FADING_IN=0]="FADING_IN",a[a.VISIBLE=1]="VISIBLE",a[a.FADING_OUT=2]="FADING_OUT",a[a.HIDDEN=3]="HIDDEN",a}(st||{});class Pt{constructor(n,r,m,y=!1){this._renderer=n,this.element=r,this.config=m,this._animationForciblyDisabledThroughCss=y,this.state=st.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ct=(0,$.BQ)({passive:!0,capture:!0});class Nt{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const r=(0,$.Fb)(n);var m;r&&(null===(m=this._events.get(n.type))||void 0===m||m.forEach((y,T)=>{(T===r||T.contains(r))&&y.forEach(j=>j.handleEvent(n))}))}}addHandler(n,r,m,y){const T=this._events.get(r);if(T){const j=T.get(m);j?j.add(y):T.set(m,new Set([y]))}else this._events.set(r,new Map([[m,new Set([y])]])),n.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,Ct)})}removeHandler(n,r,m){const y=this._events.get(n);if(!y)return;const T=y.get(r);T&&(T.delete(m),0===T.size&&y.delete(r),0===y.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,Ct)))}}const g={enterDuration:225,exitDuration:150},b=(0,$.BQ)({passive:!0,capture:!0}),s=["mousedown","touchstart"],c=["mouseup","mouseleave","touchend","touchcancel"];class v{constructor(n,r,m,y){this._target=n,this._ngZone=r,this._platform=y,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,y.isBrowser&&(this._containerElement=(0,X.i8)(m))}fadeInRipple(n,r,m={}){const y=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),T={...g,...m.animation};m.centered&&(n=y.left+y.width/2,r=y.top+y.height/2);const j=m.radius||function k(a,n,r){const m=Math.max(Math.abs(a-r.left),Math.abs(a-r.right)),y=Math.max(Math.abs(n-r.top),Math.abs(n-r.bottom));return Math.sqrt(m*m+y*y)}(n,r,y),ft=n-y.left,h=r-y.top,i=T.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=ft-j+"px",l.style.top=h-j+"px",l.style.height=2*j+"px",l.style.width=2*j+"px",null!=m.color&&(l.style.backgroundColor=m.color),l.style.transitionDuration=`${i}ms`,this._containerElement.appendChild(l);const d=window.getComputedStyle(l),w=d.transitionDuration,L="none"===d.transitionProperty||"0s"===w||"0s, 0s"===w||0===y.width&&0===y.height,P=new Pt(this,l,m,L);l.style.transform="scale3d(1, 1, 1)",P.state=st.FADING_IN,m.persistent||(this._mostRecentTransientRipple=P);let Q=null;return!L&&(i||T.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const vt=()=>{Q&&(Q.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(P)},Gt=()=>this._destroyRipple(P),re=setTimeout(Gt,i+100);l.addEventListener("transitionend",vt),l.addEventListener("transitioncancel",Gt),Q={onTransitionEnd:vt,onTransitionCancel:Gt,fallbackTimer:re}}),this._activeRipples.set(P,Q),(L||!i)&&this._finishRippleTransition(P),P}fadeOutRipple(n){if(n.state===st.FADING_OUT||n.state===st.HIDDEN)return;const r=n.element,m={...g,...n.config.animation};r.style.transitionDuration=`${m.exitDuration}ms`,r.style.opacity="0",n.state=st.FADING_OUT,(n._animationForciblyDisabledThroughCss||!m.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const r=(0,X.i8)(n);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,s.forEach(m=>{v._eventManager.addHandler(this._ngZone,m,r,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{c.forEach(r=>{this._triggerElement.addEventListener(r,this,b)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===st.FADING_IN?this._startFadeOutTransition(n):n.state===st.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){const r=n===this._mostRecentTransientRipple,{persistent:m}=n.config;n.state=st.VISIBLE,!m&&(!r||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){var r;const m=null!==(r=this._activeRipples.get(n))&&void 0!==r?r:null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=st.HIDDEN,null!==m&&(n.element.removeEventListener("transitionend",m.onTransitionEnd),n.element.removeEventListener("transitioncancel",m.onTransitionCancel),null!==m.fallbackTimer&&clearTimeout(m.fallbackTimer)),n.element.remove()}_onMousedown(n){const r=(0,A._G)(n),m=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!m&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!(0,A.w6)(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const r=n.changedTouches;if(r)for(let m=0;m<r.length;m++)this.fadeInRipple(r[m].clientX,r[m].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(n.state===st.VISIBLE||n.config.terminateOnPointerUp&&n.state===st.FADING_IN)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(s.forEach(r=>v._eventManager.removeHandler(r,n,this)),this._pointerUpEventsRegistered&&(c.forEach(r=>n.removeEventListener(r,this,b)),this._pointerUpEventsRegistered=!1))}}v._eventManager=new Nt;const E=new o.nKC("mat-ripple-global-options");let V=(()=>{var a;class n{}return(a=n).\u0275fac=function(m){return new(m||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[It,It]}),n})(),Y=(()=>{var a;class n{}return(a=n).\u0275fac=function(m){return new(m||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[It]}),n})()},2054:(kt,nt,M)=>{M.d(nt,{Fg:()=>ie});var o=M(3953),J=(M(4085),M(6860),M(8820));M(8359),M(6365),M(8750),M(983),M(3794),M(6648),M(1413),M(1985),M(6354),M(5964),M(9431);let Z=(()=>{var u;class p{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275prov=o.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),p})(),ht=(()=>{var u;class p{}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275mod=o.$C({type:u}),u.\u0275inj=o.G2t({providers:[Z]}),p})();var yt=M(177);let z=(()=>{var u;class p{}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275mod=o.$C({type:u}),u.\u0275inj=o.G2t({imports:[J.yE,J.yE]}),p})();M(5262),M(4402),M(7673),M(7336),M(4341),M(6977);let ie=(()=>{var u;class p{}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275mod=o.$C({type:u}),u.\u0275inj=o.G2t({imports:[ht,yt.MD,J.yE,J.pZ,J.O5,z]}),p})()},5911:(kt,nt,M)=>{M.d(nt,{s5:()=>D});var o=M(3953),A=M(8820);let D=(()=>{var F;class W{}return(F=W).\u0275fac=function($){return new($||F)},F.\u0275mod=o.$C({type:F}),F.\u0275inj=o.G2t({imports:[A.yE,A.yE]}),W})()}}]);