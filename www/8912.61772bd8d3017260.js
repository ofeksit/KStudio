"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8912],{3632:(Ct,ct,g)=>{g.d(ct,{T:()=>bt});var o=g(467),I=g(7586),Z=g(5312),t=g(3953),at=g(3656),S=g(791),K=g(4938),E=g(1626),nt=g(4796),J=g(3931),j=g(177),H=g(4341);const U=["popup"],T=()=>[1,2,3,4],L=(x,N)=>({loading:x,success:N});function F(x,N){1&x&&(t.j41(0,"ion-item",14)(1,"ion-thumbnail",15),t.nrm(2,"ion-skeleton-text",16),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",17),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",18),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",19),t.k0s()()()),2&x&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function X(x,N){1&x&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",12),t.k0s(),t.DNE(3,F,10,4,"ion-item",13),t.k0s()),2&x&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,T)))}function lt(x,N){if(1&x&&(t.j41(0,"ion-segment-button",26)(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note"),t.EFF(4),t.k0s()()),2&x){const y=N.$implicit;t.FS9("value",y.date),t.R7$(2),t.JRh(y.day),t.R7$(2),t.JRh(y.formattedDate)}}function xt(x,N){if(1&x&&(t.j41(0,"ion-select-option",35),t.EFF(1),t.k0s()),2&x){const y=N.$implicit;t.Y8G("value",y),t.R7$(),t.JRh(y)}}function It(x,N){if(1&x){const y=t.RV6();t.j41(0,"ion-button",36),t.bIt("click",function(){t.eBV(y);const b=t.XpG(3);return t.Njj(b.resetTypeFilter())}),t.nrm(1,"ion-icon",37),t.k0s()}}function Dt(x,N){if(1&x){const y=t.RV6();t.j41(0,"ion-list",27)(1,"ion-item")(2,"ion-label",28),t.EFF(3,"\u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.j41(4,"ion-select",29),t.mxI("ngModelChange",function(b){t.eBV(y);const k=t.XpG(2);return t.DH7(k.selectedType,b)||(k.selectedType=b),t.Njj(b)}),t.bIt("ionChange",function(){t.eBV(y);const b=t.XpG(2);return t.Njj(b.onTypeChange())}),t.DNE(5,xt,2,2,"ion-select-option",30),t.k0s(),t.DNE(6,It,2,0,"ion-button",31),t.k0s(),t.j41(7,"ion-item")(8,"ion-label",28),t.EFF(9,"\u05d6\u05de\u05d9\u05e0\u05d5\u05ea"),t.k0s(),t.j41(10,"ion-segment",32),t.mxI("ngModelChange",function(b){t.eBV(y);const k=t.XpG(2);return t.DH7(k.availabilityFilter,b)||(k.availabilityFilter=b),t.Njj(b)}),t.bIt("ionChange",function(){t.eBV(y);const b=t.XpG(2);return t.Njj(b.onFilterChange())}),t.j41(11,"ion-segment-button",33)(12,"ion-label"),t.EFF(13,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(14,"ion-segment-button",34)(15,"ion-label"),t.EFF(16,"\u05d6\u05de\u05d9\u05df \u05d1\u05dc\u05d1\u05d3"),t.k0s()()()()()}if(2&x){const y=t.XpG(2);t.R7$(4),t.R50("ngModel",y.selectedType),t.R7$(),t.Y8G("ngForOf",y.availableTypes),t.R7$(),t.Y8G("ngIf",y.selectedType),t.R7$(4),t.R50("ngModel",y.availabilityFilter)}}function M(x,N){if(1&x){const y=t.RV6();t.j41(0,"div")(1,"ion-segment",20),t.mxI("ngModelChange",function(b){t.eBV(y);const k=t.XpG();return t.DH7(k.selectedDay,b)||(k.selectedDay=b),t.Njj(b)}),t.bIt("ionChange",function(){t.eBV(y);const b=t.XpG();return t.Njj(b.onDayChange())}),t.DNE(2,lt,5,3,"ion-segment-button",21),t.k0s(),t.j41(3,"div",22)(4,"ion-button",23),t.bIt("click",function(){t.eBV(y);const b=t.XpG();return t.Njj(b.toggleFilterDropdown())}),t.nrm(5,"ion-icon",24),t.EFF(6," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s()(),t.DNE(7,Dt,17,4,"ion-list",25),t.k0s()}if(2&x){const y=t.XpG();t.R7$(),t.R50("ngModel",y.selectedDay),t.R7$(),t.Y8G("ngForOf",y.days),t.R7$(5),t.Y8G("ngIf",y.showDropdown)}}function V(x,N){if(1&x&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&x){const y=N.$implicit;t.R7$(),t.SpI(" ",y," ")}}function ut(x,N){if(1&x&&(t.j41(0,"div",53)(1,"ul"),t.DNE(2,V,2,1,"li",54),t.k0s()()),2&x){const y=t.XpG().$implicit;t.R7$(2),t.Y8G("ngForOf",y.current_participants)}}function _t(x,N){1&x&&(t.qex(0),t.j41(1,"button",55),t.nrm(2,"ion-icon",56),t.EFF(3," \u05e8\u05e9\u05d5\u05dd "),t.k0s(),t.bVm())}function Rt(x,N){1&x&&(t.qex(0),t.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4"),t.bVm())}function Ot(x,N){1&x&&(t.qex(0),t.nrm(1,"ion-spinner",58),t.bVm())}function Lt(x,N){1&x&&(t.qex(0),t.nrm(1,"ion-icon",56),t.bVm())}function Ft(x,N){if(1&x){const y=t.RV6();t.j41(0,"button",57),t.bIt("click",function(){t.eBV(y);const b=t.XpG(2).$implicit,k=t.XpG();return t.Njj(k.enrollUser(b))}),t.DNE(1,Rt,2,0,"ng-container",10)(2,Ot,2,0,"ng-container",10)(3,Lt,2,0,"ng-container",10),t.k0s()}if(2&x){const y=t.XpG(2).$implicit;t.Y8G("disabled",y.isLoading||y.isSuccess)("ngClass",t.l_i(5,L,y.isLoading,y.isSuccess)),t.R7$(),t.Y8G("ngIf",!y.isLoading&&!y.isSuccess),t.R7$(),t.Y8G("ngIf",y.isLoading),t.R7$(),t.Y8G("ngIf",y.isSuccess)}}function ht(x,N){if(1&x&&t.DNE(0,Ft,4,8,"button",52),2&x){const y=t.XpG().$implicit;t.Y8G("ngIf",y.booked<y.total_participants)}}function st(x,N){1&x&&(t.qex(0),t.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d4\u05de\u05ea\u05e0\u05d4"),t.bVm())}function pt(x,N){1&x&&(t.qex(0),t.nrm(1,"ion-spinner",58),t.bVm())}function O(x,N){1&x&&(t.qex(0),t.nrm(1,"ion-icon",56),t.bVm())}function D(x,N){if(1&x){const y=t.RV6();t.j41(0,"button",57),t.bIt("click",function(){let b;t.eBV(y);const k=t.XpG().$implicit,R=t.XpG();return t.Njj(R.addToStandbyList(null!==(b=null==k?null:k.id)&&void 0!==b?b:0,R.userId,R.userEmail))}),t.DNE(1,st,2,0,"ng-container",10)(2,pt,2,0,"ng-container",10)(3,O,2,0,"ng-container",10),t.k0s()}if(2&x){const y=t.XpG(2);t.Y8G("disabled",y.isStandbyLoading||y.isStandbySuccess)("ngClass",t.l_i(5,L,y.isStandbyLoading,y.isStandbySuccess)),t.R7$(),t.Y8G("ngIf",!y.isStandbyLoading&&!y.isStandbySuccess),t.R7$(),t.Y8G("ngIf",y.isStandbyLoading),t.R7$(),t.Y8G("ngIf",y.isStandbySuccess)}}function G(x,N){if(1&x){const y=t.RV6();t.j41(0,"div",38)(1,"div",39)(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"ion-icon",40),t.bIt("click",function(){const b=t.eBV(y).$implicit,k=t.XpG();return t.Njj(k.toggleFavorite(b))}),t.k0s()(),t.j41(5,"div",41)(6,"div",42),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"div",43)(10,"div",44),t.nrm(11,"div",45),t.k0s(),t.j41(12,"div",46)(13,"div",47),t.bIt("mouseenter",function(){const b=t.eBV(y).$implicit,k=t.XpG();return t.Njj(k.showParticipantsPopup(b))})("mouseleave",function(){t.eBV(y);const b=t.XpG();return t.Njj(b.hideParticipantsPopup())}),t.EFF(14),t.nrm(15,"ion-icon",48),t.DNE(16,ut,3,1,"div",49),t.k0s()()()(),t.j41(17,"div",50),t.DNE(18,_t,4,0,"ng-container",51)(19,ht,1,1,"ng-template",null,1,t.C5r)(21,D,4,8,"button",52),t.k0s()()}if(2&x){const y=N.$implicit,u=t.sdS(20),b=t.XpG();t.R7$(3),t.JRh(y.title.name),t.R7$(),t.AVh("favorite",y.favorite),t.R7$(3),t.SpI(" ",t.i5U(8,12,y.start_time,"HH:mm")," "),t.R7$(4),t.xc7("width",b.calculateProgress(y)+"%"),t.R7$(3),t.Lme(" ",y.booked,"/",y.total_participants," "),t.R7$(2),t.Y8G("ngIf",b.isPopupVisible&&b.activeAppointment===y),t.R7$(2),t.Y8G("ngIf",y.isUserBooked)("ngIfElse",u),t.R7$(3),t.Y8G("ngIf",y.booked==y.total_participants)}}let bt=(()=>{var x;class N{constructor(u,b,k,R,P,$,Y,ot){this.platform=u,this.toastController=b,this.ameliaService=k,this.gestureCtrl=R,this.modalCtrl=P,this.http=$,this.authService=Y,this.httpA=ot,this.selectedFilterAllFav="all",this.selectedType="",this.availabilityFilter="all",this.showDropdown=!1,this.availableTypes=[],this.availableTimeslots=[],this.bookedAppointments=[],this.combinedList=[],this.days=[],this.showingParticipants=!1,this.isPopupVisible=!1,this.activeAppointment=null,this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.userEmail="",this.isLoading=!0,this.filteredAppointments=[],this.unfilteredList=[],this.showToast=!1,this.toastMessage="",this.toastColor="success",this.errorMessage="",this.isStandbyLoading=!1,this.isStandbySuccess=!1,this.isEnrollLoading=!1,this.isEnrollSuccess=!1,this.userId=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail()}ngOnInit(){var u=this;return(0,o.A)(function*(){"inactive"==u.authService.getUserRole()&&(u.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd,  \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc",u.presentToast(u.errorMessage,"danger")),u.isLoading=!0,u.trainingsByDay=u.ameliaService.getTrainingsTitles(),(!u.trainingsByDay||Object.keys(u.trainingsByDay).every(b=>0===u.trainingsByDay[b].length))&&(yield u.ameliaService.fetchTitleTrainings(),u.trainingsByDay=u.ameliaService.getTrainingsTitles()),Promise.all([u.fetchAvailableTimeslots(),u.fetchBookedAppointments()]).then(()=>{u.combineTimeslotsAndAppointments(),u.unfilteredList=[...u.combinedList],u.selectedDay=u.days.length>0?u.days[0].date:"",u.updateFilteredAppointments();const b=u.getFavoriteTrainings();u.combinedList.forEach(k=>{k.id&&b.includes(k.id)&&(k.favorite=!0)}),u.isLoading=!1}).catch(()=>{u.isLoading=!1})})()}presentToast(u,b){var k=this;return(0,o.A)(function*(){yield(yield k.toastController.create({message:u,duration:3e3,color:b,position:"bottom"})).present()})()}ngAfterViewInit(){setTimeout(()=>{this.gestureCtrl.create({el:this.popup.nativeElement,gestureName:"swipe-to-close",onMove:b=>{b.deltaY>100&&this.modalCtrl.dismiss()}}).enable(!0)})}getServicesByRole(){const b=localStorage.getItem("user_role")||"guest";return this.http.get(`https://k-studio.co.il/wp-json/angular/v1/get-services/${b}`)}formatDateTimeInIsraelTime(u,b){const k=new Date(`${u}T${b}`),P=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jerusalem",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(k),[$,Y]=P.replace(",","").split(" ");return`${$.replace(/\//g,"-")} ${Y}`}fetchAvailableTimeslots(){var u=this;return(0,o.A)(function*(){const b=new Date,k=new Date(b);k.setDate(b.getDate()+20),new Date(b).setDate(b.getDate()+7);const P=$=>`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String($.getDate()).padStart(2,"0")}`;return new Promise(($,Y)=>{u.getServicesByRole().subscribe(function(){var ot=(0,o.A)(function*(mt){if(0===mt.length)return Y("No service IDs found");const ft=mt.map(rt=>{const et=`${Z.c.apiBaseUrl}/slots&serviceId=${rt}&page=booking&startDateTime=${P(b)}&endDateTime=${P(k)}`;return u.platform.is("cordova")?u.httpA.get(et,{},{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}).then(it=>JSON.parse(it.data)).catch(it=>{Y(`Error fetching timeslots for service ID ${rt}: ${it}`)}):u.http.get(et,{headers:{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}}).toPromise().then(it=>it).catch(it=>{Y(`Error fetching timeslots for service ID ${rt}: ${it}`)})});Promise.all(ft).then(function(){var rt=(0,o.A)(function*(et){u.availableTimeslots=[];for(const it of et)if(it&&it.data&&it.data.slots){const Mt=it.data.slots;for(const Tt of Object.keys(Mt)){const gt=P(new Date(Tt));for(const q of Object.keys(Mt[Tt])){const B=u.formatDateTimeInIsraelTime(gt,q);let kt={name:yield u.getAppointmentTitleByDateTime(Tt,q)};u.availableTimeslots.push({start_time:B,type:"timeslot",title:kt,favorite:!1,current_participants:[],serviceID:12,providerId:169,total_participants:8,booked:0})}}}$()});return function(et){return rt.apply(this,arguments)}}()).catch(rt=>Y(rt))});return function(mt){return ot.apply(this,arguments)}}(),ot=>Y(ot))})})()}fetchBookedAppointments(){var u=this;const b=new Date,k=new Date(b);k.setDate(b.getDate()+30);const R=new Date(b);R.setDate(b.getDate()+7);const P=$=>`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String($.getDate()).padStart(2,"0")}`;return new Promise(($,Y)=>{this.platform.ready().then(()=>{this.getServicesByRole().subscribe(ot=>{const mt=`${Z.c.apiBaseUrl}/appointments&dates=${P(b)},${P(k)}`,ft=this.authService.getCustomerID();this.platform.is("cordova")?this.httpA.get(mt,{},{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}).then(function(){var rt=(0,o.A)(function*(et){const Mt=JSON.parse(et.data).data.appointments,gt=Object.values(Mt).flatMap(q=>q.appointments.flatMap(B=>{const kt="string"==typeof ft?parseInt(ft):ft;console.log("Mobile"),console.log("Normalized Customer ID:",kt),console.log("Booking Data:",B.bookings);const vt=B.bookings.some(tt=>tt.customerId===kt&&"approved"===tt.status);let At;return new Date(B.bookingStart)<=R?u.getAppointmentTitleByAppointment(B).then(tt=>(At=tt,{id:B.id,start_time:B.bookingStart,end_time:B.bookingEnd,type:"appointment",title:{name:At},serviceID:B.serviceId,favorite:!1,current_participants:B.bookings.filter(yt=>"approved"===yt.status).map(yt=>`${yt.customer.firstName} ${yt.customer.lastName}`),total_participants:8,booked:B.bookings.filter(yt=>"approved"===yt.status).length,providerId:B.providerId,isUserBooked:vt})):(At="\u05d0\u05d9\u05de\u05d5\u05df \u05e7\u05d1\u05d5\u05e6\u05ea\u05d9",Promise.resolve({id:B.id,start_time:B.bookingStart,end_time:B.bookingEnd,type:"appointment",title:{name:At},serviceID:B.serviceId,favorite:!1,current_participants:B.bookings.filter(tt=>"approved"===tt.status).map(tt=>`${tt.customer.firstName} ${tt.customer.lastName}`),total_participants:8,booked:B.bookings.filter(tt=>"approved"===tt.status).length,providerId:B.providerId,isUserBooked:vt}))}));u.bookedAppointments=yield Promise.all(gt),$()});return function(et){return rt.apply(this,arguments)}}()).catch(rt=>{Y(`Error fetching appointments: ${rt}`)}):this.http.get(mt,{headers:{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}}).toPromise().then(function(){var rt=(0,o.A)(function*(et){const Tt=Object.values(et.data.appointments).flatMap(gt=>gt.appointments.flatMap(q=>{const B="string"==typeof ft?parseInt(ft):ft;console.log("Computer");const kt=q.bookings.some(dt=>dt.customerId===B&&"approved"===dt.status);let vt;return new Date(q.bookingStart)<=R?u.getAppointmentTitleByAppointment(q).then(dt=>(vt=dt,{id:q.id,start_time:q.bookingStart,end_time:q.bookingEnd,type:"appointment",title:{name:vt},serviceID:q.serviceId,favorite:!1,current_participants:q.bookings.filter(tt=>"approved"===tt.status).map(tt=>`${tt.customer.firstName} ${tt.customer.lastName}`),total_participants:8,booked:q.bookings.filter(tt=>"approved"===tt.status).length,providerId:q.providerId,isUserBooked:kt})):(vt="\u05d0\u05d9\u05de\u05d5\u05df \u05e7\u05d1\u05d5\u05e6\u05ea\u05d9",Promise.resolve({id:q.id,start_time:q.bookingStart,end_time:q.bookingEnd,type:"appointment",title:{name:vt},serviceID:q.serviceId,favorite:!1,current_participants:q.bookings.filter(dt=>"approved"===dt.status).map(dt=>`${dt.customer.firstName} ${dt.customer.lastName}`),total_participants:8,booked:q.bookings.filter(dt=>"approved"===dt.status).length,providerId:q.providerId,isUserBooked:kt}))}));u.bookedAppointments=yield Promise.all(Tt),$()});return function(et){return rt.apply(this,arguments)}}()).catch(rt=>{Y(`Error fetching appointments: ${rt}`)})},ot=>Y(ot))})})}combineTimeslotsAndAppointments(){this.combinedList=[...this.availableTimeslots,...this.bookedAppointments],this.unfilteredList=[...this.combinedList],this.extractAvailableDays(),this.combinedList.sort((u,b)=>new Date(u.start_time).getTime()-new Date(b.start_time).getTime())}extractAvailableDays(){const u=["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],b=(new Date).toISOString().split("T")[0],k=this.combinedList.filter(R=>!isNaN(new Date(R.start_time).getTime())).map(R=>new Date(R.start_time).toISOString().split("T")[0]);this.days=Array.from(new Set(k)).map(R=>{const P=new Date(R);return{date:R,day:u[P.getDay()],formattedDate:`${P.getDate()}.${P.getMonth()+1}`}}),this.days.sort((R,P)=>R.date===b?-1:P.date===b?1:new Date(R.date).getTime()-new Date(P.date).getTime()),this.selectedDay=this.days.length>0?this.days[0].date:""}extractAvailableTypes(){const u=new Set(this.filteredAppointments.map(b=>b.title.name));this.availableTypes=Array.from(u)}getAppointmentsForSelectedDay(){return this.combinedList.filter(u=>{const b=I(u.start_time);return b.isValid()&&b.format("YYYY-MM-DD")===this.selectedDay})}onDayChange(){this.updateFilteredAppointments()}filterFavAll(u){this.selectedFilterAllFav=u.detail.value,this.updateFilteredAppointments()}toggleAvailabilityFilter(){this.availabilityFilter="all"===this.availabilityFilter?"available":"all",this.updateFilteredAppointments()}updateFilteredAppointments(){let u=[...this.unfilteredList];this.selectedDay&&(u=u.filter(b=>I(b.start_time).format("YYYY-MM-DD")===this.selectedDay)),"available"===this.availabilityFilter&&(u=u.filter(b=>b.booked<b.total_participants)),this.selectedType&&(u=u.filter(b=>b.title.name===this.selectedType)),"favorites"===this.selectedFilterAllFav&&(u=u.filter(b=>b.favorite)),this.filteredAppointments=u,this.extractAvailableTypes()}onFilterChange(){this.updateFilteredAppointments()}onTypeChange(){console.log("Selected type:",this.selectedType),this.updateFilteredAppointments()}resetTypeFilter(){this.selectedType="",this.updateFilteredAppointments()}removePastFavorites(){const u=new Date,k=this.getFavoriteTrainings().filter(R=>{const P=this.combinedList.find($=>$.id===R);return P&&new Date(P.start_time)>u});this.saveFavoriteTrainings(k)}closeModal(){document.body.classList.remove("no-scroll"),this.modalCtrl.dismiss()}toggleFavorite(u){u.favorite=!u.favorite;const b=this.getFavoriteTrainings();if(u.favorite)b.push(u.id);else{const k=b.indexOf(u.id);k>-1&&b.splice(k,1)}this.saveFavoriteTrainings(b)}getFavoriteTrainings(){const u=localStorage.getItem("favoriteTrainings");return u?JSON.parse(u):[]}saveFavoriteTrainings(u){localStorage.setItem("favoriteTrainings",JSON.stringify(u))}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}calculateProgress(u){if(!u.current_participants||!u.total_participants)return 0;const b=u.current_participants.length/u.total_participants*100;return b>100?100:b}isFull(u){return u.current_participants>=u.total_participants}showParticipantsPopup(u){this.activeAppointment=u,this.isPopupVisible=!0}hideParticipantsPopup(){this.activeAppointment=null,this.isPopupVisible=!1}getAppointmentTitleByAppointment(u){var b=this;return(0,o.A)(function*(){const k=I(u.bookingStart,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"),R=b.getDayFromDate(k.trim()),P=I(u.bookingStart,"YYYY-MM-DD HH:mm:ss").format("HH:mm");if(b.trainingsByDay[R]){const $=b.trainingsByDay[R].find(Y=>Y.time===P);if($)return $.title}return"\u05db\u05dc\u05dc\u05d9"})()}getDayFromDate(u){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][I(u,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(u,b){var k=this;return(0,o.A)(function*(){const R=I(u,"YYYY-MM-DD").format("DD/MM/YYYY"),P=k.getDayFromDate(R);if(k.trainingsByDay[P]){const $=k.trainingsByDay[P].find(Y=>Y.time===b);if($)return $.title}return"\u05db\u05dc\u05dc\u05d9"})()}addToStandbyList(u,b,k){this.isStandbyLoading=!0,this.isStandbySuccess=!1,this.http.post("https://k-studio.co.il/wp-json/standby-list/v1/add",{appointment_id:u,customer_id:b,email:k}).subscribe($=>{console.log("User added to standby list",$),this.isStandbyLoading=!1,this.isStandbySuccess=!0,setTimeout(()=>{this.isStandbySuccess=!1},2e3)},$=>{console.error("Error adding user to standby list",$),this.isStandbyLoading=!1,this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})}enrollUser(u){u.isLoading=!0,u.isSuccess=!1;let b=u.serviceID;const R=u.start_time.slice(0,16);let P=u.providerId,$=this.authService.getCustomerID(),Y=this.authService.getPackageCustomerId();const ft={type:"appointment",serviceId:b,providerId:P,locationId:null,notifyParticipants:0,bookings:[{customerId:$,status:"approved",duration:3600,persons:1,extras:[],customFields:{},utcOffset:-(new Date).getTimezoneOffset(),packageCustomerService:{packageCustomer:{id:Y}}}],bookingStart:R,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};this.platform.ready().then(()=>{const rt=JSON.stringify(ft);this.http.post("https://k-studio.co.il/wp-json/wn/v1/book-training",rt,{headers:{"Content-Type":"application/json"}}).subscribe(et=>{var it,Mt;if(null!==(it=et.data)&&void 0!==it&&it.timeSlotUnavailable)this.presentToast(et.message||"The time slot is unavailable","danger");else if(null!==(Mt=et.data)&&void 0!==Mt&&Mt.customerAlreadyBooked)this.presentToast(et.message||"You have already booked this training","success");else if(et.message){u.isSuccess=!0,u.current_participants||(u.current_participants=[]),u.booked+=1;const Tt=`${this.authService.getUserFullName()}`;u.current_participants.push(Tt),u.isUserBooked=!0}else u.isSuccess=!0;u.isLoading=!1,setTimeout(()=>{u.isSuccess=!1},2e3)},et=>{console.error("Enrollment failed",JSON.stringify(et)),u.isLoading=!1,this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})})}}return(x=N).\u0275fac=function(u){return new(u||x)(t.rXU(at.OD),t.rXU(S.K_),t.rXU(K.J),t.rXU(S.wH),t.rXU(S.W3),t.rXU(E.Qq),t.rXU(nt.u),t.rXU(J.B))},x.\u0275cmp=t.VBU({type:x,selectors:[["app-trainings"]],viewQuery:function(u,b){if(1&u&&t.GBs(U,5),2&u){let k;t.mGM(k=t.lsd())&&(b.popup=k.first)}},decls:16,vars:4,consts:[["popup",""],["showEnrollButton",""],[1,"popup-modal-trainings"],[1,"drag-handle"],[1,"content-container"],[1,"sticky-header"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","all",1,"header-tab"],["value","favorites",1,"header-tab"],[4,"ngIf"],["class","card",4,"ngFor","ngForOf"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["scrollable","","mode","md",1,"days-tabs",3,"ngModelChange","ionChange","ngModel"],["class","custom-tabs",3,"value",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],["class","filter-dropdown",4,"ngIf"],[1,"custom-tabs",3,"value"],[1,"filter-dropdown"],[2,"text-indent","8px"],["interface","popover","placeholder","\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger","fill","clear",3,"click",4,"ngIf"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","available"],[3,"value"],["color","danger","fill","clear",3,"click"],["name","close-circle"],[1,"card"],[1,"card-header"],["name","heart-outline",3,"click"],[1,"card-content"],[1,"time-date"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress"],[1,"participants-container"],[1,"participants",3,"mouseenter","mouseleave"],["name","people-outline"],["class","participant-popup",4,"ngIf"],[1,"card-footer"],[4,"ngIf","ngIfElse"],["class","action-button",3,"disabled","ngClass","click",4,"ngIf"],[1,"participant-popup"],[4,"ngFor","ngForOf"],["disabled","",1,"action-button","enrolled-button"],["name","checkmark-circle",1,"success-icon"],[1,"action-button",3,"click","disabled","ngClass"],["name","crescent"]],template:function(u,b){if(1&u){const k=t.RV6();t.j41(0,"ion-content",2,0),t.nrm(2,"div",3),t.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"ion-segment",7),t.mxI("ngModelChange",function(P){return t.eBV(k),t.DH7(b.selectedFilterAllFav,P)||(b.selectedFilterAllFav=P),t.Njj(P)}),t.bIt("ionChange",function(P){return t.eBV(k),t.Njj(b.filterFavAll(P))}),t.j41(7,"ion-segment-button",8)(8,"ion-label"),t.EFF(9,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(10,"ion-segment-button",9)(11,"ion-label"),t.EFF(12,"\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd"),t.k0s()()()(),t.DNE(13,X,4,3,"ion-list",10)(14,M,8,3,"div",10)(15,G,22,15,"div",11),t.k0s()()()}2&u&&(t.R7$(6),t.R50("ngModel",b.selectedFilterAllFav),t.R7$(7),t.Y8G("ngIf",b.isLoading),t.R7$(),t.Y8G("ngIf",!b.isLoading),t.R7$(),t.Y8G("ngForOf",b.filteredAppointments))},dependencies:[j.YU,j.Sq,j.bT,H.BC,H.vS,S.Jm,S.W9,S.iq,S.uz,S.he,S.nf,S.AF,S.JI,S.Gp,S.eP,S.Nm,S.Ip,S.ds,S.w2,S.Zx,S.Je,j.vh],styles:['.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#fff}.scrollable-list[_ngcontent-%COMP%]{height:calc(100vh - 130px);overflow-y:auto}.training-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin-bottom:20px;width:100%;box-sizing:border-box}.training-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.favorite-icon[_ngcontent-%COMP%]{font-size:24px;color:#5a5a5a}.training-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;margin-top:-30px;color:#333;font-family:Alef}.training-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:-20px;font-family:Alef}.progress-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}ion-progress-bar[_ngcontent-%COMP%]{--progress-background: #E0E0E0;--background: #9B59B6;border-radius:10px;height:10px;flex-grow:1;margin-left:10px}ion-label[_ngcontent-%COMP%]{font-size:2em;color:#333}ion-button[_ngcontent-%COMP%]{font-weight:700;--border-radius: 25px}.segment-tab[_ngcontent-%COMP%]   .days-tabs[_ngcontent-%COMP%]{overflow-x:hidden;--background: #fff;--border-radius: 10px;margin-top:10px}.filter-segment[_ngcontent-%COMP%]{color:red}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}ion-segment-button[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1em;color:#666;font-weight:700;font-family:Alef}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0;--inner-padding-start: 0;--padding-start: 0;--padding-end: 0;padding:0}.header-tab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.custom-tabs[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 4px 12px #0000000d;position:relative;--background-activated: transparent;--background-focused: transparent;--background: transparent;font-size:1em;--color-checked: #333;--color: #666;padding-bottom:10px;width:90%;margin-left:10px;--indicator-color: transparent}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto auto}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.clear-filter-icon[_ngcontent-%COMP%]{font-size:24px;color:#e74c3c;margin-left:10px;cursor:pointer}.filter-dropdown[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999;--color: #333;--background: #fff;--border-radius: 10px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1)}.popup-modal-trainings[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:10px;height:1px;background-color:transparent;border-radius:2.5px;margin:0 auto 10px}.content-container[_ngcontent-%COMP%]{padding:15px;justify-content:center}ion-content[_ngcontent-%COMP%]{--background: white}ion-tab-bar[_ngcontent-%COMP%]{--background: #fff;--color-selected: #3498db;--color: #666}ion-tab-button[_ngcontent-%COMP%]{--color-selected: #666;--color: #666}.card[_ngcontent-%COMP%]{background-color:#fff;padding:15px;margin:10px 0;border-radius:12px;box-shadow:0 4px 8px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;font-family:Alef}.card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;cursor:pointer}.card-header[_ngcontent-%COMP%]   ion-icon.favorite[_ngcontent-%COMP%]{color:red}.time-date[_ngcontent-%COMP%]{font-size:14px;color:gray}.segment-button[_ngcontent-%COMP%]:not(.segment-button-checked):after{height:0}.progress-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.progress-bar[_ngcontent-%COMP%]{width:80%;background-color:#e0e0e0;border-radius:8px;height:6px}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:6px;border-radius:8px;background-color:#59c7cd}.participants[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.participants[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:4px}.card-footer[_ngcontent-%COMP%]{margin-top:10px}.action-button[_ngcontent-%COMP%]{width:100%;background-color:#454545;color:#fff;border:none;padding:10px;border-radius:8px;text-align:center;font-size:14px;cursor:pointer;transition:background-color .3s ease}.action-button.loading[_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.action-button.success[_ngcontent-%COMP%]{background-color:#4caf50}.success-icon[_ngcontent-%COMP%]{color:#fff;font-size:14px}ion-spinner[_ngcontent-%COMP%]{height:10px;width:10px}.action-button.full[_ngcontent-%COMP%]{background-color:#757575}.enrolled-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;cursor:not-allowed}.participants-container[_ngcontent-%COMP%]{background-color:#c5c5c563;position:relative;width:50px;border-radius:7px}.participant-popup[_ngcontent-%COMP%]{position:absolute;top:-10px;left:60px;background-color:#fff;border:none;padding:12px;box-shadow:0 8px 16px #00000026;width:180px;z-index:10;border-radius:12px;transition:opacity .3s ease,transform .3s ease;opacity:0;transform:translateY(-10px)}.participant-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px}.participant-popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.participant-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.participants[_ngcontent-%COMP%]{cursor:pointer;position:relative;justify-content:center}.participants[_ngcontent-%COMP%]:hover{text-decoration:underline}.participants[_ngcontent-%COMP%]:hover   .participant-popup[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}']}),N})()},5312:(Ct,ct,g)=>{g.d(ct,{c:()=>o});const o={production:!0,apiBaseUrl:"https://k-studio.co.il/wp-admin/admin-ajax.php?action=wpamelia_api&call=/api/v1"}},9584:(Ct,ct,g)=>{g.d(ct,{B:()=>H});var o=g(8359);class I extends o.yU{constructor(T,L){super()}schedule(T,L=0){return this}}const Q={setInterval(U,T,...L){const{delegate:F}=Q;return null!=F&&F.setInterval?F.setInterval(U,T,...L):setInterval(U,T,...L)},clearInterval(U){const{delegate:T}=Q;return((null==T?void 0:T.clearInterval)||clearInterval)(U)},delegate:void 0};var Z=g(7908);const at={now:()=>(at.delegate||Date).now(),delegate:void 0};class S{constructor(T,L=S.now){this.schedulerActionCtor=T,this.now=L}schedule(T,L=0,F){return new this.schedulerActionCtor(this,T).schedule(F,L)}}S.now=at.now;const E=new class K extends S{constructor(T,L=S.now){super(T,L),this.actions=[],this._active=!1}flush(T){const{actions:L}=this;if(this._active)return void L.push(T);let F;this._active=!0;do{if(F=T.execute(T.state,T.delay))break}while(T=L.shift());if(this._active=!1,F){for(;T=L.shift();)T.unsubscribe();throw F}}}(class t extends I{constructor(T,L){super(T,L),this.scheduler=T,this.work=L,this.pending=!1}schedule(T,L=0){var F;if(this.closed)return this;this.state=T;const X=this.id,lt=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(lt,X,L)),this.pending=!0,this.delay=L,this.id=null!==(F=this.id)&&void 0!==F?F:this.requestAsyncId(lt,this.id,L),this}requestAsyncId(T,L,F=0){return Q.setInterval(T.flush.bind(T,this),F)}recycleAsyncId(T,L,F=0){if(null!=F&&this.delay===F&&!1===this.pending)return L;null!=L&&Q.clearInterval(L)}execute(T,L){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const F=this._execute(T,L);if(F)return F;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(T,L){let X,F=!1;try{this.work(T)}catch(lt){F=!0,X=lt||new Error("Scheduled action threw falsy error")}if(F)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:T,scheduler:L}=this,{actions:F}=L;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Z.o)(F,this),null!=T&&(this.id=this.recycleAsyncId(L,T,null)),this.delay=null,super.unsubscribe()}}});var J=g(9974),j=g(4360);function H(U,T=E){return(0,J.N)((L,F)=>{let X=null,lt=null,xt=null;const It=()=>{if(X){X.unsubscribe(),X=null;const M=lt;lt=null,F.next(M)}};function Dt(){const M=xt+U,V=T.now();if(V<M)return X=this.schedule(void 0,M-V),void F.add(X);It()}L.subscribe((0,j._)(F,M=>{lt=M,xt=T.now(),X||(X=T.schedule(Dt,U),F.add(X))},()=>{It(),F.complete()},void 0,()=>{lt=X=null}))})}},5262:(Ct,ct,g)=>{g.d(ct,{Bu:()=>$,Q_:()=>z,_G:()=>Zt,w6:()=>Wt});var o=g(177),I=g(3953),Q=g(6860),Z=g(1413),t=g(8359),K=(g(4402),g(7673),g(7336)),E=g(8141),nt=g(9584),J=g(5964),j=g(6354),H=g(6697),T=g(4085),L=g(4572),F=g(8793),X=g(1985),xt=g(9172),It=g(6977);const M=new Set;let V,ut=(()=>{var p;class i{constructor(c,_){this._platform=c,this._nonce=_,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rt}matchMedia(c){return(this._platform.WEBKIT||this._platform.BLINK)&&function _t(p,i){if(!M.has(p))try{V||(V=document.createElement("style"),i&&V.setAttribute("nonce",i),V.setAttribute("type","text/css"),document.head.appendChild(V)),V.sheet&&(V.sheet.insertRule(`@media ${p} {body{ }}`,0),M.add(p))}catch(s){console.error(s)}}(c,this._nonce),this._matchMedia(c)}}return(p=i).\u0275fac=function(c){return new(c||p)(I.KVO(Q.OD),I.KVO(I.BIS,8))},p.\u0275prov=I.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),i})();function Rt(p){return{matches:"all"===p||""===p,media:p,addListener:()=>{},removeListener:()=>{}}}let Ot=(()=>{var p;class i{constructor(c,_){this._mediaMatcher=c,this._zone=_,this._queries=new Map,this._destroySubject=new Z.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(c){return Lt((0,T.FG)(c)).some(v=>this._registerQuery(v).mql.matches)}observe(c){const v=Lt((0,T.FG)(c)).map(C=>this._registerQuery(C).observable);let A=(0,L.z)(v);return A=(0,F.x)(A.pipe((0,H.s)(1)),A.pipe(function lt(p){return(0,J.p)((i,s)=>p<=s)}(1),(0,nt.B)(0))),A.pipe((0,j.T)(C=>{const W={matches:!1,breakpoints:{}};return C.forEach(({matches:Et,query:Bt})=>{W.matches=W.matches||Et,W.breakpoints[Bt]=Et}),W}))}_registerQuery(c){if(this._queries.has(c))return this._queries.get(c);const _=this._mediaMatcher.matchMedia(c),A={observable:new X.c(C=>{const W=Et=>this._zone.run(()=>C.next(Et));return _.addListener(W),()=>{_.removeListener(W)}}).pipe((0,xt.Z)(_),(0,j.T)(({matches:C})=>({query:c,matches:C})),(0,It.Q)(this._destroySubject)),mql:_};return this._queries.set(c,A),A}}return(p=i).\u0275fac=function(c){return new(c||p)(I.KVO(ut),I.KVO(I.SKi))},p.\u0275prov=I.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),i})();function Lt(p){return p.map(i=>i.split(",")).reduce((i,s)=>i.concat(s)).map(i=>i.trim())}class k{constructor(i,s){this._letterKeyStream=new Z.B,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new Z.B,this.selectedItem=this._selectedItem;const c="number"==typeof(null==s?void 0:s.debounceInterval)?s.debounceInterval:200;null!=s&&s.skipPredicate&&(this._skipPredicateFn=s.skipPredicate),this.setItems(i),this._setupKeyHandler(c)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const s=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(s>=K.A&&s<=K.Z||s>=K.f2&&s<=K.bn)&&this._letterKeyStream.next(String.fromCharCode(s))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe((0,E.M)(s=>this._pressedLetters.push(s)),(0,nt.B)(i),(0,J.p)(()=>this._pressedLetters.length>0),(0,j.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(s=>{for(let v=1;v<this._items.length+1;v++){var c,_;const C=this._items[(this._selectedItemIndex+v)%this._items.length];if((null===(c=this._skipPredicateFn)||void 0===c||!c.call(this,C))&&0===(null===(_=C.getLabel)||void 0===_?void 0:_.call(C).toLocaleUpperCase().trim().indexOf(s))){this._selectedItem.next(C);break}}this._pressedLetters=[]})}}class R{constructor(i,s){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=t.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=c=>c.disabled,this.tabOut=new Z.B,this.change=new Z.B,i instanceof I.rOR?this._itemChangesSubscription=i.changes.subscribe(c=>this._itemsChanged(c.toArray())):(0,I.Hps)(i)&&(this._effectRef=(0,I.QZP)(()=>this._itemsChanged(i()),{injector:s}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();const s=this._getItemsArray();return this._typeahead=new k(s,{debounceInterval:"number"==typeof i?i:void 0,skipPredicate:c=>this._skipPredicateFn(c)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(c=>{this.setActiveItem(c)}),this}cancelTypeahead(){var i;return null===(i=this._typeahead)||void 0===i||i.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,s=10){return this._pageUpAndDown={enabled:i,delta:s},this}setActiveItem(i){const s=this._activeItem;this.updateActiveItem(i),this._activeItem!==s&&this.change.next(this._activeItemIndex)}onKeydown(i){var s;const c=i.keyCode,v=["altKey","ctrlKey","metaKey","shiftKey"].every(C=>!i[C]||this._allowedModifierKeys.indexOf(C)>-1);switch(c){case K.wn:return void this.tabOut.next();case K.n6:if(this._vertical&&v){this.setNextItemActive();break}return;case K.i7:if(this._vertical&&v){this.setPreviousItemActive();break}return;case K.LE:if(this._horizontal&&v){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case K.UQ:if(this._horizontal&&v){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case K.yZ:if(this._homeAndEnd&&v){this.setFirstItemActive();break}return;case K.Kp:if(this._homeAndEnd&&v){this.setLastItemActive();break}return;case K.w_:if(this._pageUpAndDown.enabled&&v){const C=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(C>0?C:0,1);break}return;case K.dB:if(this._pageUpAndDown.enabled&&v){const C=this._activeItemIndex+this._pageUpAndDown.delta,W=this._getItemsArray().length;this._setActiveItemByIndex(C<W?C:W-1,-1);break}return;default:var A;return void((v||(0,K.rp)(i,"shiftKey"))&&(null===(A=this._typeahead)||void 0===A||A.handleKey(i)))}null===(s=this._typeahead)||void 0===s||s.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){var s;const c=this._getItemsArray(),_="number"==typeof i?i:c.indexOf(i),v=c[_];this._activeItem=null==v?null:v,this._activeItemIndex=_,null===(s=this._typeahead)||void 0===s||s.setCurrentSelectedItemIndex(_)}destroy(){var i,s,c;this._typeaheadSubscription.unsubscribe(),null===(i=this._itemChangesSubscription)||void 0===i||i.unsubscribe(),null===(s=this._effectRef)||void 0===s||s.destroy(),null===(c=this._typeahead)||void 0===c||c.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const s=this._getItemsArray();for(let c=1;c<=s.length;c++){const _=(this._activeItemIndex+i*c+s.length)%s.length;if(!this._skipPredicateFn(s[_]))return void this.setActiveItem(_)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,s){const c=this._getItemsArray();if(c[i]){for(;this._skipPredicateFn(c[i]);)if(!c[i+=s])return;this.setActiveItem(i)}}_getItemsArray(){return(0,I.Hps)(this._items)?this._items():this._items instanceof I.rOR?this._items.toArray():this._items}_itemsChanged(i){var s;if(null===(s=this._typeahead)||void 0===s||s.setItems(i),this._activeItem){const _=i.indexOf(this._activeItem);var c;_>-1&&_!==this._activeItemIndex&&(this._activeItemIndex=_,null===(c=this._typeahead)||void 0===c||c.setCurrentSelectedItemIndex(_))}}}class $ extends R{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}function Zt(p){return 0===p.buttons||0===p.detail}function Wt(p){const i=p.touches&&p.touches[0]||p.changedTouches&&p.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}var r=function(p){return p[p.NONE=0]="NONE",p[p.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",p[p.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",p}(r||{});const l="cdk-high-contrast-black-on-white",f="cdk-high-contrast-white-on-black",w="cdk-high-contrast-active";let z=(()=>{var p;class i{constructor(c,_){this._platform=c,this._document=_,this._breakpointSubscription=(0,I.WQX)(Ot).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return r.NONE;const c=this._document.createElement("div");c.style.backgroundColor="rgb(1,2,3)",c.style.position="absolute",this._document.body.appendChild(c);const _=this._document.defaultView||window,v=_&&_.getComputedStyle?_.getComputedStyle(c):null,A=(v&&v.backgroundColor||"").replace(/ /g,"");switch(c.remove(),A){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return r.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return r.BLACK_ON_WHITE}return r.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const c=this._document.body.classList;c.remove(w,l,f),this._hasCheckedHighContrastMode=!0;const _=this.getHighContrastMode();_===r.BLACK_ON_WHITE?c.add(w,l):_===r.WHITE_ON_BLACK&&c.add(w,f)}}}return(p=i).\u0275fac=function(c){return new(c||p)(I.KVO(Q.OD),I.KVO(o.qQ))},p.\u0275prov=I.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),i})()},4085:(Ct,ct,g)=>{g.d(ct,{FG:()=>t,OE:()=>Q,he:()=>I,i8:()=>S});var o=g(3953);function I(E){return null!=E&&"false"!=`${E}`}function Q(E,nt=0){return function Z(E){return!isNaN(parseFloat(E))&&!isNaN(Number(E))}(E)?Number(E):2===arguments.length?nt:0}function t(E){return Array.isArray(E)?E:[E]}function S(E){return E instanceof o.aKT?E.nativeElement:E}},7336:(Ct,ct,g)=>{g.d(ct,{A:()=>N,A$:()=>K,FX:()=>at,Fm:()=>t,Ge:()=>Nt,Kp:()=>T,LE:()=>lt,UQ:()=>F,W3:()=>S,Z:()=>yt,bn:()=>O,dB:()=>U,eg:()=>ce,f2:()=>ut,i7:()=>X,n6:()=>xt,rp:()=>le,t6:()=>j,w_:()=>H,wn:()=>Q,yZ:()=>L});const Q=9,t=13,at=16,S=17,K=18,j=32,H=33,U=34,T=35,L=36,F=37,X=38,lt=39,xt=40,ut=48,O=57,N=65,yt=90,Nt=91,ce=224;function le(Yt,...se){return se.length?se.some(de=>Yt[de]):Yt.altKey||Yt.shiftKey||Yt.ctrlKey||Yt.metaKey}},6860:(Ct,ct,g)=>{g.d(ct,{BQ:()=>J,Fb:()=>It,OD:()=>Z,v8:()=>Dt,vc:()=>xt});var o=g(3953),I=g(177);let Q;try{Q=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Q=!1}let E,Z=(()=>{var M;class V{constructor(_t){this._platformId=_t,this.isBrowser=this._platformId?(0,I.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Q)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(M=V).\u0275fac=function(_t){return new(_t||M)(o.KVO(o.Agw))},M.\u0275prov=o.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),V})();function J(M){return function nt(){if(null==E&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>E=!0}))}finally{E=E||!1}return E}()?M:!!M.capture}function xt(){let M=typeof document<"u"&&document?document.activeElement:null;for(;M&&M.shadowRoot;){const V=M.shadowRoot.activeElement;if(V===M)break;M=V}return M}function It(M){return M.composedPath?M.composedPath()[0]:M.target}function Dt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},8834:(Ct,ct,g)=>{g.d(ct,{Hl:()=>ht});var o=g(3953),I=g(8820);let ht=(()=>{var st;class pt{}return(st=pt).\u0275fac=function(D){return new(D||st)},st.\u0275mod=o.$C({type:st}),st.\u0275inj=o.G2t({imports:[I.yE,I.pZ,I.yE]}),pt})()},8820:(Ct,ct,g)=>{g.d(ct,{$E:()=>Ut,yE:()=>Ft,O5:()=>$t,pZ:()=>Vt,ug:()=>St});var o=g(3953),I=g(5262),Q=g(177);let nt=(()=>{var n;class a{}return(n=a).\u0275fac=function(l){return new(l||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({}),a})();var j=g(6860),H=g(4085);const Lt=new o.nKC("mat-sanity-checks",{providedIn:"root",factory:function Ot(){return!0}});let Ft=(()=>{var n;class a{constructor(l,f,w){this._sanityChecks=f,this._document=w,this._hasDoneGlobalChecks=!1,l._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(l){return!(0,j.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[l])}}return(n=a).\u0275fac=function(l){return new(l||n)(o.KVO(I.Q_),o.KVO(Lt,8),o.KVO(Q.qQ))},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[nt,nt]}),a})();var B=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(B||{});class kt{constructor(a,r,l,f=!1){this._renderer=a,this.element=r,this.config=l,this._animationForciblyDisabledThroughCss=f,this.state=B.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const vt=(0,j.BQ)({passive:!0,capture:!0});class At{constructor(){this._events=new Map,this._delegateEventHandler=a=>{const r=(0,j.Fb)(a);var l;r&&(null===(l=this._events.get(a.type))||void 0===l||l.forEach((f,w)=>{(w===r||w.contains(r))&&f.forEach(z=>z.handleEvent(a))}))}}addHandler(a,r,l,f){const w=this._events.get(r);if(w){const z=w.get(l);z?z.add(f):w.set(l,new Set([f]))}else this._events.set(r,new Map([[l,new Set([f])]])),a.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,vt)})}removeHandler(a,r,l){const f=this._events.get(a);if(!f)return;const w=f.get(r);w&&(w.delete(l),0===w.size&&f.delete(r),0===f.size&&(this._events.delete(a),document.removeEventListener(a,this._delegateEventHandler,vt)))}}const dt={enterDuration:225,exitDuration:150},yt=(0,j.BQ)({passive:!0,capture:!0}),Nt=["mousedown","touchstart"],jt=["mouseup","mouseleave","touchend","touchcancel"];class St{constructor(a,r,l,f){this._target=a,this._ngZone=r,this._platform=f,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,f.isBrowser&&(this._containerElement=(0,H.i8)(l))}fadeInRipple(a,r,l={}){const f=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),w={...dt,...l.animation};l.centered&&(a=f.left+f.width/2,r=f.top+f.height/2);const z=l.radius||function Pt(n,a,r){const l=Math.max(Math.abs(n-r.left),Math.abs(n-r.right)),f=Math.max(Math.abs(a-r.top),Math.abs(a-r.bottom));return Math.sqrt(l*l+f*f)}(a,r,f),wt=a-f.left,p=r-f.top,i=w.enterDuration,s=document.createElement("div");s.classList.add("mat-ripple-element"),s.style.left=wt-z+"px",s.style.top=p-z+"px",s.style.height=2*z+"px",s.style.width=2*z+"px",null!=l.color&&(s.style.backgroundColor=l.color),s.style.transitionDuration=`${i}ms`,this._containerElement.appendChild(s);const c=window.getComputedStyle(s),v=c.transitionDuration,A="none"===c.transitionProperty||"0s"===v||"0s, 0s"===v||0===f.width&&0===f.height,C=new kt(this,s,l,A);s.style.transform="scale3d(1, 1, 1)",C.state=B.FADING_IN,l.persistent||(this._mostRecentTransientRipple=C);let W=null;return!A&&(i||w.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Et=()=>{W&&(W.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(C)},Bt=()=>this._destroyRipple(C),re=setTimeout(Bt,i+100);s.addEventListener("transitionend",Et),s.addEventListener("transitioncancel",Bt),W={onTransitionEnd:Et,onTransitionCancel:Bt,fallbackTimer:re}}),this._activeRipples.set(C,W),(A||!i)&&this._finishRippleTransition(C),C}fadeOutRipple(a){if(a.state===B.FADING_OUT||a.state===B.HIDDEN)return;const r=a.element,l={...dt,...a.config.animation};r.style.transitionDuration=`${l.exitDuration}ms`,r.style.opacity="0",a.state=B.FADING_OUT,(a._animationForciblyDisabledThroughCss||!l.exitDuration)&&this._finishRippleTransition(a)}fadeOutAll(){this._getActiveRipples().forEach(a=>a.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(a=>{a.config.persistent||a.fadeOut()})}setupTriggerEvents(a){const r=(0,H.i8)(a);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,Nt.forEach(l=>{St._eventManager.addHandler(this._ngZone,l,r,this)}))}handleEvent(a){"mousedown"===a.type?this._onMousedown(a):"touchstart"===a.type?this._onTouchStart(a):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{jt.forEach(r=>{this._triggerElement.addEventListener(r,this,yt)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(a){a.state===B.FADING_IN?this._startFadeOutTransition(a):a.state===B.FADING_OUT&&this._destroyRipple(a)}_startFadeOutTransition(a){const r=a===this._mostRecentTransientRipple,{persistent:l}=a.config;a.state=B.VISIBLE,!l&&(!r||!this._isPointerDown)&&a.fadeOut()}_destroyRipple(a){var r;const l=null!==(r=this._activeRipples.get(a))&&void 0!==r?r:null;this._activeRipples.delete(a),this._activeRipples.size||(this._containerRect=null),a===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),a.state=B.HIDDEN,null!==l&&(a.element.removeEventListener("transitionend",l.onTransitionEnd),a.element.removeEventListener("transitioncancel",l.onTransitionCancel),null!==l.fallbackTimer&&clearTimeout(l.fallbackTimer)),a.element.remove()}_onMousedown(a){const r=(0,I._G)(a),l=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!l&&(this._isPointerDown=!0,this.fadeInRipple(a.clientX,a.clientY,this._target.rippleConfig))}_onTouchStart(a){if(!this._target.rippleDisabled&&!(0,I.w6)(a)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const r=a.changedTouches;if(r)for(let l=0;l<r.length;l++)this.fadeInRipple(r[l].clientX,r[l].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(a=>{!a.config.persistent&&(a.state===B.VISIBLE||a.config.terminateOnPointerUp&&a.state===B.FADING_IN)&&a.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const a=this._triggerElement;a&&(Nt.forEach(r=>St._eventManager.removeHandler(r,a,this)),this._pointerUpEventsRegistered&&(jt.forEach(r=>a.removeEventListener(r,this,yt)),this._pointerUpEventsRegistered=!1))}}St._eventManager=new At;const Ut=new o.nKC("mat-ripple-global-options");let Vt=(()=>{var n;class a{}return(n=a).\u0275fac=function(l){return new(l||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[Ft,Ft]}),a})(),$t=(()=>{var n;class a{}return(n=a).\u0275fac=function(l){return new(l||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[Ft]}),a})()},2054:(Ct,ct,g)=>{g.d(ct,{Fg:()=>qt});var o=g(3953),Z=(g(4085),g(6860),g(8820));g(8359),g(6365),g(8750),g(983),g(3794),g(6648),g(1413),g(1985),g(6354),g(5964),g(9584);let X=(()=>{var d;class m{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return(d=m).\u0275fac=function(e){return new(e||d)},d.\u0275prov=o.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),m})(),It=(()=>{var d;class m{}return(d=m).\u0275fac=function(e){return new(e||d)},d.\u0275mod=o.$C({type:d}),d.\u0275inj=o.G2t({providers:[X]}),m})();var Dt=g(177);let V=(()=>{var d;class m{}return(d=m).\u0275fac=function(e){return new(e||d)},d.\u0275mod=o.$C({type:d}),d.\u0275inj=o.G2t({imports:[Z.yE,Z.yE]}),m})();g(5262),g(4402),g(7673),g(7336),g(4341),g(6977);let qt=(()=>{var d;class m{}return(d=m).\u0275fac=function(e){return new(e||d)},d.\u0275mod=o.$C({type:d}),d.\u0275inj=o.G2t({imports:[It,Dt.MD,Z.yE,Z.pZ,Z.O5,V]}),m})()},5911:(Ct,ct,g)=>{g.d(ct,{s5:()=>K});var o=g(3953),I=g(8820);let K=(()=>{var E;class nt{}return(E=nt).\u0275fac=function(j){return new(j||E)},E.\u0275mod=o.$C({type:E}),E.\u0275inj=o.G2t({imports:[I.yE,I.yE]}),nt})()}}]);