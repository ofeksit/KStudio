"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[240],{240:(R,C,u)=>{u.r(C),u.d(C,{HomePageModule:()=>Xn});var h=u(177),c=u(9417),v=u(2054),_=u(8834),I=u(5911),l=u(791),t=u(3953),p=u(8820);let Nt=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[p.yE,h.MD,p.yE]}),a})();var X=u(685),k=u(467),Pt=u(8132);function Bt(o,a){1&o&&(t.j41(0,"p",5),t.EFF(1,"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05d4\u05ea\u05e8\u05d0\u05d5\u05ea"),t.k0s())}function Rt(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-item-sliding",null,1)(2,"ion-item-options",7)(3,"ion-item-option",8),t.bIt("click",function(){const i=t.eBV(n).index,r=t.sdS(1),s=t.XpG(2);return t.Njj(s.deleteNotification(i,r))}),t.j41(4,"button",9),t.bIt("click",function(){const i=t.eBV(n).index,r=t.sdS(1),s=t.XpG(2);return t.Njj(s.deleteNotification(i,r))}),t.nrm(5,"ion-icon",10),t.k0s()()(),t.j41(6,"ion-item"),t.nrm(7,"ion-icon",11),t.j41(8,"ion-label")(9,"h2",12),t.EFF(10),t.k0s(),t.j41(11,"p",13),t.EFF(12),t.k0s()()()()}if(2&o){const n=a.$implicit;t.R7$(10),t.JRh(n.title),t.R7$(2),t.JRh(n.message)}}function Lt(o,a){if(1&o&&(t.j41(0,"ion-list"),t.DNE(1,Rt,13,2,"ion-item-sliding",6),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.notifications)}}let Gt=(()=>{var o;class a{constructor(e){this.modalCtrl=e,this.notifications=[]}ngOnInit(){this.notifications=JSON.parse(localStorage.getItem("notifications")||"[]")}deleteNotification(e,i){this.notifications.splice(e,1),localStorage.setItem("notifications",JSON.stringify(this.notifications)),i.close()}dismiss(){this.modalCtrl.dismiss()}}return(o=a).\u0275fac=function(e){return new(e||o)(t.rXU(l.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-notification-popup"]],decls:4,vars:2,consts:[["popup",""],["slidingItem",""],[1,"notification-popup-content"],["class","no-notifications",4,"ngIf"],[4,"ngIf"],[1,"no-notifications"],[4,"ngFor","ngForOf"],["side","start"],["color","danger",3,"click"],["ion-button","",1,"trash-icon",3,"click"],["name","trash"],["name","megaphone-outline","slot","start"],[1,"notification-title"],[1,"notification-desc"]],template:function(e,i){1&e&&(t.j41(0,"ion-content",2,0),t.DNE(2,Bt,2,0,"p",3)(3,Lt,2,1,"ion-list",4),t.k0s()),2&e&&(t.R7$(2),t.Y8G("ngIf",!i.notifications||0===i.notifications.length),t.R7$(),t.Y8G("ngIf",i.notifications&&i.notifications.length>0))},dependencies:[h.Sq,h.bT,l.W9,l.iq,l.uz,l.LU,l.CE,l.A7,l.he,l.nf],styles:[".notification-popup-content[_ngcontent-%COMP%]{background-color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;padding:20px;box-shadow:0 -5px 20px #0003}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:50vh;top:auto;bottom:0;border-top-left-radius:20px;border-top-right-radius:20px;transition:height .3s ease-in-out}.no-notifications[_ngcontent-%COMP%]{font-family:Alef;text-align:center;padding-top:150px;color:gray}.notification-title[_ngcontent-%COMP%]{color:#3a3a3a;font-family:Alef;font-size:1.5em}button.trash-icon[_ngcontent-%COMP%]{background:none}.notification-desc[_ngcontent-%COMP%]{color:#000;font-family:Alef;font-size:1em}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .4s ease-out}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}"]}),a})();var $t=u(6387),ht=u(334);const Ht=["modalContainer"];let Vt=(()=>{var o;class a{constructor(e){this.modalController=e,this.title="",this.content="",this.color="",this.originalMarginTop="50%"}ngOnInit(){this.handleKeyboardEvents()}ngOnDestroy(){this.removeKeyboardListeners()}saveChanges(){this.onSave(this.title,this.content,this.color),this.modalController.dismiss()}closeModal(){this.modalController.dismiss()}handleKeyboardEvents(){ht.s3.addListener("keyboardWillShow",e=>{this.adjustModalPosition(e.keyboardHeight)}),ht.s3.addListener("keyboardWillHide",()=>{this.resetModalPosition()}),window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{window.visualViewport&&window.visualViewport.height<window.innerHeight?this.adjustModalPosition(window.innerHeight-window.visualViewport.height):this.resetModalPosition()})}removeKeyboardListeners(){ht.s3.removeAllListeners(),window.visualViewport&&window.visualViewport.removeEventListener("resize",()=>{})}adjustModalPosition(e){this.modalContainer&&(this.modalContainer.nativeElement.style.marginTop=`calc(50% - ${e/2}px)`)}resetModalPosition(){this.modalContainer&&(this.modalContainer.nativeElement.style.marginTop=this.originalMarginTop)}}return(o=a).\u0275fac=function(e){return new(e||o)(t.rXU(l.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-note"]],viewQuery:function(e,i){if(1&e&&t.GBs(Ht,7),2&e){let r;t.mGM(r=t.lsd())&&(i.modalContainer=r.first)}},inputs:{title:"title",content:"content",color:"color",onSave:"onSave"},decls:18,vars:2,consts:[["modalContainer",""],[1,"edit-modal-content",3,"click"],[1,"modal-wrapper"],[1,"edit-note-modal","animate-modal",3,"click"],[1,"modal-header"],[1,"header-title"],[1,"form-content"],[1,"titleNotes"],[1,"input-field"],[3,"ngModelChange","ngModel"],["rows","6",1,"input-field-content",3,"ngModelChange","ngModel"],["expand","block",1,"save-button",3,"click"]],template:function(e,i){if(1&e){const r=t.RV6();t.j41(0,"ion-content",1),t.bIt("click",function(){return t.eBV(r),t.Njj(i.closeModal())}),t.j41(1,"div",2)(2,"div",3,0),t.bIt("click",function(d){return t.eBV(r),t.Njj(d.stopPropagation())}),t.j41(4,"div",4)(5,"span",5),t.EFF(6,"\u05e2\u05e8\u05d5\u05da \u05e4\u05ea\u05e7"),t.k0s()(),t.j41(7,"div",6)(8,"ion-label",7),t.EFF(9,"\u05db\u05d5\u05ea\u05e8\u05ea"),t.k0s(),t.j41(10,"ion-item",8)(11,"ion-input",9),t.mxI("ngModelChange",function(d){return t.eBV(r),t.DH7(i.title,d)||(i.title=d),t.Njj(d)}),t.k0s()(),t.j41(12,"ion-label",7),t.EFF(13,"\u05ea\u05d5\u05db\u05df"),t.k0s(),t.j41(14,"ion-item",8)(15,"ion-textarea",10),t.mxI("ngModelChange",function(d){return t.eBV(r),t.DH7(i.content,d)||(i.content=d),t.Njj(d)}),t.k0s()()(),t.j41(16,"ion-button",11),t.bIt("click",function(){return t.eBV(r),t.Njj(i.saveChanges())}),t.EFF(17," \u05e9\u05de\u05d5\u05e8 "),t.k0s()()()()}2&e&&(t.R7$(11),t.R50("ngModel",i.title),t.R7$(4),t.R50("ngModel",i.content))},dependencies:[c.BC,c.vS,l.Jm,l.W9,l.$w,l.uz,l.he,l.nc,l.Gw],styles:['.edit-modal-content[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, .5);display:flex;align-items:flex-end;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.modal-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.edit-modal-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.edit-note-modal[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:500px;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -4px 16px #0000001a;position:absolute;bottom:0}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{font-size:24px;color:#666}.modal-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{flex:1;text-align:center;color:#000;font-size:18px;font-weight:600;font-family:Alef}.titleNotes[_ngcontent-%COMP%]{padding-right:10px;font-weight:600;font-family:Alef}ion-textarea[_ngcontent-%COMP%]{margin-right:10px}ion-input[_ngcontent-%COMP%]{margin-right:10px}.form-content[_ngcontent-%COMP%]{padding:16px}.form-content[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{--background: white;--border-color: #eee;--border-width: 1px;--border-style: solid;--border-radius: 8px;--padding-start: 0;margin-bottom:16px}.form-content[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-content[_ngcontent-%COMP%]   .input-field-content[_ngcontent-%COMP%]{--background: white;--border-color: #eee;--border-width: 1px;--border-style: solid;--border-radius: 8px;--padding-start: 0;margin-bottom:16px;max-height:400px}.save-button[_ngcontent-%COMP%]{margin:16px;--border-radius: 8px;--background: #424242}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}']}),a})();var z=u(7586);class T{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(a,n=!1){return this.onePassHasher.start().appendStr(a).end(n)}static hashAsciiStr(a,n=!1){return this.onePassHasher.start().appendAsciiStr(a).end(n)}static _hex(a){const n=T.hexChars,e=T.hexOut;let i,r,s,d;for(d=0;d<4;d+=1)for(r=8*d,i=a[d],s=0;s<8;s+=2)e[r+1+s]=n.charAt(15&i),i>>>=4,e[r+0+s]=n.charAt(15&i),i>>>=4;return e.join("")}static _md5cycle(a,n){let e=a[0],i=a[1],r=a[2],s=a[3];e+=(i&r|~i&s)+n[0]-680876936|0,e=(e<<7|e>>>25)+i|0,s+=(e&i|~e&r)+n[1]-389564586|0,s=(s<<12|s>>>20)+e|0,r+=(s&e|~s&i)+n[2]+606105819|0,r=(r<<17|r>>>15)+s|0,i+=(r&s|~r&e)+n[3]-1044525330|0,i=(i<<22|i>>>10)+r|0,e+=(i&r|~i&s)+n[4]-176418897|0,e=(e<<7|e>>>25)+i|0,s+=(e&i|~e&r)+n[5]+1200080426|0,s=(s<<12|s>>>20)+e|0,r+=(s&e|~s&i)+n[6]-1473231341|0,r=(r<<17|r>>>15)+s|0,i+=(r&s|~r&e)+n[7]-45705983|0,i=(i<<22|i>>>10)+r|0,e+=(i&r|~i&s)+n[8]+1770035416|0,e=(e<<7|e>>>25)+i|0,s+=(e&i|~e&r)+n[9]-1958414417|0,s=(s<<12|s>>>20)+e|0,r+=(s&e|~s&i)+n[10]-42063|0,r=(r<<17|r>>>15)+s|0,i+=(r&s|~r&e)+n[11]-1990404162|0,i=(i<<22|i>>>10)+r|0,e+=(i&r|~i&s)+n[12]+1804603682|0,e=(e<<7|e>>>25)+i|0,s+=(e&i|~e&r)+n[13]-40341101|0,s=(s<<12|s>>>20)+e|0,r+=(s&e|~s&i)+n[14]-1502002290|0,r=(r<<17|r>>>15)+s|0,i+=(r&s|~r&e)+n[15]+1236535329|0,i=(i<<22|i>>>10)+r|0,e+=(i&s|r&~s)+n[1]-165796510|0,e=(e<<5|e>>>27)+i|0,s+=(e&r|i&~r)+n[6]-1069501632|0,s=(s<<9|s>>>23)+e|0,r+=(s&i|e&~i)+n[11]+643717713|0,r=(r<<14|r>>>18)+s|0,i+=(r&e|s&~e)+n[0]-373897302|0,i=(i<<20|i>>>12)+r|0,e+=(i&s|r&~s)+n[5]-701558691|0,e=(e<<5|e>>>27)+i|0,s+=(e&r|i&~r)+n[10]+38016083|0,s=(s<<9|s>>>23)+e|0,r+=(s&i|e&~i)+n[15]-660478335|0,r=(r<<14|r>>>18)+s|0,i+=(r&e|s&~e)+n[4]-405537848|0,i=(i<<20|i>>>12)+r|0,e+=(i&s|r&~s)+n[9]+568446438|0,e=(e<<5|e>>>27)+i|0,s+=(e&r|i&~r)+n[14]-1019803690|0,s=(s<<9|s>>>23)+e|0,r+=(s&i|e&~i)+n[3]-187363961|0,r=(r<<14|r>>>18)+s|0,i+=(r&e|s&~e)+n[8]+1163531501|0,i=(i<<20|i>>>12)+r|0,e+=(i&s|r&~s)+n[13]-1444681467|0,e=(e<<5|e>>>27)+i|0,s+=(e&r|i&~r)+n[2]-51403784|0,s=(s<<9|s>>>23)+e|0,r+=(s&i|e&~i)+n[7]+1735328473|0,r=(r<<14|r>>>18)+s|0,i+=(r&e|s&~e)+n[12]-1926607734|0,i=(i<<20|i>>>12)+r|0,e+=(i^r^s)+n[5]-378558|0,e=(e<<4|e>>>28)+i|0,s+=(e^i^r)+n[8]-2022574463|0,s=(s<<11|s>>>21)+e|0,r+=(s^e^i)+n[11]+1839030562|0,r=(r<<16|r>>>16)+s|0,i+=(r^s^e)+n[14]-35309556|0,i=(i<<23|i>>>9)+r|0,e+=(i^r^s)+n[1]-1530992060|0,e=(e<<4|e>>>28)+i|0,s+=(e^i^r)+n[4]+1272893353|0,s=(s<<11|s>>>21)+e|0,r+=(s^e^i)+n[7]-155497632|0,r=(r<<16|r>>>16)+s|0,i+=(r^s^e)+n[10]-1094730640|0,i=(i<<23|i>>>9)+r|0,e+=(i^r^s)+n[13]+681279174|0,e=(e<<4|e>>>28)+i|0,s+=(e^i^r)+n[0]-358537222|0,s=(s<<11|s>>>21)+e|0,r+=(s^e^i)+n[3]-722521979|0,r=(r<<16|r>>>16)+s|0,i+=(r^s^e)+n[6]+76029189|0,i=(i<<23|i>>>9)+r|0,e+=(i^r^s)+n[9]-640364487|0,e=(e<<4|e>>>28)+i|0,s+=(e^i^r)+n[12]-421815835|0,s=(s<<11|s>>>21)+e|0,r+=(s^e^i)+n[15]+530742520|0,r=(r<<16|r>>>16)+s|0,i+=(r^s^e)+n[2]-995338651|0,i=(i<<23|i>>>9)+r|0,e+=(r^(i|~s))+n[0]-198630844|0,e=(e<<6|e>>>26)+i|0,s+=(i^(e|~r))+n[7]+1126891415|0,s=(s<<10|s>>>22)+e|0,r+=(e^(s|~i))+n[14]-1416354905|0,r=(r<<15|r>>>17)+s|0,i+=(s^(r|~e))+n[5]-57434055|0,i=(i<<21|i>>>11)+r|0,e+=(r^(i|~s))+n[12]+1700485571|0,e=(e<<6|e>>>26)+i|0,s+=(i^(e|~r))+n[3]-1894986606|0,s=(s<<10|s>>>22)+e|0,r+=(e^(s|~i))+n[10]-1051523|0,r=(r<<15|r>>>17)+s|0,i+=(s^(r|~e))+n[1]-2054922799|0,i=(i<<21|i>>>11)+r|0,e+=(r^(i|~s))+n[8]+1873313359|0,e=(e<<6|e>>>26)+i|0,s+=(i^(e|~r))+n[15]-30611744|0,s=(s<<10|s>>>22)+e|0,r+=(e^(s|~i))+n[6]-1560198380|0,r=(r<<15|r>>>17)+s|0,i+=(s^(r|~e))+n[13]+1309151649|0,i=(i<<21|i>>>11)+r|0,e+=(r^(i|~s))+n[4]-145523070|0,e=(e<<6|e>>>26)+i|0,s+=(i^(e|~r))+n[11]-1120210379|0,s=(s<<10|s>>>22)+e|0,r+=(e^(s|~i))+n[2]+718787259|0,r=(r<<15|r>>>17)+s|0,i+=(s^(r|~e))+n[9]-343485551|0,i=(i<<21|i>>>11)+r|0,a[0]=e+a[0]|0,a[1]=i+a[1]|0,a[2]=r+a[2]|0,a[3]=s+a[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(T.stateIdentity),this}appendStr(a){const n=this._buffer8,e=this._buffer32;let r,s,i=this._bufferLength;for(s=0;s<a.length;s+=1){if(r=a.charCodeAt(s),r<128)n[i++]=r;else if(r<2048)n[i++]=192+(r>>>6),n[i++]=63&r|128;else if(r<55296||r>56319)n[i++]=224+(r>>>12),n[i++]=r>>>6&63|128,n[i++]=63&r|128;else{if(r=1024*(r-55296)+(a.charCodeAt(++s)-56320)+65536,r>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[i++]=240+(r>>>18),n[i++]=r>>>12&63|128,n[i++]=r>>>6&63|128,n[i++]=63&r|128}i>=64&&(this._dataLength+=64,T._md5cycle(this._state,e),i-=64,e[0]=e[16])}return this._bufferLength=i,this}appendAsciiStr(a){const n=this._buffer8,e=this._buffer32;let r,i=this._bufferLength,s=0;for(;;){for(r=Math.min(a.length-s,64-i);r--;)n[i++]=a.charCodeAt(s++);if(i<64)break;this._dataLength+=64,T._md5cycle(this._state,e),i=0}return this._bufferLength=i,this}appendByteArray(a){const n=this._buffer8,e=this._buffer32;let r,i=this._bufferLength,s=0;for(;;){for(r=Math.min(a.length-s,64-i);r--;)n[i++]=a[s++];if(i<64)break;this._dataLength+=64,T._md5cycle(this._state,e),i=0}return this._bufferLength=i,this}getState(){const a=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[a[0],a[1],a[2],a[3]]}}setState(a){const n=a.buffer,e=a.state,i=this._state;let r;for(this._dataLength=a.length,this._bufferLength=a.buflen,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],r=0;r<n.length;r+=1)this._buffer8[r]=n.charCodeAt(r)}end(a=!1){const n=this._bufferLength,e=this._buffer8,i=this._buffer32,r=1+(n>>2);this._dataLength+=n;const s=8*this._dataLength;if(e[n]=128,e[n+1]=e[n+2]=e[n+3]=0,i.set(T.buffer32Identity.subarray(r),r),n>55&&(T._md5cycle(this._state,i),i.set(T.buffer32Identity)),s<=4294967295)i[14]=s;else{const d=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===d)return;const b=parseInt(d[2],16),D=parseInt(d[1],16)||0;i[14]=b,i[15]=D}return T._md5cycle(this._state,i),a?this._state:T._hex(this._state)}}if(T.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),T.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),T.hexChars="0123456789abcdef",T.hexOut=[],T.onePassHasher=new T,"5d41402abc4b2a76b9719d911017c592"!==T.hashStr("hello"))throw new Error("Md5 self test failed.");var Q=u(1626),nt=u(1985),Ut=u(6648),V=u(6354),Y=u(9437),G=u(7673),Xt=u(7468),zt=u(8141),Yt=u(8810);const St_apiBaseUrl="https://k-studio.co.il/wp-admin/admin-ajax.php?action=wpamelia_api&call=/api/v1";var Wt=u(3656),Jt=u(3931),gt=u(4796);let wt=(()=>{var o;class a{constructor(e,i,r,s){this.platform=e,this.httpA=i,this.http=r,this.authService=s,this.headers=new Q.Lr({"Content-Type":"application/json",Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}),this.apiUrl="https://k-studio.co.il/wp-json/custom-api/v1"}getLast60DaysAppointmentsForUser(){const e=new Date,i=this.formatDate(new Date(e.setDate(e.getDate()+30))),r=this.formatDate(new Date(e.setDate(e.getDate()-60))),s=`${St_apiBaseUrl}/appointments&dates=${r},${i}&skipServices=1&skipProviders=1`,d=this.authService.getUserEmail(),b={Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"};return new nt.c(D=>{this.platform.ready().then(()=>{this.platform.is("cordova")?this.httpA.get(s,{},b).then(y=>{var P;const F=(null===(P=JSON.parse(y.data).data)||void 0===P?void 0:P.appointments)||{};let H=[];for(const j in F)F.hasOwnProperty(j)&&Array.isArray(F[j].appointments)&&F[j].appointments.forEach(M=>{M.bookings&&Array.isArray(M.bookings)&&M.bookings.forEach(N=>{var et;if((null===(et=N.customer)||void 0===et?void 0:et.email)===d){N.googleCalendarEventId=M.googleCalendarEventId;const zn={...M,matchedBooking:N,userBookingStatus:N.status};H.push(zn)}})});D.next(H),D.complete()}).catch(y=>{D.error(`Error fetching appointments: ${y}`)}):this.http.get(s,{headers:this.headers}).subscribe(y=>{var P;const E=(null===(P=y.data)||void 0===P?void 0:P.appointments)||{};let F=[];for(const H in E)E.hasOwnProperty(H)&&Array.isArray(E[H].appointments)&&E[H].appointments.forEach(j=>{j.bookings&&Array.isArray(j.bookings)&&j.bookings.forEach(M=>{var N;if((null===(N=M.customer)||void 0===N?void 0:N.email)===d){M.googleCalendarEventId=j.googleCalendarEventId;const et={...j,matchedBooking:M,userBookingStatus:M.status};F.push(et)}})});D.next(F),D.complete()},y=>{D.error(`Error fetching appointments: ${y}`)})})})}getMonthlyApprovedTrainingCount(){const e=new Date,i=new Date(e.getFullYear(),e.getMonth(),1),r=Number(this.authService.getCustomerID()),s=`&dates=${this.formatDate(i)},${this.formatDate(e)}&skipServices=1&skipProviders=1`,d=`${St_apiBaseUrl}/appointments${s}`,b={Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"};return(this.platform.is("cordova")?(0,Ut.H)(this.httpA.get(d,{},b).then(P=>JSON.parse(P.data))):this.http.get(d,{headers:b})).pipe((0,V.T)(P=>{var E,F;const H=null!==(E=null==P||null===(F=P.data)||void 0===F?void 0:F.appointments)&&void 0!==E?E:{};return Object.values(H).flatMap(j=>{var M;return null!==(M=j.appointments)&&void 0!==M?M:[]}).flatMap(j=>{var M;return null!==(M=j.bookings)&&void 0!==M?M:[]}).filter(j=>{var M,N;return(null!==(M=null===(N=j.customer)||void 0===N?void 0:N.id)&&void 0!==M?M:j.customerId)===r&&"approved"===j.status}).length}),(0,Y.W)(P=>(console.error(P),(0,G.of)(0))))}fetchSubscriptionExpiryDate(e){return this.http.get(`https://k-studio.co.il/wp-json/custom-api/v1/subscription-dates/?user_id=${e}`).pipe((0,V.T)(r=>{if(!r||0===r.length)return{expiryDate:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e0\u05d5\u05d9 \u05d1\u05ea\u05d5\u05e7\u05e3"};const s=r[0],d=s.status;let b,D=new Date;return"active"===d?(D=0!=s.expiry_date?new Date(s.expiry_date):new Date(s.renewal_date),b=`${D.getDate().toString().padStart(2,"0")}/${(D.getMonth()+1).toString().padStart(2,"0")}/${D.getFullYear()}`,this.storeSubscriptionExpiryDate(b),b="\u05ea\u05d5\u05e7\u05e3 \u05d4\u05de\u05e0\u05d5\u05d9: "+b):b="on-hold"===d?"\u05d4\u05de\u05e0\u05d5\u05d9 \u05de\u05d5\u05e9\u05d4\u05d4":"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e0\u05d5\u05d9 \u05d1\u05ea\u05d5\u05e7\u05e3",{expiryDate:b}}))}fetchAvailablePackageSlots(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${e}`,{}).pipe((0,V.T)(r=>{if(r&&r.data&&r.data.length>0){const s=r.data[0].packages;if(s&&s.length>0){const d=s[0].purchases,b=s[0].purchases[0].packageCustomerId;if(this.authService.storePackageCustomerID(b),d&&d.length>0){const D=d[0].purchase[0].available,P=new Date(d[0].purchased);return P.setDate(P.getDate()+30),{availableSlots:D,expiryDate:`${P.getDate().toString().padStart(2,"0")}/${(P.getMonth()+1).toString().padStart(2,"0")}/${P.getFullYear()}`,customerPackageID:b}}}}return{availableSlots:0,expiryDate:""}}),(0,Y.W)(r=>(console.error("API Error:",r),(0,G.of)({availableSlots:0,expiryDate:""}))))}fetchSubscriptionData(e,i){const s=`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${i}`;return(0,Xt.p)({subscription:this.http.get(`https://k-studio.co.il/wp-json/custom-api/v1/subscription-dates/?user_id=${e}`).pipe((0,V.T)(d=>{if(!d||0===d.length)return{subscriptionId:0,expiryDate:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e0\u05d5\u05d9 \u05d1\u05ea\u05d5\u05e7\u05e3"};const b=d[0],D=b.status;let y,P=new Date;return"active"===D?(P=0!=b.expiry_date?new Date(b.expiry_date):new Date(b.renewal_date),y=`${P.getDate().toString().padStart(2,"0")}/${(P.getMonth()+1).toString().padStart(2,"0")}/${P.getFullYear()}`,this.storeSubscriptionExpiryDate(y),y="\u05ea\u05d5\u05e7\u05e3 \u05d4\u05de\u05e0\u05d5\u05d9: "+y):y="on-hold"===D?"\u05d4\u05de\u05e0\u05d5\u05d9 \u05de\u05d5\u05e9\u05d4\u05d4":"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e0\u05d5\u05d9 \u05d1\u05ea\u05d5\u05e7\u05e3",{subscriptionId:b.subscription_id,expiryDate:y}})),packageSlots:this.http.get(s).pipe((0,V.T)(d=>{if(d&&d.data&&d.data.length>0){const b=d.data[0].packages;if(b&&b.length>0){const D=b[0].purchases;if(this.authService.storePackageCustomerID(D[0].packageCustomerId),D&&D.length>0)return{availableSlots:D[0].purchase[0].available}}}return{availableSlots:0}}),(0,Y.W)(d=>(console.error("Package API Error:",d),(0,G.of)({availableSlots:0}))))}).pipe((0,V.T)(({subscription:d,packageSlots:b})=>({subscriptionId:d.subscriptionId,expiryDate:d.expiryDate,availableSlots:b.availableSlots})))}getUserPackageCustomerID(){const i=`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${this.authService.getPackageCustomerId()}`;return this.http.get(i,{}).pipe((0,V.T)(r=>{r&&r.data&&r.data[0]&&r.data[0].packages[0]&&r.data[0].packages[0].purchases[0]&&r.data[0].packages[0].purchases[0].packageCustomerId&&this.authService.storePackageCustomerID(r.data[0].packages[0].purchases[0].packageCustomerId)}),(0,Y.W)(r=>(console.error("API Error:",r),(0,G.of)({availableSlots:0,expiryDate:""}))))}fetchUserPurchases(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/user-purchases/${e}`,{}).pipe((0,V.T)(r=>(r.forEach(s=>{s.invoice_link||(s.invoice_link="")}),r||[])),(0,Y.W)(r=>(console.error("Error fetching user purchases:",r),(0,G.of)([]))))}updateFavoriteLocation(e){const r="https://k-studio.co.il/wp-json/custom-api/v1/set-favorite-location?user_id="+this.authService.getUserID();return this.http.post(r,{favorite_location:e}).pipe((0,zt.M)(()=>console.log("HTTP request sent")),(0,V.T)(d=>(this.authService.storeFavLocation(e),d)),(0,Y.W)(d=>(console.error("HTTP Error:",d),(0,Yt.$)(()=>new Error("Failed to update favorite location")))))}cancelBooking(e){return this.http.post(`https://k-studio.co.il/wp-json/wn/v1/cancel-booking/${e}`,{})}formatDate(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}storeSubscriptionExpiryDate(e){localStorage.setItem("subscription_expiry_date",e)}getSubscriptionExpiryDate(){return localStorage.getItem("subscription_expiry_date")}addNote(e,i,r,s){return this.http.post(`${this.apiUrl}/add-note`,{userID:e,title:i,content:r,color:s})}removeNote(e){return this.http.post(`${this.apiUrl}/remove-note`,{note_id:e})}editNote(e,i,r,s){return this.http.post(`${this.apiUrl}/edit-note`,{note_id:e,title:i,content:r,color:s})}getNotesByUser(e){return this.http.get(`${this.apiUrl}/get-notes-by-user?user_id=${e}`)}}return(o=a).\u0275fac=function(e){return new(e||o)(t.KVO(Wt.OD),t.KVO(Jt.B),t.KVO(Q.Qq),t.KVO(gt.u))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();var Mt=u(4938);const Kt=["popup"],ft=o=>({active:o}),Qt=()=>[1,2,3,4];function Zt(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-content",17)(1,"ion-list")(2,"ion-item"),t.nrm(3,"ion-icon",18),t.j41(4,"div",19)(5,"input",20),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG();return t.DH7(r.selectedLocation,i)||(r.selectedLocation=i),t.Njj(i)}),t.bIt("change",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.updateFavLocation("\u05d4\u05db\u05dc"))}),t.k0s(),t.j41(6,"label",21),t.EFF(7," \u05d4\u05db\u05dc "),t.k0s(),t.j41(8,"input",22),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG();return t.DH7(r.selectedLocation,i)||(r.selectedLocation=i),t.Njj(i)}),t.bIt("change",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.updateFavLocation("\u05d4\u05d9\u05e8\u05e7\u05d5\u05df"))}),t.k0s(),t.j41(9,"label",23),t.EFF(10," \u05d4\u05d9\u05e8\u05e7\u05d5\u05df "),t.k0s(),t.j41(11,"input",24),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG();return t.DH7(r.selectedLocation,i)||(r.selectedLocation=i),t.Njj(i)}),t.bIt("change",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.updateFavLocation("\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"))}),t.k0s(),t.j41(12,"label",25),t.EFF(13," \u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4 "),t.k0s(),t.nrm(14,"div",26),t.k0s()(),t.j41(15,"ion-item",27),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.logout())}),t.nrm(16,"ion-icon",28),t.j41(17,"ion-label"),t.EFF(18,"\u05d4\u05ea\u05e0\u05ea\u05e7"),t.k0s()()()()}if(2&o){const n=t.XpG();t.R7$(5),t.R50("ngModel",n.selectedLocation),t.R7$(),t.Y8G("ngClass",t.eq3(6,ft,"\u05d4\u05db\u05dc"===n.favLocation)),t.R7$(2),t.R50("ngModel",n.selectedLocation),t.R7$(),t.Y8G("ngClass",t.eq3(8,ft,"\u05d4\u05d9\u05e8\u05e7\u05d5\u05df"===n.favLocation)),t.R7$(2),t.R50("ngModel",n.selectedLocation),t.R7$(),t.Y8G("ngClass",t.eq3(10,ft,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===n.favLocation))}}function qt(o,a){if(1&o&&(t.j41(0,"ion-label"),t.EFF(1),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.SpI("",n.slotsLeft," \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e0\u05d5\u05ea\u05e8\u05d5")}}function te(o,a){if(1&o&&(t.j41(0,"ion-label"),t.EFF(1),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.SpI("",n.slotsLeft," \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05d7\u05d5\u05d3\u05e9")}}function ee(o,a){1&o&&t.nrm(0,"ion-skeleton-text",29),2&o&&t.Y8G("animated",!0)}function ne(o,a){if(1&o&&(t.j41(0,"ion-label"),t.EFF(1),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.JRh(n.nextRenewalDate)}}function ie(o,a){1&o&&t.nrm(0,"ion-skeleton-text",32),2&o&&t.Y8G("animated",!0)}function oe(o,a){if(1&o&&(t.j41(0,"ion-chip"),t.nrm(1,"ion-icon",30),t.DNE(2,ne,2,1,"ion-label",9)(3,ie,1,1,"ion-skeleton-text",31),t.k0s()),2&o){const n=t.XpG();t.R7$(2),t.Y8G("ngIf",n.isLoadingSubscriptionData),t.R7$(),t.Y8G("ngIf",!n.isLoadingSubscriptionData)}}function re(o,a){1&o&&(t.j41(0,"ion-item",35)(1,"ion-thumbnail",36),t.nrm(2,"ion-skeleton-text",37),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",38),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",39),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",40),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function se(o,a){1&o&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",33),t.k0s(),t.DNE(3,re,10,4,"ion-item",34),t.k0s()),2&o&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,Qt)))}function ae(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",44)(1,"ion-button",45),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.toggleFilterDropdown())}),t.nrm(2,"ion-icon",46),t.EFF(3," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s()()}}function ce(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-list",47)(1,"ion-item")(2,"ion-label",48),t.EFF(3,"\u05d4\u05e6\u05d2"),t.k0s(),t.j41(4,"ion-segment",49),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG(2);return t.DH7(r.availabilityFilter,i)||(r.availabilityFilter=i),t.Njj(i)}),t.bIt("ionChange",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.onFilterChange())}),t.j41(5,"ion-segment-button",50)(6,"ion-label",51),t.EFF(7,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(8,"ion-segment-button",52)(9,"ion-label",51),t.nrm(10,"ion-icon",53),t.k0s()(),t.j41(11,"ion-segment-button",54)(12,"ion-label",51),t.nrm(13,"ion-icon",55),t.k0s()()()()()}if(2&o){const n=t.XpG(2);t.R7$(4),t.R50("ngModel",n.availabilityFilter)}}function le(o,a){1&o&&t.nrm(0,"ion-icon",61)}function de(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-card",56),t.bIt("click",function(){const i=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj("approved"===i.userBookingStatus?r.showActions(i):null)}),t.j41(1,"ion-card-header")(2,"div",57),t.nrm(3,"ion-icon",58),t.DNE(4,le,1,0,"ion-icon",59),t.k0s(),t.j41(5,"ion-label",60)(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"date"),t.nI1(11,"date"),t.k0s()()()()}if(2&o){const n=a.$implicit,e=t.XpG(2);t.R7$(3),t.Y8G("name",e.getStatusIcon(n.userBookingStatus))("color",e.getStatusColor(n.userBookingStatus)),t.R7$(),t.Y8G("ngIf","approved"==n.userBookingStatus),t.R7$(3),t.JRh(n.title),t.R7$(2),t.Lme("",t.i5U(10,6,n.bookingStart,"dd/MM/yyyy")," | ",t.i5U(11,9,n.bookingStart,"HH:mm")," ")}}function ue(o,a){if(1&o&&(t.j41(0,"div"),t.DNE(1,ae,4,0,"div",41)(2,ce,14,1,"ion-list",42),t.j41(3,"ion-list"),t.DNE(4,de,12,12,"ion-card",43),t.k0s()()),2&o){const n=t.XpG();t.R7$(),t.Y8G("ngIf",!n.isLoading),t.R7$(),t.Y8G("ngIf",n.showDropdown),t.R7$(2),t.Y8G("ngForOf",n.filteredAppointments)}}function pe(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-card",56),t.bIt("click",function(){const i=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.downloadInvoice(i))}),t.j41(1,"ion-card-header")(2,"div",57),t.nrm(3,"ion-icon",58)(4,"ion-icon",61),t.k0s(),t.j41(5,"ion-label",60)(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.k0s()()()()}if(2&o){const n=a.$implicit,e=t.XpG(2);t.R7$(3),t.Y8G("name",e.getStatusIcon(n.status))("color",e.getStatusColor(n.status)),t.R7$(4),t.SpI("\u05d4\u05d6\u05de\u05e0\u05d4 \u05de\u05e1' ",n.orderNumber,""),t.R7$(2),t.JRh(n.products[0].name)}}function he(o,a){if(1&o&&(t.j41(0,"div")(1,"ion-list"),t.DNE(2,pe,10,4,"ion-card",43),t.k0s()()),2&o){const n=t.XpG();t.R7$(2),t.Y8G("ngForOf",n.userPurchases)}}function ge(o,a){1&o&&(t.j41(0,"ion-label",68),t.EFF(1,"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05e4\u05ea\u05e7\u05d9\u05dd"),t.k0s())}function fe(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-card",69),t.bIt("touchstart",function(i){const r=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.onTouchStart(i,r.id))})("touchmove",function(i){const r=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.onTouchMove(i,r.id))})("touchend",function(){const i=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.onTouchEnd(i.id))})("click",function(){const i=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.openEditPopup(i))}),t.j41(1,"ion-card-header",70)(2,"ion-card-title",71),t.EFF(3),t.k0s()(),t.j41(4,"ion-card-content",72),t.EFF(5),t.k0s(),t.j41(6,"ion-toast",73),t.bIt("didDismiss",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(null!=i.deletedNote&&i.deletedNote.id?i.finalizeDelete(null==i.deletedNote?null:i.deletedNote.id):null)}),t.k0s()()}if(2&o){let n;const e=a.$implicit,i=t.XpG(2);t.xc7("background-color",e.color)("transform","translateX("+(e.dragX||0)+"px)")("opacity",null!==(n=e.opacity)&&void 0!==n?n:1),t.R7$(3),t.JRh(e.title),t.R7$(2),t.SpI(" ",e.content," "),t.R7$(),t.Y8G("isOpen",i.showUndoToast)("buttons",i.undoButton)}}function me(o,a){if(1&o){const n=t.RV6();t.j41(0,"div")(1,"div",62)(2,"button",63),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.addNote())}),t.nrm(3,"ion-icon",64),t.k0s()(),t.j41(4,"div",65),t.DNE(5,ge,2,0,"ion-label",66)(6,fe,7,10,"ion-card",67),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(5),t.Y8G("ngIf",0==n.userNotes.length),t.R7$(),t.Y8G("ngForOf",n.userNotes)("ngForTrackBy",n.trackByNoteId)}}let _e=(()=>{var o;class a{constructor(e,i,r,s,d,b,D,y,P){this.modalCtrl=e,this.actionSheetCtrl=i,this.profileService=r,this.authService=s,this.toastController=d,this.ameliaService=b,this.gestureCtrl=D,this.editNoteModalCtrl=y,this.cdRef=P,this.userRole="",this.userPhoto="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",this.userEmail="",this.userID="",this.customerID="",this.selectedTab="trainings",this.isLoading=!0,this.errorMessage="",this.availabilityFilter="",this.showDropdown=!1,this.selectedType="",this.userAppointments=[],this.filteredAppointments=[],this.unfilteredAppointments=[],this.userPurchases=[],this.gravatarUrl="",this.locationEnabled=!1,this.favLocation="",this.selectedLocation="",this.isLoadingSubscriptionData=!1,this.userNotes=[],this.colors=["#D1FAE5","#E5E7EB","#FCE7F3","#FEF3C7","#CFFAFE","#FCE7F3"],this.showUndoToast=!1,this.deletedNote=null,this.deletedNoteIndex=null,this.undoButton=[{text:"\u05d1\u05d8\u05dc",handler:()=>this.undoDelete()}],this.selectedNote=null,this.isEditModalOpen=!1,this.editTitle="",this.editContent="",this.editColor="",this.startY=0,this.modalHeight=0,this.touchStartX=0,this.threshold=100,this.maxSwipeDistance=.4*window.innerWidth,this.userName=this.authService.getUserFullName(),this.userRole=this.authService.getUserRole(),this.customerID=this.authService.getCustomerID(),this.userID=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.setGravatarUrl(),this.authService.fetchUserFavLocation().subscribe({next:E=>{this.favLocation=E.favorite_location,this.selectedLocation=E.favorite_location},error:E=>{console.error("Error fetching user fav location",E)}})}setGravatarUrl(){if(this.userEmail){const e=T.hashStr(this.userEmail.trim().toLowerCase());this.gravatarUrl=`https://www.gravatar.com/avatar/${e}?d=identicon`}}formatDate(e){return e.replace(/\//g,".")}ngOnInit(){var e=this;return(0,k.A)(function*(){e.isLoadingSubscriptionData=!1,"activesubscription"===e.userRole?e.profileService.fetchSubscriptionData(e.userID,e.customerID).subscribe(({expiryDate:s,availableSlots:d})=>{e.nextRenewalDate=e.formatDate(s),e.slotsLeft=d,e.isLoadingSubscriptionData=!0},r=>{console.error("Error fetching subscription data:",r),e.slotsLeft=0,e.nextRenewalDate="",e.isLoadingSubscriptionData=!0}):"trainer"===e.userRole&&e.profileService.getMonthlyApprovedTrainingCount().subscribe(r=>{e.slotsLeft=r,e.isLoadingSubscriptionData=!0}),e.fetchNotes(),e.trainingsByDay=e.ameliaService.getTrainingsTitles(),(!e.trainingsByDay||Object.keys(e.trainingsByDay).every(r=>0===e.trainingsByDay[r].length))&&(yield e.ameliaService.fetchTitleTrainings(),e.trainingsByDay=e.ameliaService.getTrainingsTitles());const i=localStorage.getItem("userFilterChoice");i&&(e.availabilityFilter=i),e.authService.fetchUserRole().subscribe(r=>{e.authService.storeUserRole(r.roles[0]),e.userRole=r.roles[0]}),e.loadUserAppointmentsLast60Days(),e.updateFilteredAppointments()})()}presentToast(e,i){var r=this;return(0,k.A)(function*(){yield(yield r.toastController.create({message:e,duration:3e3,color:i,position:"bottom"})).present()})()}loadUserAppointmentsLast60Days(){var e=this;this.isLoading=!0,this.profileService.getLast60DaysAppointmentsForUser().subscribe(function(){var i=(0,k.A)(function*(r){const s=[];for(const d of r)if(d.matchedBooking){d.userBookingStatus=d.userBookingStatus;const y=z(d.bookingStart).format("YYYY-MM-DD"),P=z(d.bookingStart).format("HH:mm"),E=e.getAppointmentTitleByDateTime(y,P).then(F=>{d.title=F||"\u05db\u05dc\u05dc\u05d9"}).catch(F=>{console.error("Error fetching appointment title:",F),d.title="\u05db\u05dc\u05dc\u05d9"});s.push(E)}yield Promise.all(s),e.userAppointments=r.sort((d,b)=>z(b.bookingStart).diff(z(d.bookingStart))),e.filteredAppointments=[...e.userAppointments],e.updateFilteredAppointments(),e.isLoading=!1});return function(r){return i.apply(this,arguments)}}(),i=>{this.isLoading=!1,console.error("Error loading appointments:",i)})}getDayFromDate(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][z(e,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(e,i){var r=this;return(0,k.A)(function*(){const s=z(e,"YYYY-MM-DD").format("DD/MM/YYYY"),d=r.getDayFromDate(s);if(r.trainingsByDay[d]){const b=r.trainingsByDay[d].find(D=>D.time===i);if(b)return b.title}return"\u05db\u05dc\u05dc\u05d9"})()}ngAfterViewInit(){this.gesture=this.gestureCtrl.create({el:this.popup.nativeElement,gestureName:"modal-drag",direction:"y",onStart:e=>{this.startY=e.currentY,this.popup.nativeElement.style.transition="none"},onMove:e=>{const i=e.currentY-this.startY;if(i>=0){const s=.4*i;this.popup.nativeElement.style.transform=`translateY(${s}px)`,this.popup.nativeElement.style.opacity=(1-s/(.5*this.modalHeight)).toString()}},onEnd:e=>{this.popup.nativeElement.style.transition="0.3s ease-out";const i=e.currentY-this.startY;i>.25*this.modalHeight||i>50&&e.velocityY>.5?(this.popup.nativeElement.style.transform="translateY(100%)",this.popup.nativeElement.style.opacity="0",setTimeout(()=>{this.modalCtrl.dismiss()},300)):(this.popup.nativeElement.style.transform="none",this.popup.nativeElement.style.opacity="1")}})}ngOnDestroy(){this.gesture&&this.gesture.destroy()}closePopup(){this.modalCtrl.dismiss()}showActions(e){var i=this;return(0,k.A)(function*(){yield(yield i.actionSheetCtrl.create({header:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea",buttons:[{text:"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d0\u05d9\u05de\u05d5\u05df",role:"destructive",icon:"close-circle-outline",handler:()=>{i.cancelBooking(e.matchedBooking.id)}},{text:"\u05e1\u05d2\u05d5\u05e8",icon:"close",role:"cancel"}]})).present()})()}downloadInvoice(e){e.invoice_link?window.open(e.invoice_link,"_blank"):(console.error("No invoice link available for this order."),this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e4\u05d9\u05e7 \u05d7\u05e9\u05d1\u05d5\u05e0\u05d9\u05ea \u05d1\u05e2\u05d1\u05d5\u05e8 \u05d4\u05d6\u05de\u05e0\u05d4 \u05d6\u05d5.",this.presentToast(this.errorMessage,"danger"))}getStatusIcon(e){switch(e){case"approved":case"completed":return"checkmark-circle-outline";case"canceled":case"cancelled":return"close-circle-outline";case"pending":return"time-outline";case"refunded":return"cash-outline";default:return"alert-circle-outline"}}getStatusColor(e){switch(e){case"approved":case"completed":return"success";case"canceled":case"cancelled":return"danger";case"pending":case"refunded":return"warning";default:return"medium"}}cancelBooking(e){this.profileService.cancelBooking(e).subscribe(i=>{i.data.cancelBookingUnavailable?(this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4",this.presentToast(this.errorMessage,"danger")):(this.errorMessage="\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4",this.presentToast(this.errorMessage,"success"))},i=>{this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea",this.presentToast(this.errorMessage,"danger"),console.error("Error occurred while canceling the booking",i)})}loadUserPurchases(){this.profileService.fetchUserPurchases(this.userID).subscribe(e=>{this.userPurchases=e})}onTabChange(e){this.selectedTab=e.detail.value,"purchases"==this.selectedTab&&this.loadUserPurchases()}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}onFilterChange(){this.updateFilteredAppointments(),localStorage.setItem("userFilterChoice",this.availabilityFilter)}updateFilteredAppointments(){let e=[...this.userAppointments];"approved"===this.availabilityFilter?e=e.filter(i=>"approved"===i.userBookingStatus):"cancelled"===this.availabilityFilter&&(e=e.filter(i=>"canceled"===i.userBookingStatus)),this.filteredAppointments=e}logout(){this.authService.logout(),window.location.reload()}updateFavLocation(e){this.favLocation=e,this.selectedLocation=e,this.profileService.updateFavoriteLocation(e).subscribe(i=>{})}fetchNotes(){this.profileService.getNotesByUser(this.userID).subscribe(e=>{e.success&&(this.userNotes=e.notes)})}addNote(){const e=this.getRandomColor();this.profileService.addNote(this.userID,"\u05e4\u05ea\u05e7 \u05d7\u05d3\u05e9","\u05dc\u05d7\u05e5 \u05db\u05d3\u05d9 \u05dc\u05e2\u05e8\u05d5\u05da...",e).subscribe(i=>{i.success&&this.userNotes.push({id:i.note_id,userID:this.userID,title:"\u05e4\u05ea\u05e7 \u05d7\u05d3\u05e9",content:"\u05dc\u05d7\u05e5 \u05db\u05d3\u05d9 \u05dc\u05e2\u05e8\u05d5\u05da...",color:e})})}getRandomColor(){return this.colors[Math.floor(Math.random()*this.colors.length)]}trackByNoteId(e,i){return i.id}removeNote(e){const i=this.userNotes.findIndex(r=>r.id===e);-1!==i&&(this.deletedNote={...this.userNotes[i]},this.deletedNoteIndex=i,this.userNotes.splice(i,1),this.showUndoToast=!0,console.log("Note deleted, waiting for undo..."),this.undoTimeout=setTimeout(()=>{this.finalizeDelete(e)},2500))}editNote(e){this.profileService.editNote(e.id,e.title,e.content,e.color).subscribe(i=>{i.success&&console.log("Note updated successfully")})}onTouchStart(e,i){this.touchStartX=e.touches[0].clientX;const r=this.userNotes.find(s=>s.id===i);r&&(r.dragX=0,r.opacity=1)}onTouchMove(e,i){const s=e.touches[0].clientX-this.touchStartX,d=this.userNotes.find(b=>b.id===i);d&&(d.dragX=s,d.opacity=Math.max(.4,1-Math.abs(s)/this.maxSwipeDistance))}onTouchEnd(e){const i=this.userNotes.find(r=>r.id===e);i&&(Math.abs(i.dragX)>this.threshold?this.animateNoteDeletion(e,i.dragX>0?window.innerWidth:-window.innerWidth):this.resetNotePosition(i))}animateNoteDeletion(e,i){const r=this.userNotes.find(s=>s.id===e);r&&(r.dragX=i,r.opacity=0,setTimeout(()=>{this.removeNote(e)},300))}resetNotePosition(e){e.dragX=0,e.opacity=1}undoDelete(){null!==this.deletedNote&&null!==this.deletedNoteIndex&&(console.log("Undoing delete..."),this.deletedNote.opacity=1,this.deletedNote.dragX=0,this.userNotes.splice(this.deletedNoteIndex,0,this.deletedNote),console.log("Updated userNotes:",this.userNotes),this.deletedNote=null,this.deletedNoteIndex=null,this.showUndoToast=!1,clearTimeout(this.undoTimeout),this.cdRef.detectChanges())}finalizeDelete(e){e?(this.showUndoToast=!1,this.deletedNote=null,this.deletedNoteIndex=null,this.profileService.removeNote(e).subscribe(i=>{console.log("Note permanently deleted from server",i)})):this.showUndoToast=!1}openEditPopup(e){var i=this;return(0,k.A)(function*(){e&&(i.selectedNote={...e},i.editTitle=e.title,i.editContent=e.content,i.editColor=e.color,yield(yield i.editNoteModalCtrl.create({component:Vt,componentProps:{title:i.editTitle,content:i.editContent,color:i.editColor,onSave:i.saveNoteChanges.bind(i)},cssClass:"edit-note-modal-wrapper"})).present())})()}saveNoteChanges(e,i,r){this.selectedNote&&(console.log("Saving Note Changes:",this.selectedNote.id,e,i,r),this.profileService.editNote(this.selectedNote.id,e,i,r).subscribe(s=>{if(s.success){const d=this.userNotes.findIndex(b=>b.id===this.selectedNote.id);-1!==d&&(this.userNotes[d]={...this.selectedNote,title:e,content:i,color:r}),console.log("Note Updated Successfully")}}))}}return(o=a).\u0275fac=function(e){return new(e||o)(t.rXU(l.W3),t.rXU(l.GD),t.rXU(wt),t.rXU(gt.u),t.rXU(l.K_),t.rXU(Mt.J),t.rXU(l.wH),t.rXU(l.W3),t.rXU(t.gRc))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-profile-popup"]],viewQuery:function(e,i){if(1&e&&t.GBs(Kt,5),2&e){let r;t.mGM(r=t.lsd())&&(i.popup=r.first)}},decls:33,vars:11,consts:[["popup",""],[1,"popup-modal","profile-page"],[1,"drag-handle"],[1,"profile-section"],["alt","User Avatar",1,"avatar",3,"src"],["name","settings-outline","id","settings-trigger",1,"settings-icon"],["trigger","settings-trigger","triggerAction","click","dismissOnSelect","false",1,"profilePopover"],[1,"subscriptionDetails"],["name","barbell-outline","color","medium"],[4,"ngIf"],["style","width: 100px;",3,"animated",4,"ngIf"],[1,"inside-container"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","trainings",1,"header-tab"],["value","purchases",1,"header-tab"],["value","notes",1,"header-tab"],[1,"scroll-y-hidden","ion-padding"],["slot","start","name","location-outline"],[1,"custom-three-way-toggle"],["type","radio","id","right","name","location","value","\u05d4\u05db\u05dc",3,"ngModelChange","change","ngModel"],["for","right",3,"ngClass"],["type","radio","id","center","name","location","value","\u05d4\u05d9\u05e8\u05e7\u05d5\u05df",3,"ngModelChange","change","ngModel"],["for","center",3,"ngClass"],["type","radio","id","left","name","location","value","\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4",3,"ngModelChange","change","ngModel"],["for","left",3,"ngClass"],[1,"slider"],["button","",3,"click"],["slot","start","name","log-out-outline"],[2,"width","100px",3,"animated"],["name","calendar-outline","color","medium"],["style","width: 140px;",3,"animated",4,"ngIf"],[2,"width","140px",3,"animated"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["class","filter-header",4,"ngIf"],["class","filter-dropdown",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],[1,"filter-dropdown"],[2,"text-indent","8px"],[3,"ngModelChange","ionChange","ngModel"],["value","all",1,"sub-label-segment"],[1,"sub-label"],["value","approved",1,"sub-label-segment"],["name","checkmark-circle-outline","slot","start","color","success"],["value","cancelled",1,"sub-label-segment"],["name","close-circle-outline","slot","start","color","danger"],[3,"click"],[1,"icon-container"],[1,"status-icon",3,"name","color"],["name","chevron-forward-outline","class","arrow-icon",4,"ngIf"],[1,"training-details"],["name","chevron-forward-outline",1,"arrow-icon"],[1,"add-note-header"],[1,"add-note-button",3,"click"],["name","add-outline","color","white"],[1,"notes-grid"],["class","notes-not-found",4,"ngIf"],["class","note-card",3,"backgroundColor","transform","opacity","touchstart","touchmove","touchend","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notes-not-found"],[1,"note-card",3,"touchstart","touchmove","touchend","click"],[1,"notes-header"],[1,"note-title"],[1,"note-content"],["message","\u05d4\u05e4\u05ea\u05e7 \u05e0\u05de\u05d7\u05e7 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","duration","5000",3,"didDismiss","isOpen","buttons"]],template:function(e,i){if(1&e){const r=t.RV6();t.j41(0,"ion-content",1,0),t.nrm(2,"div",2),t.j41(3,"div",3),t.nrm(4,"img",4),t.j41(5,"h2"),t.EFF(6),t.k0s(),t.nrm(7,"ion-icon",5),t.j41(8,"ion-popover",6),t.DNE(9,Zt,19,12,"ng-template"),t.k0s(),t.j41(10,"div",7)(11,"ion-chip"),t.nrm(12,"ion-icon",8),t.DNE(13,qt,2,1,"ion-label",9)(14,te,2,1,"ion-label",9)(15,ee,1,1,"ion-skeleton-text",10),t.k0s(),t.DNE(16,oe,4,2,"ion-chip",9),t.k0s()(),t.j41(17,"div",11)(18,"div",12)(19,"ion-segment",13),t.mxI("ngModelChange",function(d){return t.eBV(r),t.DH7(i.selectedTab,d)||(i.selectedTab=d),t.Njj(d)}),t.bIt("ionChange",function(d){return t.eBV(r),t.Njj(i.onTabChange(d))}),t.j41(20,"ion-segment-button",14)(21,"ion-label"),t.EFF(22,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),t.k0s()(),t.j41(23,"ion-segment-button",15)(24,"ion-label"),t.EFF(25,"\u05e8\u05db\u05d9\u05e9\u05d5\u05ea"),t.k0s()(),t.j41(26,"ion-segment-button",16)(27,"ion-label"),t.EFF(28,"\u05e4\u05ea\u05e7\u05d9\u05dd"),t.k0s()()()(),t.DNE(29,se,4,3,"ion-list",9)(30,ue,5,3,"div",9)(31,he,3,1,"div",9)(32,me,7,3,"div",9),t.k0s()()}2&e&&(t.R7$(4),t.Y8G("src",i.gravatarUrl,t.B4B),t.R7$(2),t.JRh(i.userName),t.R7$(7),t.Y8G("ngIf",i.isLoadingSubscriptionData&&"activesubscription"===i.userRole),t.R7$(),t.Y8G("ngIf",i.isLoadingSubscriptionData&&"trainer"===i.userRole),t.R7$(),t.Y8G("ngIf",!i.isLoadingSubscriptionData),t.R7$(),t.Y8G("ngIf","activesubscription"===i.userRole),t.R7$(3),t.R50("ngModel",i.selectedTab),t.R7$(10),t.Y8G("ngIf",i.isLoading&&("trainings"===i.selectedTab||"purchases"===i.selectedTab)),t.R7$(),t.Y8G("ngIf","trainings"===i.selectedTab),t.R7$(),t.Y8G("ngIf","purchases"===i.selectedTab),t.R7$(),t.Y8G("ngIf","notes"===i.selectedTab))},dependencies:[h.YU,h.Sq,h.bT,c.me,c.Fm,c.BC,c.vS,l.Jm,l.b_,l.I9,l.ME,l.tN,l.ZB,l.W9,l.iq,l.uz,l.he,l.nf,l.AF,l.Gp,l.eP,l.ds,l.Zx,l.op,l.CF,l.Je,h.vh],styles:['.popup-modal[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.profile-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.packageInfo[_ngcontent-%COMP%]{font-family:Alef;text-align:center;font-weight:700}.header-tab[_ngcontent-%COMP%]{justify-content:center;align-items:center;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}.sub-label-segment[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;justify-content:center;text-align:center;gap:4px}.sub-label-segment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em;vertical-align:middle}.ion-segment-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.settings-icon[_ngcontent-%COMP%]{font-size:24px;position:absolute;top:5%;right:15px;color:#888;cursor:pointer;opacity:.7}.avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;margin-bottom:20px}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#333;text-align:right;line-height:10px}p[_ngcontent-%COMP%]{font-size:1em;color:#666;text-align:right}ion-card[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:15px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:row;align-items:center}ion-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;padding-left:35%;width:100%}.training-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:0 auto}.training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-top:15px}.training-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin:0}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-self:center;position:absolute;left:10px;top:35%}.status-icon[_ngcontent-%COMP%]{font-size:24px;color:red;margin-left:10px}.arrow-icon[_ngcontent-%COMP%]{font-size:24px;color:#888}ion-segment-button.ion-activated[_ngcontent-%COMP%]{--background: #3498db;--color: red;box-shadow:0 4px 12px #007bff4d}.ios[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{font-size:1.1em}.subscriptionDetails[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;flex-direction:column}.filter-segment[_ngcontent-%COMP%]{color:red}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto 10px}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.filter-dropdown[_ngcontent-%COMP%]{margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}.sub-label[_ngcontent-%COMP%]{color:#2c2c2c;font-weight:400!important;font-size:18px}ion-segment-button[_ngcontent-%COMP%]{--color-checked: #000}ion-popover[_ngcontent-%COMP%]{--width: 95%;--border-radius: 12px;--box-shadow: 0px 4px 8px rgba(0, 0, 0, .1);overflow-y:hidden!important}ion-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-color-medium)}ion-toggle[_ngcontent-%COMP%]{margin-left:auto;--handle-background: var(--ion-color-primary)}ion-popover[_ngcontent-%COMP%]{--background: #ffffff;--border-radius: 12px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .1);--padding: 16px}.popover-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.popover-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border-radius:8px;transition:background-color .2s ease-in-out}.popover-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.popover-button[_ngcontent-%COMP%]{color:#fff;background-color:orange;border-radius:20px;padding:8px 16px;font-weight:700}ion-popover[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{overflow:hidden!important;height:auto!important}ion-popover[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{overflow-y:hidden!important}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar[_ngcontent-%COMP%]{display:none!important}.scroll-y-hidden[_ngcontent-%COMP%]{overflow-y:hidden!important}ion-toggle[_ngcontent-%COMP%]{padding:12px;margin-left:auto;--handle-background: var(--ion-color-primary);--background: var(--ion-color-light);--track-background: #ddd;--track-background-checked: #ddd;--handle-background: #59c7cd;--handle-background-checked: #ff8366;--handle-width: 25px;--handle-height: 27px;--handle-max-height: auto;--handle-spacing: 6px;--handle-border-radius: 4px;--handle-box-shadow: none}ion-toggle[_ngcontent-%COMP%]::part(track){height:10px;width:65px;overflow:visible}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:var(--ion-color-medium);margin:0}.fav-location[_ngcontent-%COMP%]{font-size:.75rem;color:var(--ion-color-medium);margin:4px 0 0}ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:700}ion-item[_ngcontent-%COMP%]{--border-width: 0;--inner-border-width: 0;border:none;box-shadow:none}.title[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-dark);line-height:1.2;margin-bottom:2px}.description[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);line-height:1.2;margin:0}.custom-three-way-toggle[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:space-between;width:100%;max-width:300px}.custom-three-way-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.custom-three-way-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;flex:1;text-align:center;z-index:1;color:#050505;font-size:14px;line-height:40px}.custom-three-way-toggle[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:33.33%;height:100%;background-color:#ff8366;transition:all .3s ease;z-index:0;border-radius:20px}.custom-three-way-toggle[_ngcontent-%COMP%]   input#left[_ngcontent-%COMP%]:checked ~ .slider[_ngcontent-%COMP%]{color:#fff;background-color:#59c7cd;transform:translate(0)}.custom-three-way-toggle[_ngcontent-%COMP%]   input#center[_ngcontent-%COMP%]:checked ~ .slider[_ngcontent-%COMP%]{color:#fff;background-color:#ff8366;transform:translate(100%)}.custom-three-way-toggle[_ngcontent-%COMP%]   input#right[_ngcontent-%COMP%]:checked ~ .slider[_ngcontent-%COMP%]{color:#fff;background-color:orange;transform:translate(200%)}.custom-three-way-toggle[_ngcontent-%COMP%]   input#left[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff}.custom-three-way-toggle[_ngcontent-%COMP%]   input#center[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff}.custom-three-way-toggle[_ngcontent-%COMP%]   input#right[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff}.notes-grid[_ngcontent-%COMP%]{display:grid}.note-card[_ngcontent-%COMP%]{border-radius:16px;padding:16px;position:relative;transition:transform .2s ease;min-height:120px;display:flex;flex-direction:column;transition:transform .3s ease-out,opacity .3s ease-out}.note-card.ion-color-success-light[_ngcontent-%COMP%]{--background: rgba(167, 243, 208, .5)}.note-card.ion-color-purple-light[_ngcontent-%COMP%]{--background: rgba(221, 214, 254, .5)}.note-card.ion-color-pink-light[_ngcontent-%COMP%]{--background: rgba(251, 207, 232, .5)}.note-card.ion-color-warning-light[_ngcontent-%COMP%]{--background: rgba(254, 243, 199, .5)}.note-card.ion-color-cyan-light[_ngcontent-%COMP%]{--background: rgba(165, 243, 252, .5)}.note-card.ion-color-tertiary-light[_ngcontent-%COMP%]{--background: rgba(249, 168, 212, .5)}.note-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--ion-color-dark)}.notes-header[_ngcontent-%COMP%]{align-items:start!important}.note-content[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);flex:1}.add-note-fab[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;--background: #ff4081;--box-shadow: 0 4px 12px rgba(255, 64, 129, .4)}ion-label.notes-not-found[_ngcontent-%COMP%]{font-family:Alef;text-align:center;margin-top:20%;color:gray}.notes-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;font-size:20px;font-weight:700;position:relative}.add-note-button[_ngcontent-%COMP%]{background-color:#000;color:#fff;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 6px #00000026;cursor:pointer;transition:all .2s ease-in-out}.add-note-header[_ngcontent-%COMP%]{margin-right:5%}.add-note-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.add-note-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 12px #0003}.add-note-button[_ngcontent-%COMP%]:active{transform:scale(.95)}']}),a})();var be=u(4531),ve=u(3952),W=u.n(ve),Ce=(u(7149),u(1523),u(8158),u(342),u(1792)),A=(u(9514),u(401),u(7341),u(1656),u(4700),u(4832),u(3099),u(9247),u(2007),u(1398),u(3870),u(3015),u(7310),u(8305),u(7443),u(8033),u(9969)),Z=u(1413),xe=u(9431);let De=(()=>{var o;class a{constructor(e){this.http=e,this.customApiURL="https://k-studio.co.il/wp-json/custom-api/v1"}getAllUsers(){return this.http.get(`${this.customApiURL}/users`)}getAllPackages(){return this.http.get(`${this.customApiURL}/users-packages`)}getUserPackages(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${e}`)}getFilteredAppointments(e,i,r){return this.http.get(`${this.customApiURL}/appointments?startDate=${e}&endDate=${i}&packageCustomerId=${r}`)}cancelAppointment(e){return this.http.post(`https://k-studio.co.il/wp-json/wn/v1/cancel-booking/${e}`,{})}getAppointments(e,i){const r=i.split(" ")[0],s=this.calculateEndDate(r);return this.http.get(`${this.customApiURL}/appointments?startDate=${r}&endDate=${s}&packageCustomerId=${e}`)}calculateEndDate(e){const i=new Date(e);return i.setDate(i.getDate()+30),i.toISOString().split("T")[0]}getSubscriptionDetails(e){return this.http.get(`${this.customApiURL}/subscription?user_id=${e}`)}getSubscriptionDetailsBySubscriptionID(e){return this.http.get(`${this.customApiURL}/subscriptionById/${e}`)}updateSubscriptionStatus(e,i){return this.http.get(`${this.customApiURL}/subscription-action?subscription_id=${e}&action=${i}`)}updateRenewalDate(e,i){return this.http.post(`${this.customApiURL}/subscription/${e}/renewal/${i}`,{})}}return(o=a).\u0275fac=function(e){return new(e||o)(t.KVO(Q.Qq))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function ye(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-item",6),t.bIt("click",function(){const i=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.selectUser(i))}),t.j41(1,"ion-avatar",7),t.nrm(2,"img",8),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.k0s()()}if(2&o){const n=a.$implicit;t.R7$(2),t.Y8G("src",n.wpUserPhotoUrl,t.B4B),t.R7$(2),t.Lme(" ",n.firstName," ",n.lastName," ")}}function Pe(o,a){if(1&o&&(t.j41(0,"ion-list",4),t.DNE(1,ye,5,3,"ion-item",5),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.filteredUsers)}}function Se(o,a){1&o&&t.nrm(0,"ion-spinner")}function we(o,a){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const n=t.XpG(3);t.R7$(),t.SpI(" ","active"===n.subscription.status?"\u05d4\u05e9\u05d4\u05d4 \u05de\u05e0\u05d5\u05d9":"\u05d4\u05e4\u05e2\u05dc \u05de\u05e0\u05d5\u05d9"," ")}}function Me(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-content")(1,"ion-datetime",21),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG(3);return t.DH7(r.selectedDate,i)||(r.selectedDate=i),t.Njj(i)}),t.k0s(),t.j41(2,"ion-footer")(3,"ion-toolbar")(4,"ion-buttons",22)(5,"ion-button",23),t.bIt("click",function(){t.eBV(n);const i=t.XpG(3);return t.Njj(i.closeDatePicker())}),t.EFF(6,"\u05d1\u05d9\u05d8\u05d5\u05dc"),t.k0s(),t.j41(7,"ion-button",23),t.bIt("click",function(){t.eBV(n);const i=t.XpG(3);return t.Njj(i.confirmNewDate())}),t.EFF(8,"\u05d0\u05d9\u05e9\u05d5\u05e8"),t.k0s()()()()()}if(2&o){const n=t.XpG(3);t.R7$(),t.R50("ngModel",n.selectedDate),t.Y8G("min",n.minDate)("value",n.selectedDate)}}function ke(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",15)(1,"ion-card-content")(2,"div",16)(3,"ion-chip")(4,"ion-label")(5,"strong"),t.EFF(6,"\u05de\u05e1' \u05de\u05e0\u05d5\u05d9:"),t.k0s(),t.EFF(7),t.k0s()(),t.j41(8,"ion-chip")(9,"ion-label")(10,"strong"),t.EFF(11,"\u05e1\u05d8\u05d8\u05d5\u05e1 \u05de\u05e0\u05d5\u05d9:"),t.k0s(),t.EFF(12),t.k0s()(),t.j41(13,"ion-chip")(14,"ion-label")(15,"strong"),t.EFF(16,"\u05d7\u05d9\u05d3\u05d5\u05e9 \u05d4\u05d1\u05d0:"),t.k0s(),t.EFF(17),t.k0s()()(),t.j41(18,"ion-button",17),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.handleSubscriptionToggle(i.subscription.id,i.subscription.status))}),t.DNE(19,Se,1,0,"ion-spinner",18)(20,we,2,1,"span",18),t.k0s(),t.j41(21,"ion-button",19),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.openDatePicker(i.subscription.id))}),t.EFF(22," \u05d1\u05d7\u05e8 \u05ea\u05d0\u05e8\u05d9\u05da \u05d7\u05d3\u05e9 "),t.k0s(),t.j41(23,"ion-modal",20),t.bIt("didDismiss",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.closeDatePicker())}),t.DNE(24,Me,9,3,"ng-template"),t.k0s()()()}if(2&o){const n=t.XpG(2);t.Y8G("@expandCollapse",void 0),t.R7$(7),t.SpI(" ",n.subscription.id," "),t.R7$(5),t.SpI(" ",n.subscription.status," "),t.R7$(5),t.SpI(" ",n.subscription.nextRenewal," "),t.R7$(),t.Y8G("color","active"===n.subscription.status?"warning":"success"),t.R7$(),t.Y8G("ngIf",n.loadingSubscriptionId===n.subscription.id),t.R7$(),t.Y8G("ngIf",n.loadingSubscriptionId!==n.subscription.id),t.R7$(3),t.Y8G("isOpen",n.isDatePickerOpen)}}function Oe(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-item",33)(1,"ion-label")(2,"h3"),t.EFF(3),t.nI1(4,"date"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()(),t.j41(7,"ion-button",34),t.bIt("click",function(){const i=t.eBV(n).$implicit,r=t.XpG(6);return t.Njj(r.cancelAppointment(i.bookingId))}),t.nrm(8,"ion-icon",35),t.k0s()()}if(2&o){const n=a.$implicit,e=t.XpG(6);t.R7$(3),t.JRh(t.i5U(4,4,n.time,"dd.MM HH:mm")),t.R7$(2),t.HbH("status-"+n.status),t.R7$(),t.SpI(" \u05e1\u05d8\u05d8\u05d5\u05e1: ",e.translateStatus(n.status)," ")}}function Te(o,a){if(1&o&&(t.j41(0,"div",31)(1,"ion-list"),t.DNE(2,Oe,9,7,"ion-item",32),t.k0s()()),2&o){const n=t.XpG(3).$implicit,e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.appointments[n.packageCustomerId])}}function Ee(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",28)(1,"ion-button",19),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2).$implicit,r=t.XpG(2);return t.Njj(r.fetchAppointmentsForPackage(i.packageCustomerId,i.purchased))}),t.nrm(2,"ion-icon",29),t.EFF(3," \u05e8\u05e2\u05e0\u05df \u05e4\u05d2\u05d9\u05e9\u05d5\u05ea "),t.k0s(),t.DNE(4,Te,3,1,"div",30),t.k0s()}if(2&o){const n=t.XpG(2).$implicit,e=t.XpG(2);t.R7$(4),t.Y8G("ngIf",e.appointments[n.packageCustomerId])}}function Ie(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",36)(1,"ion-item")(2,"ion-datetime",21),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG(4);return t.DH7(r.newTraining.dateTime,i)||(r.newTraining.dateTime=i),t.Njj(i)}),t.k0s()(),t.j41(3,"ion-item")(4,"ion-label"),t.EFF(5,"\u05de\u05d9\u05e7\u05d5\u05dd"),t.k0s(),t.j41(6,"ion-select",37),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG(4);return t.DH7(r.newTraining.location,i)||(r.newTraining.location=i),t.Njj(i)}),t.j41(7,"ion-select-option",38),t.EFF(8,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),t.k0s(),t.j41(9,"ion-select-option",39),t.EFF(10,"\u05d4\u05d9\u05e8\u05e7\u05d5\u05df"),t.k0s()()(),t.j41(11,"ion-button",40),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2).$implicit,r=t.XpG(2);return t.Njj(r.addTraining(i.packageCustomerId,i.serviceId))}),t.nrm(12,"ion-icon",41),t.EFF(13," \u05d4\u05d5\u05e1\u05e3 \u05d0\u05d9\u05de\u05d5\u05df "),t.k0s()()}if(2&o){const n=t.XpG(4);t.R7$(2),t.R50("ngModel",n.newTraining.dateTime),t.Y8G("min",n.minDate)("value",n.newTraining.dateTime),t.R7$(4),t.R50("ngModel",n.newTraining.location)}}function je(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",15)(1,"ion-card-content")(2,"div",24)(3,"ion-chip")(4,"ion-label")(5,"strong"),t.EFF(6,"\u05de\u05e7\u05d5\u05de\u05d5\u05ea \u05e4\u05e0\u05d5\u05d9\u05d9\u05dd:"),t.k0s(),t.EFF(7),t.k0s()(),t.j41(8,"ion-chip")(9,"ion-label")(10,"strong"),t.EFF(11,"\u05ea\u05d0\u05e8\u05d9\u05da \u05e8\u05db\u05d9\u05e9\u05d4:"),t.k0s(),t.EFF(12),t.nI1(13,"date"),t.k0s()()(),t.j41(14,"ion-item-group")(15,"ion-item-divider",25),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.toggleAppointments(i.packageCustomerId))}),t.j41(16,"ion-label"),t.EFF(17,"\u05e4\u05d2\u05d9\u05e9\u05d5\u05ea"),t.k0s(),t.nrm(18,"ion-icon",12),t.k0s(),t.DNE(19,Ee,5,1,"div",26),t.k0s(),t.j41(20,"ion-item-group")(21,"ion-item-divider",25),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.toggleAddTraining(i.packageCustomerId))}),t.j41(22,"ion-label"),t.EFF(23,"\u05d4\u05d5\u05e1\u05e3 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.nrm(24,"ion-icon",12),t.k0s(),t.DNE(25,Ie,14,4,"div",27),t.k0s()()()}if(2&o){const n=t.XpG().$implicit,e=t.XpG(2);t.Y8G("@expandCollapse",void 0),t.R7$(7),t.Lme(" ",n.available," / ",n.total," "),t.R7$(5),t.SpI(" ",t.i5U(13,8,n.purchased,"dd.MM HH:mm")," "),t.R7$(6),t.Y8G("name",e.isAppointmentsVisible(n.packageCustomerId)?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",e.isAppointmentsVisible(n.packageCustomerId)),t.R7$(5),t.Y8G("name",e.showAddTrainingForm[n.packageCustomerId]?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",e.showAddTrainingForm[n.packageCustomerId])}}function Fe(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-card",10)(1,"ion-item",11),t.bIt("click",function(){const i=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.toggleCard(i.packageCustomerId))}),t.j41(2,"ion-card-header")(3,"ion-card-title"),t.EFF(4,"\u05d7\u05d1\u05d9\u05dc\u05d4"),t.k0s()(),t.nrm(5,"ion-icon",12),t.k0s(),t.DNE(6,je,26,11,"div",13),t.k0s()}if(2&o){const n=a.$implicit,e=t.XpG(2);t.R7$(5),t.Y8G("name",e.isCardExpanded(n.packageCustomerId)?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",e.isCardExpanded(n.packageCustomerId))}}function Ae(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",9)(1,"ion-text")(2,"h2"),t.EFF(3),t.k0s()(),t.j41(4,"ion-card",10)(5,"ion-item",11),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.toggleCard(i.subscription.id))}),t.j41(6,"ion-card-header")(7,"ion-card-title"),t.EFF(8,"\u05de\u05e0\u05d5\u05d9"),t.k0s()(),t.nrm(9,"ion-icon",12),t.k0s(),t.DNE(10,ke,25,8,"div",13),t.k0s(),t.j41(11,"ion-list"),t.DNE(12,Fe,7,2,"ion-card",14),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(3),t.Lme("\u05e0\u05ea\u05d5\u05e0\u05d9 \u05de\u05e9\u05ea\u05de\u05e9 ",n.selectedUser.firstName," ",n.selectedUser.lastName,""),t.R7$(6),t.Y8G("name",n.isCardExpanded(n.subscription.id)?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",n.isCardExpanded(n.subscription.id)),t.R7$(2),t.Y8G("ngForOf",n.packages)}}let Ne=(()=>{var o;class a{constructor(e,i,r){this.alertController=e,this.http=i,this.managePackagesService=r,this.newTraining={dateTime:"",location:"main"},this.subscription={id:"",status:"",nextRenewal:""},this.isDatePickerOpen=!1,this.selectedDate="",this.selectedSubscriptionId=null,this.expandedCards={},this.visibleAppointments={},this.loadingSubscriptionId=null,this.today=(new Date).toISOString(),this.minDate=(new Date).toISOString(),this.showAddTrainingForm={},this.availablePackages=[],this.appointments={},this.currentPackageId=null,this.currentPurchaseDate=null,this.users=[],this.filteredUsers=[],this.selectedUser=null,this.packages=[],this.searchQuery="",this.searchSubject=new Z.B}ngOnInit(){this.loadUsers(),this.setupSearchSubscription(),this.today=(new Date).toISOString(),this.minDate=(new Date).toISOString(),this.newTraining.dateTime||(this.newTraining.dateTime=this.today),this.selectedDate||(this.selectedDate=this.today)}toggleCard(e){this.expandedCards[Number(e)]=!this.expandedCards[Number(e)]}fetchSubscription(e){this.managePackagesService.getSubscriptionDetails(e).subscribe(i=>{const r=i[0];this.subscription={id:r.subscription_id,status:r.status,nextRenewal:r.next_renewal_date}},i=>{console.error("error:",i)})}fetchSubscriptionBySubscriptionID(e){this.managePackagesService.getSubscriptionDetailsBySubscriptionID(e).subscribe(i=>{console.log("data",i);const r=i;console.log("serverData:",r),this.subscription={id:r.id,status:r.status,nextRenewal:r.renewalDate}},i=>{console.error("Error:",i)})}handleSubscriptionToggle(e,i){this.loadingSubscriptionId=e,this.toggleSubscriptionStatus(e,"active"===i?"suspend":"active").then(()=>{this.loadingSubscriptionId=null}).catch(s=>{console.error("Error toggling subscription:",s),this.loadingSubscriptionId=null})}toggleSubscriptionStatus(e,i){return new Promise((r,s)=>{this.managePackagesService.updateSubscriptionStatus(e,i).subscribe({next:d=>{console.log("Status Update Response:",d),console.log("subscriptionID:",e),this.fetchSubscriptionBySubscriptionID(e),r()},error:d=>{console.error("Error updating subscription status:",d),s(d)}})})}openDatePicker(e){this.selectedSubscriptionId=e,this.isDatePickerOpen=!0}closeDatePicker(){this.isDatePickerOpen=!1}confirmNewDate(){var e=this;return(0,k.A)(function*(){e.closeDatePicker(),yield(yield e.alertController.create({header:"\u05d0\u05d9\u05e9\u05d5\u05e8 \u05ea\u05d0\u05e8\u05d9\u05da \u05d7\u05d3\u05e9",message:`\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05e2\u05d3\u05db\u05df \u05d0\u05ea \u05d4\u05ea\u05d0\u05e8\u05d9\u05da \u05dc-${e.selectedDate}?`,buttons:[{text:"\u05d1\u05d9\u05d8\u05d5\u05dc",role:"cancel"},{text:"\u05d0\u05d9\u05e9\u05d5\u05e8",handler:()=>{e.updateRenewalDate(e.selectedSubscriptionId,e.selectedDate)}}]})).present()})()}updateRenewalDate(e,i){this.managePackagesService.updateRenewalDate(e,i).subscribe(r=>{console.log("Renewal Date Update Response:",r),this.fetchSubscriptionBySubscriptionID(e)})}isCardExpanded(e){const i=Number(e);return!1!==this.expandedCards[i]}loadUsers(){this.managePackagesService.getAllUsers().subscribe(e=>{this.users=e.data.users.map(i=>({id:i.externalId,customerId:i.id,firstName:i.firstName,lastName:i.lastName,wpUserPhotoUrl:i.wpUserPhotoUrl}))},e=>{console.error("Error fetching users:",e)})}setupSearchSubscription(){this.searchSubject.pipe((0,xe.B)(300)).subscribe(e=>{this.filteredUsers=this.users.filter(i=>i.firstName.toLowerCase().includes(e.toLowerCase())||i.lastName.toLowerCase().includes(e.toLowerCase()))})}toggleAppointments(e){if(this.visibleAppointments[e]=!this.visibleAppointments[e],this.visibleAppointments[e]&&(!this.appointments[e]||0===this.appointments[e].length)){const i=this.packages.find(r=>r.packageCustomerId===e);i&&this.fetchAppointmentsForPackage(e,i.purchased)}}isAppointmentsVisible(e){return!!this.visibleAppointments[e]}toggleAddTraining(e){Object.keys(this.showAddTrainingForm).forEach(i=>{parseInt(i)!==e&&(this.showAddTrainingForm[parseInt(i)]=!1)}),this.showAddTrainingForm[e]=!this.showAddTrainingForm[e],this.showAddTrainingForm[e]||(this.newTraining={dateTime:"",location:"main"})}onSearchQueryChange(e){this.searchSubject.next(e.detail.value)}selectUser(e){this.selectedUser=e,this.filteredUsers=[],this.searchQuery=`${e.firstName} ${e.lastName}`,this.fetchUserPackages(e.customerId),this.fetchSubscription(e.id)}fetchUserPackages(e){this.managePackagesService.getUserPackages(e).subscribe(i=>{if(null==i||!i.data)return console.error("Error: response data is undefined or null"),void(this.packages=[]);this.packages=i.data.flatMap(r=>r.packages?r.packages.flatMap(s=>s.purchases?s.purchases.flatMap(d=>d.purchase?d.purchase.map(b=>({customerId:r.customerId,packageId:s.packageId,packageCustomerId:d.packageCustomerId,serviceId:b.serviceId,available:b.available,total:b.total,purchased:d.purchased})):[]):[]):[])},i=>{console.error("Error fetching packages:",i),this.packages=[]})}fetchAppointmentsForPackage(e,i){this.currentPackageId=e,this.currentPurchaseDate=i,this.managePackagesService.getAppointments(e,i).subscribe(r=>{this.appointments[e]=r},r=>{console.error("Error fetching appointments:",r)})}translateStatus(e){return{approved:"\u05de\u05d0\u05d5\u05e9\u05e8",canceled:"\u05d1\u05d5\u05d8\u05dc",pending:"\u05d1\u05d4\u05de\u05ea\u05e0\u05d4"}[e]||"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2"}cancelAppointment(e){confirm("\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05d1\u05d8\u05dc \u05d0\u05ea \u05d4\u05d0\u05d9\u05de\u05d5\u05df?")&&this.managePackagesService.cancelAppointment(e).subscribe(()=>{alert("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.currentPackageId&&this.currentPurchaseDate&&this.fetchAppointmentsForPackage(this.currentPackageId,this.currentPurchaseDate)},i=>{console.error("Error canceling appointment:",i),alert("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e2\u05ea \u05d1\u05d9\u05d8\u05d5\u05dc \u05d4\u05d0\u05d9\u05de\u05d5\u05df")})}addTraining(e,i){if(!this.newTraining.dateTime)return void alert("\u05d0\u05e0\u05d0 \u05d4\u05d6\u05df \u05ea\u05d0\u05e8\u05d9\u05da \u05d5\u05e9\u05e2\u05d4 \u05dc\u05d0\u05d9\u05de\u05d5\u05df");if(!this.selectedUser)return void alert("\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e0\u05d1\u05d7\u05e8");const r=new Date(this.newTraining.dateTime).toISOString(),s="main"===this.newTraining.location?1:2;let d=0;console.log("location:",this.newTraining.location),console.log("serviceId:",i),"main"===this.newTraining.location&&1==i||4==i?d=172:"main"===this.newTraining.location&&12==i||54==i||17==i?d=169:"main"!=this.newTraining.location&&12==i||54==i||17==i?d=643:("main"!=this.newTraining.location&&1==i||4==i)&&(d=644);const b={type:"appointment",serviceId:i,providerId:d,locationId:s,notifyParticipants:0,bookings:[{customerId:this.selectedUser.id,status:"approved",duration:3600,persons:1,extras:[],customFields:{},utcOffset:-(new Date).getTimezoneOffset(),packageCustomerService:{packageCustomer:{id:e}}}],bookingStart:r,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};this.http.post("https://k-studio.co.il/wp-json/wn/v1/bookTrainingNEW",b,{headers:{"Content-Type":"application/json"}}).subscribe(D=>{var y;null!==(y=D.data)&&void 0!==y&&y.timeSlotUnavailable?alert("\u05de\u05e9\u05d1\u05e6\u05ea \u05d4\u05d6\u05de\u05df \u05d0\u05d9\u05e0\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4"):(alert("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05e0\u05d5\u05e1\u05e3 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.newTraining={dateTime:"",location:"main"})},D=>{console.error("Error Adding Training:",D),alert("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05d9\u05de\u05d5\u05df")})}}return(o=a).\u0275fac=function(e){return new(e||o)(t.rXU(l.hG),t.rXU(Q.Qq),t.rXU(De))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-manage-packages"]],decls:5,vars:3,consts:[[1,"search-container"],["placeholder","\u05d7\u05e4\u05e9 \u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05e4\u05d9 \u05e9\u05dd",1,"custom-searchbar",3,"ngModelChange","ionInput","ngModel"],["class","autocomplete-dropdown",4,"ngIf"],["class","package-details",4,"ngIf"],[1,"autocomplete-dropdown"],["class","user-item",3,"click",4,"ngFor","ngForOf"],[1,"user-item",3,"click"],["slot","start"],["alt","User photo",3,"src"],[1,"package-details"],[1,"package-card"],[1,"card-header",3,"click"],["slot","end",3,"name"],["class","card-content",4,"ngIf"],["class","package-card",4,"ngFor","ngForOf"],[1,"card-content"],[1,"subscription-info"],["expand","block",3,"click","color"],[4,"ngIf"],["expand","block","color","primary",3,"click"],[3,"didDismiss","isOpen"],["presentation","date-time","locale","he","hour-cycle","h23","first-day-of-week","0",1,"custom-datetime",3,"ngModelChange","ngModel","min","value"],["slot","end"],[3,"click"],[1,"package-info"],[1,"collapsible-header",3,"click"],["class","collapsible-content",4,"ngIf"],["class","collapsible-content add-training",4,"ngIf"],[1,"collapsible-content"],["name","refresh","slot","start"],["class","appointments",4,"ngIf"],[1,"appointments"],["class","appointment-item",4,"ngFor","ngForOf"],[1,"appointment-item"],["color","danger","fill","clear","slot","end",3,"click"],["name","trash"],[1,"collapsible-content","add-training"],["interface","popover",3,"ngModelChange","ngModel"],["value","main"],["value","second"],["expand","block","color","success",1,"add-training-button",3,"click"],["name","add-circle","slot","start"]],template:function(e,i){1&e&&(t.j41(0,"ion-content")(1,"div",0)(2,"ion-searchbar",1),t.mxI("ngModelChange",function(s){return t.DH7(i.searchQuery,s)||(i.searchQuery=s),s}),t.bIt("ionInput",function(s){return i.onSearchQueryChange(s)}),t.k0s(),t.DNE(3,Pe,2,1,"ion-list",2),t.k0s(),t.DNE(4,Ae,13,5,"div",3),t.k0s()),2&e&&(t.R7$(2),t.R50("ngModel",i.searchQuery),t.R7$(),t.Y8G("ngIf",i.filteredUsers.length>0),t.R7$(),t.Y8G("ngIf",i.selectedUser))},dependencies:[h.Sq,h.bT,c.BC,c.vS,l.mC,l.Jm,l.QW,l.b_,l.I9,l.ME,l.tN,l.ZB,l.W9,l.A9,l.M0,l.iq,l.uz,l.Dg,l.jh,l.he,l.nf,l.S1,l.Nm,l.Ip,l.w2,l.IO,l.ai,l.Sb,l.Je,l.Gw,h.vh],styles:['ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #ffffff 0%, #fafafa 100%);--padding-start: 0;--padding-end: 0}.search-container[_ngcontent-%COMP%]{padding:24px 24px 20px;position:sticky;top:0;z-index:1000;background:linear-gradient(to bottom,#fff,#fafafa);border-bottom:1px solid #f1f5f9;box-shadow:0 2px 8px #0000000a}.search-container[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]{--border-radius: 20px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .08);--background: #ffffff;--placeholder-color: #94a3b8;--color: #1e293b;--icon-color: #64748b;margin-bottom:8px;border:1px solid #f1f5f9;transition:all .3s cubic-bezier(.4,0,.2,1)}.search-container[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]:focus-within{--box-shadow: 0 6px 20px rgba(102, 126, 234, .15);border-color:#667eea}.autocomplete-dropdown[_ngcontent-%COMP%]{max-height:280px;width:calc(100% - 48px);margin:0 24px;overflow-y:auto;border-radius:20px;box-shadow:0 8px 32px #0000001f;background:#fff;border:1px solid #f1f5f9;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{--padding-start: 20px;--padding-end: 20px;--min-height: 80px;--background: transparent;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:hover{--background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);transform:translate(-4px)}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #f1f5f9}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;height:100%;width:4px;background:linear-gradient(135deg,#667eea,#764ba2);transform:scaleY(0);transition:transform .3s cubic-bezier(.4,0,.2,1)}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:hover:after{transform:scaleY(1)}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:52px;height:52px;border:2px solid #f1f5f9;box-shadow:0 4px 12px #00000014;transition:all .3s ease}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #0000001f}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500;color:#1e293b;font-size:1rem;letter-spacing:-.01em}.package-details[_ngcontent-%COMP%]{padding:24px}.package-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.75rem;font-weight:700;color:#1e293b;margin-bottom:40px;letter-spacing:-.02em;position:relative}.package-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-12px;left:50%;transform:translate(-50%);width:80px;height:4px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:2px;box-shadow:0 2px 8px #667eea40}.package-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:24px;box-shadow:0 4px 20px #00000014;border:1px solid #f1f5f9;background:#fff;overflow:hidden;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative}.package-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(135deg,#667eea,#764ba2);transform:scaleX(0);transition:transform .3s cubic-bezier(.4,0,.2,1)}.package-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 40px #00000026;border-color:#e2e8f0}.package-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{cursor:pointer;--background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);--padding-start: 24px;--padding-end: 24px;--min-height: 80px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{--background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%)}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:0;width:100%}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.375rem;font-weight:700;text-align:center;color:#1e293b;margin:0;letter-spacing:-.01em}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#64748b;transition:all .3s cubic-bezier(.4,0,.2,1)}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{color:#667eea;transform:scale(1.1)}.package-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{overflow:hidden}.package-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:28px;background:#fff}.subscription-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:28px}.subscription-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);--color: #475569;border-radius:16px;padding:12px 20px;font-weight:500;box-shadow:0 2px 12px #00000014;margin:0;border:1px solid #e2e8f0;transition:all .3s ease}.subscription-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #0000001f}.subscription-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9375rem}.subscription-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1e293b;font-weight:600}ion-button[_ngcontent-%COMP%]{--border-radius: 16px;--padding-start: 24px;--padding-end: 24px;height:52px;font-weight:600;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:16px;font-size:.9375rem;letter-spacing:-.01em}ion-button[color=primary][_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--background-activated: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);--box-shadow: 0 4px 16px rgba(102, 126, 234, .25)}ion-button[color=primary][_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 24px rgba(102, 126, 234, .35)}ion-button[color=success][_ngcontent-%COMP%]{--background: linear-gradient(135deg, #10b981 0%, #059669 100%);--background-activated: linear-gradient(135deg, #0d9488 0%, #047857 100%);--box-shadow: 0 4px 16px rgba(16, 185, 129, .25)}ion-button[color=success][_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 24px rgba(16, 185, 129, .35)}ion-button[color=warning][_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);--background-activated: linear-gradient(135deg, #e08b00 0%, #b45309 100%);--box-shadow: 0 4px 16px rgba(245, 158, 11, .25)}ion-button[color=warning][_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 24px rgba(245, 158, 11, .35)}ion-button[color=danger][_ngcontent-%COMP%]{--background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);--background-activated: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);--box-shadow: 0 4px 16px rgba(239, 68, 68, .25)}ion-button[color=danger][_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 24px rgba(239, 68, 68, .35)}ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}ion-button[_ngcontent-%COMP%]:active{transform:translateY(-1px)}ion-button[fill=clear][_ngcontent-%COMP%]{--background: transparent;--color: #ef4444;--box-shadow: none}ion-button[fill=clear][_ngcontent-%COMP%]:hover{--background: rgba(239, 68, 68, .1);transform:scale(1.05)}.package-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:28px}.package-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--color: #ffffff;border-radius:16px;padding:12px 20px;font-weight:600;box-shadow:0 4px 16px #667eea40;margin:0;transition:all .3s ease}.package-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 24px #667eea59}.package-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9375rem}.package-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:700}.collapsible-header[_ngcontent-%COMP%]{cursor:pointer;--background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);--padding-start: 24px;--padding-end: 24px;--min-height: 68px;margin-top:24px;border-radius:16px;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 12px #00000014;border:1px solid #e2e8f0}.collapsible-header[_ngcontent-%COMP%]:hover{--background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);transform:translateY(-2px);box-shadow:0 4px 16px #0000001f}.collapsible-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:1.1875rem;letter-spacing:-.01em}.collapsible-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#64748b;transition:all .3s cubic-bezier(.4,0,.2,1)}.collapsible-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{color:#667eea;transform:scale(1.1)}.collapsible-content[_ngcontent-%COMP%]{padding:28px 0;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.4,0,.2,1)}.appointment-item[_ngcontent-%COMP%]{--padding-start: 24px;--padding-end: 24px;--min-height: 80px;margin-bottom:16px;border-radius:16px;background:#fff;border:1px solid #f1f5f9;box-shadow:0 2px 12px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative}.appointment-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;height:100%;width:4px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:0 2px 2px 0;transform:scaleY(0);transition:transform .3s cubic-bezier(.4,0,.2,1)}.appointment-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #0000001f;border-color:#e2e8f0}.appointment-item[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.appointment-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:1.1875rem;margin-bottom:6px;letter-spacing:-.01em}.appointment-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem;margin:0;font-weight:500}.appointment-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-start: 16px;--padding-end: 16px;width:48px;height:48px;margin:0}.appointment-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.appointment-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.status-approved[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#10b981,#059669);padding:6px 12px;border-radius:12px;font-weight:600;box-shadow:0 2px 8px #10b98140}.status-canceled[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#ef4444,#dc2626);padding:6px 12px;border-radius:12px;font-weight:600;box-shadow:0 2px 8px #ef444440}.status-pending[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#f59e0b,#d97706);padding:6px 12px;border-radius:12px;font-weight:600;box-shadow:0 2px 8px #f59e0b40}.custom-datetime[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:20px;border-radius:16px;box-shadow:0 4px 16px #00000014;background:#fff;border:1px solid #f1f5f9}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;--border-radius: 16px;margin-bottom:20px;border-radius:16px;box-shadow:0 2px 12px #00000014;border:1px solid #f1f5f9;transition:all .3s ease}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #0000001f}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;margin-bottom:12px;font-size:1rem}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:100%;border:1px solid #f1f5f9;border-radius:14px;padding:16px;margin-top:8px;background:#fff;box-shadow:0 2px 8px #0000000f;font-weight:500}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]::part(placeholder){color:#94a3b8}ion-modal[_ngcontent-%COMP%]{--border-radius: 24px;--box-shadow: 0 16px 48px rgba(0, 0, 0, .2)}ion-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #ffffff}ion-modal[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);--border-top: 1px solid #e2e8f0}ion-modal[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 14px;height:44px;margin:12px 8px;font-weight:600}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-24px)}to{opacity:1;transform:translateY(0)}}ion-spinner[_ngcontent-%COMP%]{--color: #667eea}ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}ion-list[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]{margin-bottom:28px}ion-list[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--padding-end: 0;margin-bottom:20px}@media (max-width: 768px){.package-details[_ngcontent-%COMP%]{padding:20px}.package-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:32px}.package-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:20px}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{--padding-start: 20px;--padding-end: 20px;--min-height: 72px}.package-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:24px}.subscription-info[_ngcontent-%COMP%]{gap:12px}ion-button[_ngcontent-%COMP%]{height:48px;font-size:.9375rem}.autocomplete-dropdown[_ngcontent-%COMP%]{max-height:240px}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{--min-height: 72px}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:48px;height:48px}}@media (prefers-color-scheme: dark){ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #1e293b 0%, #0f172a 100%)}.search-container[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#1e293b,#0f172a);border-bottom-color:#334155}.package-card[_ngcontent-%COMP%]{background:#1e293b;border-color:#334155}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #334155 0%, #475569 100%)}.package-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{background:#1e293b}.package-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f8fafc}.autocomplete-dropdown[_ngcontent-%COMP%]{background:#1e293b;border-color:#334155}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:hover{--background: linear-gradient(135deg, #334155 0%, #475569 100%)}}'],data:{animation:[(0,A.hZ)("expandCollapse",[(0,A.wk)("void",(0,A.iF)({height:"0",opacity:"0"})),(0,A.wk)("*",(0,A.iF)({height:"*",opacity:"1"})),(0,A.kY)("void <=> *",[(0,A.i0)("300ms ease-in-out")])])]}}),a})();var Be=u(379),Re=u(6129);class it extends Z.B{constructor(a=1/0,n=1/0,e=Re.U){super(),this._bufferSize=a,this._windowTime=n,this._timestampProvider=e,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,a),this._windowTime=Math.max(1,n)}next(a){const{isStopped:n,_buffer:e,_infiniteTimeWindow:i,_timestampProvider:r,_windowTime:s}=this;n||(e.push(a),!i&&e.push(r.now()+s)),this._trimBuffer(),super.next(a)}_subscribe(a){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(a),{_infiniteTimeWindow:e,_buffer:i}=this,r=i.slice();for(let s=0;s<r.length&&!a.closed;s+=e?1:2)a.next(r[s]);return this._checkFinalizedStatuses(a),n}_trimBuffer(){const{_bufferSize:a,_timestampProvider:n,_buffer:e,_infiniteTimeWindow:i}=this,r=(i?1:2)*a;if(a<1/0&&r<e.length&&e.splice(0,e.length-r),!i){const s=n.now();let d=0;for(let b=1;b<e.length&&e[b]<=s;b+=2)d=b;d&&e.splice(0,d+1)}}}var Le=u(980);const Ge=["*"],$e=(o,a,n)=>({"background-color":o,color:a,"border-color":n}),He=["stepHolder"],Ve=["stepContainer"];function Ue(o,a){if(1&o&&t.nrm(0,"joyride-arrow",21),2&o){const n=t.XpG();t.xc7("top",n.arrowTopPosition,"px")("left",n.arrowLeftPosition,"px"),t.Y8G("position",n.arrowPosition)}}function Xe(o,a){1&o&&t.eu8(0)}function ze(o,a){if(1&o&&(t.EFF(0),t.nI1(1,"async")),2&o){const n=t.XpG();t.SpI(" ",t.bMT(1,1,n.text)," ")}}function Ye(o,a){1&o&&t.eu8(0)}function We(o,a){if(1&o&&(t.j41(0,"div",23),t.EFF(1),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.JRh(n.counter)}}function Je(o,a){if(1&o&&(t.j41(0,"div",22),t.DNE(1,Ye,1,0,"ng-container",15)(2,We,2,1,"ng-template",null,4,t.C5r),t.k0s()),2&o){const n=t.sdS(3),e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.customCounter?e.customCounter:n)("ngTemplateOutletContext",e.counterData)}}function Ke(o,a){1&o&&t.eu8(0)}function Qe(o,a){if(1&o&&(t.j41(0,"joyride-button",26),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&o){const n=t.XpG(2);t.Y8G("color",n.themeColor),t.R7$(),t.JRh(t.bMT(2,2,n.prevText))}}function Ze(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",24),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.prev())}),t.DNE(1,Ke,1,0,"ng-container",25)(2,Qe,3,4,"ng-template",null,5,t.C5r),t.k0s()}if(2&o){const n=t.sdS(3),e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.customPrevButton?e.customPrevButton:n)}}function qe(o,a){1&o&&t.eu8(0)}function tn(o,a){if(1&o&&(t.j41(0,"joyride-button",28),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&o){const n=t.XpG(2);t.Y8G("color",n.themeColor),t.R7$(),t.JRh(t.bMT(2,2,n.nextText))}}function en(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",27),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.next())}),t.DNE(1,qe,1,0,"ng-container",25)(2,tn,3,4,"ng-template",null,6,t.C5r),t.k0s()}if(2&o){const n=t.sdS(3),e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.customNextButton?e.customNextButton:n)}}function nn(o,a){1&o&&t.eu8(0)}function on(o,a){if(1&o&&(t.j41(0,"joyride-button",30),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&o){const n=t.XpG(2);t.Y8G("color",n.themeColor),t.R7$(),t.JRh(t.bMT(2,2,n.doneText))}}function rn(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",29),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.close())}),t.DNE(1,nn,1,0,"ng-container",25)(2,on,3,4,"ng-template",null,7,t.C5r),t.k0s()}if(2&o){const n=t.sdS(3),e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.customDoneButton?e.customDoneButton:n)}}class sn{constructor(){this.title=new it,this.text=new it}}class ot extends Error{constructor(a){super(a),Object.setPrototypeOf(this,ot.prototype)}}class rt extends Error{constructor(a){super(a),Object.setPrototypeOf(this,rt.prototype)}}class st extends Error{constructor(a){super(a),Object.setPrototypeOf(this,st.prototype)}}const q={prev:(0,G.of)("prev"),next:(0,G.of)("next"),done:(0,G.of)("done"),close:(0,G.of)(null)};let U=(()=>{class o{constructor(){this.themeColor="#3b5560",this.stepDefaultPosition="bottom",this.logsEnabled=!1,this.showCounter=!0,this.showPrevButton=!0,this.stepsOrder=[]}setOptions(n){this.stepsOrder=n.steps,this.stepDefaultPosition=n.stepDefaultPosition?n.stepDefaultPosition:this.stepDefaultPosition,this.logsEnabled=typeof n.logsEnabled<"u"?n.logsEnabled:this.logsEnabled,this.showCounter=typeof n.showCounter<"u"?n.showCounter:this.showCounter,this.showPrevButton=typeof n.showPrevButton<"u"?n.showPrevButton:this.showPrevButton,this.themeColor=n.themeColor?n.themeColor:this.themeColor,this.firstStep=n.startWith,this.waitingTime=typeof n.waitingTime<"u"?n.waitingTime:1,this.setCustomText(typeof n.customTexts<"u"?n.customTexts:q)}getBackdropColor(){return this.hexToRgb(this.themeColor)}getThemeColor(){return this.themeColor}getStepDefaultPosition(){return this.stepDefaultPosition}getStepsOrder(){return this.stepsOrder}getFirstStep(){return this.firstStep}getWaitingTime(){return this.waitingTime}areLogsEnabled(){return this.logsEnabled}isCounterVisible(){return this.showCounter}isPrevButtonVisible(){return this.showPrevButton}getCustomTexts(){return this.customTexts}setCustomText(n){let e,i,r,s;e=n.prev?n.prev:q.prev,i=n.next?n.next:q.next,r=n.done?n.done:q.done,s=n.close?n.close:q.close,this.customTexts={prev:this.toObservable(e),next:this.toObservable(i),done:this.toObservable(r),close:this.toObservable(s)}}toObservable(n){return n instanceof nt.c?n:(0,G.of)(n)}hexToRgb(n){n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(r,s,d,b)=>s+s+d+d+b+b);const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return i?`${parseInt(i[1],16)}, ${parseInt(i[2],16)}, ${parseInt(i[3],16)}`:null}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})();const at="ngx-joyride:::";let ct=(()=>{class o{constructor(n){this.optionService=n}debug(n,e=""){this.optionService.areLogsEnabled()&&console.debug(at+n,e)}info(n,e=""){this.optionService.areLogsEnabled()&&console.info(at+n,e)}warn(n,e=""){this.optionService.areLogsEnabled()&&console.warn(at+n,e)}error(n,e=""){this.optionService.areLogsEnabled()&&console.error(at+n,e)}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(U))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})();const J="@";var K=function(o){return o.NEXT="NEXT",o.PREV="PREV",o}(K||{});let lt=(()=>{class o{constructor(n,e){this.stepOptions=n,this.logger=e,this.tempSteps=[],this.currentStepIndex=-2,this.stepHasBeenModified=new Z.B}getFirstStepIndex(){const n=this.stepOptions.getFirstStep();let i=this.stepOptions.getStepsOrder().indexOf(n);return i<0&&(i=0,void 0!==n&&this.logger.warn(`The step ${n} does not exist. Check in your step list if it's present.`)),i}init(){this.logger.info("Initializing the steps array."),this.steps=[],this.currentStepIndex=this.getFirstStepIndex()-1,this.stepOptions.getStepsOrder().forEach(e=>this.steps.push({id:e,step:null}))}addStep(n){if(this.tempSteps.filter(i=>i.name===n.name).length>0){let i=this.tempSteps.findIndex(r=>r.name===n.name);this.tempSteps[i]=n}else this.logger.info(`Adding step ${n.name} to the steps list.`),this.tempSteps.push(n)}get(n){if(n===K.NEXT?this.currentStepIndex++:this.currentStepIndex--,this.currentStepIndex<0||this.currentStepIndex>=this.steps.length)throw new st("The first or last step of the tour cannot be found!");const e=this.getStepName(this.steps[this.currentStepIndex].id),i=this.tempSteps.findIndex(s=>s.name===e);let r=this.tempSteps[i];return this.steps[this.currentStepIndex].step=r,null==r&&this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`),r}getStepRoute(n){let e;return e=n===K.NEXT?this.steps[this.currentStepIndex+1]?this.steps[this.currentStepIndex+1].id:null:this.steps[this.currentStepIndex-1]?this.steps[this.currentStepIndex-1].id:null,e&&e.includes(J)?e.split(J)[1]:""}updatePosition(n,e){let i=this.getStepIndex(n);this.steps[i].step?(this.steps[i].step.position=e,this.stepHasBeenModified.next(this.steps[i].step)):this.logger.warn(`Trying to modify the position of ${n} to ${e}. Step not found!Is this step located in a different route?`)}getStepNumber(n){return this.getStepIndex(n)+1}getStepsCount(){return this.stepOptions.getStepsOrder().length}getStepIndex(n){const e=this.steps.map(i=>i.id.includes(J)?i.id.split(J)[0]:i.id).findIndex(i=>n===i);if(-1===e)throw new ot(`The step with name: ${n} does not exist in the step list.`);return e}getStepName(n){return n&&n.includes(J)?n.split(J)[0]:n}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(U),t.KVO(ct))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})(),tt=(()=>{class o{constructor(n){this.platformId=n,this.fakeDocument={body:{},documentElement:{}},this.fakeWindow={document:this.fakeDocument,navigator:{}}}getNativeWindow(){return(0,h.UE)(this.platformId)?window:this.fakeWindow}getNativeDocument(){return(0,h.UE)(this.platformId)?document:this.fakeDocument}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(t.Agw))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})(),mt=(()=>{class o{setPrevButton(n){this._prevButton=n}getPrevButton(){return this._prevButton}setNextButton(n){this._nextButton=n}getNextButton(){return this._nextButton}setDoneButton(n){this._doneButton=n}getDoneButton(){return this._doneButton}setCounter(n){this._counter=n}getCounter(){return this._counter}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})();const kt="NO_POSITION";let dn=(()=>{class o{constructor(n,e,i,r,s,d){this.joyrideStepsContainer=n,this.viewContainerRef=e,this.domService=i,this.router=r,this.templateService=s,this.platformId=d,this.stepPosition=kt,this.prev=new t.bkB,this.next=new t.bkB,this.done=new t.bkB,this.subscriptions=[],this.windowRef=this.domService.getNativeWindow(),this.step=new sn}ngAfterViewInit(){if((0,h.UE)(this.platformId)){if(this.prevTemplate&&this.templateService.setPrevButton(this.prevTemplate),this.nextTemplate&&this.templateService.setNextButton(this.nextTemplate),this.doneTemplate&&this.templateService.setDoneButton(this.doneTemplate),this.counterTemplate&&this.templateService.setCounter(this.counterTemplate),this.step.position=this.stepPosition,this.step.targetViewContainer=this.viewContainerRef,this.setAsyncFields(this.step),this.step.stepContent=this.stepContent,this.step.stepContentParams=this.stepContentParams,this.step.nextClicked=this.next,this.step.prevCliked=this.prev,this.step.tourDone=this.done,!this.name)throw new ot("All the steps should have the 'joyrideStep' property set with a custom name.");this.step.name=this.name,this.step.route="/"===this.router.url.substr(0,1)?this.router.url.substr(1):this.router.url,this.step.transformCssStyle=this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform,this.step.isElementOrAncestorFixed=this.isElementFixed(this.viewContainerRef.element)||this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement),this.joyrideStepsContainer.addStep(this.step)}}ngOnChanges(n){(n.title||n.text)&&this.setAsyncFields(this.step)}isElementFixed(n){return"fixed"===this.windowRef.getComputedStyle(n.nativeElement).position}setAsyncFields(n){this.title instanceof nt.c?this.subscriptions.push(this.title.subscribe(e=>{n.title.next(e)})):n.title.next(this.title),this.text instanceof nt.c?this.subscriptions.push(this.text.subscribe(e=>{n.text.next(e)})):n.text.next(this.text)}isAncestorsFixed(n){if(!n||!n.parentElement)return!1;let e="fixed"===this.windowRef.getComputedStyle(n.parentElement).position;return"BODY"===n.nodeName?e:!!e||this.isAncestorsFixed(n.parentElement)}ngOnDestroy(){this.subscriptions.forEach(n=>{n.unsubscribe()})}}return o.\u0275fac=function(n){return new(n||o)(t.rXU(lt),t.rXU(t.c1b),t.rXU(tt),t.rXU(X.Ix),t.rXU(mt),t.rXU(t.Agw))},o.\u0275dir=t.FsC({type:o,selectors:[["joyrideStep"],["","joyrideStep",""]],inputs:{name:[0,"joyrideStep","name"],nextStep:"nextStep",title:"title",text:"text",stepPosition:"stepPosition",stepContent:"stepContent",stepContentParams:"stepContentParams",prevTemplate:"prevTemplate",nextTemplate:"nextTemplate",doneTemplate:"doneTemplate",counterTemplate:"counterTemplate"},outputs:{prev:"prev",next:"next",done:"done"},features:[t.OA$]}),o})();class un{}let dt=(()=>{class o{constructor(n,e){if(this.DOMService=n,(0,h.UE)(e)){this.setDocumentHeight();var i=n.getNativeDocument();i&&!i.elementsFromPoint&&(i.elementsFromPoint=this.elementsFromPoint.bind(this))}}getElementFixedTop(n){return n.nativeElement.getBoundingClientRect().top}getElementFixedLeft(n){return n.nativeElement.getBoundingClientRect().left}getElementAbsoluteTop(n){const e=this.getScrollOffsets();return n.nativeElement.getBoundingClientRect().top+e.y}getElementAbsoluteLeft(n){const e=this.getScrollOffsets();return n.nativeElement.getBoundingClientRect().left+e.x}setDocumentHeight(){this.documentHeight=this.calculateDocumentHeight()}getDocumentHeight(){return this.documentHeight}isParentScrollable(n){return this.getFirstScrollableParent(n.nativeElement)!==this.DOMService.getNativeDocument().body}isElementBeyondOthers(n,e,i){const r=e?this.getElementFixedLeft(n):this.getElementAbsoluteLeft(n),s=e?this.getElementFixedTop(n):this.getElementAbsoluteTop(n),d=r+n.nativeElement.getBoundingClientRect().width-1,b=s+n.nativeElement.getBoundingClientRect().height-1,D=this.DOMService.getNativeDocument().elementsFromPoint(r,s),y=this.DOMService.getNativeDocument().elementsFromPoint(d,b);return 0===D.length&&0===y.length?1:this.getFirstElementWithoutKeyword(D,i)!==n.nativeElement||this.getFirstElementWithoutKeyword(y,i)!==n.nativeElement?2:3}scrollIntoView(n,e){const i=this.getFirstScrollableParent(n.nativeElement),r=e?this.getElementFixedTop(n):this.getElementAbsoluteTop(n);i!==this.DOMService.getNativeDocument().body?i.scrollTo?i.scrollTo(0,r-150):i.scrollTop=r-150:this.DOMService.getNativeWindow().scrollTo(0,r-150)}scrollToTheTop(n){const e=this.getFirstScrollableParent(n.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,0):e.scrollTop=0:this.DOMService.getNativeWindow().scrollTo(0,0)}scrollToTheBottom(n){const e=this.getFirstScrollableParent(n.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight):e.scrollTop=e.scrollHeight-e.clientHeight:this.DOMService.getNativeWindow().scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight)}getFirstScrollableParent(n){const e=/(auto|scroll|overlay)/,i=(d,b)=>this.DOMService.getNativeWindow().getComputedStyle(d,null).getPropertyValue(b),s=d=>d&&d!==this.DOMService.getNativeDocument().body?(d=>e.test(i(d,"overflow")+i(d,"overflow-y")+i(d,"overflow-x")))(d)?d:s(d.parentNode):this.DOMService.getNativeDocument().body;return s(n)}calculateDocumentHeight(){const n=this.DOMService.getNativeDocument();return Math.max(n.body.scrollHeight,n.documentElement.scrollHeight,n.body.offsetHeight,n.documentElement.offsetHeight,n.body.clientHeight,n.documentElement.clientHeight)}getScrollOffsets(){const n=this.DOMService.getNativeWindow(),e=this.DOMService.getNativeDocument();return null!=n.pageXOffset?{x:n.pageXOffset,y:n.pageYOffset}:"CSS1Compat"==e.compatMode?{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}:{x:e.body.scrollLeft,y:e.body.scrollTop}}elementsFromPoint(n,e){var i=[],r=void 0;do{const s=this.DOMService.getNativeDocument().elementFromPoint(n,e);s&&r!==s?(i.push(r=s),r.style.pointerEvents="none"):r=!1}while(r);return i.forEach(function(s){return s.style.pointerEvents="all"}),i}getFirstElementWithoutKeyword(n,e){for(;n[0]&&n[0].classList.toString().includes(e);)n.shift();return n[0]}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(tt),t.KVO(t.Agw))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})(),Ot=(()=>{class o{constructor(n,e,i){this.documentService=n,this.optionsService=e,this.rendererFactory=i,this.lastXScroll=0,this.lastYScroll=0,this.setRenderer()}setRenderer(){this.renderer=this.rendererFactory.createRenderer(null,null)}draw(n){this.elementRef=n.targetViewContainer,this.targetAbsoluteTop=this.getTargetTotalTop(n),this.targetAbsoluteLeft=this.getTargetTotalLeft(n),this.currentBackdropContainer=this.renderer.createElement("div"),this.renderer.addClass(this.currentBackdropContainer,"backdrop-container"),this.renderer.setStyle(this.currentBackdropContainer,"position","fixed"),this.renderer.setStyle(this.currentBackdropContainer,"top","0px"),this.renderer.setStyle(this.currentBackdropContainer,"left","0px"),this.renderer.setStyle(this.currentBackdropContainer,"width","100%"),this.renderer.setStyle(this.currentBackdropContainer,"height","100%"),this.renderer.setStyle(this.currentBackdropContainer,"z-index","1000"),this.renderer.setAttribute(this.currentBackdropContainer,"id","backdrop-"+n.name),this.backdropContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropContent,"backdrop-content"),this.renderer.setStyle(this.backdropContent,"position","relative"),this.renderer.setStyle(this.backdropContent,"height","100%"),this.renderer.setStyle(this.backdropContent,"display","flex"),this.renderer.setStyle(this.backdropContent,"flex-direction","column"),this.renderer.appendChild(this.currentBackdropContainer,this.backdropContent),this.backdropTop=this.renderer.createElement("div"),this.renderer.addClass(this.backdropTop,"joyride-backdrop"),this.renderer.addClass(this.backdropTop,"backdrop-top"),this.renderer.setStyle(this.backdropTop,"width","100%"),this.renderer.setStyle(this.backdropTop,"height",this.targetAbsoluteTop-this.lastYScroll+"px"),this.renderer.setStyle(this.backdropTop,"flex-shrink","0"),this.renderer.setStyle(this.backdropTop,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropContent,this.backdropTop),this.backdropMiddleContainer=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContainer,"backdrop-middle-container"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"width","100%"),this.renderer.setStyle(this.backdropMiddleContainer,"flex-shrink","0"),this.renderer.appendChild(this.backdropContent,this.backdropMiddleContainer),this.backdropMiddleContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContent,"backdrop-middle-content"),this.renderer.setStyle(this.backdropMiddleContent,"display","flex"),this.renderer.setStyle(this.backdropMiddleContent,"width","100%"),this.renderer.setStyle(this.backdropMiddleContent,"height","100%"),this.renderer.appendChild(this.backdropMiddleContainer,this.backdropMiddleContent),this.leftBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.leftBackdrop,"joyride-backdrop"),this.renderer.addClass(this.leftBackdrop,"backdrop-left"),this.renderer.setStyle(this.leftBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.leftBackdrop,"width",this.targetAbsoluteLeft-this.lastXScroll+"px"),this.renderer.setStyle(this.leftBackdrop,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropMiddleContent,this.leftBackdrop),this.targetBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.targetBackdrop,"backdrop-target"),this.renderer.setStyle(this.targetBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px"),this.renderer.appendChild(this.backdropMiddleContent,this.targetBackdrop),this.rightBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.rightBackdrop,"joyride-backdrop"),this.renderer.addClass(this.rightBackdrop,"backdrop-right"),this.renderer.setStyle(this.rightBackdrop,"width","100%"),this.renderer.setStyle(this.rightBackdrop,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropMiddleContent,this.rightBackdrop),this.backdropBottom=this.renderer.createElement("div"),this.renderer.addClass(this.backdropBottom,"joyride-backdrop"),this.renderer.addClass(this.backdropBottom,"backdrop-bottom"),this.renderer.setStyle(this.backdropBottom,"width","100%"),this.renderer.setStyle(this.backdropBottom,"height","100%"),this.renderer.setStyle(this.backdropBottom,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropContent,this.backdropBottom),this.removeLastBackdrop(),this.drawCurrentBackdrop(),this.lastBackdropContainer=this.currentBackdropContainer}remove(){this.removeLastBackdrop()}redrawTarget(n){this.targetAbsoluteLeft=this.getTargetTotalLeft(n),this.targetAbsoluteTop=this.getTargetTotalTop(n),this.handleVerticalScroll(n),this.handleHorizontalScroll(n)}getTargetTotalTop(n){let e=n.targetViewContainer;return n.isElementOrAncestorFixed?this.documentService.getElementFixedTop(e.element):this.documentService.getElementAbsoluteTop(e.element)}getTargetTotalLeft(n){let e=n.targetViewContainer;return n.isElementOrAncestorFixed?this.documentService.getElementFixedLeft(e.element):this.documentService.getElementAbsoluteLeft(e.element)}redraw(n,e){this.lastYScroll!==e.scrollY&&(this.lastYScroll=e.scrollY,this.elementRef&&this.handleVerticalScroll(n)),this.lastXScroll!==e.scrollX&&(this.lastXScroll=e.scrollX,this.elementRef&&this.handleHorizontalScroll(n))}handleHorizontalScroll(n){let e=n.isElementOrAncestorFixed?this.targetAbsoluteLeft:this.targetAbsoluteLeft-this.lastXScroll;e>=0?(this.renderer.setStyle(this.leftBackdrop,"width",e+"px"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px")):this.handleTargetPartialWidth(e)}handleTargetPartialWidth(n){this.renderer.setStyle(this.leftBackdrop,"width","0px");let e=this.elementRef.element.nativeElement.offsetWidth+n;this.renderer.setStyle(this.targetBackdrop,"width",e>=0?e+"px":"0px")}handleVerticalScroll(n){let e=n.isElementOrAncestorFixed?this.targetAbsoluteTop:this.targetAbsoluteTop-this.lastYScroll;e>=0?(this.renderer.setStyle(this.backdropTop,"height",e+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px")):this.handleTargetPartialHeight(e)}handleTargetPartialHeight(n){this.renderer.setStyle(this.backdropTop,"height","0px");let e=this.elementRef.element.nativeElement.offsetHeight+n;this.renderer.setStyle(this.backdropMiddleContainer,"height",e>=0?e+"px":"0px")}removeLastBackdrop(){this.lastBackdropContainer&&(this.renderer.removeChild(document.body,this.lastBackdropContainer),this.lastBackdropContainer=void 0)}drawCurrentBackdrop(){this.renderer.appendChild(document.body,this.currentBackdropContainer)}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(dt),t.KVO(U),t.KVO(t._9s))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})(),_t=(()=>{class o{constructor(n,e){this.rendererFactory=n,this.DOMService=e,this.scrollEvent=new Z.B,this.resizeEvent=new Z.B,this.renderer=n.createRenderer(null,null)}startListeningScrollEvents(){this.scrollUnlisten=this.renderer.listen("document","scroll",n=>{this.scrollEvent.next({scrollX:this.DOMService.getNativeWindow().pageXOffset,scrollY:this.DOMService.getNativeWindow().pageYOffset})})}startListeningResizeEvents(){this.resizeUnlisten=this.renderer.listen("window","resize",n=>{this.resizeEvent.next(n)})}stopListeningScrollEvents(){this.scrollUnlisten()}stopListeningResizeEvents(){this.resizeUnlisten()}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(t._9s),t.KVO(tt))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})(),pn=(()=>{class o{constructor(){this.position="top"}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["joyride-arrow"]],inputs:{position:"position"},decls:1,vars:8,template:function(n,e){1&n&&t.nrm(0,"div"),2&n&&t.AVh("joyride-arrow__top","top"==e.position)("joyride-arrow__bottom","bottom"==e.position)("joyride-arrow__left","left"==e.position)("joyride-arrow__right","right"==e.position)},styles:[".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\n"],encapsulation:2}),o})(),hn=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["joy-close-button"]],decls:3,vars:0,consts:[["viewBox","0 0 25 25","xmlns","http://www.w3.org/2000/svg"],["x1","1","y1","24","x2","24","y2","1","stroke","black","stroke-width","3"],["x1","1","y1","1","x2","24","y2","24","stroke","black","stroke-width","3"]],template:function(n,e){1&n&&(t.qSk(),t.j41(0,"svg",0),t.nrm(1,"line",1)(2,"line",2),t.k0s())},encapsulation:2}),o})(),gn=(()=>{class o{constructor(){this.clicked=new t.bkB}onClick(){this.clicked.emit()}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["joyride-button"]],inputs:{color:"color"},outputs:{clicked:"clicked"},ngContentSelectors:Ge,decls:2,vars:5,consts:[[1,"joyride-button",3,"mouseleave","mouseover","click","ngStyle"]],template:function(n,e){1&n&&(t.NAR(),t.j41(0,"button",0),t.bIt("mouseleave",function(){return e.hover=!1})("mouseover",function(){return e.hover=!0})("click",function(){return e.onClick()}),t.SdG(1),t.k0s()),2&n&&t.Y8G("ngStyle",t.sMw(1,$e,e.hover?"#fff":e.color,e.hover?e.color:"#fff",e.hover?e.color:"transparent"))},dependencies:[h.B3],styles:[".joyride-button[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button[_ngcontent-%COMP%]:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}"]}),o})();var pt=function(o){return o[o.RIGHT_ARROW=39]="RIGHT_ARROW",o[o.LEFT_ARROW=37]="LEFT_ARROW",o[o.ESCAPE_KEY=27]="ESCAPE_KEY",o}(pt||{});let vn=(()=>{class o{constructor(n,e,i,r,s,d,b,D){this.injector=n,this.stepsContainerService=e,this.eventListenerService=i,this.documentService=r,this.renderer=s,this.logger=d,this.optionsService=b,this.templateService=D,this.stepWidth=200,this.stepHeight=200,this.showArrow=!0,this.arrowSize=vt,this.subscriptions=[]}ngOnInit(){this.joyrideStepService=this.injector.get(Ct),this.documentHeight=this.documentService.getDocumentHeight(),this.subscriptions.push(this.subscribeToResizeEvents()),this.title=this.step.title.asObservable(),this.text=this.step.text.asObservable(),this.setCustomTemplates(),this.setCustomTexts(),this.counter=this.getCounter(),this.isCounterVisible=this.optionsService.isCounterVisible(),this.isPrevButtonVisible=this.optionsService.isPrevButtonVisible(),this.themeColor=this.optionsService.getThemeColor(),this.text&&this.text.subscribe(n=>this.checkRedraw(n)),this.title&&this.title.subscribe(n=>this.checkRedraw(n))}ngAfterViewInit(){if(this.isCustomized())this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","90vw"),this.updateStepDimensions();else{this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","400px");let n=this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth,this.stepContainer.nativeElement.clientHeight,1.212);n=this.adjustDimensions(n.width,n.height),this.stepWidth=n.width,this.stepHeight=n.height,this.renderer.setStyle(this.stepContainer.nativeElement,"width",this.stepWidth+"px"),this.renderer.setStyle(this.stepContainer.nativeElement,"height",this.stepHeight+"px")}this.drawStep()}checkRedraw(n){null!=n&&setTimeout(()=>{this.redrawStep()},2)}isCustomized(){return this.step.stepContent||this.templateService.getCounter()||this.templateService.getPrevButton()||this.templateService.getNextButton()||this.templateService.getDoneButton()}setCustomTexts(){const n=this.optionsService.getCustomTexts();this.prevText=n.prev,this.nextText=n.next,this.doneText=n.done}drawStep(){let n=this.step.isElementOrAncestorFixed?"fixed":"absolute";this.renderer.setStyle(this.stepHolder.nativeElement,"position",n),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",this.step.transformCssStyle),this.targetWidth=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width,this.targetHeight=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height,this.targetAbsoluteLeft="fixed"===n?this.documentService.getElementFixedLeft(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element),this.targetAbsoluteTop="fixed"===n?this.documentService.getElementFixedTop(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element),this.setStepStyle()}getCounter(){let n=this.stepsContainerService.getStepNumber(this.step.name),e=this.stepsContainerService.getStepsCount();return this.counterData={step:n,total:e},n+"/"+e}setCustomTemplates(){this.customContent=this.step.stepContent,this.ctx=this.step.stepContentParams,this.customPrevButton=this.templateService.getPrevButton(),this.customNextButton=this.templateService.getNextButton(),this.customDoneButton=this.templateService.getDoneButton(),this.customCounter=this.templateService.getCounter()}keyEvent(n){console.log(n),n.keyCode===pt.RIGHT_ARROW?this.isLastStep()?this.close():this.next():n.keyCode===pt.LEFT_ARROW?this.prev():n.keyCode===pt.ESCAPE_KEY&&this.close()}prev(){this.joyrideStepService.prev()}next(){this.joyrideStepService.next()}close(){this.joyrideStepService.close()}isFirstStep(){return 1===this.stepsContainerService.getStepNumber(this.step.name)}isLastStep(){return this.stepsContainerService.getStepNumber(this.step.name)===this.stepsContainerService.getStepsCount()}setStepStyle(){switch(this.step.position){case"top":this.setStyleTop();break;case"bottom":default:this.setStyleBottom();break;case"right":this.setStyleRight();break;case"left":this.setStyleLeft();break;case"center":this.setStyleCenter()}}setStyleTop(){this.stepsContainerService.updatePosition(this.step.name,"top"),this.topPosition=this.targetAbsoluteTop-$-this.stepHeight,this.stepAbsoluteTop=this.targetAbsoluteTop-$-this.stepHeight,this.arrowTopPosition=this.stepHeight,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="bottom",this.autofixTopPosition()}setStyleRight(){this.stepsContainerService.updatePosition(this.step.name,"right"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft+this.targetWidth+$,this.stepAbsoluteLeft=this.targetAbsoluteLeft+this.targetWidth+$,this.arrowLeftPosition=-this.arrowSize,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="left",this.autofixRightPosition()}setStyleBottom(){this.stepsContainerService.updatePosition(this.step.name,"bottom"),this.topPosition=this.targetAbsoluteTop+this.targetHeight+$,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight+$,this.arrowTopPosition=-this.arrowSize,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="top",this.autofixBottomPosition()}setStyleLeft(){this.stepsContainerService.updatePosition(this.step.name,"left"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft-this.stepWidth-$,this.stepAbsoluteLeft=this.targetAbsoluteLeft-this.stepWidth-$,this.arrowLeftPosition=this.stepWidth,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="right",this.autofixLeftPosition()}setStyleCenter(){this.renderer.setStyle(this.stepHolder.nativeElement,"position","fixed"),this.renderer.setStyle(this.stepHolder.nativeElement,"top","50%"),this.renderer.setStyle(this.stepHolder.nativeElement,"left","50%"),this.updateStepDimensions(),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",`translate(-${this.stepWidth/2}px, -${this.stepHeight/2}px)`),this.showArrow=!1}adjustLeftPosition(){this.leftPosition<0&&(this.arrowLeftPosition=this.arrowLeftPosition+this.leftPosition-2,this.leftPosition=2)}adjustRightPosition(){let n=document.body.clientWidth;if(this.stepAbsoluteLeft+this.stepWidth>n){let e=this.leftPosition-(this.stepAbsoluteLeft+this.stepWidth+5-n),i=e-this.leftPosition;this.leftPosition=e,this.arrowLeftPosition=this.arrowLeftPosition-i}}adjustTopPosition(){this.stepAbsoluteTop<0&&(this.arrowTopPosition=this.arrowTopPosition+this.topPosition-2,this.topPosition=2)}adjustBottomPosition(){if(this.stepAbsoluteTop+this.stepHeight>this.documentHeight){let n=this.topPosition-(this.stepAbsoluteTop+this.stepHeight+5-this.documentHeight),e=n-this.topPosition;this.topPosition=n,this.arrowTopPosition=this.arrowTopPosition-e}}autofixTopPosition(){this.positionAlreadyFixed?this.logger.warn("No step positions found for this step. The step will be centered."):this.targetAbsoluteTop-this.stepHeight-this.arrowSize<0&&(this.positionAlreadyFixed=!0,this.setStyleRight())}autofixRightPosition(){this.targetAbsoluteLeft+this.targetWidth+this.stepWidth+this.arrowSize>document.body.clientWidth&&this.setStyleBottom()}autofixBottomPosition(){this.targetAbsoluteTop+this.stepHeight+this.arrowSize+this.targetHeight>this.documentHeight&&this.setStyleLeft()}autofixLeftPosition(){this.targetAbsoluteLeft-this.stepWidth-this.arrowSize<0&&this.setStyleTop()}subscribeToResizeEvents(){return this.eventListenerService.resizeEvent.subscribe(()=>{this.redrawStep()})}redrawStep(){this.updateStepDimensions(),this.drawStep()}getDimensionsByAspectRatio(n,e,i){let r=(n+e)/(1+i);return{width:r*i,height:r}}adjustDimensions(n,e){let r=n,s=e;return n>400?(r=400,s=n*e/r):n<200&&(r=200,s=200/1.212),{width:r,height:s}}updateStepDimensions(){this.stepWidth=this.stepContainer.nativeElement.clientWidth,this.stepHeight=this.stepContainer.nativeElement.clientHeight}ngOnDestroy(){this.subscriptions.forEach(n=>{n.unsubscribe()})}}return o.\u0275fac=function(n){return new(n||o)(t.rXU(t.zZn),t.rXU(lt),t.rXU(_t),t.rXU(dt),t.rXU(t.sFG),t.rXU(ct),t.rXU(U),t.rXU(mt))},o.\u0275cmp=t.VBU({type:o,selectors:[["joyride-step"]],viewQuery:function(n,e){if(1&n&&(t.GBs(He,7),t.GBs(Ve,7)),2&n){let i;t.mGM(i=t.lsd())&&(e.stepHolder=i.first),t.mGM(i=t.lsd())&&(e.stepContainer=i.first)}},hostBindings:function(n,e){1&n&&t.bIt("keyup",function(r){return e.keyEvent(r)},!1,t.tSv)},inputs:{step:"step"},decls:21,vars:17,consts:[["stepHolder",""],["stepContainer",""],["defaultContent",""],["doneButton",""],["defaultCounter",""],["defaultPrevButton",""],["defaulNextButton",""],["defaultDoneButton",""],[1,"joyride-step__holder",3,"id"],["class","joyride-step__arrow",3,"position","top","left",4,"ngIf"],[1,"joyride-step__container"],[1,"joyride-step__close",3,"click"],[1,"joyride-step__header"],[1,"joyride-step__title"],[1,"joyride-step__body"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"joyride-step__footer"],["class","joyride-step__counter-container",4,"ngIf"],[1,"joyride-step__buttons-container"],["class","joyride-step__prev-container joyride-step__button",3,"click",4,"ngIf"],["class","joyride-step__next-container joyride-step__button",3,"click",4,"ngIf","ngIfElse"],[1,"joyride-step__arrow",3,"position"],[1,"joyride-step__counter-container"],[1,"joyride-step__counter"],[1,"joyride-step__prev-container","joyride-step__button",3,"click"],[4,"ngTemplateOutlet"],[1,"joyride-step__prev-button",3,"color"],[1,"joyride-step__next-container","joyride-step__button",3,"click"],[3,"color"],[1,"joyride-step__done-container","joyride-step__button",3,"click"],[1,"joyride-step__done-button",3,"color"]],template:function(n,e){if(1&n){const i=t.RV6();t.j41(0,"div",8,0),t.DNE(2,Ue,1,5,"joyride-arrow",9),t.j41(3,"div",10,1)(5,"joy-close-button",11),t.bIt("click",function(){return t.eBV(i),t.Njj(e.close())}),t.k0s(),t.j41(6,"div",12)(7,"div",13),t.EFF(8),t.nI1(9,"async"),t.k0s()(),t.j41(10,"div",14),t.DNE(11,Xe,1,0,"ng-container",15)(12,ze,2,3,"ng-template",null,2,t.C5r),t.k0s(),t.j41(14,"div",16),t.DNE(15,Je,4,2,"div",17),t.j41(16,"div",18),t.DNE(17,Ze,4,1,"div",19)(18,en,4,1,"div",20)(19,rn,4,1,"ng-template",null,3,t.C5r),t.k0s()()()()}if(2&n){const i=t.sdS(13),r=t.sdS(20);t.xc7("top",e.topPosition,"px")("left",e.leftPosition,"px"),t.Y8G("id","joyride-step-"+e.step.name),t.R7$(2),t.Y8G("ngIf",e.showArrow),t.R7$(5),t.xc7("color",e.themeColor),t.R7$(),t.JRh(t.bMT(9,15,e.title)),t.R7$(3),t.Y8G("ngTemplateOutlet",e.customContent?e.customContent:i)("ngTemplateOutletContext",e.ctx),t.R7$(4),t.Y8G("ngIf",e.isCounterVisible),t.R7$(2),t.Y8G("ngIf",e.isPrevButtonVisible&&!e.isFirstStep()),t.R7$(),t.Y8G("ngIf",!e.isLastStep())("ngIfElse",r)}},dependencies:[pn,hn,gn,h.bT,h.T3,h.Jj],styles:[".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\n"],encapsulation:2}),o})(),jt=(()=>{class o{constructor(n,e,i){this.componentFactoryResolver=n,this.appRef=e,this.injector=i,this.refMap={}}draw(n){const e=this.componentFactoryResolver.resolveComponentFactory(vn).create(this.injector);this.appRef.attachView(e.hostView),document.body.appendChild(e.hostView.rootNodes[0]);const r=e.instance;r.step=n,e.changeDetectorRef.detectChanges(),n.stepInstance=r,this.refMap[n.name]=e}remove(n){this.appRef.detachView(this.refMap[n.name].hostView),this.refMap[n.name].destroy()}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(t.OM3),t.KVO(t.o8S),t.KVO(t.zZn))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})();const $=15,vt=10;let Ct=(()=>{class o{constructor(n,e,i,r,s,d,b,D,y){this.backDropService=n,this.eventListener=e,this.stepsContainerService=i,this.documentService=r,this.DOMService=s,this.stepDrawerService=d,this.optionsService=b,this.router=D,this.logger=y,this.winTopPosition=0,this.winBottomPosition=0,this.stepsObserver=new it,this.initViewportPositions(),this.subscribeToScrollEvents(),this.subscribeToResizeEvents()}initViewportPositions(){this.winTopPosition=0,this.winBottomPosition=this.DOMService.getNativeWindow().innerHeight-20}subscribeToScrollEvents(){this.eventListener.startListeningScrollEvents(),this.eventListener.scrollEvent.subscribe(n=>{this.winTopPosition=n.scrollY,this.winBottomPosition=this.winTopPosition+this.DOMService.getNativeWindow().innerHeight-20,this.currentStep&&this.backDropService.redraw(this.currentStep,n)})}subscribeToResizeEvents(){this.eventListener.resizeEvent.subscribe(()=>{this.currentStep&&this.backDropService.redrawTarget(this.currentStep)})}drawStep(n){n.position=n.position===kt?this.optionsService.getStepDefaultPosition():n.position,this.stepDrawerService.draw(n)}startTour(){return this.stepsObserver=new it,this.stepsContainerService.init(),this.documentService.setDocumentHeight(),this.tryShowStep(K.NEXT),this.eventListener.startListeningResizeEvents(),this.subscribeToStepsUpdates(),this.stepsObserver.asObservable()}close(){this.removeCurrentStep(),this.notifyTourIsFinished(),this.DOMService.getNativeWindow().scrollTo(0,0),this.eventListener.stopListeningResizeEvents(),this.backDropService.remove()}prev(){this.removeCurrentStep(),this.currentStep.prevCliked.emit(),this.tryShowStep(K.PREV)}next(){this.removeCurrentStep(),this.currentStep.nextClicked.emit(),this.tryShowStep(K.NEXT)}navigateToStepPage(n){var e=this;return(0,k.A)(function*(){let i=e.stepsContainerService.getStepRoute(n);if(i)return yield e.router.navigate([i])})()}subscribeToStepsUpdates(){this.stepsContainerService.stepHasBeenModified.subscribe(n=>{this.currentStep&&this.currentStep.name===n.name&&(this.currentStep=n)})}tryShowStep(n){var e=this;return(0,k.A)(function*(){yield e.navigateToStepPage(n);const i=e.optionsService.getWaitingTime();i>100&&e.backDropService.remove(),setTimeout(()=>{try{e.showStep(n)}catch(r){if(r instanceof rt)e.tryShowStep(n);else{if(!(r instanceof st))throw new Error(r);e.logger.error("Forcing the tour closure: First or Last step not found in the DOM."),e.close()}}},i)})()}showStep(n){if(this.currentStep=this.stepsContainerService.get(n),null==this.currentStep)throw new rt("");this.notifyStepClicked(n),this.scrollIfElementBeyondOtherElements(),this.backDropService.draw(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible()}notifyStepClicked(n){let e={number:this.stepsContainerService.getStepNumber(this.currentStep.name),name:this.currentStep.name,route:this.currentStep.route,actionType:n};this.stepsObserver.next(e)}notifyTourIsFinished(){this.currentStep&&this.currentStep.tourDone.emit(),this.stepsObserver.complete()}removeCurrentStep(){this.currentStep&&this.stepDrawerService.remove(this.currentStep)}scrollIfStepAndTargetAreNotVisible(){this.scrollWhenTargetOrStepAreHiddenBottom(),this.scrollWhenTargetOrStepAreHiddenTop()}scrollWhenTargetOrStepAreHiddenBottom(){let n=this.getMaxTargetAndStepBottomPosition();n>this.winBottomPosition&&this.DOMService.getNativeWindow().scrollBy(0,n-this.winBottomPosition)}scrollWhenTargetOrStepAreHiddenTop(){let n=this.getMaxTargetAndStepTopPosition();n<this.winTopPosition&&this.DOMService.getNativeWindow().scrollBy(0,n-this.winTopPosition)}getMaxTargetAndStepBottomPosition(){let n=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?n+this.currentStep.stepInstance.targetHeight:"bottom"===this.currentStep.position?n+this.currentStep.stepInstance.targetHeight+this.currentStep.stepInstance.stepHeight+vt+$:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.max(n+this.currentStep.stepInstance.targetHeight,n+this.currentStep.stepInstance.targetHeight/2+this.currentStep.stepInstance.stepHeight/2):void 0}getMaxTargetAndStepTopPosition(){let n=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?n-(this.currentStep.stepInstance.stepHeight+vt+$):"bottom"===this.currentStep.position?n:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.min(n,n+this.currentStep.stepInstance.targetHeight/2-this.currentStep.stepInstance.stepHeight/2):void 0}scrollIfElementBeyondOtherElements(){2===this.isElementBeyondOthers()&&this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element),2===this.isElementBeyondOthers()&&this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView()}isElementBeyondOthers(){return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed,"backdrop")}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(Ot),t.KVO(_t),t.KVO(lt),t.KVO(dt),t.KVO(tt),t.KVO(jt),t.KVO(U),t.KVO(X.Ix),t.KVO(ct))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})(),At=(()=>{class o{constructor(n,e,i){this.platformId=n,this.stepService=e,this.optionsService=i,this.tourInProgress=!1}startTour(n){return(0,h.UE)(this.platformId)?(this.tourInProgress||(this.tourInProgress=!0,n&&this.optionsService.setOptions(n),this.tour$=this.stepService.startTour().pipe((0,Le.j)(()=>this.tourInProgress=!1)),this.tour$.subscribe()),this.tour$):(0,G.of)(new un)}closeTour(){this.isTourInProgress()&&this.stepService.close()}isTourInProgress(){return this.tourInProgress}}return o.\u0275fac=function(n){return new(n||o)(t.KVO(t.Agw),t.KVO(Ct),t.KVO(U))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac}),o})();const Cn=X.iI.forChild([]);let xn=(()=>{class o{static forRoot(){return{ngModule:o,providers:[At,Ct,lt,Ot,_t,dt,U,jt,tt,ct,mt]}}static forChild(){return{ngModule:o,providers:[]}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[[h.MD,Cn]]}),o})();const xt=(0,u(7464).F3)("Preferences",{web:()=>u.e(2924).then(u.bind(u,2924)).then(o=>new o.PreferencesWeb)}),Dt="hasSeenTutorial";let yn=(()=>{var o;class a{constructor(){}checkIfTutorialSeen(){return(0,k.A)(function*(){const{value:e}=yield xt.get({key:Dt});return"true"===e})()}markTutorialAsSeen(){return(0,k.A)(function*(){yield xt.set({key:Dt,value:"true"})})()}resetTutorialStatus(){return(0,k.A)(function*(){yield xt.remove({key:Dt})})()}}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})(),Pn=(()=>{var o;class a{constructor(e){this.http=e,this.apiURL="https://k-studio.co.il/wp-json/wn/v1/blocks"}getBlocks(){return this.http.get(this.apiURL)}}return(o=a).\u0275fac=function(e){return new(e||o)(t.KVO(Q.Qq))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();var Sn=u(6003);const wn=["mainContent"],Mn=["introModal"],kn=()=>[];function On(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-content",27)(1,"div",28),t.nrm(2,"img",29),t.j41(3,"h2",30),t.EFF(4,"\u05d1\u05e8\u05d5\u05db\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05dc K Studio!"),t.k0s(),t.j41(5,"p",31),t.EFF(6," \u05e9\u05e0\u05ea\u05d7\u05d9\u05dc \u05d1\u05de\u05d3\u05e8\u05d9\u05da \u05e7\u05e6\u05e8 \u05e9\u05d9\u05d7\u05e1\u05d5\u05da \u05dc\u05da \u05e9\u05d0\u05dc\u05d5\u05ea \u05e2\u05dc \u05d4\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4? \u{1f601} "),t.k0s(),t.j41(7,"ion-button",32),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.startAppTutorial())}),t.EFF(8," \u05d9\u05d0\u05dc\u05dc\u05d4, \u05de\u05d2\u05e0\u05d9\u05d1! "),t.k0s(),t.j41(9,"ion-button",32),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.closeAppTutorial())}),t.EFF(10," \u05d0\u05d5\u05d5\u05ea\u05e8 \u05e2\u05dc \u05d4\u05ea\u05e2\u05e0\u05d5\u05d2 "),t.k0s()()()}}function Tn(o,a){1&o&&(t.j41(0,"div",35),t.nrm(1,"ion-skeleton-text",36)(2,"ion-skeleton-text",37)(3,"br")(4,"ion-skeleton-text",38),t.k0s())}function En(o,a){1&o&&(t.j41(0,"div")(1,"div",33),t.DNE(2,Tn,5,0,"div",34),t.k0s()()),2&o&&(t.R7$(2),t.Y8G("ngForOf",t.lJ4(1,kn).constructor(3)))}function In(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",39)(1,"ion-card-header",40)(2,"ion-card-title",41),t.EFF(3),t.k0s()(),t.j41(4,"ion-card-content",42),t.EFF(5),t.nrm(6,"br"),t.EFF(7),t.nI1(8,"date"),t.nI1(9,"date"),t.k0s(),t.j41(10,"ion-icon",43),t.bIt("click",function(){const i=t.eBV(n),r=i.$implicit,s=i.index,d=t.XpG();return t.Njj(d.openConfirmDialog(r,s))}),t.k0s()()}if(2&o){const n=a.$implicit;t.Y8G("@fadeOutAnimation",n.fadeOut?"fadeOut":"fadeIn"),t.R7$(3),t.JRh(n.serviceName),t.R7$(2),t.SpI(" ",169===n.providerID||172===n.providerID?"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4":643===n.providerID||644===n.providerID?"\u05d4\u05d9\u05e8\u05e7\u05d5\u05df":n.providerID,""),t.R7$(2),t.Lme(" ",t.i5U(8,5,n.startTime,"dd.MM")," | ",t.i5U(9,8,n.startTime,"HH:mm")," ")}}function jn(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",44)(1,"div",45)(2,"h3"),t.EFF(3,"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.j41(4,"p"),t.EFF(5,"\u05d4\u05d0\u05dd \u05d4\u05d9\u05e0\u05da \u05d1\u05d8\u05d5\u05d7/\u05d4 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4?"),t.k0s(),t.j41(6,"div",46)(7,"button",47),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.closeConfirmDialog())}),t.EFF(8,"\u05d1\u05d9\u05d8\u05d5\u05dc"),t.k0s(),t.j41(9,"button",48),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.confirmDelete())}),t.EFF(10,"\u05d0\u05d9\u05e9\u05d5\u05e8"),t.k0s()()()()}}function Fn(o,a){1&o&&(t.j41(0,"ion-card-content")(1,"p",49),t.EFF(2,"\u05d0\u05d9\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd \u05db\u05e8\u05d2\u05e2"),t.k0s()())}function An(o,a){1&o&&(t.j41(0,"div"),t.nrm(1,"ion-skeleton-text",50)(2,"ion-skeleton-text",50)(3,"ion-skeleton-text",50),t.k0s())}function Nn(o,a){if(1&o&&(t.j41(0,"div",51),t.nrm(1,"img",52),t.j41(2,"ion-card-header",53)(3,"ion-card-title",54),t.EFF(4),t.k0s()(),t.j41(5,"ion-card-content",55),t.EFF(6),t.k0s()()),2&o){const n=a.$implicit;t.R7$(),t.Y8G("src",n.image,t.B4B),t.R7$(3),t.JRh(n.title),t.R7$(2),t.SpI(" ",n.description," ")}}function Bn(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",56),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.openTrainings())}),t.nrm(1,"ion-icon",57),t.j41(2,"ion-label"),t.EFF(3,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),t.k0s()()}}function Rn(o,a){if(1&o&&(t.j41(0,"ion-badge",60),t.EFF(1),t.k0s()),2&o){const n=t.XpG().ngIf;t.R7$(),t.SpI(" ",n," ")}}function Ln(o,a){if(1&o&&(t.qex(0),t.DNE(1,Rn,2,1,"ion-badge",59),t.bVm()),2&o){const n=a.ngIf;t.R7$(),t.Y8G("ngIf",n>0)}}function Gn(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",56),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.openAttendance())}),t.nrm(1,"ion-icon",58),t.j41(2,"ion-label"),t.EFF(3,"\u05e0\u05d5\u05db\u05d7\u05d5\u05ea"),t.k0s(),t.DNE(4,Ln,2,1,"ng-container",14),t.nI1(5,"async"),t.k0s()}if(2&o){const n=t.XpG();t.R7$(4),t.Y8G("ngIf",t.bMT(5,1,n.attendanceBadgeCount$))}}function $n(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",56),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.openManagePackages())}),t.nrm(1,"ion-icon",61),t.j41(2,"ion-label"),t.EFF(3,"\u05e0\u05d9\u05d4\u05d5\u05dc"),t.k0s()()}}function Hn(o,a){if(1&o){const n=t.RV6();t.j41(0,"div",56),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.openProfile())}),t.nrm(1,"ion-icon",62),t.j41(2,"ion-label"),t.EFF(3,"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"),t.k0s()()}}(0,be.kz)();const Vn=[{path:"",component:(()=>{var o;class a{constructor(e,i,r,s,d,b,D,y,P,E,F,H,j,M,N){this.joyrideService=e,this.router=i,this.onboardingService=r,this.popoverController=s,this.toastController=d,this.profileService=b,this.ameliaService=D,this.blocksService=y,this.modalCtrl=P,this.modalCtrl1=E,this.modalCtrl2=F,this.modalCtrl3=H,this.modalCtrl4=j,this.authService=M,this.attendanceBadgeService=N,this.showIntro=!1,this.upcomingTrainings=[],this.isLoadingTrainings=!0,this.fitnessTips=[],this.isLoading=!0,this.errorMessage="",this.userRole="",this.isConfirmDialogVisible=!1,this.selectedIndex=0,this.userId="",this.userEmail="",this.customerId="",this.userRole=this.authService.getUserRole(),this.userId=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.customerId=this.authService.getCustomerID(),this.attendanceBadgeCount$=this.attendanceBadgeService.badgeCount$}ngOnInit(){this.authService.fetchUserRole().subscribe(e=>{this.authService.storeUserRole(e.roles[0])},e=>{console.error("Error fetching role:",e)});try{this.loadUpcomingTrainings()}catch(e){console.error("HomePage ngOnInit: Error calling loadUpcomingTrainings",e)}try{this.setupOneSignal()}catch(e){console.error("HomePage ngOnInit: Error calling setupOneSignal",e)}("team"===this.userRole||"administrator"===this.userRole)&&this.attendanceBadgeService.fetchAndSetBadgeCount(),"activesubscription"===this.userRole&&this.profileService.fetchSubscriptionExpiryDate(this.userId).subscribe(e=>{console.log("HomePage ngOnInit: fetchSubscriptionExpiryDate success.")},e=>{console.error("HomePage ngOnInit: Error fetching subscription expiry date",e)}),this.blocksService.getBlocks().subscribe(e=>{this.fitnessTips=e,this.isLoading=!1},e=>{console.error("HomePage ngOnInit: Error fetching blocks",e),this.isLoading=!1}),this.authService.fetchUserFavLocation().subscribe(e=>{this.authService.storeFavLocation(e.favorite_location)},e=>{console.error("HomePage ngOnInit: Error fetching user favorite location",e)}),setTimeout(()=>{try{new Pt.S(".swiper-container",{slidesPerView:"auto",spaceBetween:10,centeredSlides:!1,loop:!0,freeMode:!1,pagination:{el:".swiper-pagination",clickable:!0}})}catch(e){console.error("HomePage ngOnInit: Error initializing Swiper 1 (swiper-container)",e)}},0)}ionViewDidEnter(){var e=this;return(0,k.A)(function*(){try{yield e.onboardingService.checkIfTutorialSeen()}catch(i){console.error("HomePage ionViewDidEnter: Error checking tutorial status.",i)}})()}ngAfterViewInit(){setTimeout(()=>{this.swiper=new Pt.S(".upcoming-swiper-container",{modules:[Ce.A],observer:!0,observeParents:!0,observeSlideChildren:!0,slidesPerView:"auto",spaceBetween:10,centeredSlides:!1,loop:!1,pagination:{el:".swiper-pagination",clickable:!0}})},0)}setupOneSignal(){var e=this;W().Debug.setLogLevel(6),W().initialize("83270e8d-d7ee-4904-91a7-47d1f71e9dd6"),this.userEmail?W().User.addTag("email",this.userEmail):W().User.addTag("email","error"),W().Notifications.addEventListener("click",function(){var i=(0,k.A)(function*(r){let s=r.notification;e.storeNotification(s),console.log("Notification clicked: ",s)});return function(r){return i.apply(this,arguments)}}()),W().Notifications.requestPermission(!0).then(i=>{console.log("Notification permission granted "+i)})}presentToast(e,i){var r=this;return(0,k.A)(function*(){yield(yield r.toastController.create({message:e,duration:3e3,color:i,position:"bottom"})).present()})()}popupAppTutorial(){this.showIntro=!0}closeAppTutorial(){this.showIntro=!1,localStorage.setItem("CapacitorStorage.hasSeenTutorial","true")}startAppTutorial(){this.showIntro=!1;const e=["upcomingTrainingsStep","tipsStep"];var i;console.log("HomePage startAppTutorial: Defined step names:",e),this.joyrideService?(console.log("HomePage startAppTutorial: Attempting to start tour with JoyrideService."),this.joyrideSubscription=this.joyrideService.startTour({steps:e,showCounter:!0,showPrevButton:!0,stepDefaultPosition:"bottom",customTexts:{prev:"\u05d4\u05e7\u05d5\u05d3\u05dd",next:"\u05d4\u05d1\u05d0",done:"\u05e1\u05d9\u05d5\u05dd"}}).subscribe({next:(i=(0,k.A)(function*(r){console.log("HomePage JoyrideService: Next step:",r.name,r)}),function(s){return i.apply(this,arguments)}),complete:()=>{console.log("HomePage JoyrideService: Tutorial completed!"),this.onboardingService.markTutorialAsSeen()},error:i=>{console.error("HomePage JoyrideService: Joyride error:",i),this.onboardingService.markTutorialAsSeen()}}),console.log("HomePage startAppTutorial: Tour subscription created.")):console.error("HomePage startAppTutorial: JoyrideService is not available!")}presentTutorial(){return(0,k.A)(function*(){console.log("Presenting tutorial....")})()}loadUpcomingTrainings(){this.isLoadingTrainings=!0,this.ameliaService.getUpcomingTrainings().subscribe({next:e=>{this.upcomingTrainings=e,this.isLoadingTrainings=!1,setTimeout(()=>this.syncSwiper(),0)},error:e=>{console.error("loadUpcomingTrainings:",e),this.isLoadingTrainings=!1}})}syncSwiper(){this.swiper&&(this.swiper.update(),this.swiper.activeIndex>=this.upcomingTrainings.length&&this.swiper.slideTo(Math.max(this.upcomingTrainings.length-1,0)))}confirmDelete(){const{selectedTraining:e,selectedIndex:i}=this;this.isConfirmDialogVisible=!1,e.fadeOut=!0,this.profileService.cancelBooking(e.bookingId).subscribe({next:r=>{if(r.data.cancelBookingUnavailable)return e.fadeOut=!1,void this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4","danger");this.presentToast("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","success"),setTimeout(()=>{this.swiper.removeSlide(i),this.upcomingTrainings.splice(i,1),this.syncSwiper()},300)},error:()=>{e.fadeOut=!1,this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea","danger")}})}animateAndDeleteTraining(e,i){e.fadeOut=!0,setTimeout(()=>{this.deleteTraining(e.bookingId,i)},300)}deleteTraining(e,i){const r=this.upcomingTrainings[i];r.fadeOut=!0,this.profileService.cancelBooking(e).subscribe({next:s=>{if(s.data.cancelBookingUnavailable)return r.fadeOut=!1,void this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4","danger");this.presentToast("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","success"),setTimeout(()=>{this.swiper.removeSlide(i),this.upcomingTrainings.splice(i,1),this.syncSwiper()},300)},error:()=>{r.fadeOut=!1,this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea","danger")}})}openConfirmDialog(e,i){this.selectedTraining=e,this.selectedIndex=i,this.isConfirmDialogVisible=!0}closeConfirmDialog(){this.isConfirmDialogVisible=!1}refreshData(e){setTimeout(()=>{this.loadData(),("team"===this.userRole||"administrator"===this.userRole)&&this.attendanceBadgeService.fetchAndSetBadgeCount(),e.target.complete()},2e3)}loadData(){this.authService.fetchUserRole().subscribe(e=>{this.authService.storeUserRole(e.roles[0])},e=>{console.error("Error fetching role:",e)}),"activesubscription"===this.userRole&&(this.authService.fetchPackageCustomerId(this.customerId).subscribe(e=>{},e=>{console.error("Error fetching package customer ID",e)}),this.profileService.fetchSubscriptionData(this.userId,this.customerId).subscribe(e=>{},e=>{})),this.authService.fetchUserFavLocation().subscribe(e=>{},e=>{console.error("Error fetching user favorite location",e)}),this.loadUpcomingTrainings(),this.blocksService.getBlocks().subscribe(e=>{this.fitnessTips=e,this.isLoading=!1},e=>{console.error("Error fetching blocks",e),this.isLoading=!1})}storeNotification(e){let i=JSON.parse(localStorage.getItem("notifications")||"[]");i.unshift({title:e.title,message:e.body,timestamp:new Date}),i.length>5&&(i=i.slice(0,5)),localStorage.setItem("notifications",JSON.stringify(i))}openNotifications(){var e=this;return(0,k.A)(function*(){const i=yield e.modalCtrl1.create({component:Gt,cssClass:"notification-popup",presentingElement:yield e.modalCtrl1.getTop(),breakpoints:[0,.5,1],initialBreakpoint:.5});return yield i.present(),e.setDisableScroll(!0),i.onDidDismiss().then(()=>{e.setDisableScroll(!1)}),yield i.present()})()}openWhatsApp(){window.open("https://wa.me/+972547937089","_blank")}openTrainings(){var e=this;return(0,k.A)(function*(){const i=yield e.modalCtrl.create({component:$t.T,cssClass:"trainings-popup",presentingElement:yield e.modalCtrl.getTop(),breakpoints:[0,1],initialBreakpoint:1});return yield i.present(),e.setDisableScroll(!0),i.onDidDismiss().then(()=>{e.setDisableScroll(!1)}),yield i.present()})()}setDisableScroll(e){var i=this;return(0,k.A)(function*(){i.mainContent&&"function"==typeof i.mainContent.getScrollElement?(yield i.mainContent.getScrollElement()).style.overflowY=e?"hidden":"scroll":console.warn("setDisableScroll: mainContent or getScrollElement not available.")})()}openAttendance(){var e=this;return(0,k.A)(function*(){const i=yield e.modalCtrl4.create({component:Be.t,cssClass:"attendance-popup",presentingElement:yield e.modalCtrl4.getTop(),breakpoints:[0,1],initialBreakpoint:1});yield i.present(),e.setDisableScroll(!0),i.onDidDismiss().then(()=>{e.setDisableScroll(!1),("team"===e.userRole||"administrator"===e.userRole)&&e.attendanceBadgeService.fetchAndSetBadgeCount()})})()}openProfile(){var e=this;return(0,k.A)(function*(){if(e.authService.isLoggedIn()){const i=yield e.modalCtrl2.create({component:_e,cssClass:"profile-popup",presentingElement:yield e.modalCtrl2.getTop(),breakpoints:[0,1],initialBreakpoint:1,handle:!0});yield i.present(),e.setDisableScroll(!0),i.onDidDismiss().then(()=>{e.setDisableScroll(!1)})}else console.log("User Not Logged In!")})()}openManagePackages(){var e=this;return(0,k.A)(function*(){if(e.authService.isLoggedIn()){const i=yield e.modalCtrl3.create({component:Ne,cssClass:"managePackages-popup",presentingElement:yield e.modalCtrl3.getTop(),breakpoints:[0,1],initialBreakpoint:1});yield i.present(),e.setDisableScroll(!0),i.onDidDismiss().then(()=>{e.setDisableScroll(!1)})}else console.log("User Not Logged In!")})()}}return(o=a).\u0275fac=function(e){return new(e||o)(t.rXU(At),t.rXU(X.Ix),t.rXU(yn),t.rXU(l.IE),t.rXU(l.K_),t.rXU(wt),t.rXU(Mt.J),t.rXU(Pn),t.rXU(l.W3),t.rXU(l.W3),t.rXU(l.W3),t.rXU(l.W3),t.rXU(l.W3),t.rXU(gt.u),t.rXU(Sn._))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-home"]],viewQuery:function(e,i){if(1&e&&(t.GBs(wn,5),t.GBs(Mn,7)),2&e){let r;t.mGM(r=t.lsd())&&(i.mainContent=r.first),t.mGM(r=t.lsd())&&(i.introModal=r.first)}},decls:44,vars:12,consts:[["mainContent",""],[1,"ion-padding","ion-iphone"],["slot","fixed",3,"ionRefresh"],["refreshingSpinner","crescent","pullingIcon","false"],["cssClass","intro-modal",3,"isOpen"],[1,"header-row"],["fill","clear",1,"bell-icon",3,"click"],["slot","icon-only","name","notifications-outline"],["color","dark"],[1,"page-title","home"],["fill","clear",1,"whatsapp-icon",3,"click"],["slot","icon-only","name","logo-whatsapp"],["id","home-upcoming-trainings-section","joyrideStep","upcomingTrainingsStep","title","\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd","text","\u05db\u05d0\u05df \u05ea\u05d5\u05db\u05dc \u05dc\u05e8\u05d0\u05d5\u05ea \u05d0\u05ea \u05d4\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05e7\u05e8\u05d5\u05d1\u05d9\u05dd \u05e9\u05dc\u05da."],[1,"homepage-subtitle"],[4,"ngIf"],[1,"upcoming-swiper-container",3,"hidden"],[1,"swiper-wrapper"],["class","swiper-slide upcoming-swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],["class","custom-dialog",4,"ngIf"],["id","home-tips-section","joyrideStep","tipsStep","title","\u05d8\u05d9\u05e4\u05d9\u05dd \u05d7\u05e9\u05d5\u05d1\u05d9\u05dd","stepPosition","top","text","\u05d1\u05db\u05dc \u05e4\u05e2\u05dd \u05e9\u05ea\u05d9\u05db\u05e0\u05e1 \u05ea\u05e7\u05d1\u05dc \u05d8\u05d9\u05e4 \u05d7\u05d3\u05e9 \u05e9\u05d9\u05e2\u05d6\u05d5\u05e8 \u05dc\u05da \u05dc\u05d4\u05ea\u05de\u05d9\u05d3 \u05d5\u05dc\u05d4\u05e9\u05ea\u05e4\u05e8!"],[1,"swiper-container"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"custom-nav-bar"],[1,"nav-item"],["name","home-outline"],["class","nav-item",3,"click",4,"ngIf"],[1,"ion-padding"],[1,"intro-wrapper"],["src","assets/illustrations/welcome.svg",1,"intro-illus"],[1,"intro-title"],[1,"intro-text"],["expand","block",3,"click"],[1,"skeleton-container"],["class","skeleton-item",4,"ngFor","ngForOf"],[1,"skeleton-item"],["animated","",2,"width","80%","margin-bottom","0.5rem"],["animated","",2,"width","50%"],["animated","",2,"width","30%"],[1,"swiper-slide","upcoming-swiper-slide"],[1,"upcoming-card-header"],[1,"upcoming-card-title"],[1,"upcoming-card-content"],["slot","icon-only","name","trash-outline",1,"trash-icon",3,"click"],[1,"custom-dialog"],[1,"dialog-content"],[1,"dialog-buttons"],[1,"cancel-button",3,"click"],[1,"confirm-button",3,"click"],[1,"no-trainings"],["animated","",2,"width","100%","height","150px"],[1,"swiper-slide"],["alt","tip image",1,"fitness-card-img",3,"src"],[1,"fitness-card-header"],[1,"fitness-card-title"],[1,"fitness-card-content"],[1,"nav-item",3,"click"],["name","barbell-outline"],["name","clipboard-outline"],["color","danger",4,"ngIf"],["color","danger"],["name","options-outline"],["name","person-outline"]],template:function(e,i){if(1&e){const r=t.RV6();t.j41(0,"ion-app"),t.nrm(1,"ion-router-outlet")(2,"joy-ride"),t.k0s(),t.j41(3,"ion-content",1,0)(5,"ion-refresher",2),t.bIt("ionRefresh",function(d){return t.eBV(r),t.Njj(i.refreshData(d))}),t.nrm(6,"ion-refresher-content",3),t.k0s(),t.j41(7,"ion-modal",4),t.DNE(8,On,11,0,"ng-template"),t.k0s(),t.j41(9,"div",5)(10,"ion-button",6),t.bIt("click",function(){return t.eBV(r),t.Njj(i.openNotifications())}),t.nrm(11,"ion-icon",7),t.k0s(),t.j41(12,"ion-text",8)(13,"h1",9),t.EFF(14,"K Studio"),t.k0s()(),t.j41(15,"ion-button",10),t.bIt("click",function(){return t.eBV(r),t.Njj(i.openWhatsApp())}),t.nrm(16,"ion-icon",11),t.k0s()(),t.j41(17,"div",12)(18,"ion-card-title",13),t.EFF(19,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"),t.k0s(),t.DNE(20,En,3,2,"div",14),t.j41(21,"div",15)(22,"div",16),t.DNE(23,In,11,11,"div",17),t.k0s(),t.nrm(24,"div",18),t.DNE(25,jn,11,0,"div",19),t.k0s(),t.DNE(26,Fn,3,0,"ion-card-content",14),t.k0s(),t.j41(27,"ion-card-title",13),t.EFF(28,"\u05de\u05d4 \u05d7\u05d3\u05e9?"),t.k0s(),t.DNE(29,An,4,0,"div",14),t.j41(30,"div",20)(31,"div",21)(32,"div",16),t.DNE(33,Nn,7,3,"div",22),t.k0s(),t.nrm(34,"div",18),t.k0s()()(),t.j41(35,"div",23)(36,"div",24),t.nrm(37,"ion-icon",25),t.j41(38,"ion-label"),t.EFF(39,"\u05d1\u05d9\u05ea"),t.k0s()(),t.DNE(40,Bn,4,0,"div",26)(41,Gn,6,3,"div",26)(42,$n,4,0,"div",26)(43,Hn,4,0,"div",26),t.k0s()}2&e&&(t.R7$(7),t.Y8G("isOpen",i.showIntro),t.R7$(13),t.Y8G("ngIf",i.isLoadingTrainings),t.R7$(),t.Y8G("hidden",i.isLoadingTrainings),t.R7$(2),t.Y8G("ngForOf",i.upcomingTrainings),t.R7$(2),t.Y8G("ngIf",i.isConfirmDialogVisible),t.R7$(),t.Y8G("ngIf",!(i.isLoadingTrainings||i.upcomingTrainings&&0!==i.upcomingTrainings.length)),t.R7$(3),t.Y8G("ngIf",i.isLoading),t.R7$(4),t.Y8G("ngForOf",i.fitnessTips),t.R7$(7),t.Y8G("ngIf","activesubscription"===i.userRole||"trainer"===i.userRole||"administrator"===i.userRole||"team"===i.userRole),t.R7$(),t.Y8G("ngIf","team"===i.userRole||"administrator"===i.userRole),t.R7$(),t.Y8G("ngIf","administrator"===i.userRole),t.R7$(),t.Y8G("ngIf","team"!==i.userRole))},dependencies:[h.Sq,h.bT,l.U1,l.In,l.Jm,l.I9,l.ME,l.tN,l.W9,l.iq,l.he,l.To,l.Ki,l.ds,l.IO,l.Sb,l.Rg,dn,h.Jj,h.vh],styles:['@charset "UTF-8";.swiper-container[_ngcontent-%COMP%]{width:100%;height:auto;margin-bottom:70px}.swiper-wrapper[_ngcontent-%COMP%]{display:flex;width:200vh}.swiper-slide[_ngcontent-%COMP%]{width:900px;max-width:900px;height:10%;background-color:#fff;border-radius:15px;box-shadow:0 0 11px 8px #0000001a;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:20px;margin-right:10px}.fitness-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:15px;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.fitness-card-img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;border-radius:15px 15px 0 0;object-position:top}.fitness-card-header[_ngcontent-%COMP%]{height:60px;padding:15px;text-align:center;display:flex;align-items:center;justify-content:center}.fitness-card-title[_ngcontent-%COMP%]{font-size:1.4em;color:#333;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fitness-card-content[_ngcontent-%COMP%]{-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;padding:15px;height:auto;font-size:1em;line-height:1.5;color:#5d5d5d;font-weight:400}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-bottom:20px;text-align:right;font-family:Alef}ion-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ff6b6b);--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none}ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:20px}.homepage-subtitle[_ngcontent-%COMP%]{margin-top:10%;font-size:1.5em;margin-right:3%;margin-bottom:5%}.page-title[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin:0;flex-grow:1;text-align:center;padding-top:10px}.home[_ngcontent-%COMP%]{font-family:Teko;font-size:36px}.news-card[_ngcontent-%COMP%]{border-radius:20px;background:linear-gradient(135deg,#c38a49,#ccb08a);color:#fff}.upcoming-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4b6cb7,#182848)!important;border-radius:20px}.upcoming-title[_ngcontent-%COMP%], .whats-new-title[_ngcontent-%COMP%]{color:#fff}.whats-new-desc[_ngcontent-%COMP%]{color:#000}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:10px 15px;position:relative}ion-button[_ngcontent-%COMP%]   .whatsapp-icon[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #6ee39a, #128C7E);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[_ngcontent-%COMP%]   .bell-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ffa1a1);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[color=secondary][_ngcontent-%COMP%]{--background: #54a0ff}ion-header[_ngcontent-%COMP%]{--background: #2e86de;--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center}ion-icon[_ngcontent-%COMP%]{font-size:24px}.bell-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#feca57,#ffa1a1);border-radius:10px;box-shadow:0 4px 12px #0000001a}.whatsapp-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#6ee39a,#128c7e);border-radius:10px;box-shadow:0 4px 12px #0000001a}.app-logo[_ngcontent-%COMP%]{height:35px;width:auto;margin:0 auto}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-top:20px;margin-bottom:20px;text-align:right}ion-card[_ngcontent-%COMP%]{background:#fffc;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin:20px 0}.custom-nav-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:60px;background-color:#fff;border-top:1px solid #e0e0e0;display:flex;justify-content:space-around;align-items:center;box-shadow:0 -2px 10px #0000001a;z-index:1000}.ios[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{margin-top:5%}.ios[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{margin-bottom:20%}.nav-item[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;color:#666;font-size:12px}.nav-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{position:absolute;top:-2px;right:15px;font-size:.75rem;font-weight:600;--padding-start: 6px;--padding-end: 6px;--padding-top: 3px;--padding-bottom: 3px}.nav-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;--color: #666}.nav-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.nav-item-active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .nav-item-active[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:hover   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:active   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:active   ion-label[_ngcontent-%COMP%]{color:#2980b9}.upcoming-trainings-card[_ngcontent-%COMP%]{margin:20px 0;box-shadow:none;background:transparent;padding:0}.upcoming-trainings[_ngcontent-%COMP%]{padding:0 10px;overflow:hidden}.training-block[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px;border-radius:10px;margin:0 5px;min-width:280px;text-align:right;position:relative;display:flex;flex-direction:column;align-items:flex-end}.training-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;width:100%}.training-title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:5px;margin-top:0}.training-details[_ngcontent-%COMP%]{display:flex;gap:10px}.time-container[_ngcontent-%COMP%], .date-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.time-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .date-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em}.trash-icon[_ngcontent-%COMP%]{position:relative;right:155px;bottom:20px;font-size:42px}.no-trainings[_ngcontent-%COMP%]{text-align:center}.swiper-button-next[_ngcontent-%COMP%], .swiper-button-prev[_ngcontent-%COMP%]{color:#000}.upcoming-swiper-slide[_ngcontent-%COMP%]{height:120px;width:200px;padding:0;align-items:flex-start;background:#f5f5f5;box-shadow:none}.upcoming-card-header[_ngcontent-%COMP%]{height:60px;padding:15px;text-align:center;display:flex}.upcoming-card-title[_ngcontent-%COMP%]{font-size:1.2em;color:#333;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:right;margin-top:10px}.upcoming-card-content[_ngcontent-%COMP%]{-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;height:auto;font-size:1em;color:#5d5d5d;font-weight:400;margin-bottom:-8px}.skeleton-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:1rem;padding:0 1rem;-ms-overflow-style:none;scrollbar-width:none}.skeleton-item[_ngcontent-%COMP%]{min-width:200px;padding:1rem;border:1px solid #eee;border-radius:8px;flex-shrink:0}.skeleton-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.skeleton-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.skeleton-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.custom-dialog[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.dialog-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;text-align:center;box-shadow:0 2px 10px #0003;max-width:300px;width:90%}.dialog-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px;color:#333}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:14px;color:#666}.dialog-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.dialog-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer}.cancel-button[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.confirm-button[_ngcontent-%COMP%]{background:#59c7cd;color:#fff}ion-refresher-content[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}ion-refresher-content[_ngcontent-%COMP%]::part(refresher-pulling-icon), ion-refresher-content[_ngcontent-%COMP%]::part(refresher-refreshing-spinner){font-size:24px}.intro-modal[_ngcontent-%COMP%]{--width: 85vw;--height: 40vh;--border-radius: 18px;--background: #ffffff;--box-shadow: 0 10px 30px rgba(0, 0, 0, .25)}.intro-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.intro-illus[_ngcontent-%COMP%]{width:50%;max-width:180px;margin-bottom:1.5rem}.intro-title[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.4rem;font-weight:700}.intro-text[_ngcontent-%COMP%]{margin:0 0 1.5rem;line-height:1.4}'],data:{animation:[(0,A.hZ)("fadeOutAnimation",[(0,A.wk)("fadeIn",(0,A.iF)({opacity:1,transform:"scale(1)"})),(0,A.wk)("fadeOut",(0,A.iF)({opacity:0,transform:"scale(0.8)",pointerEvents:"none",height:0,margin:0,padding:0})),(0,A.kY)("fadeIn => fadeOut",(0,A.i0)("300ms ease-in")),(0,A.kY)("fadeOut => fadeIn",(0,A.i0)("300ms ease-out"))])]}}),a})()}];let Un=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[X.iI.forChild(Vn),X.iI]}),a})(),Xn=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[h.MD,c.YN,l.bv,Un,v.Fg,_.Hl,I.s5,Nt,xn.forRoot()]}),a})()},1492:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.LogLevel=void 0;var u=function(c){return c[c.None=0]="None",c[c.Fatal=1]="Fatal",c[c.Error=2]="Error",c[c.Warn=3]="Warn",c[c.Info=4]="Info",c[c.Debug=5]="Debug",c[c.Verbose=6]="Verbose",c}(u||(C.LogLevel=u={})),h=function(){function c(){}return c.prototype.setLogLevel=function(v){window.cordova.exec(function(){},function(){},"OneSignalPush","setLogLevel",[v])},c.prototype.setAlertLevel=function(v){window.cordova.exec(function(){},function(){},"OneSignalPush","setAlertLevel",[v])},c}();C.default=h},9639:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var u=function(){function h(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}return h.prototype._processFunctionList=function(c,v){for(var _=0;_<c.length;_++)c[_](v)},h.prototype.addEventListener=function(c,v){var _=this;if("click"===c)this._inAppMessageClickListeners.push(v),window.cordova.exec(function(x){_._processFunctionList(_._inAppMessageClickListeners,x)},function(){},"OneSignalPush","setInAppMessageClickHandler",[]);else if("willDisplay"===c)this._willDisplayInAppMessageListeners.push(v),window.cordova.exec(function(x){_._processFunctionList(_._willDisplayInAppMessageListeners,x)},function(){},"OneSignalPush","setOnWillDisplayInAppMessageHandler",[]);else if("didDisplay"===c)this._didDisplayInAppMessageListeners.push(v),window.cordova.exec(function(x){_._processFunctionList(_._didDisplayInAppMessageListeners,x)},function(){},"OneSignalPush","setOnDidDisplayInAppMessageHandler",[]);else if("willDismiss"===c)this._willDismissInAppMessageListeners.push(v),window.cordova.exec(function(x){_._processFunctionList(_._willDismissInAppMessageListeners,x)},function(){},"OneSignalPush","setOnWillDismissInAppMessageHandler",[]);else{if("didDismiss"!==c)return;this._didDismissInAppMessageListeners.push(v),window.cordova.exec(function(x){_._processFunctionList(_._didDismissInAppMessageListeners,x)},function(){},"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}},h.prototype.removeEventListener=function(c,v){if("click"===c)-1!==(_=this._inAppMessageClickListeners.indexOf(v))&&this._inAppMessageClickListeners.splice(_,1);else if("willDisplay"===c)-1!==(_=this._willDisplayInAppMessageListeners.indexOf(v))&&this._willDisplayInAppMessageListeners.splice(_,1);else if("didDisplay"===c)-1!==(_=this._didDisplayInAppMessageListeners.indexOf(v))&&this._willDisplayInAppMessageListeners.splice(_,1);else if("willDismiss"===c)-1!==(_=this._willDismissInAppMessageListeners.indexOf(v))&&this._willDismissInAppMessageListeners.splice(_,1);else{if("didDismiss"!==c)return;var _;-1!==(_=this._didDismissInAppMessageListeners.indexOf(v))&&this._didDismissInAppMessageListeners.splice(_,1)}},h.prototype.addTrigger=function(c,v){var _,I=((_={})[c]=v,_);this.addTriggers(I)},h.prototype.addTriggers=function(c){Object.keys(c).forEach(function(v){"string"!=typeof c[v]&&(c[v]=JSON.stringify(c[v]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTriggers",[c])},h.prototype.removeTrigger=function(c){this.removeTriggers([c])},h.prototype.removeTriggers=function(c){Array.isArray(c)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(function(){},function(){},"OneSignalPush","removeTriggers",[c])},h.prototype.clearTriggers=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearTriggers")},h.prototype.setPaused=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","setPaused",[c])},h.prototype.getPaused=function(){return new Promise(function(c,v){window.cordova.exec(c,v,"OneSignalPush","isPaused",[])})},h}();C.default=u},9430:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var u=function(){function h(){}return h.prototype.enter=function(c,v,_,I){null==_&&(_=function(){}),null==I&&(I=function(){}),window.cordova.exec(_,I,"OneSignalPush","enterLiveActivity",[c,v])},h.prototype.exit=function(c,v,_){null==v&&(v=function(){}),null==_&&(_=function(){}),window.cordova.exec(v,_,"OneSignalPush","exitLiveActivity",[c])},h.prototype.setPushToStartToken=function(c,v){window.cordova.exec(function(){},function(){},"OneSignalPush","setPushToStartToken",[c,v])},h.prototype.removePushToStartToken=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","removePushToStartToken",[c])},h.prototype.setupDefault=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","setupDefaultLiveActivity",[c])},h.prototype.startDefault=function(c,v,_){window.cordova.exec(function(){},function(){},"OneSignalPush","startDefaultLiveActivity",[c,v,_])},h}();C.default=u},70:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var u=function(){function h(){}return h.prototype.requestPermission=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","requestLocationPermission",[])},h.prototype.setShared=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","setLocationShared",[c])},h.prototype.isShared=function(){return new Promise(function(c,v){window.cordova.exec(c,v,"OneSignalPush","isLocationShared",[])})},h}();C.default=u},2252:(R,C,u)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.NotificationWillDisplayEvent=void 0;var h=u(311),c=function(){function v(_){this.notification=new h.OSNotification(_)}return v.prototype.preventDefault=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","preventDefault",[this.notification.notificationId])},v.prototype.getNotification=function(){return this.notification},v}();C.NotificationWillDisplayEvent=c},557:function(R,C,u){var h=this&&this.__awaiter||function(l,t,p,f){return new(p||(p=Promise))(function(m,w){function O(S){try{g(f.next(S))}catch(L){w(L)}}function B(S){try{g(f.throw(S))}catch(L){w(L)}}function g(S){S.done?m(S.value):function x(m){return m instanceof p?m:new p(function(w){w(m)})}(S.value).then(O,B)}g((f=f.apply(l,t||[])).next())})},c=this&&this.__generator||function(l,t){var f,x,m,w,p={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return w={next:O(0),throw:O(1),return:O(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function O(g){return function(S){return function B(g){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,g[0]&&(p=0)),p;)try{if(f=1,x&&(m=2&g[0]?x.return:g[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,g[1])).done)return m;switch(x=0,m&&(g=[2&g[0],m.value]),g[0]){case 0:case 1:m=g;break;case 4:return p.label++,{value:g[1],done:!1};case 5:p.label++,x=g[1],g=[0];continue;case 7:g=p.ops.pop(),p.trys.pop();continue;default:if(!(m=(m=p.trys).length>0&&m[m.length-1])&&(6===g[0]||2===g[0])){p=0;continue}if(3===g[0]&&(!m||g[1]>m[0]&&g[1]<m[3])){p.label=g[1];break}if(6===g[0]&&p.label<m[1]){p.label=m[1],m=g;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(g);break}m[2]&&p.ops.pop(),p.trys.pop();continue}g=t.call(l,p)}catch(S){g=[6,S],x=0}finally{f=m=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,S])}}};Object.defineProperty(C,"__esModule",{value:!0}),C.OSNotificationPermission=void 0;var v=u(2252),_=function(l){return l[l.NotDetermined=0]="NotDetermined",l[l.Denied=1]="Denied",l[l.Authorized=2]="Authorized",l[l.Provisional=3]="Provisional",l[l.Ephemeral=4]="Ephemeral",l}(_||(C.OSNotificationPermission=_={})),I=function(){function l(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}return l.prototype._processFunctionList=function(t,p){for(var f=0;f<t.length;f++)t[f](p)},l.prototype._setPropertyAndObserver=function(){var t=this;window.cordova.exec(function(f){t._permission=f},function(){},"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",function(f){t._permission=f})},l.prototype.hasPermission=function(){return this._permission||!1},l.prototype.getPermissionAsync=function(){return h(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(p,f){window.cordova.exec(p,f,"OneSignalPush","getPermissionInternal")})]})})},l.prototype.permissionNative=function(){return new Promise(function(t,p){window.cordova.exec(t,p,"OneSignalPush","permissionNative",[])})},l.prototype.requestPermission=function(t){var p=null!=t&&t;return new Promise(function(f,x){window.cordova.exec(f,x,"OneSignalPush","requestPermission",[p])})},l.prototype.canRequestPermission=function(){return new Promise(function(t,p){window.cordova.exec(t,p,"OneSignalPush","canRequestPermission",[])})},l.prototype.registerForProvisionalAuthorization=function(t){window.cordova.exec(t,function(){},"OneSignalPush","registerForProvisionalAuthorization",[])},l.prototype.addEventListener=function(t,p){var f=this;if("click"===t)this._notificationClickedListeners.push(p),window.cordova.exec(function(O){f._processFunctionList(f._notificationClickedListeners,O)},function(){},"OneSignalPush","addNotificationClickListener",[]);else if("foregroundWillDisplay"===t)this._notificationWillDisplayListeners.push(p),window.cordova.exec(function(O){f._notificationWillDisplayListeners.forEach(function(B){B(new v.NotificationWillDisplayEvent(O))}),window.cordova.exec(function(){},function(){},"OneSignalPush","proceedWithWillDisplay",[O.notificationId])},function(){},"OneSignalPush","addForegroundLifecycleListener",[]);else{if("permissionChange"!==t)return;this._permissionObserverList.push(p),window.cordova.exec(function(O){f._processFunctionList(f._permissionObserverList,O)},function(){},"OneSignalPush","addPermissionObserver",[])}},l.prototype.removeEventListener=function(t,p){if("click"===t)-1!==(f=this._notificationClickedListeners.indexOf(p))&&this._notificationClickedListeners.splice(f,1);else if("foregroundWillDisplay"===t)-1!==(f=this._notificationWillDisplayListeners.indexOf(p))&&this._notificationWillDisplayListeners.splice(f,1);else{if("permissionChange"!==t)return;var f;-1!==(f=this._permissionObserverList.indexOf(p))&&this._permissionObserverList.splice(f,1)}},l.prototype.clearAll=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearAllNotifications",[])},l.prototype.removeNotification=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeNotification",[t])},l.prototype.removeGroupedNotifications=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeGroupedNotifications",[t])},l}();C.default=I},311:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.OSNotification=void 0;var u=function(){function h(c){this.notificationId=c.notificationId,this.body=c.body,this.title=c.title,this.additionalData=c.additionalData,this.rawPayload="string"==typeof c.rawPayload?JSON.parse(c.rawPayload):c.rawPayload,this.launchURL=c.launchURL,this.sound=c.sound,c.actionButtons&&(this.actionButtons=c.actionButtons),c.groupKey&&(this.groupKey=c.groupKey),c.ledColor&&(this.ledColor=c.ledColor),typeof c.priority<"u"&&(this.priority=c.priority),c.smallIcon&&(this.smallIcon=c.smallIcon),c.largeIcon&&(this.largeIcon=c.largeIcon),c.bigPicture&&(this.bigPicture=c.bigPicture),c.collapseId&&(this.collapseId=c.collapseId),c.groupMessage&&(this.groupMessage=c.groupMessage),c.fromProjectNumber&&(this.fromProjectNumber=c.fromProjectNumber),c.smallIconAccentColor&&(this.smallIconAccentColor=c.smallIconAccentColor),c.lockScreenVisibility&&(this.lockScreenVisibility=c.lockScreenVisibility),c.androidNotificationId&&(this.androidNotificationId=c.androidNotificationId),c.groupedNotifications&&c.groupedNotifications.length&&(this.groupedNotifications=c.groupedNotifications),c.badge&&(this.badge=c.badge),c.category&&(this.category=c.category),c.threadId&&(this.threadId=c.threadId),c.subtitle&&(this.subtitle=c.subtitle),c.templateId&&(this.templateId=c.templateId),c.attachments&&(this.attachments=c.attachments),c.templateName&&(this.templateName=c.templateName),c.mutableContent&&(this.mutableContent=c.mutableContent),c.badgeIncrement&&(this.badgeIncrement=c.badgeIncrement),c.contentAvailable&&(this.contentAvailable=c.contentAvailable),c.relevanceScore&&(this.relevanceScore=c.relevanceScore),c.interruptionLevel&&(this.interruptionLevel=c.interruptionLevel)}return h.prototype.display=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","displayNotification",[this.notificationId])},h}();C.OSNotification=u},1560:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var u=function(){function h(){this._subscriptionObserverList=[]}return h.prototype._processFunctionList=function(c,v){for(var _=0;_<c.length;_++)c[_](v)},h.prototype._setPropertiesAndObserver=function(){var c=this;window.cordova.exec(function(l){c._id=l},function(){},"OneSignalPush","getPushSubscriptionId"),window.cordova.exec(function(l){c._token=l},function(){},"OneSignalPush","getPushSubscriptionToken"),window.cordova.exec(function(l){c._optedIn=l},function(){},"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",function(l){c._id=l.current.id,c._token=l.current.token,c._optedIn=l.current.optedIn})},Object.defineProperty(h.prototype,"id",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"token",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"optedIn",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1},enumerable:!1,configurable:!0}),h.prototype.getIdAsync=function(){return new Promise(function(c,v){window.cordova.exec(c,v,"OneSignalPush","getPushSubscriptionId")})},h.prototype.getTokenAsync=function(){return new Promise(function(c,v){window.cordova.exec(c,v,"OneSignalPush","getPushSubscriptionToken")})},h.prototype.getOptedInAsync=function(){return new Promise(function(c,v){window.cordova.exec(c,v,"OneSignalPush","getPushSubscriptionOptedIn")})},h.prototype.addEventListener=function(c,v){var _=this;this._subscriptionObserverList.push(v),window.cordova.exec(function(l){_._processFunctionList(_._subscriptionObserverList,l)},function(){},"OneSignalPush","addPushSubscriptionObserver",[])},h.prototype.removeEventListener=function(c,v){var _=this._subscriptionObserverList.indexOf(v);-1!==_&&this._subscriptionObserverList.splice(_,1)},h.prototype.optIn=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optInPushSubscription")},h.prototype.optOut=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optOutPushSubscription")},h}();C.default=u},8229:(R,C)=>{Object.defineProperty(C,"__esModule",{value:!0});var u=function(){function h(){}return h.prototype.addOutcome=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcome",[c])},h.prototype.addUniqueOutcome=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","addUniqueOutcome",[c])},h.prototype.addOutcomeWithValue=function(c,v){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcomeWithValue",[c,v])},h}();C.default=u},3962:function(R,C,u){var h=this&&this.__awaiter||function(l,t,p,f){return new(p||(p=Promise))(function(m,w){function O(S){try{g(f.next(S))}catch(L){w(L)}}function B(S){try{g(f.throw(S))}catch(L){w(L)}}function g(S){S.done?m(S.value):function x(m){return m instanceof p?m:new p(function(w){w(m)})}(S.value).then(O,B)}g((f=f.apply(l,t||[])).next())})},c=this&&this.__generator||function(l,t){var f,x,m,w,p={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return w={next:O(0),throw:O(1),return:O(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function O(g){return function(S){return function B(g){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,g[0]&&(p=0)),p;)try{if(f=1,x&&(m=2&g[0]?x.return:g[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,g[1])).done)return m;switch(x=0,m&&(g=[2&g[0],m.value]),g[0]){case 0:case 1:m=g;break;case 4:return p.label++,{value:g[1],done:!1};case 5:p.label++,x=g[1],g=[0];continue;case 7:g=p.ops.pop(),p.trys.pop();continue;default:if(!(m=(m=p.trys).length>0&&m[m.length-1])&&(6===g[0]||2===g[0])){p=0;continue}if(3===g[0]&&(!m||g[1]>m[0]&&g[1]<m[3])){p.label=g[1];break}if(6===g[0]&&p.label<m[1]){p.label=m[1],m=g;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(g);break}m[2]&&p.ops.pop(),p.trys.pop();continue}g=t.call(l,p)}catch(S){g=[6,S],x=0}finally{f=m=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,S])}}},v=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(C,"__esModule",{value:!0});var _=v(u(1560)),I=function(){function l(){this.pushSubscription=new _.default,this._userStateObserverList=[]}return l.prototype._processFunctionList=function(t,p){for(var f=0;f<t.length;f++)t[f](p)},l.prototype.setLanguage=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","setLanguage",[t])},l.prototype.addAlias=function(t,p){var f,x=((f={})[t]=p,f);window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[x])},l.prototype.addAliases=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[t])},l.prototype.removeAlias=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",[t])},l.prototype.removeAliases=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",t)},l.prototype.addEmail=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","addEmail",[t])},l.prototype.removeEmail=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeEmail",[t])},l.prototype.addSms=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","addSms",[t])},l.prototype.removeSms=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeSms",[t])},l.prototype.addTag=function(t,p){var f,x=((f={})[t]=p,f);window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[x])},l.prototype.addTags=function(t){var p=t;Object.keys(t).forEach(function(f){"string"!=typeof p[f]&&(p[f]=JSON.stringify(p[f]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[p])},l.prototype.removeTag=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",[t])},l.prototype.removeTags=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",t)},l.prototype.getTags=function(){return new Promise(function(t,p){window.cordova.exec(t,p,"OneSignalPush","getTags",[])})},l.prototype.addEventListener=function(t,p){var f=this;this._userStateObserverList.push(p),window.cordova.exec(function(m){f._processFunctionList(f._userStateObserverList,m)},function(){},"OneSignalPush","addUserStateObserver",[])},l.prototype.removeEventListener=function(t,p){var f=this._userStateObserverList.indexOf(p);-1!==f&&this._userStateObserverList.splice(f,1)},l.prototype.getOnesignalId=function(){return h(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(p,f){window.cordova.exec(p,f,"OneSignalPush","getOnesignalId",[])})]})})},l.prototype.getExternalId=function(){return h(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(p,f){window.cordova.exec(p,f,"OneSignalPush","getExternalId",[])})]})})},l}();C.default=I},3952:function(R,C,u){var h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(C,"__esModule",{value:!0}),C.NotificationWillDisplayEvent=C.OSNotificationPermission=C.OSNotification=C.LogLevel=C.OneSignalPlugin=void 0;var c=h(u(3962)),v=h(u(1492)),_=h(u(8229)),I=h(u(70)),l=h(u(9639)),t=h(u(557)),p=h(u(9430)),f=function(){function g(){this.User=new c.default,this.Debug=new v.default,this.Session=new _.default,this.Location=new I.default,this.InAppMessages=new l.default,this.Notifications=new t.default,this.LiveActivities=new p.default,this._appID=""}return g.prototype.initialize=function(S){var L=this;this._appID=S,window.cordova.exec(function(){L.User.pushSubscription._setPropertiesAndObserver(),L.Notifications._setPropertyAndObserver()},function(){},"OneSignalPush","init",[this._appID])},g.prototype.login=function(S){window.cordova.exec(function(){},function(){},"OneSignalPush","login",[S])},g.prototype.logout=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","logout")},g.prototype.setConsentRequired=function(S){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentRequired",[S])},g.prototype.setConsentGiven=function(S){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentGiven",[S])},g}();C.OneSignalPlugin=f;var x=new f;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=x);var m=u(1492);Object.defineProperty(C,"LogLevel",{enumerable:!0,get:function(){return m.LogLevel}});var w=u(311);Object.defineProperty(C,"OSNotification",{enumerable:!0,get:function(){return w.OSNotification}});var O=u(557);Object.defineProperty(C,"OSNotificationPermission",{enumerable:!0,get:function(){return O.OSNotificationPermission}});var B=u(2252);Object.defineProperty(C,"NotificationWillDisplayEvent",{enumerable:!0,get:function(){return B.NotificationWillDisplayEvent}}),C.default=x}}]);