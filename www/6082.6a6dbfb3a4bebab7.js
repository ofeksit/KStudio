"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6082],{6082:(T,v,u)=>{u.r(v),u.d(v,{HomePageModule:()=>re});var g=u(177),c=u(4341),b=u(2054),_=u(8834),O=u(5911),l=u(791),t=u(3953),d=u(8820);let et=(()=>{var a;class s{}return(a=s).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[d.yE,g.MD,d.yE]}),s})();var K=u(685),F=u(467),Z=u(8132);function nt(a,s){1&a&&(t.j41(0,"p",5),t.EFF(1,"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05d4\u05ea\u05e8\u05d0\u05d5\u05ea"),t.k0s())}function it(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-item-sliding",null,1)(2,"ion-item-options",7)(3,"ion-item-option",8),t.bIt("click",function(){const n=t.eBV(o).index,i=t.sdS(1),r=t.XpG(2);return t.Njj(r.deleteNotification(n,i))}),t.j41(4,"button",9),t.bIt("click",function(){const n=t.eBV(o).index,i=t.sdS(1),r=t.XpG(2);return t.Njj(r.deleteNotification(n,i))}),t.nrm(5,"ion-icon",10),t.k0s()()(),t.j41(6,"ion-item"),t.nrm(7,"ion-icon",11),t.j41(8,"ion-label")(9,"h2",12),t.EFF(10),t.k0s(),t.j41(11,"p",13),t.EFF(12),t.k0s()()()()}if(2&a){const o=s.$implicit;t.R7$(10),t.JRh(o.title),t.R7$(2),t.JRh(o.message)}}function ot(a,s){if(1&a&&(t.j41(0,"ion-list"),t.DNE(1,it,13,2,"ion-item-sliding",6),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.notifications)}}let at=(()=>{var a;class s{constructor(e){this.modalCtrl=e,this.notifications=[]}ngOnInit(){this.notifications=JSON.parse(localStorage.getItem("notifications")||"[]")}deleteNotification(e,n){this.notifications.splice(e,1),localStorage.setItem("notifications",JSON.stringify(this.notifications)),n.close()}dismiss(){this.modalCtrl.dismiss()}}return(a=s).\u0275fac=function(e){return new(e||a)(t.rXU(l.W3))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-notification-popup"]],decls:4,vars:2,consts:[["popup",""],["slidingItem",""],[1,"notification-popup-content"],["class","no-notifications",4,"ngIf"],[4,"ngIf"],[1,"no-notifications"],[4,"ngFor","ngForOf"],["side","start"],["color","danger",3,"click"],["ion-button","",1,"trash-icon",3,"click"],["name","trash"],["name","megaphone-outline","slot","start"],[1,"notification-title"],[1,"notification-desc"]],template:function(e,n){1&e&&(t.j41(0,"ion-content",2,0),t.DNE(2,nt,2,0,"p",3)(3,ot,2,1,"ion-list",4),t.k0s()),2&e&&(t.R7$(2),t.Y8G("ngIf",!n.notifications||0===n.notifications.length),t.R7$(),t.Y8G("ngIf",n.notifications&&n.notifications.length>0))},dependencies:[g.Sq,g.bT,l.W9,l.iq,l.uz,l.LU,l.CE,l.A7,l.he,l.nf],styles:[".notification-popup-content[_ngcontent-%COMP%]{background-color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;padding:20px;box-shadow:0 -5px 20px #0003}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:50vh;top:auto;bottom:0;border-top-left-radius:20px;border-top-right-radius:20px;transition:height .3s ease-in-out}.no-notifications[_ngcontent-%COMP%]{font-family:Alef;text-align:center;padding-top:150px;color:gray}.notification-title[_ngcontent-%COMP%]{color:#3a3a3a;font-family:Alef;font-size:1.5em}button.trash-icon[_ngcontent-%COMP%]{background:none}.notification-desc[_ngcontent-%COMP%]{color:#000;font-family:Alef;font-size:1em}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .4s ease-out}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}"]}),s})();var rt=u(9003),B=u(7586);class k{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(s,o=!1){return this.onePassHasher.start().appendStr(s).end(o)}static hashAsciiStr(s,o=!1){return this.onePassHasher.start().appendAsciiStr(s).end(o)}static _hex(s){const o=k.hexChars,e=k.hexOut;let n,i,r,h;for(h=0;h<4;h+=1)for(i=8*h,n=s[h],r=0;r<8;r+=2)e[i+1+r]=o.charAt(15&n),n>>>=4,e[i+0+r]=o.charAt(15&n),n>>>=4;return e.join("")}static _md5cycle(s,o){let e=s[0],n=s[1],i=s[2],r=s[3];e+=(n&i|~n&r)+o[0]-680876936|0,e=(e<<7|e>>>25)+n|0,r+=(e&n|~e&i)+o[1]-389564586|0,r=(r<<12|r>>>20)+e|0,i+=(r&e|~r&n)+o[2]+606105819|0,i=(i<<17|i>>>15)+r|0,n+=(i&r|~i&e)+o[3]-1044525330|0,n=(n<<22|n>>>10)+i|0,e+=(n&i|~n&r)+o[4]-176418897|0,e=(e<<7|e>>>25)+n|0,r+=(e&n|~e&i)+o[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,i+=(r&e|~r&n)+o[6]-1473231341|0,i=(i<<17|i>>>15)+r|0,n+=(i&r|~i&e)+o[7]-45705983|0,n=(n<<22|n>>>10)+i|0,e+=(n&i|~n&r)+o[8]+1770035416|0,e=(e<<7|e>>>25)+n|0,r+=(e&n|~e&i)+o[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,i+=(r&e|~r&n)+o[10]-42063|0,i=(i<<17|i>>>15)+r|0,n+=(i&r|~i&e)+o[11]-1990404162|0,n=(n<<22|n>>>10)+i|0,e+=(n&i|~n&r)+o[12]+1804603682|0,e=(e<<7|e>>>25)+n|0,r+=(e&n|~e&i)+o[13]-40341101|0,r=(r<<12|r>>>20)+e|0,i+=(r&e|~r&n)+o[14]-1502002290|0,i=(i<<17|i>>>15)+r|0,n+=(i&r|~i&e)+o[15]+1236535329|0,n=(n<<22|n>>>10)+i|0,e+=(n&r|i&~r)+o[1]-165796510|0,e=(e<<5|e>>>27)+n|0,r+=(e&i|n&~i)+o[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,i+=(r&n|e&~n)+o[11]+643717713|0,i=(i<<14|i>>>18)+r|0,n+=(i&e|r&~e)+o[0]-373897302|0,n=(n<<20|n>>>12)+i|0,e+=(n&r|i&~r)+o[5]-701558691|0,e=(e<<5|e>>>27)+n|0,r+=(e&i|n&~i)+o[10]+38016083|0,r=(r<<9|r>>>23)+e|0,i+=(r&n|e&~n)+o[15]-660478335|0,i=(i<<14|i>>>18)+r|0,n+=(i&e|r&~e)+o[4]-405537848|0,n=(n<<20|n>>>12)+i|0,e+=(n&r|i&~r)+o[9]+568446438|0,e=(e<<5|e>>>27)+n|0,r+=(e&i|n&~i)+o[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,i+=(r&n|e&~n)+o[3]-187363961|0,i=(i<<14|i>>>18)+r|0,n+=(i&e|r&~e)+o[8]+1163531501|0,n=(n<<20|n>>>12)+i|0,e+=(n&r|i&~r)+o[13]-1444681467|0,e=(e<<5|e>>>27)+n|0,r+=(e&i|n&~i)+o[2]-51403784|0,r=(r<<9|r>>>23)+e|0,i+=(r&n|e&~n)+o[7]+1735328473|0,i=(i<<14|i>>>18)+r|0,n+=(i&e|r&~e)+o[12]-1926607734|0,n=(n<<20|n>>>12)+i|0,e+=(n^i^r)+o[5]-378558|0,e=(e<<4|e>>>28)+n|0,r+=(e^n^i)+o[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,i+=(r^e^n)+o[11]+1839030562|0,i=(i<<16|i>>>16)+r|0,n+=(i^r^e)+o[14]-35309556|0,n=(n<<23|n>>>9)+i|0,e+=(n^i^r)+o[1]-1530992060|0,e=(e<<4|e>>>28)+n|0,r+=(e^n^i)+o[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,i+=(r^e^n)+o[7]-155497632|0,i=(i<<16|i>>>16)+r|0,n+=(i^r^e)+o[10]-1094730640|0,n=(n<<23|n>>>9)+i|0,e+=(n^i^r)+o[13]+681279174|0,e=(e<<4|e>>>28)+n|0,r+=(e^n^i)+o[0]-358537222|0,r=(r<<11|r>>>21)+e|0,i+=(r^e^n)+o[3]-722521979|0,i=(i<<16|i>>>16)+r|0,n+=(i^r^e)+o[6]+76029189|0,n=(n<<23|n>>>9)+i|0,e+=(n^i^r)+o[9]-640364487|0,e=(e<<4|e>>>28)+n|0,r+=(e^n^i)+o[12]-421815835|0,r=(r<<11|r>>>21)+e|0,i+=(r^e^n)+o[15]+530742520|0,i=(i<<16|i>>>16)+r|0,n+=(i^r^e)+o[2]-995338651|0,n=(n<<23|n>>>9)+i|0,e+=(i^(n|~r))+o[0]-198630844|0,e=(e<<6|e>>>26)+n|0,r+=(n^(e|~i))+o[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,i+=(e^(r|~n))+o[14]-1416354905|0,i=(i<<15|i>>>17)+r|0,n+=(r^(i|~e))+o[5]-57434055|0,n=(n<<21|n>>>11)+i|0,e+=(i^(n|~r))+o[12]+1700485571|0,e=(e<<6|e>>>26)+n|0,r+=(n^(e|~i))+o[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,i+=(e^(r|~n))+o[10]-1051523|0,i=(i<<15|i>>>17)+r|0,n+=(r^(i|~e))+o[1]-2054922799|0,n=(n<<21|n>>>11)+i|0,e+=(i^(n|~r))+o[8]+1873313359|0,e=(e<<6|e>>>26)+n|0,r+=(n^(e|~i))+o[15]-30611744|0,r=(r<<10|r>>>22)+e|0,i+=(e^(r|~n))+o[6]-1560198380|0,i=(i<<15|i>>>17)+r|0,n+=(r^(i|~e))+o[13]+1309151649|0,n=(n<<21|n>>>11)+i|0,e+=(i^(n|~r))+o[4]-145523070|0,e=(e<<6|e>>>26)+n|0,r+=(n^(e|~i))+o[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,i+=(e^(r|~n))+o[2]+718787259|0,i=(i<<15|i>>>17)+r|0,n+=(r^(i|~e))+o[9]-343485551|0,n=(n<<21|n>>>11)+i|0,s[0]=e+s[0]|0,s[1]=n+s[1]|0,s[2]=i+s[2]|0,s[3]=r+s[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(k.stateIdentity),this}appendStr(s){const o=this._buffer8,e=this._buffer32;let i,r,n=this._bufferLength;for(r=0;r<s.length;r+=1){if(i=s.charCodeAt(r),i<128)o[n++]=i;else if(i<2048)o[n++]=192+(i>>>6),o[n++]=63&i|128;else if(i<55296||i>56319)o[n++]=224+(i>>>12),o[n++]=i>>>6&63|128,o[n++]=63&i|128;else{if(i=1024*(i-55296)+(s.charCodeAt(++r)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[n++]=240+(i>>>18),o[n++]=i>>>12&63|128,o[n++]=i>>>6&63|128,o[n++]=63&i|128}n>=64&&(this._dataLength+=64,k._md5cycle(this._state,e),n-=64,e[0]=e[16])}return this._bufferLength=n,this}appendAsciiStr(s){const o=this._buffer8,e=this._buffer32;let i,n=this._bufferLength,r=0;for(;;){for(i=Math.min(s.length-r,64-n);i--;)o[n++]=s.charCodeAt(r++);if(n<64)break;this._dataLength+=64,k._md5cycle(this._state,e),n=0}return this._bufferLength=n,this}appendByteArray(s){const o=this._buffer8,e=this._buffer32;let i,n=this._bufferLength,r=0;for(;;){for(i=Math.min(s.length-r,64-n);i--;)o[n++]=s[r++];if(n<64)break;this._dataLength+=64,k._md5cycle(this._state,e),n=0}return this._bufferLength=n,this}getState(){const s=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[s[0],s[1],s[2],s[3]]}}setState(s){const o=s.buffer,e=s.state,n=this._state;let i;for(this._dataLength=s.length,this._bufferLength=s.buflen,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],i=0;i<o.length;i+=1)this._buffer8[i]=o.charCodeAt(i)}end(s=!1){const o=this._bufferLength,e=this._buffer8,n=this._buffer32,i=1+(o>>2);this._dataLength+=o;const r=8*this._dataLength;if(e[o]=128,e[o+1]=e[o+2]=e[o+3]=0,n.set(k.buffer32Identity.subarray(i),i),o>55&&(k._md5cycle(this._state,n),n.set(k.buffer32Identity)),r<=4294967295)n[14]=r;else{const h=r.toString(16).match(/(.*?)(.{0,8})$/);if(null===h)return;const P=parseInt(h[2],16),M=parseInt(h[1],16)||0;n[14]=P,n[15]=M}return k._md5cycle(this._state,n),s?this._state:k._hex(this._state)}}if(k.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),k.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),k.hexChars="0123456789abcdef",k.hexOut=[],k.onePassHasher=new k,"5d41402abc4b2a76b9719d911017c592"!==k.hashStr("hello"))throw new Error("Md5 self test failed.");var V=u(1626),st=u(1985),Y=u(6354),z=u(9437),H=u(7673),ct=u(8141),lt=u(8810);var ut=u(3656),pt=u(3931),W=u(4796);let q=(()=>{var a;class s{constructor(e,n,i,r){this.platform=e,this.httpA=n,this.http=i,this.authService=r,this.headers=new V.Lr({"Content-Type":"application/json",Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"})}getLast60DaysAppointmentsForUser(){const e=new Date,n=this.formatDate(new Date(e.setDate(e.getDate()+30))),r=`https://k-studio.co.il/wp-admin/admin-ajax.php?action=wpamelia_api&call=/api/v1/appointments&dates=${this.formatDate(new Date(e.setDate(e.getDate()-60)))},${n}&skipServices=1&skipProviders=1`,h=this.authService.getUserEmail(),P={Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"};return new st.c(M=>{this.platform.ready().then(()=>{this.platform.is("cordova")?this.httpA.get(r,{},P).then(w=>{var S;const L=(null===(S=JSON.parse(w.data).data)||void 0===S?void 0:S.appointments)||{};let $=[];for(const R in L)L.hasOwnProperty(R)&&Array.isArray(L[R].appointments)&&L[R].appointments.forEach(N=>{N.bookings&&Array.isArray(N.bookings)&&N.bookings.forEach(G=>{var X;if((null===(X=G.customer)||void 0===X?void 0:X.email)===h){G.googleCalendarEventId=N.googleCalendarEventId;const se={...N,matchedBooking:G,userBookingStatus:G.status};$.push(se)}})});M.next($),M.complete()}).catch(w=>{M.error(`Error fetching appointments: ${w}`)}):this.http.get(r,{headers:this.headers}).subscribe(w=>{var S;const j=(null===(S=w.data)||void 0===S?void 0:S.appointments)||{};let L=[];for(const $ in j)j.hasOwnProperty($)&&Array.isArray(j[$].appointments)&&j[$].appointments.forEach(R=>{R.bookings&&Array.isArray(R.bookings)&&R.bookings.forEach(N=>{var G;if((null===(G=N.customer)||void 0===G?void 0:G.email)===h){N.googleCalendarEventId=R.googleCalendarEventId;const X={...R,matchedBooking:N,userBookingStatus:N.status};L.push(X)}})});M.next(L),M.complete()},w=>{M.error(`Error fetching appointments: ${w}`)})})})}fetchAvailablePackageSlots(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${e}`,{}).pipe((0,Y.T)(i=>{if(i&&i.data&&i.data.length>0){const r=i.data[0].packages;if(r&&r.length>0){const h=r[0].purchases,P=r[0].purchases[0].packageCustomerId;if(this.authService.storePackageCustomerID(P),h&&h.length>0){const M=h[0].purchase[0].available,S=new Date(h[0].purchased);return S.setDate(S.getDate()+30),{availableSlots:M,expiryDate:`${S.getDate().toString().padStart(2,"0")}/${(S.getMonth()+1).toString().padStart(2,"0")}/${S.getFullYear()}`,customerPackageID:P}}}}return{availableSlots:0,expiryDate:""}}),(0,z.W)(i=>(console.error("API Error:",i),(0,H.of)({availableSlots:0,expiryDate:""}))))}getUserPackageCustomerID(){const n=`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${this.authService.getPackageCustomerId()}`;return this.http.get(n,{}).pipe((0,Y.T)(i=>{i&&i.data&&i.data[0]&&i.data[0].packages[0]&&i.data[0].packages[0].purchases[0]&&i.data[0].packages[0].purchases[0].packageCustomerId&&this.authService.storePackageCustomerID(i.data[0].packages[0].purchases[0].packageCustomerId)}),(0,z.W)(i=>(console.error("API Error:",i),(0,H.of)({availableSlots:0,expiryDate:""}))))}fetchUserPurchases(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/user-purchases/${e}`,{}).pipe((0,Y.T)(i=>(i.forEach(r=>{r.invoice_link||(r.invoice_link="")}),i||[])),(0,z.W)(i=>(console.error("Error fetching user purchases:",i),(0,H.of)([]))))}updateFavoriteLocation(e){const i="https://k-studio.co.il/wp-json/custom-api/v1/set-favorite-location?user_id="+this.authService.getUserID();return this.http.post(i,{favorite_location:e}).pipe((0,ct.M)(()=>console.log("HTTP request sent")),(0,Y.T)(h=>(this.authService.storeFavLocation(e),h)),(0,z.W)(h=>(console.error("HTTP Error:",h),(0,lt.$)(()=>new Error("Failed to update favorite location")))))}cancelBooking(e){return this.http.post(`https://k-studio.co.il/wp-json/wn/v1/cancel-booking/${e}`,{})}formatDate(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}}return(a=s).\u0275fac=function(e){return new(e||a)(t.KVO(ut.OD),t.KVO(pt.B),t.KVO(V.Qq),t.KVO(W.u))},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),s})();var tt=u(4938);const gt=["popup"],J=a=>({active:a}),ft=()=>[1,2,3,4];function mt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-content",14)(1,"ion-list")(2,"ion-item"),t.nrm(3,"ion-icon",15),t.j41(4,"div",16)(5,"input",17),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG();return t.DH7(i.selectedLocation,n)||(i.selectedLocation=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.updateFavLocation("\u05d4\u05db\u05dc"))}),t.k0s(),t.j41(6,"label",18),t.EFF(7," \u05d4\u05db\u05dc "),t.k0s(),t.j41(8,"input",19),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG();return t.DH7(i.selectedLocation,n)||(i.selectedLocation=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.updateFavLocation("\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"))}),t.k0s(),t.j41(9,"label",20),t.EFF(10," \u05e9.\u05e2\u05dc\u05d9\u05db\u05dd "),t.k0s(),t.j41(11,"input",21),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG();return t.DH7(i.selectedLocation,n)||(i.selectedLocation=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.updateFavLocation("\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"))}),t.k0s(),t.j41(12,"label",22),t.EFF(13," \u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4 "),t.k0s(),t.nrm(14,"div",23),t.k0s()(),t.j41(15,"ion-item",24),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.logout())}),t.nrm(16,"ion-icon",25),t.j41(17,"ion-label"),t.EFF(18,"\u05d4\u05ea\u05e0\u05ea\u05e7"),t.k0s()()()()}if(2&a){const o=t.XpG();t.R7$(5),t.R50("ngModel",o.selectedLocation),t.R7$(),t.Y8G("ngClass",t.eq3(6,J,"\u05d4\u05db\u05dc"===o.favLocation)),t.R7$(2),t.R50("ngModel",o.selectedLocation),t.R7$(),t.Y8G("ngClass",t.eq3(8,J,"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===o.favLocation)),t.R7$(2),t.R50("ngModel",o.selectedLocation),t.R7$(),t.Y8G("ngClass",t.eq3(10,J,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===o.favLocation))}}function ht(a,s){if(1&a&&(t.j41(0,"div",26)(1,"ion-chip"),t.nrm(2,"ion-icon",27),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.j41(5,"ion-chip"),t.nrm(6,"ion-icon",28),t.j41(7,"ion-label"),t.EFF(8),t.k0s()()()),2&a){const o=t.XpG();t.R7$(4),t.SpI("",o.slotsLeft," \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e0\u05d5\u05ea\u05e8\u05d5"),t.R7$(4),t.SpI("\u05ea\u05d5\u05e7\u05e3: ",o.nextRenewalDate,"")}}function _t(a,s){1&a&&(t.j41(0,"ion-item",31)(1,"ion-thumbnail",32),t.nrm(2,"ion-skeleton-text",33),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",34),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",35),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",36),t.k0s()()()),2&a&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function bt(a,s){1&a&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",29),t.k0s(),t.DNE(3,_t,10,4,"ion-item",30),t.k0s()),2&a&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,ft)))}function vt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",40)(1,"ion-button",41),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.toggleFilterDropdown())}),t.nrm(2,"ion-icon",42),t.EFF(3," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s()()}}function Dt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-list",43)(1,"ion-item")(2,"ion-label",44),t.EFF(3,"\u05d4\u05e6\u05d2"),t.k0s(),t.j41(4,"ion-segment",45),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG(2);return t.DH7(i.availabilityFilter,n)||(i.availabilityFilter=n),t.Njj(n)}),t.bIt("ionChange",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.onFilterChange())}),t.j41(5,"ion-segment-button",46)(6,"ion-label",47),t.EFF(7,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(8,"ion-segment-button",48)(9,"ion-label",47),t.nrm(10,"ion-icon",49),t.k0s()(),t.j41(11,"ion-segment-button",50)(12,"ion-label",47),t.nrm(13,"ion-icon",51),t.k0s()()()()()}if(2&a){const o=t.XpG(2);t.R7$(4),t.R50("ngModel",o.availabilityFilter)}}function Ct(a,s){1&a&&t.nrm(0,"ion-icon",57)}function xt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-card",52),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG(2);return t.Njj("approved"===n.userBookingStatus?i.showActions(n):null)}),t.j41(1,"ion-card-header")(2,"div",53),t.nrm(3,"ion-icon",54),t.DNE(4,Ct,1,0,"ion-icon",55),t.k0s(),t.j41(5,"ion-label",56)(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"date"),t.nI1(11,"date"),t.k0s()()()()}if(2&a){const o=s.$implicit,e=t.XpG(2);t.R7$(3),t.Y8G("name",e.getStatusIcon(o.userBookingStatus))("color",e.getStatusColor(o.userBookingStatus)),t.R7$(),t.Y8G("ngIf","approved"==o.userBookingStatus),t.R7$(3),t.JRh(o.title),t.R7$(2),t.Lme("",t.i5U(10,6,o.bookingStart,"dd/MM/yyyy")," | ",t.i5U(11,9,o.bookingStart,"HH:mm")," ")}}function Pt(a,s){if(1&a&&(t.j41(0,"div"),t.DNE(1,vt,4,0,"div",37)(2,Dt,14,1,"ion-list",38),t.j41(3,"ion-list"),t.DNE(4,xt,12,12,"ion-card",39),t.k0s()()),2&a){const o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.isLoading),t.R7$(),t.Y8G("ngIf",o.showDropdown),t.R7$(2),t.Y8G("ngForOf",o.filteredAppointments)}}function wt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-card",52),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG(2);return t.Njj(i.downloadInvoice(n))}),t.j41(1,"ion-card-header")(2,"div",53),t.nrm(3,"ion-icon",54)(4,"ion-icon",57),t.k0s(),t.j41(5,"ion-label",56)(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.k0s()()()()}if(2&a){const o=s.$implicit,e=t.XpG(2);t.R7$(3),t.Y8G("name",e.getStatusIcon(o.status))("color",e.getStatusColor(o.status)),t.R7$(4),t.SpI("\u05d4\u05d6\u05de\u05e0\u05d4 \u05de\u05e1' ",o.orderNumber,""),t.R7$(2),t.JRh(o.products[0].name)}}function yt(a,s){if(1&a&&(t.j41(0,"div")(1,"ion-list"),t.DNE(2,wt,10,4,"ion-card",39),t.k0s()()),2&a){const o=t.XpG();t.R7$(2),t.Y8G("ngForOf",o.userPurchases)}}let Mt=(()=>{var a;class s{constructor(e,n,i,r,h,P,M){this.gestureCtrl=e,this.modalCtrl=n,this.actionSheetCtrl=i,this.profileService=r,this.authService=h,this.toastController=P,this.ameliaService=M,this.userRole="",this.userPhoto="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",this.userEmail="",this.userID="",this.customerID="",this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.selectedTab="trainings",this.isLoading=!0,this.errorMessage="",this.availabilityFilter="",this.showDropdown=!1,this.selectedType="",this.userAppointments=[],this.filteredAppointments=[],this.unfilteredAppointments=[],this.userPurchases=[],this.gravatarUrl="",this.locationEnabled=!1,this.favLocation="",this.selectedLocation="",this.userName=this.authService.getUserFullName(),this.userRole=this.translateUserRole(this.authService.getUserRole()),this.customerID=this.authService.getCustomerID(),this.userID=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.setGravatarUrl(),this.authService.fetchUserFavLocation().subscribe({next:w=>{this.favLocation=w.favorite_location,this.selectedLocation=w.favorite_location},error:w=>{console.error("Error fetching user fav location",w)}}),this.authService.fetchPackageCustomerId(this.customerID).subscribe({error:w=>{console.error("Error fetching package id",w)}})}setGravatarUrl(){if(this.userEmail){const e=k.hashStr(this.userEmail.trim().toLowerCase());this.gravatarUrl=`https://www.gravatar.com/avatar/${e}?d=identicon`}}formatDate(e){return e.replace(/\//g,".")}ngOnInit(){var e=this;return(0,F.A)(function*(){e.profileService.fetchAvailablePackageSlots(e.customerID).subscribe(({availableSlots:i,expiryDate:r})=>{e.slotsLeft=i,e.nextRenewalDate=e.formatDate(r)},i=>{console.error("Error fetching available slots and expiry date:",i),e.slotsLeft=0,e.nextRenewalDate=""}),e.trainingsByDay=e.ameliaService.getTrainingsTitles(),(!e.trainingsByDay||Object.keys(e.trainingsByDay).every(i=>0===e.trainingsByDay[i].length))&&(yield e.ameliaService.fetchTitleTrainings(),e.trainingsByDay=e.ameliaService.getTrainingsTitles());const n=localStorage.getItem("userFilterChoice");n&&(e.availabilityFilter=n),e.authService.fetchUserRole().subscribe(i=>{e.authService.storeUserRole(i.roles[0]),e.userRole=e.translateUserRole(i.roles[0])}),e.loadUserAppointmentsLast60Days(),e.updateFilteredAppointments()})()}presentToast(e,n){var i=this;return(0,F.A)(function*(){yield(yield i.toastController.create({message:e,duration:3e3,color:n,position:"bottom"})).present()})()}loadUserAppointmentsLast60Days(){var e=this;this.isLoading=!0,this.profileService.getLast60DaysAppointmentsForUser().subscribe(function(){var n=(0,F.A)(function*(i){const r=[];for(const h of i)if(h.matchedBooking){h.userBookingStatus=h.userBookingStatus;const w=B(h.bookingStart).format("YYYY-MM-DD"),S=B(h.bookingStart).format("HH:mm"),j=e.getAppointmentTitleByDateTime(w,S).then(L=>{h.title=L||"\u05db\u05dc\u05dc\u05d9"}).catch(L=>{console.error("Error fetching appointment title:",L),h.title="\u05db\u05dc\u05dc\u05d9"});r.push(j)}yield Promise.all(r),e.userAppointments=i.sort((h,P)=>B(P.bookingStart).diff(B(h.bookingStart))),e.filteredAppointments=[...e.userAppointments],e.updateFilteredAppointments(),e.isLoading=!1});return function(i){return n.apply(this,arguments)}}(),n=>{this.isLoading=!1,console.error("Error loading appointments:",n)})}getDayFromDate(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][B(e,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(e,n){var i=this;return(0,F.A)(function*(){const r=B(e,"YYYY-MM-DD").format("DD/MM/YYYY"),h=i.getDayFromDate(r);if(i.trainingsByDay[h]){const P=i.trainingsByDay[h].find(M=>M.time===n);if(P)return P.title}return"\u05db\u05dc\u05dc\u05d9"})()}translateUserRole(e){return"author"===e?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea":"administrator"===e?"\u05de\u05e0\u05d4\u05dc":"activesubscription"===e?"\u05de\u05e0\u05d5\u05d9 \u05e4\u05e2\u05d9\u05dc":"trainer"===e?"\u05de\u05d0\u05de\u05df":"team"===e?"\u05e6\u05d5\u05d5\u05ea":"trial-users"===e?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea \u05e0\u05d9\u05e1\u05d9\u05d5\u05df":"inactive"===e?"\u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc\u05d4":"shalom-trainer"===e?"\u05de\u05d0\u05de\u05df \u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd":"personal"===e?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea \u05d0\u05d9\u05e9\u05d9\u05ea":""}ngAfterViewInit(){document.querySelectorAll(".scroll-y").forEach(n=>{n instanceof HTMLElement&&(n.style.overflowY="hidden")})}closePopup(){this.modalCtrl.dismiss()}showActions(e){var n=this;return(0,F.A)(function*(){yield(yield n.actionSheetCtrl.create({header:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea",buttons:[{text:"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d0\u05d9\u05de\u05d5\u05df",role:"destructive",icon:"close-circle-outline",handler:()=>{n.cancelBooking(e.matchedBooking.id)}},{text:"\u05e1\u05d2\u05d5\u05e8",icon:"close",role:"cancel"}]})).present()})()}downloadInvoice(e){e.invoice_link?window.open(e.invoice_link,"_blank"):(console.error("No invoice link available for this order."),this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e4\u05d9\u05e7 \u05d7\u05e9\u05d1\u05d5\u05e0\u05d9\u05ea \u05d1\u05e2\u05d1\u05d5\u05e8 \u05d4\u05d6\u05de\u05e0\u05d4 \u05d6\u05d5.",this.presentToast(this.errorMessage,"danger"))}getStatusIcon(e){switch(e){case"approved":case"completed":return"checkmark-circle-outline";case"canceled":case"cancelled":return"close-circle-outline";case"pending":return"time-outline";case"refunded":return"cash-outline";default:return"alert-circle-outline"}}getStatusColor(e){switch(e){case"approved":case"completed":return"success";case"canceled":case"cancelled":return"danger";case"pending":case"refunded":return"warning";default:return"medium"}}translateStatus(e){switch(e){case"approved":return"\u05de\u05d0\u05d5\u05e9\u05e8";case"cancelled":return"\u05d1\u05d5\u05d8\u05dc";case"pending":return"\u05de\u05de\u05ea\u05d9\u05df";default:return"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2"}}cancelBooking(e){this.profileService.cancelBooking(e).subscribe(n=>{n.data.cancelBookingUnavailable?(this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4",this.presentToast(this.errorMessage,"danger")):(this.errorMessage="\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4",this.presentToast(this.errorMessage,"success"))},n=>{this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea",this.presentToast(this.errorMessage,"danger"),console.error("Error occurred while canceling the booking",n)})}loadUserPurchases(){this.profileService.fetchUserPurchases(this.userID).subscribe(e=>{this.userPurchases=e})}onTabChange(e){this.selectedTab=e.detail.value,"purchases"==this.selectedTab&&this.loadUserPurchases()}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}onFilterChange(){this.updateFilteredAppointments(),localStorage.setItem("userFilterChoice",this.availabilityFilter)}updateFilteredAppointments(){let e=[...this.userAppointments];"approved"===this.availabilityFilter?e=e.filter(n=>"approved"===n.userBookingStatus):"cancelled"===this.availabilityFilter&&(e=e.filter(n=>"canceled"===n.userBookingStatus)),this.filteredAppointments=e}logout(){this.authService.logout(),window.location.reload()}updateFavLocation(e){this.favLocation=e,this.selectedLocation=e,this.profileService.updateFavoriteLocation(e).subscribe(n=>{})}}return(a=s).\u0275fac=function(e){return new(e||a)(t.rXU(l.wH),t.rXU(l.W3),t.rXU(l.GD),t.rXU(q),t.rXU(W.u),t.rXU(l.K_),t.rXU(tt.J))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-profile-popup"]],viewQuery:function(e,n){if(1&e&&t.GBs(gt,5),2&e){let i;t.mGM(i=t.lsd())&&(n.popup=i.first)}},decls:24,vars:7,consts:[["popup","","mainContentProfile",""],[1,"popup-modal"],[1,"drag-handle"],[1,"profile-section"],["alt","User Avatar",1,"avatar",3,"src"],["name","settings-outline","id","settings-trigger",1,"settings-icon"],["trigger","settings-trigger","triggerAction","click","dismissOnSelect","false",1,"profilePopover"],["class","subscriptionDetails",4,"ngIf"],[1,"inside-container"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","trainings",1,"header-tab"],["value","purchases",1,"header-tab"],[4,"ngIf"],[1,"scroll-y-hidden","ion-padding"],["slot","start","name","location-outline"],[1,"custom-three-way-toggle"],["type","radio","id","right","name","location","value","\u05d4\u05db\u05dc",3,"ngModelChange","change","ngModel"],["for","right",3,"ngClass"],["type","radio","id","center","name","location","value","\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd",3,"ngModelChange","change","ngModel"],["for","center",3,"ngClass"],["type","radio","id","left","name","location","value","\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4",3,"ngModelChange","change","ngModel"],["for","left",3,"ngClass"],[1,"slider"],["button","",3,"click"],["slot","start","name","log-out-outline"],[1,"subscriptionDetails"],["name","barbell-outline","color","medium"],["name","calendar-outline","color","medium"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["class","filter-header",4,"ngIf"],["class","filter-dropdown",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],[1,"filter-dropdown"],[2,"text-indent","8px"],[3,"ngModelChange","ionChange","ngModel"],["value","all",1,"sub-label-segment"],[1,"sub-label"],["value","approved",1,"sub-label-segment"],["name","checkmark-circle-outline","slot","start","color","success"],["value","cancelled",1,"sub-label-segment"],["name","close-circle-outline","slot","start","color","danger"],[3,"click"],[1,"icon-container"],[1,"status-icon",3,"name","color"],["name","chevron-forward-outline","class","arrow-icon",4,"ngIf"],[1,"training-details"],["name","chevron-forward-outline",1,"arrow-icon"]],template:function(e,n){if(1&e){const i=t.RV6();t.j41(0,"ion-content",1,0),t.nrm(3,"div",2),t.j41(4,"div",3),t.nrm(5,"img",4),t.j41(6,"h2"),t.EFF(7),t.k0s(),t.nrm(8,"ion-icon",5),t.j41(9,"ion-popover",6),t.DNE(10,mt,19,12,"ng-template"),t.k0s(),t.DNE(11,ht,9,2,"div",7),t.k0s(),t.j41(12,"div",8)(13,"div",9)(14,"ion-segment",10),t.mxI("ngModelChange",function(h){return t.eBV(i),t.DH7(n.selectedTab,h)||(n.selectedTab=h),t.Njj(h)}),t.bIt("ionChange",function(h){return t.eBV(i),t.Njj(n.onTabChange(h))}),t.j41(15,"ion-segment-button",11)(16,"ion-label"),t.EFF(17,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),t.k0s()(),t.j41(18,"ion-segment-button",12)(19,"ion-label"),t.EFF(20,"\u05e8\u05db\u05d9\u05e9\u05d5\u05ea"),t.k0s()()()(),t.DNE(21,bt,4,3,"ion-list",13)(22,Pt,5,3,"div",13)(23,yt,3,1,"div",13),t.k0s()()}2&e&&(t.R7$(5),t.Y8G("src",n.gravatarUrl,t.B4B),t.R7$(2),t.JRh(n.userName),t.R7$(4),t.Y8G("ngIf",n.nextRenewalDate),t.R7$(3),t.R50("ngModel",n.selectedTab),t.R7$(7),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf","trainings"===n.selectedTab),t.R7$(),t.Y8G("ngIf","purchases"===n.selectedTab))},dependencies:[g.YU,g.Sq,g.bT,c.me,c.Fm,c.BC,c.vS,l.Jm,l.b_,l.ME,l.ZB,l.W9,l.iq,l.uz,l.he,l.nf,l.AF,l.Gp,l.eP,l.ds,l.Zx,l.CF,l.Je,g.vh],styles:['.popup-modal[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.profile-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.packageInfo[_ngcontent-%COMP%]{font-family:Alef;text-align:center;font-weight:700}.header-tab[_ngcontent-%COMP%]{justify-content:center;align-items:center;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}.sub-label-segment[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;justify-content:center;text-align:center;gap:4px}.sub-label-segment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em;vertical-align:middle}.ion-segment-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.settings-icon[_ngcontent-%COMP%]{font-size:24px;position:absolute;top:5%;right:15px;color:#888;cursor:pointer;opacity:.7}.avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;margin-bottom:20px}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#333;text-align:right;line-height:10px}p[_ngcontent-%COMP%]{font-size:1em;color:#666;text-align:right}ion-card[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:15px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:row;align-items:center}ion-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;padding-left:35%;width:100%}.training-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:0 auto}.training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-top:15px}.training-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin:0}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-self:center;position:absolute;left:10px;top:35%}.status-icon[_ngcontent-%COMP%]{font-size:24px;color:red;margin-left:10px}.arrow-icon[_ngcontent-%COMP%]{font-size:24px;color:#888}ion-segment-button.ion-activated[_ngcontent-%COMP%]{--background: #3498db;--color: red;box-shadow:0 4px 12px #007bff4d}.ios[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{font-size:1.1em}.subscriptionDetails[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;flex-direction:column}.filter-segment[_ngcontent-%COMP%]{color:red}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto 10px}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.filter-dropdown[_ngcontent-%COMP%]{margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}.sub-label[_ngcontent-%COMP%]{color:#2c2c2c;font-weight:400!important;font-size:18px}ion-segment-button[_ngcontent-%COMP%]{--color-checked: #000}ion-popover[_ngcontent-%COMP%]{--width: 95%;--border-radius: 12px;--box-shadow: 0px 4px 8px rgba(0, 0, 0, .1);overflow-y:hidden!important}ion-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-color-medium)}ion-toggle[_ngcontent-%COMP%]{margin-left:auto;--handle-background: var(--ion-color-primary)}ion-popover[_ngcontent-%COMP%]{--background: #ffffff;--border-radius: 12px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .1);--padding: 16px}.popover-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.popover-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border-radius:8px;transition:background-color .2s ease-in-out}.popover-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.popover-button[_ngcontent-%COMP%]{color:#fff;background-color:orange;border-radius:20px;padding:8px 16px;font-weight:700}ion-popover[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{overflow:hidden!important;height:auto!important}ion-popover[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{overflow-y:hidden!important}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar[_ngcontent-%COMP%]{display:none!important}.scroll-y-hidden[_ngcontent-%COMP%]{overflow-y:hidden!important}ion-toggle[_ngcontent-%COMP%]{padding:12px;margin-left:auto;--handle-background: var(--ion-color-primary);--background: var(--ion-color-light);--track-background: #ddd;--track-background-checked: #ddd;--handle-background: #59c7cd;--handle-background-checked: #ff8366;--handle-width: 25px;--handle-height: 27px;--handle-max-height: auto;--handle-spacing: 6px;--handle-border-radius: 4px;--handle-box-shadow: none}ion-toggle[_ngcontent-%COMP%]::part(track){height:10px;width:65px;overflow:visible}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:var(--ion-color-medium);margin:0}.fav-location[_ngcontent-%COMP%]{font-size:.75rem;color:var(--ion-color-medium);margin:4px 0 0}ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:700}ion-item[_ngcontent-%COMP%]{--border-width: 0;--inner-border-width: 0;border:none;box-shadow:none}.title[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-dark);line-height:1.2;margin-bottom:2px}.description[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);line-height:1.2;margin:0}.custom-three-way-toggle[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:space-between;width:100%;max-width:300px}.custom-three-way-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.custom-three-way-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;flex:1;text-align:center;z-index:1;color:#050505;font-size:14px;line-height:40px}.custom-three-way-toggle[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:33.33%;height:100%;background-color:#ff8366;transition:all .3s ease;z-index:0;border-radius:20px}.custom-three-way-toggle[_ngcontent-%COMP%]   input#left[_ngcontent-%COMP%]:checked ~ .slider[_ngcontent-%COMP%]{color:#fff;background-color:#59c7cd;transform:translate(0)}.custom-three-way-toggle[_ngcontent-%COMP%]   input#center[_ngcontent-%COMP%]:checked ~ .slider[_ngcontent-%COMP%]{color:#fff;background-color:#ff8366;transform:translate(100%)}.custom-three-way-toggle[_ngcontent-%COMP%]   input#right[_ngcontent-%COMP%]:checked ~ .slider[_ngcontent-%COMP%]{color:#fff;background-color:orange;transform:translate(200%)}.custom-three-way-toggle[_ngcontent-%COMP%]   input#left[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff}.custom-three-way-toggle[_ngcontent-%COMP%]   input#center[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff}.custom-three-way-toggle[_ngcontent-%COMP%]   input#right[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff}']}),s})();var kt=u(4531),Ot=u(3952),U=u.n(Ot),St=(u(7149),u(1523),u(8158),u(342),u(1792)),A=(u(9514),u(401),u(7341),u(1656),u(4700),u(4832),u(3099),u(9247),u(2007),u(1398),u(3870),u(3015),u(7310),u(8305),u(7443),u(8033),u(9969)),It=u(1413),Ft=u(9584);let Tt=(()=>{var a;class s{constructor(e){this.http=e,this.customApiURL="https://k-studio.co.il/wp-json/custom-api/v1"}getAllUsers(){return this.http.get(`${this.customApiURL}/users`)}getAllPackages(){return this.http.get(`${this.customApiURL}/users-packages`)}getUserPackages(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${e}`)}getFilteredAppointments(e,n,i){console.log("start date:",e);const r=`${this.customApiURL}/appointments?startDate=${e}&endDate=${n}&packageCustomerId=${i}`;return console.log("url",r),this.http.get(r)}cancelAppointment(e){return this.http.post(`https://k-studio.co.il/wp-json/wn/v1/cancel-booking/${e}`,{})}getAppointments(e,n){const i=n.split(" ")[0],r=this.calculateEndDate(i);return this.http.get(`${this.customApiURL}/appointments?startDate=${i}&endDate=${r}&packageCustomerId=${e}`)}calculateEndDate(e){const n=new Date(e);return n.setDate(n.getDate()+30),n.toISOString().split("T")[0]}getSubscriptionDetails(e){return this.http.get(`${this.customApiURL}/subscription?user_id=${e}`)}getSubscriptionDetailsBySubscriptionID(e){return this.http.get(`${this.customApiURL}/subscriptionById/${e}`)}updateSubscriptionStatus(e,n){return this.http.get(`${this.customApiURL}/subscription-action?subscription_id=${e}&action=${n}`)}updateRenewalDate(e,n){return this.http.post(`${this.customApiURL}/subscription/${e}/renewal/${n}`,{})}}return(a=s).\u0275fac=function(e){return new(e||a)(t.KVO(V.Qq))},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),s})();function Et(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-item",6),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG(2);return t.Njj(i.selectUser(n))}),t.j41(1,"ion-avatar",7),t.nrm(2,"img",8),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.k0s()()}if(2&a){const o=s.$implicit;t.R7$(2),t.Y8G("src",o.wpUserPhotoUrl,t.B4B),t.R7$(2),t.Lme(" ",o.firstName," ",o.lastName," ")}}function At(a,s){if(1&a&&(t.j41(0,"ion-list",4),t.DNE(1,Et,5,3,"ion-item",5),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.filteredUsers)}}function jt(a,s){1&a&&t.nrm(0,"ion-spinner")}function Lt(a,s){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const o=t.XpG(3);t.R7$(),t.SpI(" ","active"===o.subscription.status?"\u05d4\u05e9\u05d4\u05d4 \u05de\u05e0\u05d5\u05d9":"\u05d4\u05e4\u05e2\u05dc \u05de\u05e0\u05d5\u05d9"," ")}}function Nt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-content")(1,"ion-datetime",21),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG(3);return t.DH7(i.selectedDate,n)||(i.selectedDate=n),t.Njj(n)}),t.k0s(),t.j41(2,"ion-footer")(3,"ion-toolbar")(4,"ion-buttons",22)(5,"ion-button",23),t.bIt("click",function(){t.eBV(o);const n=t.XpG(3);return t.Njj(n.closeDatePicker())}),t.EFF(6,"\u05d1\u05d9\u05d8\u05d5\u05dc"),t.k0s(),t.j41(7,"ion-button",23),t.bIt("click",function(){t.eBV(o);const n=t.XpG(3);return t.Njj(n.confirmNewDate())}),t.EFF(8,"\u05d0\u05d9\u05e9\u05d5\u05e8"),t.k0s()()()()()}if(2&a){const o=t.XpG(3);t.R7$(),t.R50("ngModel",o.selectedDate),t.Y8G("min",o.minDate)("value",o.selectedDate)}}function Rt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",15)(1,"ion-card-content")(2,"div",16)(3,"ion-chip")(4,"ion-label")(5,"strong"),t.EFF(6,"\u05de\u05e1' \u05de\u05e0\u05d5\u05d9:"),t.k0s(),t.EFF(7),t.k0s()(),t.j41(8,"ion-chip")(9,"ion-label")(10,"strong"),t.EFF(11,"\u05e1\u05d8\u05d8\u05d5\u05e1 \u05de\u05e0\u05d5\u05d9:"),t.k0s(),t.EFF(12),t.k0s()(),t.j41(13,"ion-chip")(14,"ion-label")(15,"strong"),t.EFF(16,"\u05d7\u05d9\u05d3\u05d5\u05e9 \u05d4\u05d1\u05d0:"),t.k0s(),t.EFF(17),t.k0s()()(),t.j41(18,"ion-button",17),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.handleSubscriptionToggle(n.subscription.id,n.subscription.status))}),t.DNE(19,jt,1,0,"ion-spinner",18)(20,Lt,2,1,"span",18),t.k0s(),t.j41(21,"ion-button",19),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.openDatePicker(n.subscription.id))}),t.EFF(22," \u05d1\u05d7\u05e8 \u05ea\u05d0\u05e8\u05d9\u05da \u05d7\u05d3\u05e9 "),t.k0s(),t.j41(23,"ion-modal",20),t.bIt("didDismiss",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.closeDatePicker())}),t.DNE(24,Nt,9,3,"ng-template"),t.k0s()()()}if(2&a){const o=t.XpG(2);t.Y8G("@expandCollapse",void 0),t.R7$(7),t.SpI(" ",o.subscription.id," "),t.R7$(5),t.SpI(" ",o.subscription.status," "),t.R7$(5),t.SpI(" ",o.subscription.nextRenewal," "),t.R7$(),t.Y8G("color","active"===o.subscription.status?"warning":"success"),t.R7$(),t.Y8G("ngIf",o.loadingSubscriptionId===o.subscription.id),t.R7$(),t.Y8G("ngIf",o.loadingSubscriptionId!==o.subscription.id),t.R7$(3),t.Y8G("isOpen",o.isDatePickerOpen)}}function Gt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-item",33)(1,"ion-label")(2,"h3"),t.EFF(3),t.nI1(4,"date"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()(),t.j41(7,"ion-button",34),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG(6);return t.Njj(i.cancelAppointment(n.bookingId))}),t.nrm(8,"ion-icon",35),t.k0s()()}if(2&a){const o=s.$implicit,e=t.XpG(6);t.R7$(3),t.JRh(t.i5U(4,4,o.time,"dd.MM HH:mm")),t.R7$(2),t.HbH("status-"+o.status),t.R7$(),t.SpI(" \u05e1\u05d8\u05d8\u05d5\u05e1: ",e.translateStatus(o.status)," ")}}function Bt(a,s){if(1&a&&(t.j41(0,"div",31)(1,"ion-list"),t.DNE(2,Gt,9,7,"ion-item",32),t.k0s()()),2&a){const o=t.XpG(3).$implicit,e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.appointments[o.packageCustomerId])}}function Ut(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",28)(1,"ion-button",19),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2).$implicit,i=t.XpG(2);return t.Njj(i.fetchAppointmentsForPackage(n.packageCustomerId,n.purchased))}),t.nrm(2,"ion-icon",29),t.EFF(3," \u05e8\u05e2\u05e0\u05df \u05e4\u05d2\u05d9\u05e9\u05d5\u05ea "),t.k0s(),t.DNE(4,Bt,3,1,"div",30),t.k0s()}if(2&a){const o=t.XpG(2).$implicit,e=t.XpG(2);t.R7$(4),t.Y8G("ngIf",e.appointments[o.packageCustomerId])}}function $t(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",36)(1,"ion-item")(2,"ion-datetime",21),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG(4);return t.DH7(i.newTraining.dateTime,n)||(i.newTraining.dateTime=n),t.Njj(n)}),t.k0s()(),t.j41(3,"ion-item")(4,"ion-label"),t.EFF(5,"\u05de\u05d9\u05e7\u05d5\u05dd"),t.k0s(),t.j41(6,"ion-select",37),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG(4);return t.DH7(i.newTraining.location,n)||(i.newTraining.location=n),t.Njj(n)}),t.j41(7,"ion-select-option",38),t.EFF(8,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),t.k0s(),t.j41(9,"ion-select-option",39),t.EFF(10,"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"),t.k0s()()(),t.j41(11,"ion-button",40),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2).$implicit,i=t.XpG(2);return t.Njj(i.addTraining(n.packageCustomerId,n.serviceId))}),t.nrm(12,"ion-icon",41),t.EFF(13," \u05d4\u05d5\u05e1\u05e3 \u05d0\u05d9\u05de\u05d5\u05df "),t.k0s()()}if(2&a){const o=t.XpG(4);t.R7$(2),t.R50("ngModel",o.newTraining.dateTime),t.Y8G("min",o.minDate)("value",o.newTraining.dateTime),t.R7$(4),t.R50("ngModel",o.newTraining.location)}}function Vt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",15)(1,"ion-card-content")(2,"div",24)(3,"ion-chip")(4,"ion-label")(5,"strong"),t.EFF(6,"\u05de\u05e7\u05d5\u05de\u05d5\u05ea \u05e4\u05e0\u05d5\u05d9\u05d9\u05dd:"),t.k0s(),t.EFF(7),t.k0s()(),t.j41(8,"ion-chip")(9,"ion-label")(10,"strong"),t.EFF(11,"\u05ea\u05d0\u05e8\u05d9\u05da \u05e8\u05db\u05d9\u05e9\u05d4:"),t.k0s(),t.EFF(12),t.nI1(13,"date"),t.k0s()()(),t.j41(14,"ion-item-group")(15,"ion-item-divider",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.toggleAppointments(n.packageCustomerId))}),t.j41(16,"ion-label"),t.EFF(17,"\u05e4\u05d2\u05d9\u05e9\u05d5\u05ea"),t.k0s(),t.nrm(18,"ion-icon",12),t.k0s(),t.DNE(19,Ut,5,1,"div",26),t.k0s(),t.j41(20,"ion-item-group")(21,"ion-item-divider",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.toggleAddTraining(n.packageCustomerId))}),t.j41(22,"ion-label"),t.EFF(23,"\u05d4\u05d5\u05e1\u05e3 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.nrm(24,"ion-icon",12),t.k0s(),t.DNE(25,$t,14,4,"div",27),t.k0s()()()}if(2&a){const o=t.XpG().$implicit,e=t.XpG(2);t.Y8G("@expandCollapse",void 0),t.R7$(7),t.Lme(" ",o.available," / ",o.total," "),t.R7$(5),t.SpI(" ",t.i5U(13,8,o.purchased,"dd.MM HH:mm")," "),t.R7$(6),t.Y8G("name",e.isAppointmentsVisible(o.packageCustomerId)?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",e.isAppointmentsVisible(o.packageCustomerId)),t.R7$(5),t.Y8G("name",e.showAddTrainingForm[o.packageCustomerId]?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",e.showAddTrainingForm[o.packageCustomerId])}}function Xt(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-card",10)(1,"ion-item",11),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG(2);return t.Njj(i.toggleCard(n.packageCustomerId))}),t.j41(2,"ion-card-header")(3,"ion-card-title"),t.EFF(4,"\u05d7\u05d1\u05d9\u05dc\u05d4"),t.k0s()(),t.nrm(5,"ion-icon",12),t.k0s(),t.DNE(6,Vt,26,11,"div",13),t.k0s()}if(2&a){const o=s.$implicit,e=t.XpG(2);t.R7$(5),t.Y8G("name",e.isCardExpanded(o.packageCustomerId)?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",e.isCardExpanded(o.packageCustomerId))}}function Yt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",9)(1,"ion-text")(2,"h2"),t.EFF(3),t.k0s()(),t.j41(4,"ion-card",10)(5,"ion-item",11),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.toggleCard(n.subscription.id))}),t.j41(6,"ion-card-header")(7,"ion-card-title"),t.EFF(8,"\u05de\u05e0\u05d5\u05d9"),t.k0s()(),t.nrm(9,"ion-icon",12),t.k0s(),t.DNE(10,Rt,25,8,"div",13),t.k0s(),t.j41(11,"ion-list"),t.DNE(12,Xt,7,2,"ion-card",14),t.k0s()()}if(2&a){const o=t.XpG();t.R7$(3),t.Lme("\u05e0\u05ea\u05d5\u05e0\u05d9 \u05de\u05e9\u05ea\u05de\u05e9 ",o.selectedUser.firstName," ",o.selectedUser.lastName,""),t.R7$(6),t.Y8G("name",o.isCardExpanded(o.subscription.id)?"chevron-up":"chevron-down"),t.R7$(),t.Y8G("ngIf",o.isCardExpanded(o.subscription.id)),t.R7$(2),t.Y8G("ngForOf",o.packages)}}let zt=(()=>{var a;class s{constructor(e,n,i){this.alertController=e,this.http=n,this.managePackagesService=i,this.newTraining={dateTime:"",location:"main"},this.subscription={id:"",status:"",nextRenewal:""},this.isDatePickerOpen=!1,this.selectedDate="",this.selectedSubscriptionId=null,this.expandedCards={},this.visibleAppointments={},this.loadingSubscriptionId=null,this.today=(new Date).toISOString(),this.minDate=(new Date).toISOString(),this.showAddTrainingForm={},this.availablePackages=[],this.appointments={},this.currentPackageId=null,this.currentPurchaseDate=null,this.users=[],this.filteredUsers=[],this.selectedUser=null,this.packages=[],this.searchQuery="",this.searchSubject=new It.B}ngOnInit(){this.loadUsers(),this.setupSearchSubscription(),this.today=(new Date).toISOString(),this.minDate=(new Date).toISOString(),this.newTraining.dateTime||(this.newTraining.dateTime=this.today),this.selectedDate||(this.selectedDate=this.today)}toggleCard(e){this.expandedCards[Number(e)]=!this.expandedCards[Number(e)]}fetchSubscription(e){this.managePackagesService.getSubscriptionDetails(e).subscribe(n=>{const i=n[0];this.subscription={id:i.subscription_id,status:i.status,nextRenewal:i.next_renewal_date}},n=>{console.error("error:",n)})}fetchSubscriptionBySubscriptionID(e){this.managePackagesService.getSubscriptionDetailsBySubscriptionID(e).subscribe(n=>{console.log("data",n);const i=n;console.log("serverData:",i),this.subscription={id:i.id,status:i.status,nextRenewal:i.renewalDate}},n=>{console.error("Error:",n)})}handleSubscriptionToggle(e,n){this.loadingSubscriptionId=e,this.toggleSubscriptionStatus(e,"active"===n?"suspend":"active").then(()=>{this.loadingSubscriptionId=null}).catch(r=>{console.error("Error toggling subscription:",r),this.loadingSubscriptionId=null})}toggleSubscriptionStatus(e,n){return new Promise((i,r)=>{this.managePackagesService.updateSubscriptionStatus(e,n).subscribe({next:h=>{console.log("Status Update Response:",h),console.log("subscriptionID:",e),this.fetchSubscriptionBySubscriptionID(e),i()},error:h=>{console.error("Error updating subscription status:",h),r(h)}})})}openDatePicker(e){this.selectedSubscriptionId=e,this.isDatePickerOpen=!0}closeDatePicker(){this.isDatePickerOpen=!1}confirmNewDate(){var e=this;return(0,F.A)(function*(){e.closeDatePicker(),yield(yield e.alertController.create({header:"\u05d0\u05d9\u05e9\u05d5\u05e8 \u05ea\u05d0\u05e8\u05d9\u05da \u05d7\u05d3\u05e9",message:`\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05e2\u05d3\u05db\u05df \u05d0\u05ea \u05d4\u05ea\u05d0\u05e8\u05d9\u05da \u05dc-${e.selectedDate}?`,buttons:[{text:"\u05d1\u05d9\u05d8\u05d5\u05dc",role:"cancel"},{text:"\u05d0\u05d9\u05e9\u05d5\u05e8",handler:()=>{e.updateRenewalDate(e.selectedSubscriptionId,e.selectedDate)}}]})).present()})()}updateRenewalDate(e,n){this.managePackagesService.updateRenewalDate(e,n).subscribe(i=>{console.log("Renewal Date Update Response:",i),this.fetchSubscriptionBySubscriptionID(e)})}isCardExpanded(e){const n=Number(e);return!1!==this.expandedCards[n]}loadUsers(){this.managePackagesService.getAllUsers().subscribe(e=>{this.users=e.data.users.map(n=>({id:n.externalId,customerId:n.id,firstName:n.firstName,lastName:n.lastName,wpUserPhotoUrl:n.wpUserPhotoUrl}))},e=>{console.error("Error fetching users:",e)})}setupSearchSubscription(){this.searchSubject.pipe((0,Ft.B)(300)).subscribe(e=>{this.filteredUsers=this.users.filter(n=>n.firstName.toLowerCase().includes(e.toLowerCase())||n.lastName.toLowerCase().includes(e.toLowerCase()))})}toggleAppointments(e){if(this.visibleAppointments[e]=!this.visibleAppointments[e],this.visibleAppointments[e]&&(!this.appointments[e]||0===this.appointments[e].length)){const n=this.packages.find(i=>i.packageCustomerId===e);n&&this.fetchAppointmentsForPackage(e,n.purchased)}}isAppointmentsVisible(e){return!!this.visibleAppointments[e]}toggleAddTraining(e){Object.keys(this.showAddTrainingForm).forEach(n=>{parseInt(n)!==e&&(this.showAddTrainingForm[parseInt(n)]=!1)}),this.showAddTrainingForm[e]=!this.showAddTrainingForm[e],this.showAddTrainingForm[e]||(this.newTraining={dateTime:"",location:"main"})}onSearchQueryChange(e){this.searchSubject.next(e.detail.value)}selectUser(e){this.selectedUser=e,this.filteredUsers=[],this.searchQuery=`${e.firstName} ${e.lastName}`,this.fetchUserPackages(e.customerId),this.fetchSubscription(e.id)}fetchUserPackages(e){this.managePackagesService.getUserPackages(e).subscribe(n=>{if(null==n||!n.data)return console.error("Error: response data is undefined or null"),void(this.packages=[]);this.packages=n.data.flatMap(i=>i.packages?i.packages.flatMap(r=>r.purchases?r.purchases.flatMap(h=>h.purchase?h.purchase.map(P=>({customerId:i.customerId,packageId:r.packageId,packageCustomerId:h.packageCustomerId,serviceId:P.serviceId,available:P.available,total:P.total,purchased:h.purchased})):[]):[]):[])},n=>{console.error("Error fetching packages:",n),this.packages=[]})}fetchAppointmentsForPackage(e,n){this.currentPackageId=e,this.currentPurchaseDate=n,this.managePackagesService.getAppointments(e,n).subscribe(i=>{this.appointments[e]=i},i=>{console.error("Error fetching appointments:",i)})}translateStatus(e){return{approved:"\u05de\u05d0\u05d5\u05e9\u05e8",canceled:"\u05d1\u05d5\u05d8\u05dc",pending:"\u05d1\u05d4\u05de\u05ea\u05e0\u05d4"}[e]||"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2"}cancelAppointment(e){confirm("\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05d1\u05d8\u05dc \u05d0\u05ea \u05d4\u05d0\u05d9\u05de\u05d5\u05df?")&&this.managePackagesService.cancelAppointment(e).subscribe(()=>{alert("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.currentPackageId&&this.currentPurchaseDate&&this.fetchAppointmentsForPackage(this.currentPackageId,this.currentPurchaseDate)},n=>{console.error("Error canceling appointment:",n),alert("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e2\u05ea \u05d1\u05d9\u05d8\u05d5\u05dc \u05d4\u05d0\u05d9\u05de\u05d5\u05df")})}addTraining(e,n){if(!this.newTraining.dateTime)return void alert("\u05d0\u05e0\u05d0 \u05d4\u05d6\u05df \u05ea\u05d0\u05e8\u05d9\u05da \u05d5\u05e9\u05e2\u05d4 \u05dc\u05d0\u05d9\u05de\u05d5\u05df");if(!this.selectedUser)return void alert("\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e0\u05d1\u05d7\u05e8");const i=new Date(this.newTraining.dateTime).toISOString(),r="main"===this.newTraining.location?1:2;let h=0;console.log("location:",this.newTraining.location),console.log("serviceId:",n),"main"===this.newTraining.location&&1==n||4==n?h=172:"main"===this.newTraining.location&&12==n||54==n||17==n?h=169:"main"!=this.newTraining.location&&12==n||54==n||17==n?h=643:("main"!=this.newTraining.location&&1==n||4==n)&&(h=644);const P={type:"appointment",serviceId:n,providerId:h,locationId:r,notifyParticipants:0,bookings:[{customerId:this.selectedUser.id,status:"approved",duration:3600,persons:1,extras:[],customFields:{},utcOffset:-(new Date).getTimezoneOffset(),packageCustomerService:{packageCustomer:{id:e}}}],bookingStart:i,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};console.log("enrollData:",P),this.http.post("https://k-studio.co.il/wp-json/wn/v1/bookTrainingNEW",P,{headers:{"Content-Type":"application/json"}}).subscribe(M=>{var w;null!==(w=M.data)&&void 0!==w&&w.timeSlotUnavailable?alert("\u05de\u05e9\u05d1\u05e6\u05ea \u05d4\u05d6\u05de\u05df \u05d0\u05d9\u05e0\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4"):(alert("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05e0\u05d5\u05e1\u05e3 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.newTraining={dateTime:"",location:"main"})},M=>{console.error("Error Adding Training:",M),alert("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05d9\u05de\u05d5\u05df")})}}return(a=s).\u0275fac=function(e){return new(e||a)(t.rXU(l.hG),t.rXU(V.Qq),t.rXU(Tt))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-manage-packages"]],decls:5,vars:3,consts:[[1,"search-container"],["placeholder","\u05d7\u05e4\u05e9 \u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05e4\u05d9 \u05e9\u05dd",1,"custom-searchbar",3,"ngModelChange","ionInput","ngModel"],["class","autocomplete-dropdown",4,"ngIf"],["class","package-details",4,"ngIf"],[1,"autocomplete-dropdown"],["class","user-item",3,"click",4,"ngFor","ngForOf"],[1,"user-item",3,"click"],["slot","start"],["alt","User photo",3,"src"],[1,"package-details"],[1,"package-card"],[1,"card-header",3,"click"],["slot","end",3,"name"],["class","card-content",4,"ngIf"],["class","package-card",4,"ngFor","ngForOf"],[1,"card-content"],[1,"subscription-info"],["expand","block",3,"click","color"],[4,"ngIf"],["expand","block","color","primary",3,"click"],[3,"didDismiss","isOpen"],["presentation","date-time","locale","he","hour-cycle","h23","first-day-of-week","0",1,"custom-datetime",3,"ngModelChange","ngModel","min","value"],["slot","end"],[3,"click"],[1,"package-info"],[1,"collapsible-header",3,"click"],["class","collapsible-content",4,"ngIf"],["class","collapsible-content add-training",4,"ngIf"],[1,"collapsible-content"],["name","refresh","slot","start"],["class","appointments",4,"ngIf"],[1,"appointments"],["class","appointment-item",4,"ngFor","ngForOf"],[1,"appointment-item"],["color","danger","fill","clear","slot","end",3,"click"],["name","trash"],[1,"collapsible-content","add-training"],["interface","popover",3,"ngModelChange","ngModel"],["value","main"],["value","second"],["expand","block","color","success",1,"add-training-button",3,"click"],["name","add-circle","slot","start"]],template:function(e,n){1&e&&(t.j41(0,"ion-content")(1,"div",0)(2,"ion-searchbar",1),t.mxI("ngModelChange",function(r){return t.DH7(n.searchQuery,r)||(n.searchQuery=r),r}),t.bIt("ionInput",function(r){return n.onSearchQueryChange(r)}),t.k0s(),t.DNE(3,At,2,1,"ion-list",2),t.k0s(),t.DNE(4,Yt,13,5,"div",3),t.k0s()),2&e&&(t.R7$(2),t.R50("ngModel",n.searchQuery),t.R7$(),t.Y8G("ngIf",n.filteredUsers.length>0),t.R7$(),t.Y8G("ngIf",n.selectedUser))},dependencies:[g.Sq,g.bT,c.BC,c.vS,l.mC,l.Jm,l.QW,l.b_,l.I9,l.ME,l.tN,l.ZB,l.W9,l.A9,l.M0,l.iq,l.uz,l.Dg,l.jh,l.he,l.nf,l.S1,l.Nm,l.Ip,l.w2,l.IO,l.ai,l.Sb,l.Je,l.Gw,g.vh],styles:[".search-container[_ngcontent-%COMP%]{padding:16px;position:sticky;top:0;z-index:1000;background:var(--ion-background-color)}.search-container[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]{--border-radius: 20px;--box-shadow: 0 2px 6px rgba(0, 0, 0, .1)}.autocomplete-dropdown[_ngcontent-%COMP%]{max-height:200px;width:100%;overflow-y:auto;border-radius:12px;box-shadow:0 4px 12px #0000001a;margin-top:8px}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--min-height: 60px}.autocomplete-dropdown[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light)}.package-details[_ngcontent-%COMP%]{padding:16px}.package-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:right;font-size:24px;font-family:Alef;margin-bottom:24px;font-weight:400}.package-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:16px;box-shadow:0 4px 12px #00000014}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{cursor:pointer;--background: var(--ion-color-light)}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:12px;width:100%}.package-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transition:transform .3s ease}.package-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{overflow:hidden}.package-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;text-align:center}.package-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:16px;margin-bottom:16px}.package-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{--background: var(--ion-color-light)}.collapsible-header[_ngcontent-%COMP%]{cursor:pointer;--background: var(--ion-color-light);--padding-start: 16px;--padding-end: 16px;margin-top:16px;border-radius:8px}.collapsible-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transition:transform .3s ease}.collapsible-content[_ngcontent-%COMP%]{padding:16px;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.appointment-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;margin-bottom:8px;border-radius:8px;font-family:Alef}.appointment-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Alef;font-weight:600;color:var(--ion-color-dark);font-size:18px}.appointment-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Alef}.status-approved[_ngcontent-%COMP%]{color:var(--ion-color-success)}.status-canceled[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.status-pending[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.custom-datetime[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:12px}.add-training-button[_ngcontent-%COMP%]{margin-top:16px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;margin-bottom:16px}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;border:1px solid var(--ion-color-medium);border-radius:8px;margin-top:6px}.add-training[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:8px;padding:8px;margin-top:6px}.add-training[_ngcontent-%COMP%]   .add-training-button[_ngcontent-%COMP%]{margin-top:20px}ion-input[type=time][_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:16px}.subscription-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.subscription-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:5px 0}.custom-datetime[_ngcontent-%COMP%]{width:100%}"],data:{animation:[(0,A.hZ)("expandCollapse",[(0,A.wk)("void",(0,A.iF)({height:"0",opacity:"0"})),(0,A.wk)("*",(0,A.iF)({height:"*",opacity:"1"})),(0,A.kY)("void <=> *",[(0,A.i0)("300ms ease-in-out")])])]}}),s})(),Ht=(()=>{var a;class s{constructor(e){this.http=e,this.apiURL="https://k-studio.co.il/wp-json/wn/v1/blocks"}getBlocks(){return this.http.get(this.apiURL)}}return(a=s).\u0275fac=function(e){return new(e||a)(t.KVO(V.Qq))},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),s})();const Wt=["mainContent"],Jt=()=>[];function Qt(a,s){1&a&&(t.j41(0,"div",29),t.nrm(1,"ion-skeleton-text",30)(2,"ion-skeleton-text",31)(3,"br")(4,"ion-skeleton-text",32),t.k0s())}function Kt(a,s){1&a&&(t.j41(0,"div")(1,"div",27),t.DNE(2,Qt,5,0,"div",28),t.k0s()()),2&a&&(t.R7$(2),t.Y8G("ngForOf",t.lJ4(1,Jt).constructor(3)))}function Zt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",33)(1,"ion-card-header",34)(2,"ion-card-title",35),t.EFF(3),t.k0s()(),t.j41(4,"ion-card-content",36),t.EFF(5),t.nrm(6,"br"),t.EFF(7),t.nI1(8,"date"),t.nI1(9,"date"),t.k0s(),t.j41(10,"ion-icon",37),t.bIt("click",function(){const n=t.eBV(o),i=n.$implicit,r=n.index,h=t.XpG();return t.Njj(h.openConfirmDialog(i,r))}),t.k0s()()}if(2&a){const o=s.$implicit;t.Y8G("@fadeOutAnimation",o.fadeOut?"fadeOut":"fadeIn"),t.R7$(3),t.JRh(o.serviceName),t.R7$(2),t.SpI(" ",169===o.providerID||172===o.providerID?"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4":643===o.providerID||644===o.providerID?"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd":o.providerID,""),t.R7$(2),t.Lme(" ",t.i5U(8,5,o.startTime,"dd.MM")," | ",t.i5U(9,8,o.startTime,"HH:mm")," ")}}function qt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",38)(1,"div",39)(2,"h3"),t.EFF(3,"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.j41(4,"p"),t.EFF(5,"\u05d4\u05d0\u05dd \u05d4\u05d9\u05e0\u05da \u05d1\u05d8\u05d5\u05d7/\u05d4 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4?"),t.k0s(),t.j41(6,"div",40)(7,"button",41),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.closeConfirmDialog())}),t.EFF(8,"\u05d1\u05d9\u05d8\u05d5\u05dc"),t.k0s(),t.j41(9,"button",42),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.confirmDelete())}),t.EFF(10,"\u05d0\u05d9\u05e9\u05d5\u05e8"),t.k0s()()()()}}function te(a,s){1&a&&(t.j41(0,"ion-card-content")(1,"p",43),t.EFF(2,"\u05d0\u05d9\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd \u05db\u05e8\u05d2\u05e2"),t.k0s()())}function ee(a,s){1&a&&(t.j41(0,"div"),t.nrm(1,"ion-skeleton-text",44)(2,"ion-skeleton-text",44)(3,"ion-skeleton-text",44),t.k0s())}function ne(a,s){if(1&a&&(t.j41(0,"div",45),t.nrm(1,"img",46),t.j41(2,"ion-card-header",47)(3,"ion-card-title",48),t.EFF(4),t.k0s()(),t.j41(5,"ion-card-content",49),t.EFF(6),t.k0s()()),2&a){const o=s.$implicit;t.R7$(),t.Y8G("src",o.image,t.B4B),t.R7$(3),t.JRh(o.title),t.R7$(2),t.SpI(" ",o.description," ")}}function ie(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",23),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.openManagePackages())}),t.nrm(1,"ion-icon",26),t.j41(2,"ion-label"),t.EFF(3,"\u05e0\u05d9\u05d4\u05d5\u05dc"),t.k0s()()}}(0,kt.kz)();const oe=[{path:"",component:(()=>{var a;class s{constructor(e,n,i,r,h,P,M,w,S,j){this.alertController=e,this.toastController=n,this.profileService=i,this.ameliaService=r,this.blocksService=h,this.modalCtrl=P,this.modalCtrl1=M,this.modalCtrl2=w,this.modalCtrl3=S,this.authService=j,this.upcomingTrainings=[],this.isLoadingTrainings=!0,this.fitnessTips=[],this.isLoading=!0,this.errorMessage="",this.userRole="",this.isConfirmDialogVisible=!1,this.selectedIndex=0}ngOnInit(){this.userRole=this.authService.getUserRole(),setTimeout(()=>{new Z.S(".swiper-container",{slidesPerView:"auto",spaceBetween:10,centeredSlides:!1,loop:!0,freeMode:!1,pagination:{el:".swiper-pagination",clickable:!0}})},0),setTimeout(()=>{new Z.S(".upcoming-swiper-container",{modules:[St.A],slidesPerView:"auto",spaceBetween:10,centeredSlides:!1,loop:!1,freeMode:!1,pagination:{el:".swiper-pagination",clickable:!0}})},0),this.loadUpcomingTrainings(),this.blocksService.getBlocks().subscribe(e=>{this.fitnessTips=e,this.isLoading=!1},e=>{console.error("Error fetching blocks",e),this.isLoading=!1}),this.authService.fetchUserFavLocation().subscribe(e=>{this.authService.storeFavLocation(e.favorite_location)},e=>{console.error("Error fetching user favorite location",e)}),this.setupOneSignal()}setupOneSignal(){var e=this;U().Debug.setLogLevel(6),U().initialize("83270e8d-d7ee-4904-91a7-47d1f71e9dd6");const n=this.authService.getUserEmail();n?U().User.addTag("email",n):U().User.addTag("email","error"),U().Notifications.addEventListener("click",function(){var i=(0,F.A)(function*(r){let h=r.notification;e.storeNotification(h),console.log("Notification clicked: ",h)});return function(r){return i.apply(this,arguments)}}()),U().Notifications.requestPermission(!0).then(i=>{console.log("Notification permission granted "+i)})}loadUpcomingTrainings(){this.isLoadingTrainings=!0,this.ameliaService.getUpcomingTrainings().subscribe(e=>{this.upcomingTrainings=e,this.isLoadingTrainings=!1},e=>{console.error("Error loading upcoming trainings:",e),this.isLoadingTrainings=!1})}refreshData(e){setTimeout(()=>{this.loadData(),e.target.complete()},2e3)}loadData(){this.isLoadingTrainings=!0,this.loadUpcomingTrainings(),this.authService.fetchUserFavLocation().subscribe(e=>{},e=>{console.error("Error fetching user favorite location",e)}),this.blocksService.getBlocks().subscribe(e=>{this.fitnessTips=e,this.isLoading=!1},e=>{console.error("Error fetching blocks",e),this.isLoading=!1}),this.authService.fetchPackageCustomerId(this.authService.getCustomerID()).subscribe(e=>{},e=>{console.error("Error fetching package customer ID",e)}),this.authService.fetchUserRole().subscribe(e=>{this.authService.storeUserRole(e.roles[0])},e=>{console.error("Error fetching role:",e)})}storeNotification(e){console.log("store notifications:",e);let n=JSON.parse(localStorage.getItem("notifications")||"[]");n.unshift({title:e.title,message:e.body,timestamp:new Date}),n.length>5&&(n=n.slice(0,5)),localStorage.setItem("notifications",JSON.stringify(n))}openNotifications(){var e=this;return(0,F.A)(function*(){const n=yield e.modalCtrl1.create({component:at,cssClass:"notification-popup",presentingElement:yield e.modalCtrl1.getTop(),breakpoints:[0,.5,1],initialBreakpoint:.5});return yield n.present(),e.setDisableScroll(!0),n.onDidDismiss().then(()=>{e.setDisableScroll(!1)}),yield n.present()})()}openWhatsApp(){window.open("https://wa.me/+972547937089","_blank")}openTrainings(){var e=this;return(0,F.A)(function*(){const n=yield e.modalCtrl.create({component:rt.T,cssClass:"trainings-popup",presentingElement:yield e.modalCtrl.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85});return yield n.present(),e.setDisableScroll(!0),n.onDidDismiss().then(()=>{e.setDisableScroll(!1)}),yield n.present()})()}setDisableScroll(e){var n=this;return(0,F.A)(function*(){(yield n.mainContent.getScrollElement()).style.overflowY=e?"hidden":"scroll"})()}openProfile(){var e=this;return(0,F.A)(function*(){if(e.authService.isLoggedIn()){const n=yield e.modalCtrl2.create({component:Mt,cssClass:"profile-popup",presentingElement:yield e.modalCtrl2.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85});yield n.present(),e.setDisableScroll(!0),n.onDidDismiss().then(()=>{e.setDisableScroll(!1)})}else console.log("User Not Logged In!")})()}openManagePackages(){var e=this;return(0,F.A)(function*(){if(e.authService.isLoggedIn()){const n=yield e.modalCtrl3.create({component:zt,cssClass:"managePackages-popup",presentingElement:yield e.modalCtrl3.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85});yield n.present(),e.setDisableScroll(!0),n.onDidDismiss().then(()=>{e.setDisableScroll(!1)})}else console.log("User Not Logged In!")})()}presentToast(e,n){var i=this;return(0,F.A)(function*(){yield(yield i.toastController.create({message:e,duration:3e3,color:n,position:"bottom"})).present()})()}confirmDelete(){const e=this.selectedTraining,n=this.selectedIndex;this.isConfirmDialogVisible=!1,e.fadeOut=!0,setTimeout(()=>{this.upcomingTrainings.splice(n,1)},300),this.profileService.cancelBooking(e.bookingId).subscribe(i=>{i.data.cancelBookingUnavailable?this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4","danger"):this.presentToast("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","success")},i=>{this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea","danger"),console.error("Error occurred while canceling the booking",i)})}animateAndDeleteTraining(e,n){e.fadeOut=!0,setTimeout(()=>{this.deleteTraining(e.bookingId,n)},300)}deleteTraining(e,n){this.profileService.cancelBooking(e).subscribe(i=>{i.data.cancelBookingUnavailable?this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4","danger"):(this.presentToast("\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","success"),this.upcomingTrainings.splice(n,1))},i=>{this.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea","danger"),console.error("Error occurred while canceling the booking",i)})}openConfirmDialog(e,n){this.selectedTraining=e,this.selectedIndex=n,this.isConfirmDialogVisible=!0}closeConfirmDialog(){this.isConfirmDialogVisible=!1}}return(a=s).\u0275fac=function(e){return new(e||a)(t.rXU(l.hG),t.rXU(l.K_),t.rXU(q),t.rXU(tt.J),t.rXU(Ht),t.rXU(l.W3),t.rXU(l.W3),t.rXU(l.W3),t.rXU(l.W3),t.rXU(W.u))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-home"]],viewQuery:function(e,n){if(1&e&&t.GBs(Wt,5),2&e){let i;t.mGM(i=t.lsd())&&(n.mainContent=i.first)}},decls:42,vars:8,consts:[["mainContent",""],[1,"ion-padding","ion-iphone"],["slot","fixed",3,"ionRefresh"],["refreshingSpinner","crescent","pullingIcon","false"],[1,"header-row"],["fill","clear",1,"bell-icon",3,"click"],["slot","icon-only","name","notifications-outline"],["color","dark"],[1,"page-title","home"],["fill","clear",1,"whatsapp-icon",3,"click"],["slot","icon-only","name","logo-whatsapp"],[1,"homepage-subtitle"],[4,"ngIf"],[1,"upcoming-swiper-container",3,"hidden"],[1,"swiper-wrapper"],["class","swiper-slide upcoming-swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],["class","custom-dialog",4,"ngIf"],[1,"swiper-container"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"custom-nav-bar"],[1,"nav-item"],["name","home-outline"],[1,"nav-item",3,"click"],["name","barbell-outline"],["class","nav-item",3,"click",4,"ngIf"],["name","person-outline"],[1,"skeleton-container"],["class","skeleton-item",4,"ngFor","ngForOf"],[1,"skeleton-item"],["animated","",2,"width","80%","margin-bottom","0.5rem"],["animated","",2,"width","50%"],["animated","",2,"width","30%"],[1,"swiper-slide","upcoming-swiper-slide"],[1,"upcoming-card-header"],[1,"upcoming-card-title"],[1,"upcoming-card-content"],["slot","icon-only","name","trash-outline",1,"trash-icon",3,"click"],[1,"custom-dialog"],[1,"dialog-content"],[1,"dialog-buttons"],[1,"cancel-button",3,"click"],[1,"confirm-button",3,"click"],[1,"no-trainings"],["animated","",2,"width","100%","height","150px"],[1,"swiper-slide"],["alt","tip image",1,"fitness-card-img",3,"src"],[1,"fitness-card-header"],[1,"fitness-card-title"],[1,"fitness-card-content"]],template:function(e,n){if(1&e){const i=t.RV6();t.j41(0,"ion-content",1,0)(2,"ion-refresher",2),t.bIt("ionRefresh",function(h){return t.eBV(i),t.Njj(n.refreshData(h))}),t.nrm(3,"ion-refresher-content",3),t.k0s(),t.j41(4,"div",4)(5,"ion-button",5),t.bIt("click",function(){return t.eBV(i),t.Njj(n.openNotifications())}),t.nrm(6,"ion-icon",6),t.k0s(),t.j41(7,"ion-text",7)(8,"h1",8),t.EFF(9,"K Studio"),t.k0s()(),t.j41(10,"ion-button",9),t.bIt("click",function(){return t.eBV(i),t.Njj(n.openWhatsApp())}),t.nrm(11,"ion-icon",10),t.k0s()(),t.j41(12,"ion-card-title",11),t.EFF(13,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"),t.k0s(),t.DNE(14,Kt,3,2,"div",12),t.j41(15,"div",13)(16,"div",14),t.DNE(17,Zt,11,11,"div",15),t.k0s(),t.nrm(18,"div",16),t.DNE(19,qt,11,0,"div",17),t.k0s(),t.DNE(20,te,3,0,"ion-card-content",12),t.j41(21,"ion-card-title",11),t.EFF(22,"\u05de\u05d4 \u05d7\u05d3\u05e9?"),t.k0s(),t.DNE(23,ee,4,0,"div",12),t.j41(24,"div",18)(25,"div",14),t.DNE(26,ne,7,3,"div",19),t.k0s(),t.nrm(27,"div",16),t.k0s()(),t.j41(28,"div",20)(29,"div",21),t.nrm(30,"ion-icon",22),t.j41(31,"ion-label"),t.EFF(32,"\u05d1\u05d9\u05ea"),t.k0s()(),t.j41(33,"div",23),t.bIt("click",function(){return t.eBV(i),t.Njj(n.openTrainings())}),t.nrm(34,"ion-icon",24),t.j41(35,"ion-label"),t.EFF(36,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),t.k0s()(),t.DNE(37,ie,4,0,"div",25),t.j41(38,"div",23),t.bIt("click",function(){return t.eBV(i),t.Njj(n.openProfile())}),t.nrm(39,"ion-icon",26),t.j41(40,"ion-label"),t.EFF(41,"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"),t.k0s()()()}2&e&&(t.R7$(14),t.Y8G("ngIf",n.isLoadingTrainings),t.R7$(),t.Y8G("hidden",n.isLoadingTrainings),t.R7$(2),t.Y8G("ngForOf",n.upcomingTrainings),t.R7$(2),t.Y8G("ngIf",n.isConfirmDialogVisible),t.R7$(),t.Y8G("ngIf",!(n.isLoadingTrainings||n.upcomingTrainings&&0!==n.upcomingTrainings.length)),t.R7$(3),t.Y8G("ngIf",n.isLoading),t.R7$(3),t.Y8G("ngForOf",n.fitnessTips),t.R7$(11),t.Y8G("ngIf","administrator"==n.userRole))},dependencies:[g.Sq,g.bT,l.Jm,l.I9,l.ME,l.tN,l.W9,l.iq,l.he,l.To,l.Ki,l.ds,l.IO,g.vh],styles:[".swiper-container[_ngcontent-%COMP%]{width:100%;height:auto;margin-bottom:70px}.swiper-wrapper[_ngcontent-%COMP%]{display:flex;width:200vh}.swiper-slide[_ngcontent-%COMP%]{width:900px;max-width:900px;height:10%;background-color:#fff;border-radius:15px;box-shadow:0 0 11px 8px #0000001a;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:20px;margin-right:10px}.ion-iphone[_ngcontent-%COMP%]{padding-top:constant(safe-area-inset-top)!important;padding-top:env(safe-area-inset-top)!important}.fitness-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:15px;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.fitness-card-img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;border-radius:15px 15px 0 0;object-position:top}.fitness-card-header[_ngcontent-%COMP%]{height:60px;padding:15px;text-align:center;display:flex;align-items:center;justify-content:center}.fitness-card-title[_ngcontent-%COMP%]{font-size:1.4em;color:#333;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fitness-card-content[_ngcontent-%COMP%]{-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;padding:15px;height:auto;font-size:1em;line-height:1.5;color:#5d5d5d;font-weight:400}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-bottom:20px;text-align:right;font-family:Alef}ion-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ff6b6b);--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none}ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:20px}.homepage-subtitle[_ngcontent-%COMP%]{margin-top:10%;font-size:1.5em;margin-right:3%;margin-bottom:5%}.page-title[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin:0;flex-grow:1;text-align:center;padding-top:10px}.home[_ngcontent-%COMP%]{font-family:Teko;font-size:36px}.news-card[_ngcontent-%COMP%]{border-radius:20px;background:linear-gradient(135deg,#c38a49,#ccb08a);color:#fff}.upcoming-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4b6cb7,#182848)!important;border-radius:20px}.upcoming-title[_ngcontent-%COMP%], .whats-new-title[_ngcontent-%COMP%]{color:#fff}.whats-new-desc[_ngcontent-%COMP%]{color:#000}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:35px 15px 10px;position:relative}ion-button[_ngcontent-%COMP%]   .whatsapp-icon[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #6ee39a, #128C7E);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[_ngcontent-%COMP%]   .bell-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ffa1a1);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[color=secondary][_ngcontent-%COMP%]{--background: #54a0ff}ion-header[_ngcontent-%COMP%]{--background: #2e86de;--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center}ion-icon[_ngcontent-%COMP%]{font-size:24px}.bell-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#feca57,#ffa1a1);border-radius:10px;box-shadow:0 4px 12px #0000001a}.whatsapp-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#6ee39a,#128c7e);border-radius:10px;box-shadow:0 4px 12px #0000001a}.app-logo[_ngcontent-%COMP%]{height:35px;width:auto;margin:0 auto}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-top:20px;margin-bottom:20px;text-align:right}ion-card[_ngcontent-%COMP%]{background:#fffc;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin:20px 0}.custom-nav-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:60px;background-color:#fff;border-top:1px solid #e0e0e0;display:flex;justify-content:space-around;align-items:center;box-shadow:0 -2px 10px #0000001a;z-index:1000;padding-bottom:50px;padding-top:30px}.ios[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{margin-top:5%}.ios[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{margin-bottom:20%}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;color:#666;font-size:12px}.nav-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;--color: #666}.nav-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.nav-item-active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .nav-item-active[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:hover   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:active   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:active   ion-label[_ngcontent-%COMP%]{color:#2980b9}.upcoming-trainings-card[_ngcontent-%COMP%]{margin:20px 0;box-shadow:none;background:transparent;padding:0}.upcoming-trainings[_ngcontent-%COMP%]{padding:0 10px;overflow:hidden}.training-block[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px;border-radius:10px;margin:0 5px;min-width:280px;text-align:right;position:relative;display:flex;flex-direction:column;align-items:flex-end}.training-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;width:100%}.training-title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:5px;margin-top:0}.training-details[_ngcontent-%COMP%]{display:flex;gap:10px}.time-container[_ngcontent-%COMP%], .date-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.time-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .date-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em}.trash-icon[_ngcontent-%COMP%]{position:relative;right:155px;bottom:20px;font-size:42px}.no-trainings[_ngcontent-%COMP%]{text-align:center}.swiper-button-next[_ngcontent-%COMP%], .swiper-button-prev[_ngcontent-%COMP%]{color:#000}.upcoming-swiper-slide[_ngcontent-%COMP%]{height:120px;width:200px;padding:0;align-items:flex-start;background:#f5f5f5;box-shadow:none}.upcoming-card-header[_ngcontent-%COMP%]{height:60px;padding:15px;text-align:center;display:flex}.upcoming-card-title[_ngcontent-%COMP%]{font-size:1.2em;color:#333;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:right;margin-top:10px}.upcoming-card-content[_ngcontent-%COMP%]{-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;height:auto;font-size:1em;color:#5d5d5d;font-weight:400;margin-bottom:-8px}.skeleton-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:1rem;padding:0 1rem;-ms-overflow-style:none;scrollbar-width:none}.skeleton-item[_ngcontent-%COMP%]{min-width:200px;padding:1rem;border:1px solid #eee;border-radius:8px;flex-shrink:0}.skeleton-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.skeleton-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.skeleton-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.custom-dialog[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.dialog-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;text-align:center;box-shadow:0 2px 10px #0003;max-width:300px;width:90%}.dialog-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px;color:#333}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:14px;color:#666}.dialog-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.dialog-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer}.cancel-button[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.confirm-button[_ngcontent-%COMP%]{background:#59c7cd;color:#fff}ion-refresher-content[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}ion-refresher-content[_ngcontent-%COMP%]::part(refresher-pulling-icon), ion-refresher-content[_ngcontent-%COMP%]::part(refresher-refreshing-spinner){font-size:24px}"],data:{animation:[(0,A.hZ)("fadeOutAnimation",[(0,A.kY)("fadeIn => fadeOut",[(0,A.i0)("300ms ease-in",(0,A.iF)({opacity:0,transform:"scale(0.8)"}))])])]}}),s})()}];let ae=(()=>{var a;class s{}return(a=s).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[K.iI.forChild(oe),K.iI]}),s})(),re=(()=>{var a;class s{}return(a=s).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[g.MD,c.YN,l.bv,ae,b.Fg,_.Hl,O.s5,et]}),s})()},1492:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.LogLevel=void 0;var u=function(c){return c[c.None=0]="None",c[c.Fatal=1]="Fatal",c[c.Error=2]="Error",c[c.Warn=3]="Warn",c[c.Info=4]="Info",c[c.Debug=5]="Debug",c[c.Verbose=6]="Verbose",c}(u||(v.LogLevel=u={})),g=function(){function c(){}return c.prototype.setLogLevel=function(b){window.cordova.exec(function(){},function(){},"OneSignalPush","setLogLevel",[b])},c.prototype.setAlertLevel=function(b){window.cordova.exec(function(){},function(){},"OneSignalPush","setAlertLevel",[b])},c}();v.default=g},9639:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0});var u=function(){function g(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}return g.prototype._processFunctionList=function(c,b){for(var _=0;_<c.length;_++)c[_](b)},g.prototype.addEventListener=function(c,b){var _=this;if("click"===c)this._inAppMessageClickListeners.push(b),window.cordova.exec(function(D){_._processFunctionList(_._inAppMessageClickListeners,D)},function(){},"OneSignalPush","setInAppMessageClickHandler",[]);else if("willDisplay"===c)this._willDisplayInAppMessageListeners.push(b),window.cordova.exec(function(D){_._processFunctionList(_._willDisplayInAppMessageListeners,D)},function(){},"OneSignalPush","setOnWillDisplayInAppMessageHandler",[]);else if("didDisplay"===c)this._didDisplayInAppMessageListeners.push(b),window.cordova.exec(function(D){_._processFunctionList(_._didDisplayInAppMessageListeners,D)},function(){},"OneSignalPush","setOnDidDisplayInAppMessageHandler",[]);else if("willDismiss"===c)this._willDismissInAppMessageListeners.push(b),window.cordova.exec(function(D){_._processFunctionList(_._willDismissInAppMessageListeners,D)},function(){},"OneSignalPush","setOnWillDismissInAppMessageHandler",[]);else{if("didDismiss"!==c)return;this._didDismissInAppMessageListeners.push(b),window.cordova.exec(function(D){_._processFunctionList(_._didDismissInAppMessageListeners,D)},function(){},"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}},g.prototype.removeEventListener=function(c,b){if("click"===c)-1!==(_=this._inAppMessageClickListeners.indexOf(b))&&this._inAppMessageClickListeners.splice(_,1);else if("willDisplay"===c)-1!==(_=this._willDisplayInAppMessageListeners.indexOf(b))&&this._willDisplayInAppMessageListeners.splice(_,1);else if("didDisplay"===c)-1!==(_=this._didDisplayInAppMessageListeners.indexOf(b))&&this._willDisplayInAppMessageListeners.splice(_,1);else if("willDismiss"===c)-1!==(_=this._willDismissInAppMessageListeners.indexOf(b))&&this._willDismissInAppMessageListeners.splice(_,1);else{if("didDismiss"!==c)return;var _;-1!==(_=this._didDismissInAppMessageListeners.indexOf(b))&&this._didDismissInAppMessageListeners.splice(_,1)}},g.prototype.addTrigger=function(c,b){var _,O=((_={})[c]=b,_);this.addTriggers(O)},g.prototype.addTriggers=function(c){Object.keys(c).forEach(function(b){"string"!=typeof c[b]&&(c[b]=JSON.stringify(c[b]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTriggers",[c])},g.prototype.removeTrigger=function(c){this.removeTriggers([c])},g.prototype.removeTriggers=function(c){Array.isArray(c)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(function(){},function(){},"OneSignalPush","removeTriggers",[c])},g.prototype.clearTriggers=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearTriggers")},g.prototype.setPaused=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","setPaused",[c])},g.prototype.getPaused=function(){return new Promise(function(c,b){window.cordova.exec(c,b,"OneSignalPush","isPaused",[])})},g}();v.default=u},9430:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0});var u=function(){function g(){}return g.prototype.enter=function(c,b,_,O){null==_&&(_=function(){}),null==O&&(O=function(){}),window.cordova.exec(_,O,"OneSignalPush","enterLiveActivity",[c,b])},g.prototype.exit=function(c,b,_){null==b&&(b=function(){}),null==_&&(_=function(){}),window.cordova.exec(b,_,"OneSignalPush","exitLiveActivity",[c])},g.prototype.setPushToStartToken=function(c,b){window.cordova.exec(function(){},function(){},"OneSignalPush","setPushToStartToken",[c,b])},g.prototype.removePushToStartToken=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","removePushToStartToken",[c])},g.prototype.setupDefault=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","setupDefaultLiveActivity",[c])},g.prototype.startDefault=function(c,b,_){window.cordova.exec(function(){},function(){},"OneSignalPush","startDefaultLiveActivity",[c,b,_])},g}();v.default=u},70:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0});var u=function(){function g(){}return g.prototype.requestPermission=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","requestLocationPermission",[])},g.prototype.setShared=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","setLocationShared",[c])},g.prototype.isShared=function(){return new Promise(function(c,b){window.cordova.exec(c,b,"OneSignalPush","isLocationShared",[])})},g}();v.default=u},2252:(T,v,u)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.NotificationWillDisplayEvent=void 0;var g=u(311),c=function(){function b(_){this.notification=new g.OSNotification(_)}return b.prototype.preventDefault=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","preventDefault",[this.notification.notificationId])},b.prototype.getNotification=function(){return this.notification},b}();v.NotificationWillDisplayEvent=c},557:function(T,v,u){var g=this&&this.__awaiter||function(l,t,d,f){return new(d||(d=Promise))(function(m,x){function y(C){try{p(f.next(C))}catch(E){x(E)}}function I(C){try{p(f.throw(C))}catch(E){x(E)}}function p(C){C.done?m(C.value):function D(m){return m instanceof d?m:new d(function(x){x(m)})}(C.value).then(y,I)}p((f=f.apply(l,t||[])).next())})},c=this&&this.__generator||function(l,t){var f,D,m,x,d={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return x={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x;function y(p){return function(C){return function I(p){if(f)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(d=0)),d;)try{if(f=1,D&&(m=2&p[0]?D.return:p[0]?D.throw||((m=D.return)&&m.call(D),0):D.next)&&!(m=m.call(D,p[1])).done)return m;switch(D=0,m&&(p=[2&p[0],m.value]),p[0]){case 0:case 1:m=p;break;case 4:return d.label++,{value:p[1],done:!1};case 5:d.label++,D=p[1],p=[0];continue;case 7:p=d.ops.pop(),d.trys.pop();continue;default:if(!(m=(m=d.trys).length>0&&m[m.length-1])&&(6===p[0]||2===p[0])){d=0;continue}if(3===p[0]&&(!m||p[1]>m[0]&&p[1]<m[3])){d.label=p[1];break}if(6===p[0]&&d.label<m[1]){d.label=m[1],m=p;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(p);break}m[2]&&d.ops.pop(),d.trys.pop();continue}p=t.call(l,d)}catch(C){p=[6,C],D=0}finally{f=m=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,C])}}};Object.defineProperty(v,"__esModule",{value:!0}),v.OSNotificationPermission=void 0;var b=u(2252),_=function(l){return l[l.NotDetermined=0]="NotDetermined",l[l.Denied=1]="Denied",l[l.Authorized=2]="Authorized",l[l.Provisional=3]="Provisional",l[l.Ephemeral=4]="Ephemeral",l}(_||(v.OSNotificationPermission=_={})),O=function(){function l(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}return l.prototype._processFunctionList=function(t,d){for(var f=0;f<t.length;f++)t[f](d)},l.prototype._setPropertyAndObserver=function(){var t=this;window.cordova.exec(function(f){t._permission=f},function(){},"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",function(f){t._permission=f})},l.prototype.hasPermission=function(){return this._permission||!1},l.prototype.getPermissionAsync=function(){return g(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(d,f){window.cordova.exec(d,f,"OneSignalPush","getPermissionInternal")})]})})},l.prototype.permissionNative=function(){return new Promise(function(t,d){window.cordova.exec(t,d,"OneSignalPush","permissionNative",[])})},l.prototype.requestPermission=function(t){var d=null!=t&&t;return new Promise(function(f,D){window.cordova.exec(f,D,"OneSignalPush","requestPermission",[d])})},l.prototype.canRequestPermission=function(){return new Promise(function(t,d){window.cordova.exec(t,d,"OneSignalPush","canRequestPermission",[])})},l.prototype.registerForProvisionalAuthorization=function(t){window.cordova.exec(t,function(){},"OneSignalPush","registerForProvisionalAuthorization",[])},l.prototype.addEventListener=function(t,d){var f=this;if("click"===t)this._notificationClickedListeners.push(d),window.cordova.exec(function(y){f._processFunctionList(f._notificationClickedListeners,y)},function(){},"OneSignalPush","addNotificationClickListener",[]);else if("foregroundWillDisplay"===t)this._notificationWillDisplayListeners.push(d),window.cordova.exec(function(y){f._notificationWillDisplayListeners.forEach(function(I){I(new b.NotificationWillDisplayEvent(y))}),window.cordova.exec(function(){},function(){},"OneSignalPush","proceedWithWillDisplay",[y.notificationId])},function(){},"OneSignalPush","addForegroundLifecycleListener",[]);else{if("permissionChange"!==t)return;this._permissionObserverList.push(d),window.cordova.exec(function(y){f._processFunctionList(f._permissionObserverList,y)},function(){},"OneSignalPush","addPermissionObserver",[])}},l.prototype.removeEventListener=function(t,d){if("click"===t)-1!==(f=this._notificationClickedListeners.indexOf(d))&&this._notificationClickedListeners.splice(f,1);else if("foregroundWillDisplay"===t)-1!==(f=this._notificationWillDisplayListeners.indexOf(d))&&this._notificationWillDisplayListeners.splice(f,1);else{if("permissionChange"!==t)return;var f;-1!==(f=this._permissionObserverList.indexOf(d))&&this._permissionObserverList.splice(f,1)}},l.prototype.clearAll=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","clearAllNotifications",[])},l.prototype.removeNotification=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeNotification",[t])},l.prototype.removeGroupedNotifications=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeGroupedNotifications",[t])},l}();v.default=O},311:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.OSNotification=void 0;var u=function(){function g(c){this.notificationId=c.notificationId,this.body=c.body,this.title=c.title,this.additionalData=c.additionalData,this.rawPayload="string"==typeof c.rawPayload?JSON.parse(c.rawPayload):c.rawPayload,this.launchURL=c.launchURL,this.sound=c.sound,c.actionButtons&&(this.actionButtons=c.actionButtons),c.groupKey&&(this.groupKey=c.groupKey),c.ledColor&&(this.ledColor=c.ledColor),typeof c.priority<"u"&&(this.priority=c.priority),c.smallIcon&&(this.smallIcon=c.smallIcon),c.largeIcon&&(this.largeIcon=c.largeIcon),c.bigPicture&&(this.bigPicture=c.bigPicture),c.collapseId&&(this.collapseId=c.collapseId),c.groupMessage&&(this.groupMessage=c.groupMessage),c.fromProjectNumber&&(this.fromProjectNumber=c.fromProjectNumber),c.smallIconAccentColor&&(this.smallIconAccentColor=c.smallIconAccentColor),c.lockScreenVisibility&&(this.lockScreenVisibility=c.lockScreenVisibility),c.androidNotificationId&&(this.androidNotificationId=c.androidNotificationId),c.groupedNotifications&&c.groupedNotifications.length&&(this.groupedNotifications=c.groupedNotifications),c.badge&&(this.badge=c.badge),c.category&&(this.category=c.category),c.threadId&&(this.threadId=c.threadId),c.subtitle&&(this.subtitle=c.subtitle),c.templateId&&(this.templateId=c.templateId),c.attachments&&(this.attachments=c.attachments),c.templateName&&(this.templateName=c.templateName),c.mutableContent&&(this.mutableContent=c.mutableContent),c.badgeIncrement&&(this.badgeIncrement=c.badgeIncrement),c.contentAvailable&&(this.contentAvailable=c.contentAvailable),c.relevanceScore&&(this.relevanceScore=c.relevanceScore),c.interruptionLevel&&(this.interruptionLevel=c.interruptionLevel)}return g.prototype.display=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","displayNotification",[this.notificationId])},g}();v.OSNotification=u},1560:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0});var u=function(){function g(){this._subscriptionObserverList=[]}return g.prototype._processFunctionList=function(c,b){for(var _=0;_<c.length;_++)c[_](b)},g.prototype._setPropertiesAndObserver=function(){var c=this;window.cordova.exec(function(l){c._id=l},function(){},"OneSignalPush","getPushSubscriptionId"),window.cordova.exec(function(l){c._token=l},function(){},"OneSignalPush","getPushSubscriptionToken"),window.cordova.exec(function(l){c._optedIn=l},function(){},"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",function(l){c._id=l.current.id,c._token=l.current.token,c._optedIn=l.current.optedIn})},Object.defineProperty(g.prototype,"id",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"token",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"optedIn",{get:function(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1},enumerable:!1,configurable:!0}),g.prototype.getIdAsync=function(){return new Promise(function(c,b){window.cordova.exec(c,b,"OneSignalPush","getPushSubscriptionId")})},g.prototype.getTokenAsync=function(){return new Promise(function(c,b){window.cordova.exec(c,b,"OneSignalPush","getPushSubscriptionToken")})},g.prototype.getOptedInAsync=function(){return new Promise(function(c,b){window.cordova.exec(c,b,"OneSignalPush","getPushSubscriptionOptedIn")})},g.prototype.addEventListener=function(c,b){var _=this;this._subscriptionObserverList.push(b),window.cordova.exec(function(l){_._processFunctionList(_._subscriptionObserverList,l)},function(){},"OneSignalPush","addPushSubscriptionObserver",[])},g.prototype.removeEventListener=function(c,b){var _=this._subscriptionObserverList.indexOf(b);-1!==_&&this._subscriptionObserverList.splice(_,1)},g.prototype.optIn=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optInPushSubscription")},g.prototype.optOut=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","optOutPushSubscription")},g}();v.default=u},8229:(T,v)=>{Object.defineProperty(v,"__esModule",{value:!0});var u=function(){function g(){}return g.prototype.addOutcome=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcome",[c])},g.prototype.addUniqueOutcome=function(c){window.cordova.exec(function(){},function(){},"OneSignalPush","addUniqueOutcome",[c])},g.prototype.addOutcomeWithValue=function(c,b){window.cordova.exec(function(){},function(){},"OneSignalPush","addOutcomeWithValue",[c,b])},g}();v.default=u},3962:function(T,v,u){var g=this&&this.__awaiter||function(l,t,d,f){return new(d||(d=Promise))(function(m,x){function y(C){try{p(f.next(C))}catch(E){x(E)}}function I(C){try{p(f.throw(C))}catch(E){x(E)}}function p(C){C.done?m(C.value):function D(m){return m instanceof d?m:new d(function(x){x(m)})}(C.value).then(y,I)}p((f=f.apply(l,t||[])).next())})},c=this&&this.__generator||function(l,t){var f,D,m,x,d={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return x={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x;function y(p){return function(C){return function I(p){if(f)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(d=0)),d;)try{if(f=1,D&&(m=2&p[0]?D.return:p[0]?D.throw||((m=D.return)&&m.call(D),0):D.next)&&!(m=m.call(D,p[1])).done)return m;switch(D=0,m&&(p=[2&p[0],m.value]),p[0]){case 0:case 1:m=p;break;case 4:return d.label++,{value:p[1],done:!1};case 5:d.label++,D=p[1],p=[0];continue;case 7:p=d.ops.pop(),d.trys.pop();continue;default:if(!(m=(m=d.trys).length>0&&m[m.length-1])&&(6===p[0]||2===p[0])){d=0;continue}if(3===p[0]&&(!m||p[1]>m[0]&&p[1]<m[3])){d.label=p[1];break}if(6===p[0]&&d.label<m[1]){d.label=m[1],m=p;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(p);break}m[2]&&d.ops.pop(),d.trys.pop();continue}p=t.call(l,d)}catch(C){p=[6,C],D=0}finally{f=m=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,C])}}},b=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(v,"__esModule",{value:!0});var _=b(u(1560)),O=function(){function l(){this.pushSubscription=new _.default,this._userStateObserverList=[]}return l.prototype._processFunctionList=function(t,d){for(var f=0;f<t.length;f++)t[f](d)},l.prototype.setLanguage=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","setLanguage",[t])},l.prototype.addAlias=function(t,d){var f,D=((f={})[t]=d,f);window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[D])},l.prototype.addAliases=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","addAliases",[t])},l.prototype.removeAlias=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",[t])},l.prototype.removeAliases=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeAliases",t)},l.prototype.addEmail=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","addEmail",[t])},l.prototype.removeEmail=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeEmail",[t])},l.prototype.addSms=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","addSms",[t])},l.prototype.removeSms=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeSms",[t])},l.prototype.addTag=function(t,d){var f,D=((f={})[t]=d,f);window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[D])},l.prototype.addTags=function(t){var d=t;Object.keys(t).forEach(function(f){"string"!=typeof d[f]&&(d[f]=JSON.stringify(d[f]))}),window.cordova.exec(function(){},function(){},"OneSignalPush","addTags",[d])},l.prototype.removeTag=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",[t])},l.prototype.removeTags=function(t){window.cordova.exec(function(){},function(){},"OneSignalPush","removeTags",t)},l.prototype.getTags=function(){return new Promise(function(t,d){window.cordova.exec(t,d,"OneSignalPush","getTags",[])})},l.prototype.addEventListener=function(t,d){var f=this;this._userStateObserverList.push(d),window.cordova.exec(function(m){f._processFunctionList(f._userStateObserverList,m)},function(){},"OneSignalPush","addUserStateObserver",[])},l.prototype.removeEventListener=function(t,d){var f=this._userStateObserverList.indexOf(d);-1!==f&&this._userStateObserverList.splice(f,1)},l.prototype.getOnesignalId=function(){return g(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(d,f){window.cordova.exec(d,f,"OneSignalPush","getOnesignalId",[])})]})})},l.prototype.getExternalId=function(){return g(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(d,f){window.cordova.exec(d,f,"OneSignalPush","getExternalId",[])})]})})},l}();v.default=O},3952:function(T,v,u){var g=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(v,"__esModule",{value:!0}),v.NotificationWillDisplayEvent=v.OSNotificationPermission=v.OSNotification=v.LogLevel=v.OneSignalPlugin=void 0;var c=g(u(3962)),b=g(u(1492)),_=g(u(8229)),O=g(u(70)),l=g(u(9639)),t=g(u(557)),d=g(u(9430)),f=function(){function p(){this.User=new c.default,this.Debug=new b.default,this.Session=new _.default,this.Location=new O.default,this.InAppMessages=new l.default,this.Notifications=new t.default,this.LiveActivities=new d.default,this._appID=""}return p.prototype.initialize=function(C){var E=this;this._appID=C,window.cordova.exec(function(){E.User.pushSubscription._setPropertiesAndObserver(),E.Notifications._setPropertyAndObserver()},function(){},"OneSignalPush","init",[this._appID])},p.prototype.login=function(C){window.cordova.exec(function(){},function(){},"OneSignalPush","login",[C])},p.prototype.logout=function(){window.cordova.exec(function(){},function(){},"OneSignalPush","logout")},p.prototype.setConsentRequired=function(C){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentRequired",[C])},p.prototype.setConsentGiven=function(C){window.cordova.exec(function(){},function(){},"OneSignalPush","setPrivacyConsentGiven",[C])},p}();v.OneSignalPlugin=f;var D=new f;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=D);var m=u(1492);Object.defineProperty(v,"LogLevel",{enumerable:!0,get:function(){return m.LogLevel}});var x=u(311);Object.defineProperty(v,"OSNotification",{enumerable:!0,get:function(){return x.OSNotification}});var y=u(557);Object.defineProperty(v,"OSNotificationPermission",{enumerable:!0,get:function(){return y.OSNotificationPermission}});var I=u(2252);Object.defineProperty(v,"NotificationWillDisplayEvent",{enumerable:!0,get:function(){return I.NotificationWillDisplayEvent}}),v.default=D}}]);