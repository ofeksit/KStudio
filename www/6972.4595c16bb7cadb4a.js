"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6972],{6972:(Ft,E,d)=>{d.r(E),d.d(E,{HomePageModule:()=>Pt});var v=d(177),F=d(4341),T=d(2054),B=d(8834),R=d(5911),l=d(791),e=d(3953),j=d(8820);let Y=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[j.yE,v.MD,j.yE]}),s})();var S=d(5559),f=d(467),H=d(8132);function V(r,s){1&r&&(e.j41(0,"p",4),e.EFF(1,"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05d4\u05ea\u05e8\u05d0\u05d5\u05ea"),e.k0s())}function X(r,s){if(1&r){const o=e.RV6();e.j41(0,"ion-item-sliding",null,0)(2,"ion-item-options",6)(3,"ion-item-option",7),e.bIt("click",function(){const n=e.eBV(o).index,a=e.sdS(1),i=e.XpG(2);return e.Njj(i.deleteNotification(n,a))}),e.j41(4,"button",8),e.bIt("click",function(){const n=e.eBV(o).index,a=e.sdS(1),i=e.XpG(2);return e.Njj(i.deleteNotification(n,a))}),e.nrm(5,"ion-icon",9),e.k0s()()(),e.j41(6,"ion-item"),e.nrm(7,"ion-icon",10),e.j41(8,"ion-label")(9,"h2",11),e.EFF(10),e.k0s(),e.j41(11,"p",12),e.EFF(12),e.k0s()()()()}if(2&r){const o=s.$implicit;e.R7$(10),e.JRh(o.title),e.R7$(2),e.JRh(o.message)}}function W(r,s){if(1&r&&(e.j41(0,"ion-list"),e.DNE(1,X,13,2,"ion-item-sliding",5),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.notifications)}}let J=(()=>{var r;class s{constructor(t){this.modalCtrl=t,this.notifications=[]}ngOnInit(){this.notifications=JSON.parse(localStorage.getItem("notifications")||"[]")}deleteNotification(t,n){this.notifications.splice(t,1),localStorage.setItem("notifications",JSON.stringify(this.notifications)),n.close()}dismiss(){this.modalCtrl.dismiss()}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(l.W3))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-notification-popup"]],decls:3,vars:2,consts:[["slidingItem",""],[1,"notification-popup-content"],["class","no-notifications",4,"ngIf"],[4,"ngIf"],[1,"no-notifications"],[4,"ngFor","ngForOf"],["side","start"],["color","danger",3,"click"],["ion-button","",1,"trash-icon",3,"click"],["name","trash"],["name","megaphone-outline","slot","start"],[1,"notification-title"],[1,"notification-desc"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",1),e.DNE(1,V,2,0,"p",2)(2,W,2,1,"ion-list",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngIf",!n.notifications||0===n.notifications.length),e.R7$(),e.Y8G("ngIf",n.notifications&&n.notifications.length>0))},dependencies:[v.Sq,v.bT,l.W9,l.iq,l.uz,l.LU,l.CE,l.A7,l.he,l.nf],styles:[".notification-popup-content[_ngcontent-%COMP%]{background-color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;padding:20px;box-shadow:0 -5px 20px #0003}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:50vh;top:auto;bottom:0;border-top-left-radius:20px;border-top-right-radius:20px;transition:height .3s ease-in-out}.no-notifications[_ngcontent-%COMP%]{font-family:Alef;text-align:center;padding-top:150px;color:gray}.notification-title[_ngcontent-%COMP%]{color:#3a3a3a;font-family:Alef;font-size:1.5em}button.trash-icon[_ngcontent-%COMP%]{background:none}.notification-desc[_ngcontent-%COMP%]{color:#000;font-family:Alef;font-size:1em}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .4s ease-out}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}"]}),s})();var Q=d(3632),M=d(7586);class u{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(s,o=!1){return this.onePassHasher.start().appendStr(s).end(o)}static hashAsciiStr(s,o=!1){return this.onePassHasher.start().appendAsciiStr(s).end(o)}static _hex(s){const o=u.hexChars,t=u.hexOut;let n,a,i,c;for(c=0;c<4;c+=1)for(a=8*c,n=s[c],i=0;i<8;i+=2)t[a+1+i]=o.charAt(15&n),n>>>=4,t[a+0+i]=o.charAt(15&n),n>>>=4;return t.join("")}static _md5cycle(s,o){let t=s[0],n=s[1],a=s[2],i=s[3];t+=(n&a|~n&i)+o[0]-680876936|0,t=(t<<7|t>>>25)+n|0,i+=(t&n|~t&a)+o[1]-389564586|0,i=(i<<12|i>>>20)+t|0,a+=(i&t|~i&n)+o[2]+606105819|0,a=(a<<17|a>>>15)+i|0,n+=(a&i|~a&t)+o[3]-1044525330|0,n=(n<<22|n>>>10)+a|0,t+=(n&a|~n&i)+o[4]-176418897|0,t=(t<<7|t>>>25)+n|0,i+=(t&n|~t&a)+o[5]+1200080426|0,i=(i<<12|i>>>20)+t|0,a+=(i&t|~i&n)+o[6]-1473231341|0,a=(a<<17|a>>>15)+i|0,n+=(a&i|~a&t)+o[7]-45705983|0,n=(n<<22|n>>>10)+a|0,t+=(n&a|~n&i)+o[8]+1770035416|0,t=(t<<7|t>>>25)+n|0,i+=(t&n|~t&a)+o[9]-1958414417|0,i=(i<<12|i>>>20)+t|0,a+=(i&t|~i&n)+o[10]-42063|0,a=(a<<17|a>>>15)+i|0,n+=(a&i|~a&t)+o[11]-1990404162|0,n=(n<<22|n>>>10)+a|0,t+=(n&a|~n&i)+o[12]+1804603682|0,t=(t<<7|t>>>25)+n|0,i+=(t&n|~t&a)+o[13]-40341101|0,i=(i<<12|i>>>20)+t|0,a+=(i&t|~i&n)+o[14]-1502002290|0,a=(a<<17|a>>>15)+i|0,n+=(a&i|~a&t)+o[15]+1236535329|0,n=(n<<22|n>>>10)+a|0,t+=(n&i|a&~i)+o[1]-165796510|0,t=(t<<5|t>>>27)+n|0,i+=(t&a|n&~a)+o[6]-1069501632|0,i=(i<<9|i>>>23)+t|0,a+=(i&n|t&~n)+o[11]+643717713|0,a=(a<<14|a>>>18)+i|0,n+=(a&t|i&~t)+o[0]-373897302|0,n=(n<<20|n>>>12)+a|0,t+=(n&i|a&~i)+o[5]-701558691|0,t=(t<<5|t>>>27)+n|0,i+=(t&a|n&~a)+o[10]+38016083|0,i=(i<<9|i>>>23)+t|0,a+=(i&n|t&~n)+o[15]-660478335|0,a=(a<<14|a>>>18)+i|0,n+=(a&t|i&~t)+o[4]-405537848|0,n=(n<<20|n>>>12)+a|0,t+=(n&i|a&~i)+o[9]+568446438|0,t=(t<<5|t>>>27)+n|0,i+=(t&a|n&~a)+o[14]-1019803690|0,i=(i<<9|i>>>23)+t|0,a+=(i&n|t&~n)+o[3]-187363961|0,a=(a<<14|a>>>18)+i|0,n+=(a&t|i&~t)+o[8]+1163531501|0,n=(n<<20|n>>>12)+a|0,t+=(n&i|a&~i)+o[13]-1444681467|0,t=(t<<5|t>>>27)+n|0,i+=(t&a|n&~a)+o[2]-51403784|0,i=(i<<9|i>>>23)+t|0,a+=(i&n|t&~n)+o[7]+1735328473|0,a=(a<<14|a>>>18)+i|0,n+=(a&t|i&~t)+o[12]-1926607734|0,n=(n<<20|n>>>12)+a|0,t+=(n^a^i)+o[5]-378558|0,t=(t<<4|t>>>28)+n|0,i+=(t^n^a)+o[8]-2022574463|0,i=(i<<11|i>>>21)+t|0,a+=(i^t^n)+o[11]+1839030562|0,a=(a<<16|a>>>16)+i|0,n+=(a^i^t)+o[14]-35309556|0,n=(n<<23|n>>>9)+a|0,t+=(n^a^i)+o[1]-1530992060|0,t=(t<<4|t>>>28)+n|0,i+=(t^n^a)+o[4]+1272893353|0,i=(i<<11|i>>>21)+t|0,a+=(i^t^n)+o[7]-155497632|0,a=(a<<16|a>>>16)+i|0,n+=(a^i^t)+o[10]-1094730640|0,n=(n<<23|n>>>9)+a|0,t+=(n^a^i)+o[13]+681279174|0,t=(t<<4|t>>>28)+n|0,i+=(t^n^a)+o[0]-358537222|0,i=(i<<11|i>>>21)+t|0,a+=(i^t^n)+o[3]-722521979|0,a=(a<<16|a>>>16)+i|0,n+=(a^i^t)+o[6]+76029189|0,n=(n<<23|n>>>9)+a|0,t+=(n^a^i)+o[9]-640364487|0,t=(t<<4|t>>>28)+n|0,i+=(t^n^a)+o[12]-421815835|0,i=(i<<11|i>>>21)+t|0,a+=(i^t^n)+o[15]+530742520|0,a=(a<<16|a>>>16)+i|0,n+=(a^i^t)+o[2]-995338651|0,n=(n<<23|n>>>9)+a|0,t+=(a^(n|~i))+o[0]-198630844|0,t=(t<<6|t>>>26)+n|0,i+=(n^(t|~a))+o[7]+1126891415|0,i=(i<<10|i>>>22)+t|0,a+=(t^(i|~n))+o[14]-1416354905|0,a=(a<<15|a>>>17)+i|0,n+=(i^(a|~t))+o[5]-57434055|0,n=(n<<21|n>>>11)+a|0,t+=(a^(n|~i))+o[12]+1700485571|0,t=(t<<6|t>>>26)+n|0,i+=(n^(t|~a))+o[3]-1894986606|0,i=(i<<10|i>>>22)+t|0,a+=(t^(i|~n))+o[10]-1051523|0,a=(a<<15|a>>>17)+i|0,n+=(i^(a|~t))+o[1]-2054922799|0,n=(n<<21|n>>>11)+a|0,t+=(a^(n|~i))+o[8]+1873313359|0,t=(t<<6|t>>>26)+n|0,i+=(n^(t|~a))+o[15]-30611744|0,i=(i<<10|i>>>22)+t|0,a+=(t^(i|~n))+o[6]-1560198380|0,a=(a<<15|a>>>17)+i|0,n+=(i^(a|~t))+o[13]+1309151649|0,n=(n<<21|n>>>11)+a|0,t+=(a^(n|~i))+o[4]-145523070|0,t=(t<<6|t>>>26)+n|0,i+=(n^(t|~a))+o[11]-1120210379|0,i=(i<<10|i>>>22)+t|0,a+=(t^(i|~n))+o[2]+718787259|0,a=(a<<15|a>>>17)+i|0,n+=(i^(a|~t))+o[9]-343485551|0,n=(n<<21|n>>>11)+a|0,s[0]=t+s[0]|0,s[1]=n+s[1]|0,s[2]=a+s[2]|0,s[3]=i+s[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(u.stateIdentity),this}appendStr(s){const o=this._buffer8,t=this._buffer32;let a,i,n=this._bufferLength;for(i=0;i<s.length;i+=1){if(a=s.charCodeAt(i),a<128)o[n++]=a;else if(a<2048)o[n++]=192+(a>>>6),o[n++]=63&a|128;else if(a<55296||a>56319)o[n++]=224+(a>>>12),o[n++]=a>>>6&63|128,o[n++]=63&a|128;else{if(a=1024*(a-55296)+(s.charCodeAt(++i)-56320)+65536,a>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[n++]=240+(a>>>18),o[n++]=a>>>12&63|128,o[n++]=a>>>6&63|128,o[n++]=63&a|128}n>=64&&(this._dataLength+=64,u._md5cycle(this._state,t),n-=64,t[0]=t[16])}return this._bufferLength=n,this}appendAsciiStr(s){const o=this._buffer8,t=this._buffer32;let a,n=this._bufferLength,i=0;for(;;){for(a=Math.min(s.length-i,64-n);a--;)o[n++]=s.charCodeAt(i++);if(n<64)break;this._dataLength+=64,u._md5cycle(this._state,t),n=0}return this._bufferLength=n,this}appendByteArray(s){const o=this._buffer8,t=this._buffer32;let a,n=this._bufferLength,i=0;for(;;){for(a=Math.min(s.length-i,64-n);a--;)o[n++]=s[i++];if(n<64)break;this._dataLength+=64,u._md5cycle(this._state,t),n=0}return this._bufferLength=n,this}getState(){const s=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[s[0],s[1],s[2],s[3]]}}setState(s){const o=s.buffer,t=s.state,n=this._state;let a;for(this._dataLength=s.length,this._bufferLength=s.buflen,n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],a=0;a<o.length;a+=1)this._buffer8[a]=o.charCodeAt(a)}end(s=!1){const o=this._bufferLength,t=this._buffer8,n=this._buffer32,a=1+(o>>2);this._dataLength+=o;const i=8*this._dataLength;if(t[o]=128,t[o+1]=t[o+2]=t[o+3]=0,n.set(u.buffer32Identity.subarray(a),a),o>55&&(u._md5cycle(this._state,n),n.set(u.buffer32Identity)),i<=4294967295)n[14]=i;else{const c=i.toString(16).match(/(.*?)(.{0,8})$/);if(null===c)return;const p=parseInt(c[2],16),m=parseInt(c[1],16)||0;n[14]=p,n[15]=m}return u._md5cycle(this._state,n),s?this._state:u._hex(this._state)}}if(u.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),u.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),u.hexChars="0123456789abcdef",u.hexOut=[],u.onePassHasher=new u,"5d41402abc4b2a76b9719d911017c592"!==u.hashStr("hello"))throw new Error("Md5 self test failed.");var D=d(1626),K=d(1985),k=d(6354),I=d(9437),A=d(7673),Z=d(5312),q=d(3656),tt=d(3931),O=d(4796);let et=(()=>{var r;class s{constructor(t,n,a,i){this.platform=t,this.httpA=n,this.http=a,this.authService=i,this.headers=new D.Lr({"Content-Type":"application/json",Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"})}getLast60DaysAppointmentsForUser(){const t=new Date,n=this.formatDate(new Date(t.setDate(t.getDate()+30))),a=this.formatDate(new Date(t.setDate(t.getDate()-60))),i=`${Z.c.apiBaseUrl}/appointments&dates=${a},${n}&skipServices=1&skipProviders=1`,c=this.authService.getUserEmail(),p={Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"};return new K.c(m=>{this.platform.ready().then(()=>{this.platform.is("cordova")?this.httpA.get(i,{},p).then(g=>{var h;const _=(null===(h=JSON.parse(g.data).data)||void 0===h?void 0:h.appointments)||{};let P=[];for(const C in _)_.hasOwnProperty(C)&&Array.isArray(_[C].appointments)&&_[C].appointments.forEach(b=>{b.bookings&&Array.isArray(b.bookings)&&b.bookings.forEach(x=>{var w;if((null===(w=x.customer)||void 0===w?void 0:w.email)===c){x.googleCalendarEventId=b.googleCalendarEventId;const wt={...b,matchedBooking:x,userBookingStatus:x.status};P.push(wt)}})});m.next(P),m.complete()}).catch(g=>{m.error(`Error fetching appointments: ${g}`)}):this.http.get(i,{headers:this.headers}).subscribe(g=>{var h;const y=(null===(h=g.data)||void 0===h?void 0:h.appointments)||{};let _=[];for(const P in y)y.hasOwnProperty(P)&&Array.isArray(y[P].appointments)&&y[P].appointments.forEach(C=>{C.bookings&&Array.isArray(C.bookings)&&C.bookings.forEach(b=>{var x;if((null===(x=b.customer)||void 0===x?void 0:x.email)===c){b.googleCalendarEventId=C.googleCalendarEventId;const w={...C,matchedBooking:b,userBookingStatus:b.status};_.push(w)}})});m.next(_),m.complete()},g=>{m.error(`Error fetching appointments: ${g}`)})})})}fetchAvailablePackageSlots(t){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${t}`,{}).pipe((0,k.T)(a=>{if(a&&a.data&&a.data.length>0){const i=a.data[0].packages;if(i&&i.length>0){const c=i[0].purchases;if(c&&c.length>0){const p=c[0].purchase[0].available,g=new Date(c[0].purchased);return g.setDate(g.getDate()+30),{availableSlots:p,expiryDate:`${g.getDate().toString().padStart(2,"0")}/${(g.getMonth()+1).toString().padStart(2,"0")}/${g.getFullYear()}`}}}}return{availableSlots:0,expiryDate:""}}),(0,I.W)(a=>(console.error("API Error:",a),(0,A.of)({availableSlots:0,expiryDate:""}))))}getUserPackageCustomerID(){const n=`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${this.authService.getPackageCustomerId()}`;return this.http.get(n,{}).pipe((0,k.T)(a=>{console.log("Package response received:",a),a&&a.data&&a.data[0]&&a.data[0].packages[0]&&a.data[0].packages[0].purchases[0]&&a.data[0].packages[0].purchases[0].packageCustomerId&&this.authService.storePackageCustomerID(a.data[0].packages[0].purchases[0].packageCustomerId)}),(0,I.W)(a=>(console.error("API Error:",a),(0,A.of)({availableSlots:0,expiryDate:""}))))}fetchUserPurchases(t){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/user-purchases/${t}`,{}).pipe((0,k.T)(a=>(a.forEach(i=>{i.invoice_link||(i.invoice_link="")}),a||[])),(0,I.W)(a=>(console.error("Error fetching user purchases:",a),(0,A.of)([]))))}cancelBooking(t){return this.http.post(`https://k-studio.co.il/wp-json/wn/v1/cancel-booking/${t}`,{})}formatDate(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}}return(r=s).\u0275fac=function(t){return new(t||r)(e.KVO(q.OD),e.KVO(tt.B),e.KVO(D.Qq),e.KVO(O.u))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),s})();var nt=d(4938);const at=["popup"],ot=()=>[1,2,3,4];function it(r,s){if(1&r&&(e.j41(0,"div",13)(1,"ion-chip"),e.nrm(2,"ion-icon",14),e.j41(3,"ion-label"),e.EFF(4),e.k0s()(),e.j41(5,"ion-chip"),e.nrm(6,"ion-icon",15),e.j41(7,"ion-label"),e.EFF(8),e.k0s()()()),2&r){const o=e.XpG();e.R7$(4),e.SpI("",o.slotsLeft," \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e0\u05d5\u05ea\u05e8\u05d5"),e.R7$(4),e.SpI("\u05ea\u05d5\u05e7\u05e3: ",o.nextRenewalDate,"")}}function rt(r,s){1&r&&(e.j41(0,"ion-item",18)(1,"ion-thumbnail",19),e.nrm(2,"ion-skeleton-text",20),e.k0s(),e.j41(3,"ion-label")(4,"h3"),e.nrm(5,"ion-skeleton-text",21),e.k0s(),e.j41(6,"p"),e.nrm(7,"ion-skeleton-text",22),e.k0s(),e.j41(8,"p"),e.nrm(9,"ion-skeleton-text",23),e.k0s()()()),2&r&&(e.R7$(2),e.Y8G("animated",!0),e.R7$(3),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0))}function st(r,s){1&r&&(e.j41(0,"ion-list")(1,"ion-list-header"),e.nrm(2,"ion-skeleton-text",16),e.k0s(),e.DNE(3,rt,10,4,"ion-item",17),e.k0s()),2&r&&(e.R7$(2),e.Y8G("animated",!0),e.R7$(),e.Y8G("ngForOf",e.lJ4(2,ot)))}function ct(r,s){if(1&r){const o=e.RV6();e.j41(0,"div",27)(1,"ion-button",28),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.toggleFilterDropdown())}),e.nrm(2,"ion-icon",29),e.EFF(3," \u05e1\u05d9\u05e0\u05d5\u05df "),e.k0s()()}}function lt(r,s){if(1&r){const o=e.RV6();e.j41(0,"ion-list",30)(1,"ion-item")(2,"ion-label",31),e.EFF(3,"\u05d4\u05e6\u05d2"),e.k0s(),e.j41(4,"ion-segment",32),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG(2);return e.DH7(a.availabilityFilter,n)||(a.availabilityFilter=n),e.Njj(n)}),e.bIt("ionChange",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.onFilterChange())}),e.j41(5,"ion-segment-button",33)(6,"ion-label",34),e.EFF(7,"\u05d4\u05db\u05dc"),e.k0s()(),e.j41(8,"ion-segment-button",35)(9,"ion-label",34),e.nrm(10,"ion-icon",36),e.k0s()(),e.j41(11,"ion-segment-button",37)(12,"ion-label",34),e.nrm(13,"ion-icon",38),e.k0s()()()()()}if(2&r){const o=e.XpG(2);e.R7$(4),e.R50("ngModel",o.availabilityFilter)}}function dt(r,s){1&r&&e.nrm(0,"ion-icon",44)}function ut(r,s){if(1&r){const o=e.RV6();e.j41(0,"ion-card",39),e.bIt("click",function(){const n=e.eBV(o).$implicit,a=e.XpG(2);return e.Njj("approved"===n.userBookingStatus?a.showActions(n):null)}),e.j41(1,"ion-card-header")(2,"div",40),e.nrm(3,"ion-icon",41),e.DNE(4,dt,1,0,"ion-icon",42),e.k0s(),e.j41(5,"ion-label",43)(6,"h2"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.nI1(10,"date"),e.nI1(11,"date"),e.k0s()()()()}if(2&r){const o=s.$implicit,t=e.XpG(2);e.R7$(3),e.Y8G("name",t.getStatusIcon(o.userBookingStatus))("color",t.getStatusColor(o.userBookingStatus)),e.R7$(),e.Y8G("ngIf","approved"==o.userBookingStatus),e.R7$(3),e.JRh(o.title),e.R7$(2),e.Lme("",e.i5U(10,6,o.bookingStart,"dd/MM/yyyy")," | ",e.i5U(11,9,o.bookingStart,"HH:mm")," ")}}function pt(r,s){if(1&r&&(e.j41(0,"div"),e.DNE(1,ct,4,0,"div",24)(2,lt,14,1,"ion-list",25),e.j41(3,"ion-list"),e.DNE(4,ut,12,12,"ion-card",26),e.k0s()()),2&r){const o=e.XpG();e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("ngIf",o.showDropdown),e.R7$(2),e.Y8G("ngForOf",o.filteredAppointments)}}function mt(r,s){if(1&r){const o=e.RV6();e.j41(0,"ion-card",39),e.bIt("click",function(){const n=e.eBV(o).$implicit,a=e.XpG(2);return e.Njj(a.downloadInvoice(n))}),e.j41(1,"ion-card-header")(2,"div",40),e.nrm(3,"ion-icon",41)(4,"ion-icon",44),e.k0s(),e.j41(5,"ion-label",43)(6,"h2"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()()}if(2&r){const o=s.$implicit,t=e.XpG(2);e.R7$(3),e.Y8G("name",t.getStatusIcon(o.status))("color",t.getStatusColor(o.status)),e.R7$(4),e.SpI("\u05d4\u05d6\u05de\u05e0\u05d4 \u05de\u05e1' ",o.orderNumber,""),e.R7$(2),e.JRh(o.products[0].name)}}function gt(r,s){if(1&r&&(e.j41(0,"div")(1,"ion-list"),e.DNE(2,mt,10,4,"ion-card",26),e.k0s()()),2&r){const o=e.XpG();e.R7$(2),e.Y8G("ngForOf",o.userPurchases)}}let ft=(()=>{var r;class s{constructor(t,n,a,i,c,p,m){this.gestureCtrl=t,this.modalCtrl=n,this.actionSheetCtrl=a,this.profileService=i,this.authService=c,this.toastController=p,this.ameliaService=m,this.userRole="",this.userPhoto="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",this.userEmail="",this.userID="",this.customerID="",this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.selectedTab="trainings",this.isLoading=!0,this.errorMessage="",this.availabilityFilter="",this.showDropdown=!1,this.selectedType="",this.userAppointments=[],this.filteredAppointments=[],this.unfilteredAppointments=[],this.userPurchases=[],this.gravatarUrl="",this.userName=this.authService.getUserFullName(),this.userRole=this.translateUserRole(this.authService.getUserRole()),this.customerID=this.authService.getCustomerID(),this.userID=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.setGravatarUrl()}setGravatarUrl(){if(this.userEmail){const t=u.hashStr(this.userEmail.trim().toLowerCase());console.log("hash:",t),this.gravatarUrl=`https://www.gravatar.com/avatar/${t}?d=identicon`}}formatDate(t){return t.replace(/\//g,".")}ngOnInit(){var t=this;return(0,f.A)(function*(){t.profileService.fetchAvailablePackageSlots(t.customerID).subscribe(({availableSlots:a,expiryDate:i})=>{t.slotsLeft=a,t.nextRenewalDate=t.formatDate(i)},a=>{console.error("Error fetching available slots and expiry date:",a),t.slotsLeft=0,t.nextRenewalDate=""}),t.trainingsByDay=t.ameliaService.getTrainingsTitles(),t.profileService.getUserPackageCustomerID(),(!t.trainingsByDay||Object.keys(t.trainingsByDay).every(a=>0===t.trainingsByDay[a].length))&&(yield t.ameliaService.fetchTitleTrainings(),t.trainingsByDay=t.ameliaService.getTrainingsTitles());const n=localStorage.getItem("userFilterChoice");n&&(t.availabilityFilter=n),t.authService.fetchUserRole().subscribe(a=>{t.authService.storeUserRole(a.roles[0]),t.userRole=t.translateUserRole(a.roles[0])}),t.loadUserAppointmentsLast60Days(),t.updateFilteredAppointments()})()}presentToast(t,n){var a=this;return(0,f.A)(function*(){yield(yield a.toastController.create({message:t,duration:3e3,color:n,position:"bottom"})).present()})()}loadUserAppointmentsLast60Days(){var t=this;this.isLoading=!0,this.profileService.getLast60DaysAppointmentsForUser().subscribe(function(){var n=(0,f.A)(function*(a){const i=[];for(const c of a){const m=c.userBookingStatus;if(c.matchedBooking){console.log("booking start",c.bookingStart),c.userBookingStatus=m;const g=M(c.bookingStart).format("YYYY-MM-DD"),h=M(c.bookingStart).format("HH:mm"),y=t.getAppointmentTitleByDateTime(g,h).then(_=>{c.title=_||"\u05db\u05dc\u05dc\u05d9"}).catch(_=>{console.error("Error fetching appointment title:",_),c.title="\u05db\u05dc\u05dc\u05d9"});i.push(y)}}yield Promise.all(i),t.userAppointments=a.sort((c,p)=>M(p.bookingStart).diff(M(c.bookingStart))),t.filteredAppointments=[...t.userAppointments],t.updateFilteredAppointments(),t.isLoading=!1});return function(a){return n.apply(this,arguments)}}(),n=>{this.isLoading=!1,console.error("Error loading appointments:",n)})}getDayFromDate(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][M(t,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(t,n){var a=this;return(0,f.A)(function*(){const i=M(t,"YYYY-MM-DD").format("DD/MM/YYYY"),c=a.getDayFromDate(i);if(a.trainingsByDay[c]){const p=a.trainingsByDay[c].find(m=>m.time===n);if(p)return p.title}return"\u05db\u05dc\u05dc\u05d9"})()}translateUserRole(t){return"author"===t?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea":"administrator"===t?"\u05de\u05e0\u05d4\u05dc":"activesubscription"===t?"\u05de\u05e0\u05d5\u05d9 \u05e4\u05e2\u05d9\u05dc":"trainer"===t?"\u05de\u05d0\u05de\u05df":"team"===t?"\u05e6\u05d5\u05d5\u05ea":"trial-users"===t?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea \u05e0\u05d9\u05e1\u05d9\u05d5\u05df":"inactive"===t?"\u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc\u05d4":"personal"===t?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea \u05d0\u05d9\u05e9\u05d9\u05ea":""}checksUserPackage(){}ngAfterViewInit(){this.gestureCtrl.create({el:this.popup.nativeElement,gestureName:"swipe-to-close",onMove:n=>{n.deltaY>100&&this.modalCtrl.dismiss()}}).enable(!0)}closePopup(){this.modalCtrl.dismiss()}showActions(t){var n=this;return(0,f.A)(function*(){yield(yield n.actionSheetCtrl.create({header:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea",buttons:[{text:"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d0\u05d9\u05de\u05d5\u05df",role:"destructive",icon:"close-circle-outline",handler:()=>{n.cancelBooking(t.matchedBooking.id)}},{text:"\u05e1\u05d2\u05d5\u05e8",icon:"close",role:"cancel"}]})).present()})()}downloadInvoice(t){t.invoice_link?window.open(t.invoice_link,"_blank"):(console.error("No invoice link available for this order."),this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e4\u05d9\u05e7 \u05d7\u05e9\u05d1\u05d5\u05e0\u05d9\u05ea \u05d1\u05e2\u05d1\u05d5\u05e8 \u05d4\u05d6\u05de\u05e0\u05d4 \u05d6\u05d5.",this.presentToast(this.errorMessage,"danger"))}getStatusIcon(t){switch(t){case"approved":case"completed":return"checkmark-circle-outline";case"canceled":case"cancelled":return"close-circle-outline";case"pending":return"time-outline";case"refunded":return"cash-outline";default:return"alert-circle-outline"}}getStatusColor(t){switch(t){case"approved":case"completed":return"success";case"canceled":case"cancelled":return"danger";case"pending":case"refunded":return"warning";default:return"medium"}}translateStatus(t){switch(t){case"approved":return"\u05de\u05d0\u05d5\u05e9\u05e8";case"cancelled":return"\u05d1\u05d5\u05d8\u05dc";case"pending":return"\u05de\u05de\u05ea\u05d9\u05df";default:return"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2"}}cancelBooking(t){this.profileService.cancelBooking(t).subscribe(n=>{n.data.cancelBookingUnavailable?(this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4",this.presentToast(this.errorMessage,"danger")):(this.errorMessage="\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4",this.presentToast(this.errorMessage,"success"),console.log("data in cancelling",n))},n=>{this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea",this.presentToast(this.errorMessage,"danger"),console.error("Error occurred while canceling the booking",n)})}showSettings(){var t=this;return(0,f.A)(function*(){yield(yield t.actionSheetCtrl.create({header:"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea",buttons:[{text:"\u05d4\u05ea\u05e0\u05ea\u05e7",role:"destructive",icon:"log-out-outline",handler:()=>{t.authService.logout(),t.modalCtrl.dismiss(),window.location.reload(),console.log("Logged out")}},{text:"\u05e1\u05d2\u05d5\u05e8",icon:"close",role:"cancel"}]})).present()})()}loadUserPurchases(){this.profileService.fetchUserPurchases(this.userID).subscribe(t=>{console.log("purchases",t),this.userPurchases=t})}onTabChange(t){this.selectedTab=t.detail.value,"purchases"==this.selectedTab&&this.loadUserPurchases()}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}onFilterChange(){this.updateFilteredAppointments(),localStorage.setItem("userFilterChoice",this.availabilityFilter)}updateFilteredAppointments(){let t=[...this.userAppointments];"approved"===this.availabilityFilter?t=t.filter(n=>"approved"===n.userBookingStatus):"cancelled"===this.availabilityFilter&&(t=t.filter(n=>"canceled"===n.userBookingStatus)),this.filteredAppointments=t}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(l.wH),e.rXU(l.W3),e.rXU(l.GD),e.rXU(et),e.rXU(O.u),e.rXU(l.K_),e.rXU(nt.J))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-profile-popup"]],viewQuery:function(t,n){if(1&t&&e.GBs(at,5),2&t){let a;e.mGM(a=e.lsd())&&(n.popup=a.first)}},decls:21,vars:7,consts:[["popup",""],[1,"popup-modal"],[1,"drag-handle"],[1,"profile-section"],["alt","User Avatar",1,"avatar",3,"src"],["name","settings-outline",1,"settings-icon",3,"click"],["class","subscriptionDetails",4,"ngIf"],[1,"inside-container"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","trainings",1,"header-tab"],["value","purchases",1,"header-tab"],[4,"ngIf"],[1,"subscriptionDetails"],["name","barbell-outline","color","medium"],["name","calendar-outline","color","medium"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["class","filter-header",4,"ngIf"],["class","filter-dropdown",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],[1,"filter-dropdown"],[2,"text-indent","8px"],[3,"ngModelChange","ionChange","ngModel"],["value","all",1,"sub-label-segment"],[1,"sub-label"],["value","approved",1,"sub-label-segment"],["name","checkmark-circle-outline","slot","start","color","success"],["value","cancelled",1,"sub-label-segment"],["name","close-circle-outline","slot","start","color","danger"],[3,"click"],[1,"icon-container"],[1,"status-icon",3,"name","color"],["name","chevron-forward-outline","class","arrow-icon",4,"ngIf"],[1,"training-details"],["name","chevron-forward-outline",1,"arrow-icon"]],template:function(t,n){if(1&t){const a=e.RV6();e.j41(0,"ion-content",1,0),e.nrm(2,"div",2),e.j41(3,"div",3),e.nrm(4,"img",4),e.j41(5,"h2"),e.EFF(6),e.k0s(),e.j41(7,"ion-icon",5),e.bIt("click",function(){return e.eBV(a),e.Njj(n.showSettings())}),e.k0s(),e.DNE(8,it,9,2,"div",6),e.k0s(),e.j41(9,"div",7)(10,"div",8)(11,"ion-segment",9),e.mxI("ngModelChange",function(c){return e.eBV(a),e.DH7(n.selectedTab,c)||(n.selectedTab=c),e.Njj(c)}),e.bIt("ionChange",function(c){return e.eBV(a),e.Njj(n.onTabChange(c))}),e.j41(12,"ion-segment-button",10)(13,"ion-label"),e.EFF(14,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),e.k0s()(),e.j41(15,"ion-segment-button",11)(16,"ion-label"),e.EFF(17,"\u05e8\u05db\u05d9\u05e9\u05d5\u05ea"),e.k0s()()()(),e.DNE(18,st,4,3,"ion-list",12)(19,pt,5,3,"div",12)(20,gt,3,1,"div",12),e.k0s()()}2&t&&(e.R7$(4),e.Y8G("src",n.gravatarUrl,e.B4B),e.R7$(2),e.JRh(n.userName),e.R7$(2),e.Y8G("ngIf",n.nextRenewalDate),e.R7$(3),e.R50("ngModel",n.selectedTab),e.R7$(7),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf","trainings"===n.selectedTab),e.R7$(),e.Y8G("ngIf","purchases"===n.selectedTab))},dependencies:[v.Sq,v.bT,F.BC,F.vS,l.Jm,l.b_,l.ME,l.ZB,l.W9,l.iq,l.uz,l.he,l.nf,l.AF,l.Gp,l.eP,l.ds,l.Zx,l.Je,v.vh],styles:['.popup-modal[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background-color:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a}.drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.profile-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.packageInfo[_ngcontent-%COMP%]{font-family:Alef;text-align:center;font-weight:700}.header-tab[_ngcontent-%COMP%]{justify-content:center;align-items:center;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}.sub-label-segment[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;justify-content:center;text-align:center;gap:4px}.sub-label-segment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em;vertical-align:middle}.ion-segment-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.settings-icon[_ngcontent-%COMP%]{font-size:24px;position:absolute;top:5%;right:15px;color:#888;cursor:pointer;opacity:.7}.avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;margin-bottom:20px}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#333;text-align:right;line-height:10px}p[_ngcontent-%COMP%]{font-size:1em;color:#666;text-align:right}ion-card[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:15px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:row;align-items:center}ion-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;padding-left:35%;width:100%}.training-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:0 auto}.training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-top:15px}.training-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin:0}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-self:center;position:absolute;left:10px;top:35%}.status-icon[_ngcontent-%COMP%]{font-size:24px;color:red;margin-left:10px}.arrow-icon[_ngcontent-%COMP%]{font-size:24px;color:#888}ion-segment-button.ion-activated[_ngcontent-%COMP%]{--background: #3498db;--color: red;box-shadow:0 4px 12px #007bff4d}.ios[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{font-size:1.1em}.subscriptionDetails[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;flex-direction:column}.filter-segment[_ngcontent-%COMP%]{color:red}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto 10px}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.filter-dropdown[_ngcontent-%COMP%]{margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}.sub-label[_ngcontent-%COMP%]{color:#2c2c2c;font-weight:400!important;font-size:18px}']}),s})();var ht=d(345);let _t=(()=>{var r;class s{constructor(t,n,a){this.http=t,this.sanitizer=n,this.router=a,this.sanitizedWordPressUrl=null}ngOnInit(){this.loadWordPressPage(),window.addEventListener("message",this.handlePostMessage.bind(this))}loadWordPressPage(){this.sanitizedWordPressUrl=this.sanitizer.bypassSecurityTrustResourceUrl("https://k-studio.co.il/purchases-angular/")}handlePostMessage(t){t.data&&t.data.productId&&t.data.checkoutUrl&&this.purchaseProduct(t.data.productId,t.data.checkoutUrl)}purchaseProduct(t,n){const a=localStorage.getItem("auth_token");if(!a)return void alert("User is not logged in.");const c=new D.Lr({"Content-Type":"application/json",Authorization:`Bearer ${a}`});this.http.post("https://k-studio.co.il/wp-json/jwt-auth/v1/token/validate",{},{headers:c}).subscribe(p=>{console.log("User authenticated successfully:",p),window.location.href=`${n}?jwt_token=${a}`},p=>{console.error("Error authenticating user:",p),alert("Authentication failed. Please log in again.")})}loginAndRedirectToCart(){const t=localStorage.getItem("auth_token");if(!t)return void console.error("No auth token found");const n=new D.Lr({Authorization:`Bearer ${t}`});this.http.post("https://k-studio.co.il/wp-json/jwt-auth/v1/token/validate",{},{headers:n}).subscribe(a=>{a.success?window.location.href="https://k-studio.co.il/?add-to-cart=9735":console.error("Authentication failed")},a=>{console.error("Error during login",a)})}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(D.Qq),e.rXU(ht.up),e.rXU(S.Ix))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-purchase"]],decls:4,vars:1,consts:[[3,"click"],["width","100%","height","100%","frameborder","0",3,"src"]],template:function(t,n){1&t&&(e.j41(0,"ion-content")(1,"button",0),e.bIt("click",function(){return n.loginAndRedirectToCart()}),e.EFF(2,"Add to Cart"),e.k0s(),e.nrm(3,"iframe",1),e.k0s()),2&t&&(e.R7$(3),e.Y8G("src",n.sanitizedWordPressUrl,e.f$h))},dependencies:[l.W9]}),s})();var bt=d(5058);let vt=(()=>{var r;class s{constructor(t){this.http=t,this.apiURL="https://k-studio.co.il/wp-json/wn/v1/blocks"}getBlocks(){return this.http.get(this.apiURL)}}return(r=s).\u0275fac=function(t){return new(t||r)(e.KVO(D.Qq))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),s})();const Ct=["mainContent"];function xt(r,s){1&r&&(e.j41(0,"div"),e.nrm(1,"ion-skeleton-text",21)(2,"ion-skeleton-text",21)(3,"ion-skeleton-text",21),e.k0s())}function yt(r,s){if(1&r&&(e.j41(0,"div",22),e.nrm(1,"img",23),e.j41(2,"ion-card-header",24)(3,"ion-card-title",25),e.EFF(4),e.k0s()(),e.j41(5,"ion-card-content",26),e.EFF(6),e.k0s()()),2&r){const o=s.$implicit;e.R7$(),e.Y8G("src",o.image,e.B4B),e.R7$(3),e.JRh(o.title),e.R7$(2),e.SpI(" ",o.description," ")}}(0,bt.kz)();const Mt=[{path:"",component:(()=>{var r;class s{constructor(t,n,a,i,c){this.blocksService=t,this.modalCtrl=n,this.modalCtrl1=a,this.modalCtrl2=i,this.authService=c,this.userName="Ruth Black",this.userMembershipType="Premium Member",this.upcomingLessons=[],this.fitnessTips=[],this.isLoading=!0}ngOnInit(){setTimeout(()=>{new H.S(".swiper-container",{slidesPerView:"auto",spaceBetween:10,centeredSlides:!1,loop:!0,freeMode:!1,pagination:{el:".swiper-pagination",clickable:!0}})},0),this.blocksService.getBlocks().subscribe(t=>{this.fitnessTips=t,this.isLoading=!1},t=>{console.error("Error fetching blocks",t),this.isLoading=!1})}openNotifications(){var t=this;return(0,f.A)(function*(){const n=yield t.modalCtrl1.create({component:J,cssClass:"notification-popup",presentingElement:yield t.modalCtrl1.getTop(),breakpoints:[0,.5,1],initialBreakpoint:.5});return yield n.present(),t.setDisableScroll(!0),n.onDidDismiss().then(()=>{t.setDisableScroll(!1)}),yield n.present()})()}openWhatsApp(){window.open("https://wa.me/+972547937089","_blank")}openTrainings(){var t=this;return(0,f.A)(function*(){const n=yield t.modalCtrl.create({component:Q.T,cssClass:"trainings-popup",presentingElement:yield t.modalCtrl.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85});return yield n.present(),t.setDisableScroll(!0),n.onDidDismiss().then(()=>{t.setDisableScroll(!1)}),yield n.present()})()}setDisableScroll(t){var n=this;return(0,f.A)(function*(){(yield n.mainContent.getScrollElement()).style.overflowY=t?"hidden":"scroll"})()}openProfile(){var t=this;return(0,f.A)(function*(){if(t.authService.isLoggedIn()){const n=yield t.modalCtrl2.create({component:ft,cssClass:"profile-popup",presentingElement:yield t.modalCtrl2.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85});yield n.present(),t.setDisableScroll(!0),n.onDidDismiss().then(()=>{t.setDisableScroll(!1)})}else console.log("User Not Logged In!")})()}openPurchase(){var t=this;return(0,f.A)(function*(){if(t.authService.isLoggedIn())return yield(yield t.modalCtrl2.create({component:_t,cssClass:"app-purchase",presentingElement:yield t.modalCtrl2.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85})).present();console.log("User Not Logged In!")})()}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(vt),e.rXU(l.W3),e.rXU(l.W3),e.rXU(l.W3),e.rXU(O.u))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-home"]],viewQuery:function(t,n){if(1&t&&e.GBs(Ct,5),2&t){let a;e.mGM(a=e.lsd())&&(n.mainContent=a.first)}},decls:34,vars:2,consts:[["mainContent",""],[1,"ion-padding"],[1,"header-row"],["fill","clear",1,"bell-icon",3,"click"],["slot","icon-only","name","notifications-outline"],["color","dark"],[1,"page-title","home"],["fill","clear",1,"whatsapp-icon",3,"click"],["slot","icon-only","name","logo-whatsapp"],[1,"news-card"],[4,"ngIf"],[1,"swiper-container"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"custom-nav-bar"],[1,"nav-item"],["name","home-outline"],[1,"nav-item",3,"click"],["name","barbell-outline"],["name","person-outline"],["animated","",2,"width","100%","height","150px"],[1,"swiper-slide"],["alt","tip image",1,"fitness-card-img",3,"src"],[1,"fitness-card-header"],[1,"fitness-card-title"],[1,"fitness-card-content"]],template:function(t,n){if(1&t){const a=e.RV6();e.j41(0,"ion-content",1,0)(2,"div",2)(3,"ion-button",3),e.bIt("click",function(){return e.eBV(a),e.Njj(n.openNotifications())}),e.nrm(4,"ion-icon",4),e.k0s(),e.j41(5,"ion-text",5)(6,"h1",6),e.EFF(7,"K Studio"),e.k0s()(),e.j41(8,"ion-button",7),e.bIt("click",function(){return e.eBV(a),e.Njj(n.openWhatsApp())}),e.nrm(9,"ion-icon",8),e.k0s()(),e.j41(10,"ion-card",9)(11,"ion-card-header")(12,"ion-card-title"),e.EFF(13,"\u05de\u05d4 \u05d7\u05d3\u05e9?"),e.k0s()(),e.j41(14,"ion-card-content"),e.EFF(15," \u05db\u05d0\u05df \u05ea\u05d5\u05db\u05dc\u05d9 \u05dc\u05de\u05e6\u05d5\u05d0 \u05d8\u05d9\u05e4\u05d9\u05dd \u05d5\u05e0\u05d5\u05e9\u05d0\u05d9\u05dd \u05d7\u05d3\u05e9\u05d9\u05dd \u05de\u05d0\u05d9\u05ea\u05e0\u05d5 \u05d0\u05dc\u05d9\u05d9\u05da. "),e.k0s()(),e.DNE(16,xt,4,0,"div",10),e.j41(17,"div",11)(18,"div",12),e.DNE(19,yt,7,3,"div",13),e.k0s(),e.nrm(20,"div",14),e.k0s()(),e.j41(21,"div",15)(22,"div",16),e.nrm(23,"ion-icon",17),e.j41(24,"ion-label"),e.EFF(25,"\u05d1\u05d9\u05ea"),e.k0s()(),e.j41(26,"div",18),e.bIt("click",function(){return e.eBV(a),e.Njj(n.openTrainings())}),e.nrm(27,"ion-icon",19),e.j41(28,"ion-label"),e.EFF(29,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),e.k0s()(),e.j41(30,"div",18),e.bIt("click",function(){return e.eBV(a),e.Njj(n.openProfile())}),e.nrm(31,"ion-icon",20),e.j41(32,"ion-label"),e.EFF(33,"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"),e.k0s()()()}2&t&&(e.R7$(16),e.Y8G("ngIf",n.isLoading),e.R7$(3),e.Y8G("ngForOf",n.fitnessTips))},dependencies:[v.Sq,v.bT,l.Jm,l.b_,l.I9,l.ME,l.tN,l.W9,l.iq,l.he,l.ds,l.IO],styles:[".swiper-container[_ngcontent-%COMP%]{width:100%;height:auto;margin-bottom:70px}.swiper-wrapper[_ngcontent-%COMP%]{display:flex;width:200vh}.swiper-slide[_ngcontent-%COMP%]{width:900px;max-width:900px;height:10%;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:20px;margin-right:10px}.fitness-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:15px;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.fitness-card-img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;border-radius:15px 15px 0 0;object-position:top}.fitness-card-header[_ngcontent-%COMP%]{height:60px;padding:15px;text-align:center;display:flex;align-items:center;justify-content:center}.fitness-card-title[_ngcontent-%COMP%]{font-size:1.4em;color:#333;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fitness-card-content[_ngcontent-%COMP%]{-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;padding:15px;height:auto;font-size:1em;line-height:1.5;color:#5d5d5d;font-weight:400}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-bottom:20px;text-align:right;font-family:Alef}ion-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ff6b6b);--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, rgb(200 200 200 / 80%), rgba(255, 255, 255, .6));display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:20px}.page-title[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin:0;flex-grow:1;text-align:center;padding-top:10px}.home[_ngcontent-%COMP%]{font-family:Teko;font-size:36px}.news-card[_ngcontent-%COMP%]{border-radius:20px;background:linear-gradient(135deg,#c38a49,#ccb08a);color:#fff}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:10px 15px;position:relative}ion-button[_ngcontent-%COMP%]   .whatsapp-icon[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #6ee39a, #128C7E);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[_ngcontent-%COMP%]   .bell-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ffa1a1);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[color=secondary][_ngcontent-%COMP%]{--background: #54a0ff}ion-header[_ngcontent-%COMP%]{--background: #2e86de;--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center}ion-icon[_ngcontent-%COMP%]{font-size:24px}.bell-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#feca57,#ffa1a1);border-radius:10px;box-shadow:0 4px 12px #0000001a}.whatsapp-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#6ee39a,#128c7e);border-radius:10px;box-shadow:0 4px 12px #0000001a}.app-logo[_ngcontent-%COMP%]{height:35px;width:auto;margin:0 auto}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-top:20px;margin-bottom:20px;text-align:right}ion-card[_ngcontent-%COMP%]{background:#fffc;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin:20px 0}.custom-nav-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:60px;background-color:#fff;border-top:1px solid #e0e0e0;display:flex;justify-content:space-around;align-items:center;box-shadow:0 -2px 10px #0000001a;z-index:1000}.ios[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{margin-top:5%}.ios[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{margin-bottom:20%}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;color:#666;font-size:12px}.nav-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;--color: #666}.nav-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.nav-item-active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .nav-item-active[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:hover   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:active   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:active   ion-label[_ngcontent-%COMP%]{color:#2980b9}"]}),s})()}];let Dt=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[S.iI.forChild(Mt),S.iI]}),s})(),Pt=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[v.MD,F.YN,l.bv,Dt,T.Fg,B.Hl,R.s5,Y]}),s})()}}]);