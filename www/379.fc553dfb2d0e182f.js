"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[379],{6003:(j,k,g)=>{g.d(k,{_:()=>m});var l=g(467),P=g(4412),_=g(1626),n=g(4843),c=g(3953),h=g(4796);let m=(()=>{var f;class b{constructor(u,C){this.http=u,this.authService=C,this.badgeCount=new P.t(0),this.badgeCount$=this.badgeCount.asObservable()}fetchAndSetBadgeCount(){var u=this;return(0,l.A)(function*(){let M=new _.Nl;const E=u.authService.getUserRole(),x=u.authService.getUserEmail();"team"===E&&x&&(M=M.set("trainer_email",x));try{const T=(yield(0,n._)(u.http.get("https://k-studio.co.il/wp-json/custom-api/v1/past-trainings",{params:M}))).filter(F=>!F.hasBeenSubmitted).length;u.badgeCount.next(T)}catch(D){console.error("Error fetching data for badge count",D),u.badgeCount.next(0)}})()}updateCountFromLoadedData(u){const C=u.filter(M=>!M.hasBeenSubmitted).length;this.badgeCount.next(C)}}return(f=b).\u0275fac=function(u){return new(u||f)(c.KVO(_.Qq),c.KVO(h.u))},f.\u0275prov=c.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),b})()},379:(j,k,g)=>{g.d(k,{t:()=>nn});var l=g(467),P=g(1626),_=g(4843),n=g(3953),c=g(791),h=g(4796),m=g(177);function f(i,r){if(1&i&&(n.j41(0,"div",15)(1,"h4"),n.EFF(2),n.k0s(),n.j41(3,"p"),n.EFF(4),n.nI1(5,"date"),n.nI1(6,"date"),n.k0s()()),2&i){const o=n.XpG();n.R7$(2),n.JRh(o.training.name),n.R7$(2),n.Lme("",n.i5U(5,3,o.training.start_time,"dd/MM/yyyy")," | ",n.i5U(6,6,o.training.start_time,"HH:mm"),"")}}function b(i,r){1&i&&(n.j41(0,"div",16),n.nrm(1,"ion-spinner",17),n.j41(2,"p"),n.EFF(3,"\u05d8\u05d5\u05e2\u05df \u05de\u05ea\u05d0\u05de\u05e0\u05d9\u05dd..."),n.k0s()())}function y(i,r){1&i&&(n.j41(0,"div",18),n.nrm(1,"ion-icon",19),n.j41(2,"h3"),n.EFF(3,"\u05d0\u05d9\u05df \u05de\u05ea\u05d0\u05de\u05e0\u05d9\u05dd \u05e8\u05e9\u05d5\u05de\u05d9\u05dd"),n.k0s(),n.j41(4,"p"),n.EFF(5,"\u05dc\u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4 \u05dc\u05d0 \u05e8\u05e9\u05d5\u05de\u05d9\u05dd \u05de\u05ea\u05d0\u05de\u05e0\u05d9\u05dd."),n.k0s()())}function u(i,r){if(1&i){const o=n.RV6();n.j41(0,"ion-card",22)(1,"ion-card-header")(2,"div",23)(3,"div",24)(4,"ion-button",25),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.markStatus(e,"attended"))}),n.nrm(5,"ion-icon",26),n.k0s(),n.j41(6,"ion-button",25),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.markStatus(e,"absent"))}),n.nrm(7,"ion-icon",27),n.k0s()(),n.j41(8,"div",28)(9,"h3"),n.EFF(10),n.k0s(),n.j41(11,"p",29),n.nrm(12,"ion-icon",30),n.EFF(13),n.k0s()()()()()}if(2&i){const o=r.$implicit,t=n.XpG(2);n.R7$(4),n.Y8G("color","attended"===o.status?"success":"medium"),n.R7$(2),n.Y8G("color","absent"===o.status?"danger":"medium"),n.R7$(4),n.JRh(o.name),n.R7$(),n.BMQ("color",t.getStatusColor(o.status)),n.R7$(),n.Y8G("name",t.getStatusIcon(o.status)),n.R7$(),n.SpI(" ",t.getStatusText(o.status)," ")}}function C(i,r){if(1&i&&(n.j41(0,"div",20),n.DNE(1,u,14,6,"ion-card",21),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.attendees)("ngForTrackBy",o.trackById)}}function M(i,r){1&i&&n.nrm(0,"ion-spinner",17)}function E(i,r){1&i&&(n.j41(0,"span"),n.EFF(1,"\u05e9\u05de\u05d9\u05e8\u05ea \u05e0\u05d5\u05db\u05d7\u05d5\u05ea"),n.k0s())}function x(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",31)(1,"ion-button",32),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.saveAttendance())}),n.DNE(2,M,1,0,"ion-spinner",33)(3,E,2,0,"span",34),n.k0s()()}if(2&i){const o=n.XpG();n.AVh("visible",o.hasChanges),n.R7$(),n.Y8G("disabled",!o.hasChanges||o.isSaving),n.R7$(),n.Y8G("ngIf",o.isSaving),n.R7$(),n.Y8G("ngIf",!o.isSaving)}}let D=(()=>{var i;class r{constructor(t,e,a,s){this.modalCtrl=t,this.http=e,this.authService=a,this.toastCtrl=s,this.isLoading=!0,this.isSaving=!1,this.hasChanges=!1,this.attendees=[],this.initialStatuses=new Map,this.presentCount=0,this.absentCount=0,this.notMarkedCount=0}ngOnInit(){this.loadAttendees()}loadAttendees(){var t=this;return(0,l.A)(function*(){t.isLoading=!0;const e=`https://k-studio.co.il/wp-json/custom-api/v1/training-attendees/${t.training.id}`;try{const a=yield(0,_._)(t.http.get(e));t.attendees=a,t.attendees.forEach(s=>t.initialStatuses.set(s.id,s.status)),t.updateSummary()}catch(a){console.error("Error loading attendees",a),t.presentToast("Failed to load attendees.","danger")}finally{t.isLoading=!1}})()}markStatus(t,e){t.status=t.status===e?"not_marked":e,this.checkForChanges(),this.updateSummary()}checkForChanges(){this.hasChanges=!1;for(const t of this.attendees)if(t.status!==this.initialStatuses.get(t.id))return void(this.hasChanges=!0)}updateSummary(){this.presentCount=this.attendees.filter(t=>"attended"===t.status).length,this.absentCount=this.attendees.filter(t=>"absent"===t.status).length,this.notMarkedCount=this.attendees.filter(t=>"not_marked"===t.status).length}saveAttendance(){var t=this;return(0,l.A)(function*(){t.isSaving=!0;const a={appointmentId:t.training.id,trainerEmail:t.authService.getUserEmail(),attendance:t.attendees.filter(s=>"not_marked"!==s.status)};try{yield(0,_._)(t.http.post("https://k-studio.co.il/wp-json/custom-api/v1/save-attendance",a)),t.presentToast("\u05d4\u05e0\u05d5\u05db\u05d7\u05d5\u05ea \u05e0\u05e9\u05de\u05e8\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!","success"),t.modalCtrl.dismiss({saved:!0})}catch(s){console.error("Error saving attendance",s),t.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05de\u05d9\u05e8\u05ea \u05d4\u05e0\u05d5\u05db\u05d7\u05d5\u05ea.","danger")}finally{t.isSaving=!1}})()}getStatusText(t){switch(t){case"attended":return"\u05d4\u05d2\u05d9\u05e2\u05d4";case"absent":return"\u05dc\u05d0 \u05d4\u05d2\u05d9\u05e2\u05d4";default:return"\u05dc\u05d0 \u05e1\u05d5\u05de\u05df"}}getStatusColor(t){switch(t){case"attended":return"success";case"absent":return"danger";default:return"medium"}}getStatusIcon(t){switch(t){case"attended":return"checkmark-circle-outline";case"absent":return"close-circle-outline";default:return"ellipse-outline"}}trackById(t,e){return e.id}presentToast(t,e){var a=this;return(0,l.A)(function*(){(yield a.toastCtrl.create({message:t,duration:3e3,color:e,position:"bottom"})).present()})()}closeModal(){this.modalCtrl.dismiss({saved:!1})}}return(i=r).\u0275fac=function(t){return new(t||i)(n.rXU(c.W3),n.rXU(P.Qq),n.rXU(h.u),n.rXU(c.K_))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-attendance-marker"]],inputs:{training:"training"},decls:31,vars:8,consts:[[1,"popup-modal"],[1,"drag-handle"],[1,"page-content-wrapper"],[1,"sticky-header"],[1,"header-title"],["class","training-info",4,"ngIf"],[1,"attendance-summary"],[1,"summary-item"],["name","checkmark-circle-outline","color","success"],["name","close-circle-outline","color","danger"],["name","help-circle-outline","color","medium"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","customers-list",4,"ngIf"],["class","save-button-container",3,"visible",4,"ngIf"],[1,"training-info"],[1,"loading-container"],["name","crescent"],[1,"empty-state"],["name","people-outline"],[1,"customers-list"],["class","customer-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"customer-card"],[1,"customer-info"],[1,"status-buttons"],["fill","solid",3,"click","color"],["slot","icon-only","name","checkmark-outline"],["slot","icon-only","name","close-outline"],[1,"customer-details"],[1,"status-text"],[3,"name"],[1,"save-button-container"],["expand","block",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),n.EFF(6,"\u05e1\u05d9\u05de\u05d5\u05df \u05e0\u05d5\u05db\u05d7\u05d5\u05ea"),n.k0s()(),n.DNE(7,f,7,9,"div",5),n.j41(8,"div",6)(9,"div",7),n.nrm(10,"ion-icon",8),n.j41(11,"span"),n.EFF(12,"\u05e0\u05d5\u05db\u05d7\u05d9\u05dd"),n.nrm(13,"br"),n.EFF(14),n.k0s()(),n.j41(15,"div",7),n.nrm(16,"ion-icon",9),n.j41(17,"span"),n.EFF(18,"\u05e0\u05e2\u05d3\u05e8\u05d5"),n.nrm(19,"br"),n.EFF(20),n.k0s()(),n.j41(21,"div",7),n.nrm(22,"ion-icon",10),n.j41(23,"span"),n.EFF(24,"\u05dc\u05d0 \u05e1\u05d5\u05de\u05df"),n.nrm(25,"br"),n.EFF(26),n.k0s()()()(),n.DNE(27,b,4,0,"div",11)(28,y,6,0,"div",12)(29,C,2,2,"div",13)(30,x,4,5,"div",14),n.k0s()()),2&t&&(n.R7$(7),n.Y8G("ngIf",e.training),n.R7$(7),n.JRh(e.presentCount),n.R7$(6),n.JRh(e.absentCount),n.R7$(6),n.JRh(e.notMarkedCount),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.Y8G("ngIf",!e.isLoading&&0===e.attendees.length),n.R7$(),n.Y8G("ngIf",!e.isLoading&&e.attendees.length>0),n.R7$(),n.Y8G("ngIf",!e.isLoading&&e.attendees.length>0))},dependencies:[m.Sq,m.bT,c.Jm,c.b_,c.ME,c.W9,c.iq,c.w2,m.vh],styles:["[_nghost-%COMP%]   ion-content.popup-modal[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: #ffffff;border-radius:24px 24px 0 0;padding:0;box-shadow:0 -8px 32px #0000001f;overflow:hidden}.drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:linear-gradient(to bottom,#fff,#fafafa)}.sticky-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #f1f5f9;padding:0 0 20px;position:sticky;top:0;z-index:10}.sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px 0;justify-content:center}.sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.375rem;margin:0;color:#1e293b;letter-spacing:-.025em}.sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]{padding:16px 24px 0}.sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-weight:600;font-size:1.125rem;color:#1e293b;margin:0 0 8px}.sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#64748b;font-size:.875rem;margin:0 0 16px}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;padding:16px 24px 0}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px;background:#f8fafc;border-radius:12px;border:1px solid #f1f5f9;min-width:80px}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[color=success][_ngcontent-%COMP%]{color:#10b981}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[color=danger][_ngcontent-%COMP%]{color:#ef4444}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   ion-icon[color=medium][_ngcontent-%COMP%]{color:#64748b}.sticky-header[_ngcontent-%COMP%]   .attendance-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:.8125rem;color:#475569;text-align:center;line-height:1.2}.loading-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #667eea;transform:scale(1.2);margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.customers-list[_ngcontent-%COMP%]{flex:1;padding:24px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #f1f5f9;border-radius:16px;margin:0 0 16px;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a;border-color:#e2e8f0}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:20px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]{text-align:right;flex:1}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0 0 6px;letter-spacing:-.025em}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;font-size:.875rem;font-weight:500;padding:4px 12px;border-radius:20px;width:-moz-fit-content;width:fit-content;margin:0 0 0 auto}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[color=success][_ngcontent-%COMP%]{color:#059669;background:#10b9811a}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[color=danger][_ngcontent-%COMP%]{color:#dc2626;background:#ef44441a}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .status-text[color=medium][_ngcontent-%COMP%]{color:#64748b;background:#64748b1a}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-start: 12px;--padding-end: 12px;--min-width: 48px;--min-height: 48px;transition:all .3s cubic-bezier(.4,0,.2,1);border:2px solid #f1f5f9;background:#f8fafc}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=success][_ngcontent-%COMP%]{--background: #10b981;--background-activated: #059669;--color: white;--box-shadow: 0 2px 8px rgba(16, 185, 129, .25);border-color:#10b981}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=success][_ngcontent-%COMP%]:hover{--box-shadow: 0 4px 12px rgba(16, 185, 129, .35)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]{--background: #ef4444;--background-activated: #dc2626;--color: white;--box-shadow: 0 2px 8px rgba(239, 68, 68, .25);border-color:#ef4444}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]:hover{--box-shadow: 0 4px 12px rgba(239, 68, 68, .35)}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=medium][_ngcontent-%COMP%]{--background: #f8fafc;--background-activated: #f1f5f9;--color: #64748b;border-color:#e2e8f0}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[color=medium][_ngcontent-%COMP%]:hover{--background: #f1f5f9;border-color:#cbd5e1}.customers-list[_ngcontent-%COMP%]   .customer-card[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .status-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:#cbd5e1;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#475569;font-size:1.25rem;font-weight:600;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0}.save-button-container[_ngcontent-%COMP%]{padding:24px;background:#fff;border-top:1px solid #f1f5f9;position:sticky;bottom:0;transform:translateY(100%);transition:transform .4s cubic-bezier(.4,0,.2,1)}.save-button-container.visible[_ngcontent-%COMP%]{transform:translateY(0)}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 16px;--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--background-activated: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);--box-shadow: 0 4px 20px rgba(102, 126, 234, .35);--color: white;font-weight:600;font-size:1rem;letter-spacing:.025em;height:56px;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);--box-shadow: 0 8px 25px rgba(102, 126, 234, .45)}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:disabled{opacity:.6;transform:none}.save-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: white;margin-right:8px}"]}),r})();function T(i,r){if(1&i&&(n.j41(0,"div",13)(1,"div",14)(2,"div",15)(3,"h4"),n.EFF(4),n.k0s(),n.j41(5,"span",16),n.EFF(6),n.nI1(7,"date"),n.k0s(),n.j41(8,"span",17),n.EFF(9),n.nI1(10,"date"),n.k0s()()()()),2&i){const o=n.XpG();n.R7$(4),n.JRh(o.training.training_name),n.R7$(2),n.JRh(n.i5U(7,3,o.training.start_time,"dd/MM/yyyy")),n.R7$(3),n.JRh(n.i5U(10,6,o.training.start_time,"HH:mm"))}}function F(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",18)(1,"div",19)(2,"div",20),n.nrm(3,"ion-icon",21),n.j41(4,"span"),n.EFF(5,"\u05de\u05d0\u05de\u05df \u05e0\u05d5\u05db\u05d7\u05d9"),n.k0s()(),n.j41(6,"div",22)(7,"div",23),n.EFF(8),n.k0s(),n.j41(9,"div",24),n.EFF(10),n.k0s()(),n.j41(11,"button",25),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.removeAssignment())}),n.nrm(12,"ion-icon",26),n.k0s()()()}if(2&i){const o=n.XpG();n.R7$(8),n.JRh(o.currentAssignedTrainer.name),n.R7$(2),n.JRh(o.currentAssignedTrainer.email),n.R7$(),n.Y8G("disabled",o.isSaving)}}function w(i,r){1&i&&(n.j41(0,"div",27)(1,"div",28),n.nrm(2,"ion-spinner",29),n.j41(3,"p"),n.EFF(4,"\u05d8\u05d5\u05e2\u05df \u05de\u05d0\u05de\u05e0\u05d9\u05dd..."),n.k0s()()())}function R(i,r){1&i&&(n.j41(0,"div",30)(1,"div",31),n.nrm(2,"ion-icon",32),n.j41(3,"h3"),n.EFF(4,"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05de\u05d0\u05de\u05e0\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd"),n.k0s(),n.j41(5,"p"),n.EFF(6,"\u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1 \u05de\u05d0\u05d5\u05d7\u05e8 \u05d9\u05d5\u05ea\u05e8"),n.k0s()()())}function I(i,r){1&i&&(n.j41(0,"span",49),n.EFF(1,"\u05de\u05d0\u05de\u05df \u05e0\u05d5\u05db\u05d7\u05d9"),n.k0s())}function S(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",42),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.selectTrainer(e.email))}),n.j41(1,"div",43)(2,"div",44),n.EFF(3),n.k0s()(),n.j41(4,"div",45)(5,"h5"),n.EFF(6),n.k0s(),n.j41(7,"p"),n.EFF(8),n.k0s(),n.DNE(9,I,2,0,"span",46),n.k0s(),n.j41(10,"div",47),n.nrm(11,"ion-icon",48),n.k0s()()}if(2&i){const o=r.$implicit,t=n.XpG(2);n.AVh("selected",t.isSelected(o.email))("currently-assigned",t.isCurrentlyAssigned(o.email)),n.R7$(3),n.SpI(" ",o.name.charAt(0).toUpperCase()," "),n.R7$(3),n.JRh(o.name),n.R7$(2),n.JRh(o.email),n.R7$(),n.Y8G("ngIf",t.isCurrentlyAssigned(o.email)),n.R7$(),n.AVh("active",t.isSelected(o.email))}}function $(i,r){1&i&&n.nrm(0,"ion-spinner",29)}function G(i,r){if(1&i&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&i){const o=n.XpG(2);n.R7$(),n.JRh(o.saveButtonText)}}function z(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",33)(1,"div",34)(2,"h4"),n.EFF(3),n.k0s(),n.j41(4,"span",35),n.EFF(5),n.k0s()(),n.j41(6,"div",36),n.DNE(7,S,12,10,"div",37),n.j41(8,"div",38)(9,"ion-button",39),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.saveAssignment())}),n.DNE(10,$,1,0,"ion-spinner",40)(11,G,2,1,"span",41),n.k0s()()()()}if(2&i){const o=n.XpG();n.R7$(3),n.JRh(o.currentAssignedTrainer?"\u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df \u05d7\u05d3\u05e9":"\u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df"),n.R7$(2),n.SpI("",o.teamMembers.length," \u05de\u05d0\u05de\u05e0\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd"),n.R7$(2),n.Y8G("ngForOf",o.teamMembers)("ngForTrackBy",o.trackByEmail),n.R7$(),n.AVh("visible",o.selectedTrainerEmail),n.R7$(),n.Y8G("disabled",o.isSaving||!o.selectedTrainerEmail||!o.hasChanges),n.R7$(),n.Y8G("ngIf",o.isSaving),n.R7$(),n.Y8G("ngIf",!o.isSaving)}}let Y=(()=>{var i;class r{constructor(t,e,a){this.modalCtrl=t,this.http=e,this.toastCtrl=a,this.teamMembers=[],this.selectedTrainerEmail="",this.isLoading=!0,this.isSaving=!1,this.currentAssignedTrainer=null}ngOnInit(){console.log("Training data received:",this.training),this.loadTeamMembers(),this.initializeSelectedTrainer()}initializeSelectedTrainer(){var t,e;console.log("Current training:",this.training),console.log("Assigned trainer:",null===(t=this.training)||void 0===t?void 0:t.assigned_trainer),null!==(e=this.training)&&void 0!==e&&e.assigned_trainer?(this.selectedTrainerEmail=this.training.assigned_trainer.email,this.currentAssignedTrainer={email:this.training.assigned_trainer.email,name:this.training.assigned_trainer.name},console.log("Set current assigned trainer:",this.currentAssignedTrainer)):console.log("No assigned trainer found")}loadTeamMembers(){var t=this;return(0,l.A)(function*(){t.isLoading=!0;try{const a=yield(0,_._)(t.http.get("https://k-studio.co.il/wp-json/custom-api/v1/team-members"));if(t.teamMembers=a.map(s=>({email:s.email,name:s.name})),console.log("Team members loaded:",t.teamMembers),console.log("Current assigned trainer:",t.currentAssignedTrainer),t.currentAssignedTrainer){const s=t.teamMembers.find(d=>d.email===t.currentAssignedTrainer.email);console.log("Assigned trainer found in team members:",s)}}catch(a){console.error("Error loading team members",a),t.presentToast("Failed to load trainers.","danger")}finally{t.isLoading=!1}})()}trackByEmail(t,e){return e.email}selectTrainer(t){this.selectedTrainerEmail=t}isSelected(t){return this.selectedTrainerEmail===t}isCurrentlyAssigned(t){var e;return(null===(e=this.currentAssignedTrainer)||void 0===e?void 0:e.email)===t}removeAssignment(){var t=this;return(0,l.A)(function*(){t.isSaving=!0;const a={appointmentId:t.training.id};try{yield(0,_._)(t.http.post("https://k-studio.co.il/wp-json/custom-api/v1/remove-trainer",a)),t.presentToast("Trainer assignment removed successfully!","success"),t.modalCtrl.dismiss({assigned:!1,removed:!0})}catch(s){console.error("Error removing trainer assignment",s),t.presentToast("Error removing trainer assignment.","danger")}finally{t.isSaving=!1}})()}saveAssignment(){var t=this;return(0,l.A)(function*(){var e;if(!t.selectedTrainerEmail)return void t.presentToast("Please select a trainer.","warning");if((null===(e=t.currentAssignedTrainer)||void 0===e?void 0:e.email)===t.selectedTrainerEmail)return void t.presentToast("This trainer is already assigned to this training.","warning");t.isSaving=!0;const s={appointmentId:t.training.id,trainerEmail:t.selectedTrainerEmail};try{yield(0,_._)(t.http.post("https://k-studio.co.il/wp-json/custom-api/v1/assign-trainer",s)),t.presentToast(`Trainer ${t.currentAssignedTrainer?"reassigned":"assigned"} successfully!`,"success"),t.modalCtrl.dismiss({assigned:!0,reassigned:!!t.currentAssignedTrainer})}catch(d){console.error("Error assigning trainer",d),t.presentToast("Error assigning trainer.","danger")}finally{t.isSaving=!1}})()}presentToast(t,e){var a=this;return(0,l.A)(function*(){(yield a.toastCtrl.create({message:t,duration:3e3,color:e,position:"top"})).present()})()}closeModal(){this.modalCtrl.dismiss()}get hasChanges(){var t;return this.selectedTrainerEmail!==((null===(t=this.currentAssignedTrainer)||void 0===t?void 0:t.email)||"")}get saveButtonText(){return this.isSaving?"":this.selectedTrainerEmail?this.currentAssignedTrainer?this.selectedTrainerEmail===this.currentAssignedTrainer.email?"\u05de\u05d0\u05de\u05df \u05db\u05d1\u05e8 \u05de\u05e9\u05d5\u05d1\u05e5":"\u05d4\u05d7\u05dc\u05e3 \u05de\u05d0\u05de\u05df":"\u05e9\u05de\u05d5\u05e8 \u05e9\u05d9\u05d1\u05d5\u05e5":"\u05d1\u05d7\u05e8 \u05de\u05d0\u05de\u05df"}}return(i=r).\u0275fac=function(t){return new(t||i)(n.rXU(c.W3),n.rXU(P.Qq),n.rXU(c.K_))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-assign-trainer-modal"]],inputs:{training:"training"},decls:15,vars:5,consts:[[1,"popup-modal"],[1,"drag-handle"],[1,"page-content-wrapper"],[1,"sticky-header"],[1,"header-content"],[1,"close-button",3,"click"],["name","close-outline"],[1,"spacer"],["class","training-info",4,"ngIf"],["class","current-assignment",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","trainers-container",4,"ngIf"],[1,"training-info"],[1,"training-card"],[1,"training-meta"],[1,"date"],[1,"time"],[1,"current-assignment"],[1,"assignment-info"],[1,"assignment-header"],["name","person-circle-outline"],[1,"trainer-details"],[1,"trainer-name"],[1,"trainer-email"],[1,"remove-button",3,"click","disabled"],["name","trash-outline"],[1,"loading-container"],[1,"loading-content"],["name","crescent"],[1,"empty-state"],[1,"empty-content"],["name","people-outline","size","large"],[1,"trainers-container"],[1,"section-title"],[1,"count"],[1,"trainers-grid"],["class","trainer-card",3,"selected","currently-assigned","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"save-button-container"],["expand","block",1,"save-button",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"trainer-card",3,"click"],[1,"trainer-avatar"],[1,"avatar-placeholder"],[1,"trainer-info"],["class","current-badge",4,"ngIf"],[1,"selection-indicator"],["name","checkmark-outline"],[1,"current-badge"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),n.bIt("click",function(){return e.closeModal()}),n.nrm(6,"ion-icon",6),n.k0s(),n.j41(7,"h3"),n.EFF(8,"\u05e9\u05d9\u05d1\u05d5\u05e5 \u05de\u05d0\u05de\u05df"),n.k0s(),n.nrm(9,"div",7),n.k0s(),n.DNE(10,T,11,9,"div",8)(11,F,13,3,"div",9),n.k0s(),n.DNE(12,w,5,0,"div",10)(13,R,7,0,"div",11)(14,z,12,9,"div",12),n.k0s()()),2&t&&(n.R7$(10),n.Y8G("ngIf",e.training),n.R7$(),n.Y8G("ngIf",e.currentAssignedTrainer&&!e.isLoading),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.Y8G("ngIf",!e.isLoading&&0===e.teamMembers.length),n.R7$(),n.Y8G("ngIf",!e.isLoading&&e.teamMembers.length))},dependencies:[m.Sq,m.bT,c.Jm,c.W9,c.iq,c.w2,m.vh],styles:['.popup-modal[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: #ffffff;border-radius:24px 24px 0 0;padding:0;box-shadow:0 -8px 32px #0000001f;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.popup-modal[_ngcontent-%COMP%]   .page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:linear-gradient(to bottom,#fff,#fafafa)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #f1f5f9;padding:0 0 20px;position:sticky;top:0;z-index:10}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px 0;justify-content:space-between}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:scale(1.05)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#64748b}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.375rem;margin:0;color:#1e293b;letter-spacing:-.025em}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]{padding:16px 24px 0}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;border-radius:16px;color:#fff;box-shadow:0 4px 20px #667eea40}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 -1px;font-weight:600;font-size:1.125rem;color:#fff}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   .training-meta[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;font-size:.875rem;opacity:.9}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   .training-meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .training-info[_ngcontent-%COMP%]   .training-card[_ngcontent-%COMP%]   .training-meta[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background:#ffffff26;padding:4px 12px;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]{padding:16px 24px 0}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:16px;padding:16px;display:flex;align-items:center;gap:12px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .assignment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#64748b;font-size:.875rem;font-weight:500}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .assignment-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .trainer-details[_ngcontent-%COMP%]{flex:1}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .trainer-details[_ngcontent-%COMP%]   .trainer-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:1rem}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .trainer-details[_ngcontent-%COMP%]   .trainer-email[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{background:#fee2e2;border:1px solid #fecaca;border-radius:8px;padding:8px;cursor:pointer;transition:all .2s ease}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{background:#fecaca;transform:scale(1.05)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .current-assignment[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626;font-size:16px}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:60px 24px}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #667eea;transform:scale(1.2);margin-bottom:16px}.popup-modal[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:60px 24px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{text-align:center}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#cbd5e1;margin-bottom:16px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#475569;font-size:1.25rem;font-weight:600;margin:0 0 8px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]{flex:1;padding:24px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;background:#f1f5f9;padding:4px 12px;border-radius:20px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #f1f5f9;border-radius:16px;padding:20px;display:flex;align-items:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#667eea,#764ba2);opacity:0;transition:opacity .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#e2e8f0}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.currently-assigned[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#ecfdf5,#d1fae5)}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.currently-assigned[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#10b981}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]{border-color:#667eea;background:linear-gradient(135deg,#667eea,#764ba2);transform:translateY(-2px);box-shadow:0 8px 25px #667eea59}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]:before{opacity:1}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{background:#fff3;color:#fff;border-color:#ffffff4d}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card.selected[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   .current-badge[_ngcontent-%COMP%]{background:#fff3;color:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]{position:relative;z-index:1;margin-right:16px}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1.125rem;color:#475569;border:2px solid #e2e8f0;transition:all .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1rem;font-weight:600;color:#1e293b;transition:color .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:.875rem;color:#64748b;transition:color .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .trainer-info[_ngcontent-%COMP%]   .current-badge[_ngcontent-%COMP%]{background:#10b981;color:#fff;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:500;display:inline-block;transition:all .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{position:relative;z-index:1;width:24px;height:24px;border-radius:50%;border:2px solid #e2e8f0;display:flex;align-items:center;justify-content:center;transition:all .3s ease;background:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:transparent;transition:color .3s ease}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator.active[_ngcontent-%COMP%]{border-color:#fff;background:#fff}.popup-modal[_ngcontent-%COMP%]   .trainers-container[_ngcontent-%COMP%]   .trainers-grid[_ngcontent-%COMP%]   .trainer-card[_ngcontent-%COMP%]   .selection-indicator.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#667eea}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]{padding:24px;background:#fff;border-top:1px solid #f1f5f9;position:sticky;bottom:0;transform:translateY(100%);transition:transform .4s cubic-bezier(.4,0,.2,1)}.popup-modal[_ngcontent-%COMP%]   .save-button-container.visible[_ngcontent-%COMP%]{transform:translateY(0)}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{--border-radius: 16px;--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--background-activated: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);--box-shadow: 0 4px 20px rgba(102, 126, 234, .35);--color: white;font-weight:600;font-size:1rem;letter-spacing:.025em;height:56px;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);--box-shadow: 0 8px 25px rgba(102, 126, 234, .45)}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{opacity:.6;transform:none}.popup-modal[_ngcontent-%COMP%]   .save-button-container[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: white;margin-right:8px}']}),r})();var B=g(6003);const A=()=>[1,2,3,4,5];function L(i,r){if(1&i){const o=n.RV6();n.j41(0,"ion-segment",9),n.bIt("ionChange",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.segmentChanged(e))}),n.j41(1,"ion-segment-button",10)(2,"ion-label"),n.EFF(3,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9 \u05e2\u05d1\u05e8"),n.k0s()(),n.j41(4,"ion-segment-button",11)(5,"ion-label"),n.EFF(6,"\u05e9\u05d9\u05d1\u05d5\u05e5 \u05de\u05d0\u05de\u05e0\u05d9\u05dd"),n.k0s()()()}if(2&i){const o=n.XpG();n.Y8G("value",o.currentSegment)}}function U(i,r){1&i&&n.nrm(0,"div",14)}function X(i,r){1&i&&(n.j41(0,"div",12),n.DNE(1,U,1,0,"div",13),n.k0s()),2&i&&(n.R7$(),n.Y8G("ngForOf",n.lJ4(1,A)))}function N(i,r){if(1&i){const o=n.RV6();n.j41(0,"ion-card",20),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.openAttendanceMarker(e))}),n.j41(1,"ion-card-header")(2,"div",21),n.nrm(3,"ion-icon",22),n.k0s(),n.j41(4,"div",23)(5,"h2"),n.EFF(6),n.k0s(),n.j41(7,"p"),n.EFF(8),n.nI1(9,"date"),n.nI1(10,"date"),n.k0s()()()()}if(2&i){const o=r.$implicit;n.R7$(3),n.Y8G("name",o.hasBeenSubmitted?"checkmark-done-circle":"ellipse-outline")("color",o.hasBeenSubmitted?"success":"medium"),n.R7$(3),n.JRh(o.training_name),n.R7$(2),n.Lme("",n.i5U(9,5,o.start_time,"dd/MM/yyyy")," | ",n.i5U(10,8,o.start_time,"HH:mm"),"")}}function V(i,r){1&i&&(n.j41(0,"div",24),n.nrm(1,"ion-icon",25),n.j41(2,"h3"),n.EFF(3,"\u05d0\u05d9\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9 \u05e2\u05d1\u05e8 \u05dc\u05d4\u05e6\u05d2\u05d4"),n.k0s(),n.j41(4,"p"),n.EFF(5,"\u05db\u05d0\u05e9\u05e8 \u05d9\u05d4\u05d9\u05d5 \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05d4\u05dd \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05db\u05d0\u05df"),n.k0s()())}function J(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",15),n.DNE(1,N,11,11,"ion-card",16),n.j41(2,"ion-infinite-scroll",17),n.bIt("ionInfinite",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.loadMorePastTrainings(e))}),n.nrm(3,"ion-infinite-scroll-content",18),n.k0s(),n.DNE(4,V,6,0,"div",19),n.k0s()}if(2&i){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.pastTrainings),n.R7$(),n.Y8G("disabled",o.allPastTrainingsLoaded),n.R7$(2),n.Y8G("ngIf",!o.isLoading&&0===o.pastTrainings.length)}}function W(i,r){1&i&&n.nrm(0,"div",14)}function K(i,r){1&i&&(n.j41(0,"div",12),n.DNE(1,W,1,0,"div",13),n.k0s()),2&i&&(n.R7$(),n.Y8G("ngForOf",n.lJ4(1,A)))}function H(i,r){if(1&i&&(n.j41(0,"div",31),n.nrm(1,"ion-icon",32),n.j41(2,"span"),n.EFF(3),n.k0s()()),2&i){const o=n.XpG().$implicit;n.R7$(3),n.SpI("\u05de\u05e9\u05d5\u05d1\u05e5: ",o.assigned_trainer_name,"")}}function Q(i,r){if(1&i){const o=n.RV6();n.j41(0,"ion-card",27)(1,"ion-card-header")(2,"ion-button",28),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.openTrainerAssignmentModal(e))}),n.nrm(3,"ion-icon",29),n.EFF(4),n.k0s(),n.j41(5,"div",23)(6,"h2"),n.EFF(7),n.k0s(),n.j41(8,"p"),n.EFF(9),n.nI1(10,"date"),n.nI1(11,"date"),n.k0s(),n.DNE(12,H,4,1,"div",30),n.k0s()()()}if(2&i){const o=r.$implicit;n.R7$(3),n.Y8G("name",o.assigned_trainer_name?"swap-horizontal-outline":"person-add-outline"),n.R7$(),n.SpI(" ",o.assigned_trainer_name?"\u05e9\u05e0\u05d4 \u05e9\u05d9\u05d1\u05d5\u05e5":"\u05e9\u05d1\u05e5 \u05de\u05d0\u05de\u05df"," "),n.R7$(3),n.JRh(o.training_name),n.R7$(2),n.Lme("",n.i5U(10,6,o.start_time,"dd/MM/yyyy")," | ",n.i5U(11,9,o.start_time,"HH:mm"),""),n.R7$(3),n.Y8G("ngIf",o.assigned_trainer_name)}}function Z(i,r){1&i&&(n.j41(0,"div",24),n.nrm(1,"ion-icon",33),n.j41(2,"h3"),n.EFF(3,"\u05d0\u05d9\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05de\u05de\u05ea\u05d9\u05e0\u05d9\u05dd \u05dc\u05e9\u05d9\u05d1\u05d5\u05e5"),n.k0s(),n.j41(4,"p"),n.EFF(5,"\u05db\u05d0\u05e9\u05e8 \u05d9\u05d4\u05d9\u05d5 \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d7\u05d3\u05e9\u05d9\u05dd, \u05d4\u05dd \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05db\u05d0\u05df"),n.k0s()())}function q(i,r){if(1&i&&(n.j41(0,"div",15),n.DNE(1,Q,13,12,"ion-card",26)(2,Z,6,0,"div",19),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.upcomingTrainings),n.R7$(),n.Y8G("ngIf",!o.isLoadingUpcoming&&0===o.upcomingTrainings.length)}}let nn=(()=>{var i;class r{constructor(t,e,a,s){this.http=t,this.modalCtrl=e,this.authService=a,this.attendanceBadgeService=s,this.isLoading=!0,this.pastTrainings=[],this.userRole="",this.currentSegment="past",this.isLoadingUpcoming=!0,this.upcomingTrainings=[],this.pastTrainingsPage=1,this.allPastTrainingsLoaded=!1,this.AMELIA_API_KEY="C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk",this.weeklyMain={},this.weeklySecond={},this.userRole=this.authService.getUserRole()}pullWeeklyFromStorage(){try{var t,e;this.weeklyMain=JSON.parse(null!==(t=localStorage.getItem("weeklyTrainings_main"))&&void 0!==t?t:"{}"),this.weeklySecond=JSON.parse(null!==(e=localStorage.getItem("weeklyTrainings_second"))&&void 0!==e?e:"{}")}catch{}}ngOnInit(){this.pullWeeklyFromStorage(),this.loadInitialData(),console.log("pastTrainings:",this.pastTrainings)}scheduleForProvider(t){return[169,172].includes(null!=t?t:-1)?this.weeklyMain:this.weeklySecond}enrichTraining(t){var e=this;return(0,l.A)(function*(){try{var a;const s=yield(0,_._)(e.http.get(`https://k-studio.co.il/wp-json/custom-api/v1/appointment/${t.id}`)),d=null==s||null===(a=s.data)||void 0===a||null===(a=a.appointment)||void 0===a?void 0:a.providerId;t.providerId=d;const p=e.lookupTitle(t.start_time,d);p&&(t.training_name=p)}catch(s){console.warn("enrichTraining failed",t.id,s)}})()}lookupTitle(t,e){var a;const d=new Date(t.replace(" ","T")),p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()],O=d.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),v=null===(a=this.scheduleForProvider(e)[p])||void 0===a?void 0:a.find(tn=>tn.time===O);return v?v.title:null}branchFromProvider(t){return[169,172].includes(t)?"main":"second"}openTrainerAssignmentModal(t){var e=this;return(0,l.A)(function*(){var a;null===(a=document.activeElement)||void 0===a||a.blur();const s=yield e.modalCtrl.create({component:Y,componentProps:{training:t},cssClass:"popup-modal",breakpoints:[0,.95,1],initialBreakpoint:.95,handle:!0,backdropDismiss:!1});yield s.present();const{data:d}=yield s.onDidDismiss();null!=d&&d.assigned&&e.loadUpcomingTrainingsForAssignment()})()}loadUpcomingTrainingsForAssignment(){var t=this;return(0,l.A)(function*(){t.isLoadingUpcoming=!0;try{const e=yield(0,_._)(t.http.get("https://k-studio.co.il/wp-json/custom-api/v1/upcoming-trainings"));yield Promise.all(e.map(a=>t.enrichTraining(a))),t.upcomingTrainings=e}catch(e){console.error("Error loading upcoming trainings",e)}finally{t.isLoadingUpcoming=!1}})()}segmentChanged(t){this.currentSegment=t.detail.value}loadTrainings(t){var e=this;return(0,l.A)(function*(){1===e.pastTrainingsPage&&(e.isLoading=!0);let s=(new P.Nl).set("page",e.pastTrainingsPage.toString());const d=e.authService.getUserEmail();"team"===e.userRole&&d&&(s=s.set("trainer_email",d));try{const p=yield(0,_._)(e.http.get("https://k-studio.co.il/wp-json/custom-api/v1/past-trainings",{params:s}));yield Promise.all(p.map(O=>e.enrichTraining(O))),e.pastTrainings.push(...p),e.attendanceBadgeService.updateCountFromLoadedData(e.pastTrainings),p.length<15&&(e.allPastTrainingsLoaded=!0),null==t||t.target.complete()}catch(p){console.error("Error loading past trainings",p)}finally{e.isLoading=!1}})()}loadMorePastTrainings(t){this.pastTrainingsPage++,this.loadTrainings(t)}loadInitialData(){this.pastTrainings=[],this.pastTrainingsPage=1,this.allPastTrainingsLoaded=!1,this.loadTrainings(),"administrator"===this.userRole&&this.loadUpcomingTrainingsForAssignment()}openAttendanceMarker(t){var e=this;return(0,l.A)(function*(){const a=yield e.modalCtrl.create({component:D,componentProps:{training:{id:t.id,name:t.training_name,start_time:t.start_time}},cssClass:"attendance-marker-modal",breakpoints:[0,1],initialBreakpoint:1});yield a.present();const{data:s}=yield a.onDidDismiss();if(null!=s&&s.saved)try{const d=`https://k-studio.co.il/wp-json/custom-api/v1/past-training/${t.id}`,p=yield(0,_._)(e.http.get(d));yield e.enrichTraining(p);const O=e.pastTrainings.findIndex(v=>v.id===t.id);-1!==O&&(e.pastTrainings[O]=p,e.attendanceBadgeService.updateCountFromLoadedData(e.pastTrainings))}catch(d){console.error("Failed to refresh training data, reloading list as a fallback.",d),e.loadInitialData()}})()}closeModal(){this.modalCtrl.dismiss()}}return(i=r).\u0275fac=function(t){return new(t||i)(n.rXU(P.Qq),n.rXU(c.W3),n.rXU(h.u),n.rXU(B._))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-attendance-dashboard"]],decls:14,vars:7,consts:[[1,"popup-modal"],[1,"drag-handle"],[1,"page-content-wrapper"],[1,"sticky-header"],[1,"header-title"],[3,"value","ionChange",4,"ngIf"],[3,"hidden"],["class","skeleton-list",4,"ngIf"],["class","scrollable-list",4,"ngIf"],[3,"ionChange","value"],["value","past"],["value","upcoming"],[1,"skeleton-list"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"scrollable-list"],["class","clickable",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite","disabled"],["loadingSpinner","crescent"],["class","empty-state",4,"ngIf"],[1,"clickable",3,"click"],[1,"icon-container"],[3,"name","color"],[1,"training-details"],[1,"empty-state"],["name","calendar-outline"],["class","assignment-card",4,"ngFor","ngForOf"],[1,"assignment-card"],["fill","solid",1,"assign-button",3,"click"],["slot","start",3,"name"],["class","assigned-trainer",4,"ngIf"],[1,"assigned-trainer"],["name","person-circle"],["name","people-outline"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),n.EFF(6,"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e0\u05d5\u05db\u05d7\u05d5\u05ea \u05d5\u05e9\u05d9\u05d1\u05d5\u05e6\u05d9\u05dd"),n.k0s()(),n.DNE(7,L,7,1,"ion-segment",5),n.k0s(),n.j41(8,"div",6),n.DNE(9,X,2,2,"div",7)(10,J,5,3,"div",8),n.k0s(),n.j41(11,"div",6),n.DNE(12,K,2,2,"div",7)(13,q,3,2,"div",8),n.k0s()()()),2&t&&(n.R7$(7),n.Y8G("ngIf","administrator"===e.userRole),n.R7$(),n.Y8G("hidden","past"!==e.currentSegment),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.Y8G("ngIf",!e.isLoading),n.R7$(),n.Y8G("hidden","upcoming"!==e.currentSegment),n.R7$(),n.Y8G("ngIf",e.isLoadingUpcoming),n.R7$(),n.Y8G("ngIf",!e.isLoadingUpcoming))},dependencies:[m.Sq,m.bT,c.Jm,c.b_,c.ME,c.W9,c.iq,c.Ax,c.Hp,c.he,c.Gp,c.eP,c.Je,m.vh],styles:['.popup-modal[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: #ffffff;border-radius:24px 24px 0 0;padding:0;box-shadow:0 -8px 32px #0000001f;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.popup-modal[_ngcontent-%COMP%]   .page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:linear-gradient(to bottom,#fff,#fafafa)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #f1f5f9;padding:0 0 20px;position:sticky;top:0;z-index:10}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px 0;justify-content:center}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.375rem;margin:0;color:#1e293b;letter-spacing:-.025em}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{margin-top:20px;--background: #f8fafc;border-radius:16px;padding:4px;box-shadow:0 2px 8px #0000000f;margin-left:40px;height:60px}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: #64748b;--color-checked: #ffffff;--indicator-color: transparent;--indicator-color-checked: linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:12px;font-weight:500;font-size:.875rem;margin:0;transition:all .3s cubic-bezier(.4,0,.2,1)}.popup-modal[_ngcontent-%COMP%]   .sticky-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 2px 8px #667eea40;transform:translateY(-1px)}.popup-modal[_ngcontent-%COMP%]   .scrollable-list[_ngcontent-%COMP%]{flex:1;padding:24px}.popup-modal[_ngcontent-%COMP%]   .skeleton-list[_ngcontent-%COMP%]{padding:24px}.popup-modal[_ngcontent-%COMP%]   .skeleton-list[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #f1f5f9;border-radius:16px;height:80px;margin-bottom:16px;position:relative;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   .skeleton-list[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;height:100%;width:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.6),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #f1f5f9;border-radius:16px;margin:0 0 16px;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.popup-modal[_ngcontent-%COMP%]   ion-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.popup-modal[_ngcontent-%COMP%]   ion-card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:#e2e8f0}.popup-modal[_ngcontent-%COMP%]   ion-card.clickable[_ngcontent-%COMP%]:active{transform:translateY(0)}.popup-modal[_ngcontent-%COMP%]   ion-card.assignment-card[_ngcontent-%COMP%]   .assign-button[_ngcontent-%COMP%]{--border-radius: 12px;--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--background-activated: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);--box-shadow: 0 2px 8px rgba(102, 126, 234, .25);--color: white;font-weight:500;font-size:.875rem;height:40px;min-width:120px;text-transform:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.popup-modal[_ngcontent-%COMP%]   ion-card.assignment-card[_ngcontent-%COMP%]   .assign-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);--box-shadow: 0 4px 12px rgba(102, 126, 234, .35)}.popup-modal[_ngcontent-%COMP%]   ion-card.assignment-card[_ngcontent-%COMP%]   .assign-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center;padding:20px;gap:16px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);transition:all .3s ease}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[color=success][_ngcontent-%COMP%]{color:#10b981}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[color=medium][_ngcontent-%COMP%]{color:#64748b}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]{flex:1;text-align:right}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0 0 4px;letter-spacing:-.025em}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:0}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   .assigned-trainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;margin-top:8px;padding:6px 12px;background:#10b9811a;border-radius:20px;font-size:.8125rem;color:#059669;font-weight:500;width:-moz-fit-content;width:fit-content;margin-left:auto}.popup-modal[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .training-details[_ngcontent-%COMP%]   .assigned-trainer[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:#cbd5e1;margin-bottom:16px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#475569;font-size:1.25rem;font-weight:600;margin:0 0 8px}.popup-modal[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0}.popup-modal[_ngcontent-%COMP%]   ion-infinite-scroll[_ngcontent-%COMP%]   .infinite-scroll-content[_ngcontent-%COMP%]{padding:20px;text-align:center}.popup-modal[_ngcontent-%COMP%]   ion-infinite-scroll[_ngcontent-%COMP%]   .infinite-scroll-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #667eea}']}),r})()}}]);