"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5553],{9003:(Tt,ot,x)=>{x.d(ot,{T:()=>Ot});var r=x(467),D=x(1626),G=x(7586),X=x(9350),lt=x(7707);function J(f,I){const _="object"==typeof I;return new Promise((o,s)=>{const g=new lt.Ms({next:M=>{o(M),g.unsubscribe()},error:s,complete:()=>{_?o(I.defaultValue):s(new X.G)}});f.subscribe(g)})}var t=x(3953),w=x(791),O=x(4938),Y=x(177);function Q(f,I){if(1&f&&(t.j41(0,"div",9)(1,"h3",10),t.EFF(2),t.k0s(),t.j41(3,"p",11),t.EFF(4),t.k0s()()),2&f){const _=I.$implicit,o=t.XpG();t.R7$(2),t.JRh(o.getDayInHebrew(_.name)),t.R7$(2),t.JRh(_.date)}}function j(f,I){if(1&f&&(t.j41(0,"div")(1,"p",16),t.EFF(2),t.k0s(),t.j41(3,"p",17),t.EFF(4),t.k0s()()),2&f){const _=t.XpG().$implicit,o=t.XpG().$implicit;t.R7$(2),t.JRh(_.trainings[o].time),t.R7$(2),t.JRh(_.trainings[o].title)}}function K(f,I){1&f&&(t.j41(0,"div")(1,"p",18),t.EFF(2,"-"),t.k0s()())}function $(f,I){if(1&f&&(t.j41(0,"div",14),t.DNE(1,j,5,2,"div",15)(2,K,3,0,"div",15),t.k0s()),2&f){const _=I.$implicit,o=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",_.trainings[o]),t.R7$(),t.Y8G("ngIf",!_.trainings[o])}}function F(f,I){if(1&f&&(t.j41(0,"div",12),t.DNE(1,$,3,2,"div",13),t.k0s()),2&f){const _=t.XpG();t.R7$(),t.Y8G("ngForOf",_.days)}}let N=(()=>{var f;class I{constructor(o,s){this.modalCtrl=o,this.ameliaService=s,this.branch="main",this.days=[],this.hebrewDaysMap={Sunday:"\u05e8\u05d0\u05e9\u05d5\u05df",Monday:"\u05e9\u05e0\u05d9",Tuesday:"\u05e9\u05dc\u05d9\u05e9\u05d9",Wednesday:"\u05e8\u05d1\u05d9\u05e2\u05d9",Thursday:"\u05d7\u05de\u05d9\u05e9\u05d9",Friday:"\u05e9\u05d9\u05e9\u05d9",Saturday:"\u05e9\u05d1\u05ea"},this.daysOfWeekEnglish=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}ngOnInit(){this.loadWeeklyTrainings()}loadWeeklyTrainings(){const o=this.ameliaService.getTrainingsTitles(this.branch);this.days=this.daysOfWeekEnglish.map((s,g)=>({name:s,date:G().day(g).format("DD/MM/YYYY"),trainings:o[s]||[]}))}refreshTrainings(){var o=this;return(0,r.A)(function*(){try{yield o.ameliaService.fetchTitleTrainings("main"),o.loadWeeklyTrainings()}catch(s){console.error("Error refreshing trainings:",s)}try{yield o.ameliaService.fetchTitleTrainings("second"),o.loadWeeklyTrainings()}catch(s){console.error("Error refreshing trainings:",s)}})()}getDayInHebrew(o){return this.hebrewDaysMap[o]||o}getMaxTrainingsLength(){return Math.max(...this.days.map(o=>o.trainings.length),0)}getRange(o){return Array.from({length:o},(s,g)=>g)}getDayName(o){return this.daysOfWeekEnglish[o%7]}getDateByOffset(o){return G().add(o,"days").format("DD/MM/YYYY")}getBranchTitle(){return"main"===this.branch?"\u05e1\u05e0\u05d9\u05e3 \u05e8\u05d0\u05e9\u05d9":"\u05e1\u05e0\u05d9\u05e3 \u05de\u05e9\u05e0\u05d9"}dismiss(){this.modalCtrl.dismiss()}}return(f=I).\u0275fac=function(o){return new(o||f)(t.rXU(w.W3),t.rXU(O.J))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-calendar-popup"]],inputs:{weeklyData:"weeklyData",branch:"branch"},decls:13,vars:2,consts:[[1,"modal-title"],["slot","end"],["fill","clear",3,"click"],[1,"modal-content"],[1,"calendar-table-wrapper"],[1,"calendar-table"],[1,"table-header"],["class","day-header",4,"ngFor","ngForOf"],["class","table-row",4,"ngFor","ngForOf"],[1,"day-header"],[1,"dayName"],[1,"dayDate"],[1,"table-row"],["class","table-cell training-cell",4,"ngFor","ngForOf"],[1,"table-cell","training-cell"],[4,"ngIf"],[1,"training-time"],[1,"training-title"],[1,"empty-slot"]],template:function(o,s){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),t.EFF(3,"\u05d4\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d4\u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return s.dismiss()}),t.EFF(6,"\u05e1\u05d2\u05d5\u05e8"),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"div",4)(9,"div",5)(10,"div",6),t.DNE(11,Q,5,2,"div",7),t.k0s(),t.DNE(12,F,2,1,"div",8),t.k0s()()()),2&o&&(t.R7$(11),t.Y8G("ngForOf",s.days),t.R7$(),t.Y8G("ngForOf",s.getRange(s.getMaxTrainingsLength())))},dependencies:[Y.Sq,Y.bT,w.Jm,w.QW,w.W9,w.eU,w.BC,w.ai],styles:[".modal-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.modal-content[_ngcontent-%COMP%]{--background: #f8f9fa;padding:16px}.calendar-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;padding:8px}.calendar-table[_ngcontent-%COMP%]{display:grid;gap:1px;min-width:700px;background-color:#ddd}.table-header[_ngcontent-%COMP%]{display:contents}.day-header[_ngcontent-%COMP%]{background:#f60;color:#fff;text-align:center;padding:8px;border-radius:6px 6px 0 0;font-size:14px;font-weight:700}.table-row[_ngcontent-%COMP%]{display:contents}.table-cell[_ngcontent-%COMP%]{background:#fff;text-align:center;padding:8px;font-size:14px;min-height:60px}.training-time[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin:0;color:#333}.training-title[_ngcontent-%COMP%]{font-size:12px;margin:4px 0 0;color:#555}.empty-slot[_ngcontent-%COMP%]{color:#ccc;font-size:14px}@media (max-width: 768px){.calendar-table[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(120px,1fr))}.day-header[_ngcontent-%COMP%], .training-time[_ngcontent-%COMP%]{font-size:12px}}.dayName[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.dayDate[_ngcontent-%COMP%]{font-size:12px;margin-top:-20px;text-decoration:none;font-weight:200}"]}),I})();var A=x(9969);let Z=(()=>{var f;class I{constructor(o){this.http=o,this.apiUrl="https://k-studio.co.il/wp-json/training-music/v1"}getSpotifyToken(){return(0,r.A)(function*(){const g=yield fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa("fa073b7f5b3542058bf6f409408d0f9c:5661085454064f63bc8f45d47c1e547c")},body:"grant_type=client_credentials"});if(!g.ok){const T=yield g.text();throw console.error("Spotify Token Error:",T),new Error("Failed to get Spotify token")}return(yield g.json()).access_token})()}searchSongs(o){var s=this;return(0,r.A)(function*(){var g;const M=yield s.getSpotifyToken(),T=yield fetch(`https://api.spotify.com/v1/search?q=${encodeURIComponent(o)}&type=track&limit=10`,{headers:{Authorization:`Bearer ${M}`}});if(!T.ok){const W=yield T.text();throw console.error("Spotify Search Error:",W),new Error("Failed to fetch songs from Spotify")}return(null===(g=(yield T.json()).tracks)||void 0===g?void 0:g.items)||[]})()}getSongsForTraining(o){return this.http.get(`${this.apiUrl}/get-songs/?training_id=${o}`)}addSongToTraining(o,s,g){var M,T;const V={training_id:o,user_id:s,song_id:g.id,song_name:g.name,artist_name:(null===(M=g.artists[0])||void 0===M?void 0:M.name)||"UNKNOWN",artist_image:(null===(T=g.album)||void 0===T||null===(T=T.images[0])||void 0===T?void 0:T.url)||"UNKNOWN"};return this.http.post(`${this.apiUrl}/add-song`,V)}removeSongFromTraining(o,s,g){return this.http.post(`${this.apiUrl}/remove-song/`,{training_id:o,user_id:s,song_id:g})}}return(f=I).\u0275fac=function(o){return new(o||f)(t.KVO(D.Qq))},f.\u0275prov=t.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),I})();var tt=x(4796),dt=x(4341);const _t=["searchInput"],vt=["selectedSongsList"],E=f=>({"fade-out":f});function z(f,I){1&f&&(t.j41(0,"div",13),t.nrm(1,"ion-spinner",14),t.k0s())}function st(f,I){if(1&f){const _=t.RV6();t.j41(0,"ion-button",20),t.bIt("click",function(){t.eBV(_);const s=t.XpG().$implicit,g=t.XpG(2);return t.Njj(g.addSong(s))}),t.nrm(1,"ion-icon",21),t.k0s()}}function ut(f,I){if(1&f&&(t.j41(0,"ion-item",17)(1,"ion-thumbnail",3),t.nrm(2,"img",18),t.k0s(),t.j41(3,"ion-label")(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s()(),t.DNE(8,st,2,0,"ion-button",19),t.k0s()),2&f){const _=I.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("src",(null==_.album||null==_.album.images[0]?null:_.album.images[0].url)||"assets/default-artist.png",t.B4B),t.R7$(3),t.JRh(_.name),t.R7$(2),t.JRh(null==_.artists[0]?null:_.artists[0].name),t.R7$(),t.Y8G("ngIf",!o.isAddedToSelectedSongs(_))}}function Lt(f,I){if(1&f&&(t.j41(0,"ion-list",15),t.DNE(1,ut,9,4,"ion-item",16),t.k0s()),2&f){const _=t.XpG();t.R7$(),t.Y8G("ngForOf",_.searchResults)}}function It(f,I){if(1&f){const _=t.RV6();t.j41(0,"ion-button",25),t.bIt("click",function(){t.eBV(_);const s=t.XpG().$implicit,g=t.XpG();return t.Njj(g.removeSong(s))}),t.nrm(1,"ion-icon",26),t.k0s()}}function Et(f,I){if(1&f&&(t.j41(0,"ion-item",22)(1,"ion-thumbnail",3),t.nrm(2,"img",23),t.k0s(),t.j41(3,"ion-label")(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s()(),t.DNE(8,It,2,0,"ion-button",24),t.k0s()),2&f){const _=I.$implicit,o=t.XpG();t.Y8G("ngClass",t.eq3(5,E,_.isFadingOut)),t.R7$(2),t.Y8G("src",_.artist_image,t.B4B),t.R7$(3),t.JRh(_.song_name),t.R7$(2),t.JRh(_.artist_name),t.R7$(),t.Y8G("ngIf",_.user_id===o.userId)}}let Mt=(()=>{var f;class I{constructor(o,s,g,M,T){this.modalCtrl=o,this.spotifyService=s,this.authService=g,this.toastController=M,this.animationCtrl=T,this.searchQuery="",this.searchResults=[],this.selectedSongs=[],this.userId="",this.errorMessage="",this.isSearching=!1,this.userId=this.authService.getUserID()}ngOnInit(){this.loadTrainingSongs()}searchSongs(){var o=this;return(0,r.A)(function*(){if(o.searchQuery.trim()){o.isSearching=!0;try{o.searchResults=yield o.spotifyService.searchSongs(o.searchQuery)}catch(s){console.error("Search error:",s),o.presentToast("Failed to search songs","danger")}finally{o.isSearching=!1}}else o.searchResults=[]})()}addSong(o){var s,g;const M={song_id:o.id,song_name:o.name,artist_name:(null===(s=o.artists[0])||void 0===s?void 0:s.name)||"Unknown Artist",artist_image:(null===(g=o.album)||void 0===g||null===(g=g.images[0])||void 0===g?void 0:g.url)||"assets/default-artist.png",user_id:this.userId};this.selectedSongs.some(T=>T.song_id===M.song_id)||(this.selectedSongs.push(M),this.animateAddSong()),this.searchResults=this.searchResults.filter(T=>T.id!==o.id),this.spotifyService.addSongToTraining(this.training.id,this.userId,o).subscribe(()=>{this.presentToast("\u05d4\u05e9\u05d9\u05e8 \u05e0\u05d5\u05e1\u05e3 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4","success")},T=>{console.error("Error adding song:",T),this.presentToast("Failed to add song","danger")})}removeSong(o){const s=this.selectedSongs.findIndex(g=>g.song_id===o.song_id);-1!==s&&(this.selectedSongs[s].isFadingOut=!0,setTimeout(()=>{this.selectedSongs=this.selectedSongs.filter(g=>g.song_id!==o.song_id),this.spotifyService.removeSongFromTraining(this.training.id,this.userId,o.song_id).subscribe(()=>{},g=>{console.error("Error removing song:",g),this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})},300))}scrollToBottom(){setTimeout(()=>{this.selectedSongsList.nativeElement.scrollTo({top:this.selectedSongsList.nativeElement.scrollHeight,behavior:"smooth"})},100)}animateAddSong(){setTimeout(()=>{this.selectedSongsList&&(this.animationCtrl.create().addElement(this.selectedSongsList.nativeElement).duration(300).fromTo("opacity","0.5","1").fromTo("transform","scale(0.95)","scale(1)").play(),this.scrollToBottom())},50)}loadTrainingSongs(){this.spotifyService.getSongsForTraining(this.training.id).subscribe(o=>{this.selectedSongs=o.map(s=>({...s,artist_image:s.artist_image||"assets/default-artist.png"})),this.scrollToBottom()},o=>{console.error("Error fetching songs:",o),this.presentToast("Failed to load songs","danger")})}clearSearch(){this.searchQuery="",this.searchResults=[],this.searchInput&&(this.searchInput.nativeElement.value="",this.searchInput.nativeElement.blur())}isAddedToSelectedSongs(o){return this.selectedSongs.some(s=>s.song_id===o.id)}getTotalDuration(){const o=this.selectedSongs.reduce((M,T)=>M+T.duration_ms/1e3,0);return`${Math.floor(o/60)}:${Math.floor(o%60).toString().padStart(2,"0")}`}saveSelection(){this.modalCtrl.dismiss(this.selectedSongs)}closeModal(){this.modalCtrl.dismiss()}presentToast(o,s){var g=this;return(0,r.A)(function*(){yield(yield g.toastController.create({message:o,duration:2500,color:s,position:"bottom"})).present()})()}}return(f=I).\u0275fac=function(o){return new(o||f)(t.rXU(w.W3),t.rXU(Z),t.rXU(tt.u),t.rXU(w.K_),t.rXU(w.Hx))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-music-modal"]],viewQuery:function(o,s){if(1&o&&(t.GBs(_t,5),t.GBs(vt,5)),2&o){let g;t.mGM(g=t.lsd())&&(s.searchInput=g.first),t.mGM(g=t.lsd())&&(s.selectedSongsList=g.first)}},inputs:{training:"training"},decls:18,vars:4,consts:[["searchInput",""],["selectedSongsList",""],[1,"music-modal-container"],["slot","start"],[1,"close-button",3,"click"],["name","close-outline"],[1,"search-container"],["placeholder","\u05d7\u05d9\u05e4\u05d5\u05e9",1,"custom-searchbar",3,"ngModelChange","ionInput","ionClear","ngModel"],["class","search-loading",4,"ngIf"],["class","search-results-list",4,"ngIf"],[1,"selected-songs-container"],[1,"selected-songs-list"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"search-loading"],["name","lines-small","color","primary"],[1,"search-results-list"],["class","fade-in",4,"ngFor","ngForOf"],[1,"fade-in"],[1,"song-thumbnail",3,"src"],["color","primary","fill","clear","class","add-song-btn",3,"click",4,"ngIf"],["color","primary","fill","clear",1,"add-song-btn",3,"click"],["name","add-circle-outline"],[3,"ngClass"],[1,"artist-image",3,"src"],["color","danger","fill","clear","class","remove-song-btn",3,"click",4,"ngIf"],["color","danger","fill","clear",1,"remove-song-btn",3,"click"],["name","trash-outline"]],template:function(o,s){if(1&o){const g=t.RV6();t.j41(0,"div",2)(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",3)(4,"ion-button",4),t.bIt("click",function(){return t.eBV(g),t.Njj(s.closeModal())}),t.nrm(5,"ion-icon",5),t.k0s()(),t.j41(6,"ion-title"),t.EFF(7,"\u05e4\u05dc\u05d9\u05d9\u05dc\u05d9\u05e1\u05d8 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s()()(),t.j41(8,"ion-content")(9,"div",6)(10,"ion-searchbar",7,0),t.mxI("ngModelChange",function(T){return t.eBV(g),t.DH7(s.searchQuery,T)||(s.searchQuery=T),t.Njj(T)}),t.bIt("ionInput",function(){return t.eBV(g),t.Njj(s.searchSongs())})("ionClear",function(){return t.eBV(g),t.Njj(s.clearSearch())}),t.k0s(),t.DNE(12,z,2,0,"div",8),t.k0s(),t.DNE(13,Lt,2,1,"ion-list",9),t.j41(14,"div",10)(15,"ion-list",11,1),t.DNE(17,Et,9,7,"ion-item",12),t.k0s()()()()}2&o&&(t.R7$(10),t.R50("ngModel",s.searchQuery),t.R7$(2),t.Y8G("ngIf",s.isSearching),t.R7$(),t.Y8G("ngIf",s.searchResults.length>0),t.R7$(4),t.Y8G("ngForOf",s.selectedSongs))},dependencies:[Y.YU,Y.Sq,Y.bT,dt.BC,dt.vS,w.Jm,w.QW,w.W9,w.eU,w.iq,w.uz,w.he,w.nf,w.S1,w.w2,w.Zx,w.BC,w.ai,w.Gw],styles:[".music-modal-container[_ngcontent-%COMP%]{--background: #f4f5f8;height:100%;display:flex;flex-direction:column;background:linear-gradient(135deg,#f4f5f8,#e9ecef)}.music-modal-container[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--border-width: 0}.music-modal-container[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{color:#333;transition:transform .2s ease}.music-modal-container[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:active{transform:scale(.9)}.music-modal-container[_ngcontent-%COMP%]   .fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.music-modal-container[_ngcontent-%COMP%]   .fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.95)}}.music-modal-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:1.5em;font-family:Alef;font-weight:700;line-height:20px}.music-modal-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;padding:10px;background-color:#fff}.music-modal-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]{--background: #f0f0f0;transition:all .3s ease}.music-modal-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]:focus{--background: #e0e0e0;box-shadow:0 2px 4px #0000001a}.music-modal-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-loading[_ngcontent-%COMP%]{position:absolute;top:50%;right:20px;transform:translateY(-50%)}.music-modal-container[_ngcontent-%COMP%]   .search-results-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{transition:background-color .3s ease}.music-modal-container[_ngcontent-%COMP%]   .search-results-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:active{background-color:#0000000d}.music-modal-container[_ngcontent-%COMP%]   .search-results-list[_ngcontent-%COMP%]   .song-thumbnail[_ngcontent-%COMP%]{border-radius:8px;transition:transform .2s ease}.music-modal-container[_ngcontent-%COMP%]   .search-results-list[_ngcontent-%COMP%]   .song-thumbnail[_ngcontent-%COMP%]:active{transform:scale(.95)}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;background-color:#fff;box-shadow:0 -4px 6px #0000000d}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background-color:#f8f9fa}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:600;color:#333}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-header[_ngcontent-%COMP%]   .total-duration[_ngcontent-%COMP%]{color:#6c757d;font-size:.9em;background-color:#e9ecef;padding:5px 10px;border-radius:15px}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-list[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow-y:auto;background-color:#fff;scrollbar-width:thin;scrollbar-color:#ccc #f1f3f5}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f3f5;border-radius:10px}.music-modal-container[_ngcontent-%COMP%]   .selected-songs-container[_ngcontent-%COMP%]   .selected-songs-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc;border-radius:10px}.music-modal-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 15px;--inner-padding-end: 15px;margin:5px 0;border-radius:10px;transition:background-color .3s ease}.music-modal-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{--background: #f4f4f4}.music-modal-container[_ngcontent-%COMP%]   .artist-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;box-shadow:0 2px 4px #0000001a}.music-modal-container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.music-modal-container[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]{padding:10px;background-color:#fff;box-shadow:0 -2px 4px #0000001a}.music-modal-container[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]   .save-playlist-btn[_ngcontent-%COMP%]{margin:0;height:50px;--border-radius: 10px;transition:all .3s ease}.music-modal-container[_ngcontent-%COMP%]   ion-footer[_ngcontent-%COMP%]   .save-playlist-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"],data:{animation:[(0,A.hZ)("songListAnimation",[(0,A.kY)(":enter",[(0,A.P)(":enter",[(0,A.iF)({opacity:0,transform:"translateY(20px)"}),(0,A.yc)(50,[(0,A.i0)("300ms ease-out",(0,A.iF)({opacity:1,transform:"translateY(0)"}))])],{optional:!0})]),(0,A.kY)(":leave",[(0,A.P)(":leave",[(0,A.i0)("200ms ease-in",(0,A.iF)({opacity:0,transform:"translateX(-100%)"}))],{optional:!0})])])]}}),I})();var mt=x(3656);const et=["popup"],ct=()=>[1,2,3,4],P=f=>({"background-color":f}),L=(f,I,_,o)=>({"standby-enrolled":f,loading:I,success:_,error:o}),U=(f,I)=>({loading:f,success:I});function pt(f,I){1&f&&(t.j41(0,"ion-segment-button",12)(1,"ion-label"),t.EFF(2,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),t.k0s()())}function nt(f,I){1&f&&(t.j41(0,"ion-segment-button",13)(1,"ion-label"),t.EFF(2,"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"),t.k0s()())}function bt(f,I){if(1&f&&(t.j41(0,"ion-segment-button",18)(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note"),t.EFF(4),t.k0s()()),2&f){const _=I.$implicit,o=t.XpG(2);t.FS9("value",_.date),t.Y8G("ngClass","shalom"===o.selectedFilterAllFav?"custom-underline-shalom":"favorites"===o.selectedFilterAllFav?"custom-underline-favorites":"custom-underline-default"),t.R7$(2),t.JRh(_.day),t.R7$(2),t.JRh(_.formattedDate)}}function St(f,I){if(1&f){const _=t.RV6();t.j41(0,"ion-icon",23),t.bIt("click",function(){t.eBV(_);const s=t.XpG(3);return t.Njj(s.openCalendarPopup())}),t.k0s()}}function zt(f,I){if(1&f){const _=t.RV6();t.j41(0,"div",19)(1,"ion-button",20),t.bIt("click",function(){t.eBV(_);const s=t.XpG(2);return t.Njj(s.toggleFilterDropdown())}),t.nrm(2,"ion-icon",21),t.EFF(3," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s(),t.DNE(4,St,1,0,"ion-icon",22),t.k0s()}if(2&f){const _=t.XpG(2);t.R7$(4),t.Y8G("ngIf",!_.isTrainer)}}function Ct(f,I){if(1&f&&(t.j41(0,"ion-select-option",32),t.EFF(1),t.k0s()),2&f){const _=I.$implicit;t.Y8G("value",_),t.R7$(),t.JRh(_)}}function kt(f,I){if(1&f){const _=t.RV6();t.j41(0,"ion-button",33),t.bIt("click",function(){t.eBV(_);const s=t.XpG(3);return t.Njj(s.resetTypeFilter())}),t.nrm(1,"ion-icon",34),t.k0s()}}function Rt(f,I){if(1&f){const _=t.RV6();t.j41(0,"ion-list",24)(1,"ion-item")(2,"ion-label",25),t.EFF(3,"\u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df"),t.k0s(),t.j41(4,"ion-select",26),t.mxI("ngModelChange",function(s){t.eBV(_);const g=t.XpG(2);return t.DH7(g.selectedType,s)||(g.selectedType=s),t.Njj(s)}),t.bIt("ionChange",function(){t.eBV(_);const s=t.XpG(2);return t.Njj(s.onTypeChange())}),t.DNE(5,Ct,2,2,"ion-select-option",27),t.k0s(),t.DNE(6,kt,2,0,"ion-button",28),t.k0s(),t.j41(7,"ion-item")(8,"ion-label",25),t.EFF(9,"\u05d6\u05de\u05d9\u05e0\u05d5\u05ea"),t.k0s(),t.j41(10,"ion-segment",29),t.mxI("ngModelChange",function(s){t.eBV(_);const g=t.XpG(2);return t.DH7(g.availabilityFilter,s)||(g.availabilityFilter=s),t.Njj(s)}),t.bIt("ionChange",function(){t.eBV(_);const s=t.XpG(2);return t.Njj(s.onFilterChange())}),t.j41(11,"ion-segment-button",30)(12,"ion-label"),t.EFF(13,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(14,"ion-segment-button",31)(15,"ion-label"),t.EFF(16,"\u05d6\u05de\u05d9\u05df \u05d1\u05dc\u05d1\u05d3"),t.k0s()()()()()}if(2&f){const _=t.XpG(2);t.R7$(4),t.R50("ngModel",_.selectedType),t.R7$(),t.Y8G("ngForOf",_.availableTypes),t.R7$(),t.Y8G("ngIf",_.selectedType),t.R7$(4),t.R50("ngModel",_.availabilityFilter)}}function Kt(f,I){if(1&f){const _=t.RV6();t.j41(0,"div")(1,"ion-segment",14),t.mxI("ngModelChange",function(s){t.eBV(_);const g=t.XpG();return t.DH7(g.selectedDay,s)||(g.selectedDay=s),t.Njj(s)}),t.bIt("ionChange",function(s){let g;t.eBV(_);const M=t.XpG();return t.Njj(M.onDayChange(null!==(g=s.detail.value)&&void 0!==g?g:""))}),t.DNE(2,bt,5,4,"ion-segment-button",15),t.k0s(),t.DNE(3,zt,5,1,"div",16)(4,Rt,17,4,"ion-list",17),t.k0s()}if(2&f){const _=t.XpG();t.R7$(),t.R50("ngModel",_.selectedDay),t.R7$(),t.Y8G("ngForOf",_.days),t.R7$(),t.Y8G("ngIf",!_.showSkeleton),t.R7$(),t.Y8G("ngIf",_.showDropdown)}}function Ut(f,I){1&f&&(t.j41(0,"ion-item",37)(1,"ion-thumbnail",38),t.nrm(2,"ion-skeleton-text",39),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",40),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",41),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",42),t.k0s()()()),2&f&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function Pt(f,I){1&f&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",35),t.k0s(),t.DNE(3,Ut,10,4,"ion-item",36),t.k0s()),2&f&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,ct)))}function Dt(f,I){if(1&f&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&f){const _=I.$implicit;t.R7$(),t.SpI(" ",_," ")}}function Nt(f,I){if(1&f&&(t.j41(0,"div",57)(1,"ul"),t.DNE(2,Dt,2,1,"li",58),t.k0s()()),2&f){const _=t.XpG().$implicit;t.R7$(2),t.Y8G("ngForOf",_.current_participants)}}function Ht(f,I){1&f&&(t.qex(0),t.j41(1,"button",59),t.nrm(2,"ion-icon",60),t.EFF(3," \u05e8\u05e9\u05d5\u05dd "),t.k0s(),t.bVm())}function Vt(f,I){1&f&&(t.qex(0),t.EFF(1," \u05e8\u05e9\u05d5\u05dd \u05dc\u05d4\u05de\u05ea\u05e0\u05d4 "),t.bVm())}function Gt(f,I){1&f&&(t.qex(0),t.EFF(1," \u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d4\u05de\u05ea\u05e0\u05d4 "),t.bVm())}function Xt(f,I){1&f&&(t.qex(0),t.nrm(1,"ion-spinner",64),t.bVm())}function Zt(f,I){1&f&&(t.qex(0),t.nrm(1,"ion-icon",60),t.bVm())}function Wt(f,I){1&f&&(t.qex(0),t.nrm(1,"ion-icon",65),t.bVm())}function xt(f,I){if(1&f){const _=t.RV6();t.j41(0,"button",63),t.bIt("click",function(){let s;t.eBV(_);const g=t.XpG(2).$implicit,M=t.XpG();return t.Njj(M.addToStandbyList(null!==(s=null==g?null:g.id)&&void 0!==s?s:0,M.userId,M.userEmail))}),t.DNE(1,Vt,2,0,"ng-container",10)(2,Gt,2,0,"ng-container",10)(3,Xt,2,0,"ng-container",10)(4,Zt,2,0,"ng-container",10)(5,Wt,2,0,"ng-container",10),t.k0s()}if(2&f){const _=t.XpG(2).$implicit,o=t.XpG();t.Y8G("ngClass",t.ziG(7,L,_.isStandbyEnrolled,o.isStandbyLoading&&!_.isStandbyEnrolled,o.isStandbySuccess&&!_.isStandbyEnrolled,_.isError&&!_.isStandbyEnrolled))("disabled",_.isStandbyEnrolled||o.isStandbyLoading||o.isStandbySuccess||_.isError),t.R7$(),t.Y8G("ngIf",_.isStandbyEnrolled),t.R7$(),t.Y8G("ngIf",!(_.isStandbyEnrolled||o.isStandbyLoading||o.isStandbySuccess||_.isError)),t.R7$(),t.Y8G("ngIf",!_.isStandbyEnrolled&&o.isStandbyLoading),t.R7$(),t.Y8G("ngIf",!_.isStandbyEnrolled&&o.isStandbySuccess),t.R7$(),t.Y8G("ngIf",!_.isStandbyEnrolled&&_.isError)}}function Qt(f,I){1&f&&(t.qex(0),t.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4"),t.bVm())}function rt(f,I){1&f&&(t.qex(0),t.nrm(1,"ion-spinner",64),t.bVm())}function Bt(f,I){1&f&&(t.qex(0),t.nrm(1,"ion-icon",60),t.bVm())}function At(f,I){if(1&f){const _=t.RV6();t.j41(0,"button",66),t.bIt("click",function(){t.eBV(_);const s=t.XpG(2).$implicit,g=t.XpG();return t.Njj(g.enrollUser(s))}),t.DNE(1,Qt,2,0,"ng-container",10)(2,rt,2,0,"ng-container",10)(3,Bt,2,0,"ng-container",10),t.k0s()}if(2&f){const _=t.XpG(2).$implicit;t.Y8G("disabled",_.isLoading||_.isSuccess)("ngClass",t.l_i(5,U,_.isLoading,_.isSuccess)),t.R7$(),t.Y8G("ngIf",!_.isLoading&&!_.isSuccess),t.R7$(),t.Y8G("ngIf",_.isLoading),t.R7$(),t.Y8G("ngIf",_.isSuccess)}}function jt(f,I){if(1&f&&(t.qex(0),t.DNE(1,xt,6,12,"button",61)(2,At,4,8,"button",62),t.bVm()),2&f){const _=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",_.booked===_.total_participants),t.R7$(),t.Y8G("ngIf",_.booked<_.total_participants)}}function Ft(f,I){if(1&f){const _=t.RV6();t.j41(0,"div",43)(1,"div",44)(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"ion-icon",45),t.bIt("click",function(){const s=t.eBV(_).$implicit,g=t.XpG();return t.Njj(g.toggleFavorite(s))}),t.k0s(),t.j41(5,"ion-icon",46),t.bIt("click",function(){const s=t.eBV(_).$implicit,g=t.XpG();return t.Njj(g.openMusicModal(s))}),t.k0s()(),t.j41(6,"div",47)(7,"div",48),t.EFF(8),t.nI1(9,"date"),t.k0s(),t.j41(10,"div",49)(11,"div",50),t.nrm(12,"div",51),t.k0s(),t.j41(13,"div",52)(14,"div",53),t.bIt("mouseenter",function(){const s=t.eBV(_).$implicit,g=t.XpG();return t.Njj(g.showParticipantsPopup(s))})("mouseleave",function(){t.eBV(_);const s=t.XpG();return t.Njj(s.hideParticipantsPopup())}),t.EFF(15),t.nrm(16,"ion-icon",54),t.DNE(17,Nt,3,1,"div",55),t.k0s()()()(),t.j41(18,"div",56),t.DNE(19,Ht,4,0,"ng-container",10)(20,jt,3,2,"ng-container",10),t.k0s()()}if(2&f){const _=I.$implicit,o=t.XpG();t.R7$(3),t.JRh(_.title.name),t.R7$(),t.AVh("favorite",_.favorite),t.R7$(4),t.SpI(" ",t.i5U(9,12,_.start_time,"HH:mm")," "),t.R7$(4),t.xc7("width",o.calculateProgress(_)+"%"),t.Y8G("ngStyle",t.eq3(15,P,"shalom"===o.selectedFilterAllFav?"#ff8366":"#59c7cd")),t.R7$(3),t.Lme(" ",_.booked,"/",_.total_participants," "),t.R7$(2),t.Y8G("ngIf",o.isPopupVisible&&o.activeAppointment===_),t.R7$(2),t.Y8G("ngIf",_.isUserBooked),t.R7$(),t.Y8G("ngIf",!_.isUserBooked)}}let Ot=(()=>{var f;class I{get showSkeleton(){return"shalom"===this.selectedFilterAllFav&&this.isShalomLoading||"all"===this.selectedFilterAllFav&&this.isBenYehudaLoading}constructor(o,s,g,M,T,V){this.platform=o,this.toastController=s,this.modalCtrl=g,this.http=M,this.authService=T,this.modalCalendar=V,this.customerID="",this.userEmail="",this.userFavLocation="",this.userRole="",this.showingParticipants=!1,this.isPopupVisible=!1,this.activeAppointment=null,this.selectedFilterAllFav="all",this.selectedType="",this.availabilityFilter="all",this.showDropdown=!1,this.availableTypes=[],this.filteredAppointments=[],this.bookedAppointments=[],this.combinedList=[],this.days=[],this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.availableTimeslots=[],this.unfilteredList=[],this.isLoading=!0,this.isStandbyLoading=!1,this.isStandbySuccess=!1,this.isEnrollLoading=!1,this.isEnrollSuccess=!1,this.showToast=!1,this.toastMessage="",this.toastColor="success",this.errorMessage="",this.currentDateRange=null,this.allAvailableDays=[],this.tabLoadingState=!1,this.benYehudaDays=[],this.shalomDays=[],this.benYehudaAppointments=[],this.shalomAppointments=[],this.benYehudaTimeslots=[],this.shalomTimeslots=[],this.benYehudaLoaded=!1,this.shalomLoaded=!1,this.isShalomLoading=!1,this.isBenYehudaLoading=!0,this.isTrainer=!1,"trainer"===this.authService.getUserRole()&&(this.isTrainer=!0),this.userId=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail(),this.customerID=this.authService.getCustomerID(),this.userFavLocation=this.authService.getUserFavLocation(),this.authService.fetchPackageCustomerId(this.customerID).subscribe({error:W=>{console.error("Error fetching package id",W)}})}ngOnInit(){var o=this;return(0,r.A)(function*(){console.log("selectedTab:",o.selectedFilterAllFav),o.isLoading=!0;try{const s=yield J(o.authService.fetchUserFavLocation());o.userFavLocation=s.favorite_location,"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===o.userFavLocation||"\u05d4\u05db\u05dc"===o.userFavLocation?o.selectedFilterAllFav="all":"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===o.userFavLocation&&(o.selectedFilterAllFav="shalom"),"inactive"===o.userRole?o.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc","danger"):"trial-users"===o.userRole&&o.presentToast("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd, \u05de\u05e9\u05ea\u05de\u05e9 \u05e0\u05d9\u05e1\u05d9\u05d5\u05df","danger"),yield o.loadInitialData()}catch(s){console.error("Error during initialization:",s),o.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05e9\u05d9\u05db\u05ea \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd","danger")}finally{o.isLoading=!1}})()}presentToast(o,s){var g=this;return(0,r.A)(function*(){yield(yield g.toastController.create({message:o,duration:3e3,color:s,position:"bottom"})).present()})()}extractAvailableDays(){const o=["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],s=(new Date).toISOString().split("T")[0],g=this.combinedList.filter(T=>!isNaN(new Date(T.start_time).getTime())).map(T=>new Date(T.start_time).toISOString().split("T")[0]),M=Array.from(new Set(g)).map(T=>{const V=new Date(T);return{date:T,day:o[V.getDay()],formattedDate:`${V.getDate()}.${V.getMonth()+1}`}});M.sort((T,V)=>T.date===s?-1:V.date===s?1:new Date(T.date).getTime()-new Date(V.date).getTime()),"all"===this.selectedFilterAllFav?this.benYehudaDays=M:"shalom"===this.selectedFilterAllFav&&(this.shalomDays=M),this.days="all"===this.selectedFilterAllFav?this.benYehudaDays:this.shalomDays,this.selectedDay=this.days.length>0?this.days[0].date:""}extractAvailableTypes(){const o=new Set(this.filteredAppointments.map(s=>s.title.name));this.availableTypes=Array.from(o)}getAppointmentsForSelectedDay(){return this.combinedList.filter(o=>{const s=G(o.start_time);return s.isValid()&&s.format("YYYY-MM-DD")===this.selectedDay})}loadInitialData(){var o=this;return(0,r.A)(function*(){"all"===o.selectedFilterAllFav?(o.isBenYehudaLoading=!0,setTimeout(()=>{},0)):"shalom"===o.selectedFilterAllFav&&(o.isShalomLoading=!0);try{const s=new Date,g=new Date(s);g.setDate(s.getDate()+20),o.currentDateRange={start:s,end:g};let M=o.userFavLocation;"\u05d4\u05db\u05dc"==o.userFavLocation&&(M="\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"),console.time("fetchTime"),yield o.fetchTrainingsForDateRange(s,g,M),console.timeEnd("fetchTime")}catch(s){console.error("Error loading initial data:",s),yield o.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd","danger")}finally{"all"===o.selectedFilterAllFav?(o.isBenYehudaLoading=!1,setTimeout(()=>{},0)):"shalom"===o.selectedFilterAllFav&&(o.isShalomLoading=!1)}})()}fetchTrainingsForDateRange(o,s,g){var M=this;return(0,r.A)(function*(){if("\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===g&&M.benYehudaLoaded)return M.combinedList=[...M.benYehudaAppointments],M.unfilteredList=[...M.combinedList],void M.updateFilteredAppointments();if("\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===g&&M.shalomLoaded)return M.combinedList=[...M.shalomAppointments],M.unfilteredList=[...M.combinedList],void M.updateFilteredAppointments();const T=M.authService.getUserID(),V=W=>G(W).format("YYYY-MM-DD");try{const W=V(o),ft=`https://k-studio.co.il/wp-json/custom-api/v1/get-trainings?startDate=${W}&endDate=${V(s)}&userID=${T}&location=${encodeURIComponent(g)}`,wt=yield J(M.http.get(ft));for(let at=new Date(o);at<=s;at.setDate(at.getDate()+1)){const yt=V(new Date(at));M.allAvailableDays.includes(yt)||M.allAvailableDays.push(yt)}yield M.combineTimeslotsAndAppointments(wt),"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===g?(M.benYehudaAppointments=[...M.combinedList],M.benYehudaLoaded=!0):"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===g&&(M.shalomAppointments=[...M.combinedList],M.shalomLoaded=!0)}catch(W){throw console.error("Error fetching trainings:",W),W}})()}combineTimeslotsAndAppointments(o){var s=this;return(0,r.A)(function*(){try{const g=o.filter(it=>"timeslot"===it.type),M=o.filter(it=>"appointment"===it.type),T="all"===s.selectedFilterAllFav;T?(s.benYehudaTimeslots=g,s.benYehudaAppointments=M):(s.shalomTimeslots=g,s.shalomAppointments=M),s.combinedList=[...T?s.benYehudaTimeslots:s.shalomTimeslots,...T?s.benYehudaAppointments:s.shalomAppointments],s.combinedList.sort((it,q)=>new Date(it.start_time).getTime()-new Date(q.start_time).getTime()),s.unfilteredList=[...s.combinedList],s.extractAvailableDays();const V=s.authService.getUserFullName(),W=s.combinedList.map(function(){var it=(0,r.A)(function*(q){q.start_time&&!isNaN(Date.parse(q.start_time))?(q.isStandbyEnrolled=q.booked>=q.total_participants&&void 0!==q.id&&(yield s.checkStandbyEnrollment(s.userEmail,q.id)),Array.isArray(q.current_participants)?q.isUserBooked=q.current_participants.some(ft=>ft===V):(console.warn("current_participants is not an array for training:",q),q.isUserBooked=!1)):console.error("Invalid start_time for training:",q)});return function(q){return it.apply(this,arguments)}}());yield Promise.all(W),s.filteredAppointments=[...s.combinedList],console.log("filtered",s.filteredAppointments),s.updateFilteredAppointments()}catch(g){console.error("Error combining timeslots and appointments:",g)}})()}onDayChange(o){this.selectedDay=String(o||""),this.updateFilteredAppointments()}filterFavAll(o){var s=this;return(0,r.A)(function*(){const g=o.detail.value;if(console.log("selectedTab:",s.selectedFilterAllFav),s.combinedList=[],s.filteredAppointments=[],s.days=[],"favorites"===g){s.tabLoadingState=!0;try{const W=[...s.benYehudaAppointments,...s.shalomAppointments],it=[...s.benYehudaTimeslots,...s.shalomTimeslots];s.combinedList=[...it,...W],s.unfilteredList=[...s.combinedList],s.updateFilteredAppointments()}finally{s.tabLoadingState=!1}return}const T={all:"\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4",shalom:"\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"}[g],V="all"===g?s.benYehudaLoaded:s.shalomLoaded;"all"===g?(s.isBenYehudaLoading=!0,setTimeout(()=>{},0)):"shalom"===g&&(s.isShalomLoading=!0);try{if("all"===g?(s.days=s.benYehudaDays,s.benYehudaLoaded&&(s.combinedList=[...s.benYehudaTimeslots,...s.benYehudaAppointments],s.unfilteredList=[...s.combinedList],s.selectedDay=s.benYehudaDays.length>0?s.benYehudaDays[0].date:"",s.updateFilteredAppointments())):"shalom"===g&&(s.days=s.shalomDays,s.shalomLoaded&&(s.combinedList=[...s.shalomTimeslots,...s.shalomAppointments],s.unfilteredList=[...s.combinedList],s.selectedDay=s.shalomDays.length>0?s.shalomDays[0].date:"",console.log("combined List:",s.combinedList),s.updateFilteredAppointments())),!V){const W=new Date,it=new Date;it.setDate(W.getDate()+30),yield s.fetchTrainingsForDateRange(W,it,T)}}finally{"all"===g?s.isBenYehudaLoading=!1:s.isShalomLoading=!1}})()}toggleAvailabilityFilter(){this.availabilityFilter="all"===this.availabilityFilter?"available":"all",this.updateFilteredAppointments()}updateFilteredAppointments(){let o=[...this.unfilteredList];this.selectedDay&&(o=o.filter(s=>G(s.start_time).format("YYYY-MM-DD")===this.selectedDay)),"available"===this.availabilityFilter&&(o=o.filter(s=>s.booked<s.total_participants)),this.selectedType&&(o=o.filter(s=>s.title.name===this.selectedType)),"favorites"===this.selectedFilterAllFav&&(o=o.filter(s=>s.favorite)),o.sort((s,g)=>new Date(s.start_time).getTime()-new Date(g.start_time).getTime()),this.filteredAppointments=[...o],this.extractAvailableTypes()}onFilterChange(){this.updateFilteredAppointments()}onTypeChange(){console.log("Selected type:",this.selectedType),this.updateFilteredAppointments()}resetTypeFilter(){this.selectedType="",this.updateFilteredAppointments()}removePastFavorites(){const o=new Date,g=this.getFavoriteTrainings().filter(M=>{const T=this.combinedList.find(V=>V.id===M);return T&&new Date(T.start_time)>o});this.saveFavoriteTrainings(g)}closeModal(){document.body.classList.remove("no-scroll"),this.modalCtrl.dismiss()}toggleFavorite(o){o.favorite=!o.favorite;const s=this.getFavoriteTrainings();if(o.favorite)s.push(o.id);else{const g=s.indexOf(o.id);g>-1&&s.splice(g,1)}this.saveFavoriteTrainings(s)}getFavoriteTrainings(){const o=localStorage.getItem("favoriteTrainings");return o?JSON.parse(o):[]}saveFavoriteTrainings(o){localStorage.setItem("favoriteTrainings",JSON.stringify(o))}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}calculateProgress(o){if(!o.current_participants||!o.total_participants)return 0;const s=o.current_participants.length/o.total_participants*100;return s>100?100:s}showParticipantsPopup(o){this.activeAppointment=o,this.isPopupVisible=!0}hideParticipantsPopup(){this.activeAppointment=null,this.isPopupVisible=!1}addToStandbyList(o,s,g){this.isStandbyLoading=!0,this.isStandbySuccess=!1,this.http.post("https://k-studio.co.il/wp-json/standby-list/v1/add",{appointment_id:o,customer_id:s,email:g}).subscribe(V=>{console.log("User added to standby list",V),this.isStandbyLoading=!1,this.isStandbySuccess=!0},V=>{console.error("Error adding user to standby list",V),this.isStandbyLoading=!1,this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger")})}checkStandbyEnrollment(o,s){const M=(new D.Nl).set("email",o).set("trainingId",s.toString());return J(this.http.get("https://k-studio.co.il/wp-json/standby-list/v1/check",{params:M})).then(T=>T.isEnrolled).catch(T=>(console.error("Error checking standby enrollment",T),!1))}enrollUser(o){o.isLoading=!0,o.isSuccess=!1,o.isError=!1;let s=o.serviceID;const M=o.start_time.slice(0,16);let T=o.providerId,V=this.authService.getCustomerID(),W=this.authService.getPackageCustomerId();const ft={type:"appointment",serviceId:s,providerId:T,locationId:null,notifyParticipants:0,bookings:[{customerId:V,status:"approved",duration:3600,persons:1,extras:[],customFields:{},utcOffset:-(new Date).getTimezoneOffset(),packageCustomerService:{packageCustomer:{id:W}}}],bookingStart:M,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};console.log("enrollData",ft),this.platform.ready().then(()=>{const wt=JSON.stringify(ft);this.http.post("https://k-studio.co.il/wp-json/wn/v1/bookTrainingNEW",wt,{headers:{"Content-Type":"application/json"}}).subscribe(at=>{var yt,$t;if(null===at.message||null===at.data)return this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4: \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4 \u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4","danger"),o.isError=!0,void(o.isLoading=!1);if(null!==(yt=at.data)&&void 0!==yt&&yt.timeSlotUnavailable)this.presentToast(at.message||"The time slot is unavailable","danger");else if(null!==($t=at.data)&&void 0!==$t&&$t.customerAlreadyBooked)this.presentToast(at.message||"You have already booked this training","success");else if(at.message){o.isSuccess=!0,o.current_participants||(o.current_participants=[]),o.booked+=1;const Jt=`${this.authService.getUserFullName()}`;o.current_participants.push(Jt),o.isUserBooked=!0}else o.isSuccess=!0;o.isLoading=!1,setTimeout(()=>{o.isSuccess=!1},2e3)},at=>{console.error("Enrollment failed",JSON.stringify(at)),o.isLoading=!1,at.error&&at.error.includes('"packageCustomerId" is required for booking')?this.presentToast("\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4 \u05d7\u05d1\u05d9\u05dc\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4","danger"):this.presentToast("\u05e9\u05d2\u05d9\u05d0\u05d4","danger"),o.isError=!0})})}openCalendarPopup(){var o=this;return(0,r.A)(function*(){let s="";"all"===o.selectedFilterAllFav?s="main":"shalom"===o.selectedFilterAllFav&&(s="second"),yield(yield o.modalCalendar.create({component:N,componentProps:{branch:s}})).present()})()}getWeeklyTrainings(){return[]}openMusicModal(o){var s=this;return(0,r.A)(function*(){const g=yield s.modalCtrl.create({component:Mt,componentProps:{training:o}});return g.onDidDismiss().then(M=>{M.data&&console.log("Selected Songs:",M.data)}),yield g.present()})()}}return(f=I).\u0275fac=function(o){return new(o||f)(t.rXU(mt.OD),t.rXU(w.K_),t.rXU(w.W3),t.rXU(D.Qq),t.rXU(tt.u),t.rXU(w.W3))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-trainings"]],viewQuery:function(o,s){if(1&o&&t.GBs(et,5),2&o){let g;t.mGM(g=t.lsd())&&(s.popup=g.first)}},decls:15,vars:6,consts:[["popup",""],[1,"popup-modal-trainings"],[1,"drag-handle"],[1,"content-container"],[1,"sticky-header"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","all","class","header-tab",4,"ngIf"],["value","shalom","class","header-tab segment-button-checked-shalom",4,"ngIf"],["value","favorites",1,"header-tab","segment-button-checked-fav"],[4,"ngIf"],["class","card",4,"ngFor","ngForOf"],["value","all",1,"header-tab"],["value","shalom",1,"header-tab","segment-button-checked-shalom"],["scrollable","","mode","md",1,"days-tabs",3,"ngModelChange","ionChange","ngModel"],["class","custom-tabs",3,"value","ngClass",4,"ngFor","ngForOf"],["class","filter-header",4,"ngIf"],["class","filter-dropdown",4,"ngIf"],[1,"custom-tabs",3,"value","ngClass"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],["name","calendar-outline","class","calendar-icon",3,"click",4,"ngIf"],["name","calendar-outline",1,"calendar-icon",3,"click"],[1,"filter-dropdown"],[2,"text-indent","8px"],["interface","popover","placeholder","\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger","fill","clear",3,"click",4,"ngIf"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","available"],[3,"value"],["color","danger","fill","clear",3,"click"],["name","close-circle"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],[1,"card"],[1,"card-header"],["name","heart-outline",3,"click"],["name","play-circle-outline",3,"click"],[1,"card-content"],[1,"time-date"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress",3,"ngStyle"],[1,"participants-container"],[1,"participants",3,"mouseenter","mouseleave"],["name","people-outline"],["class","participant-popup",4,"ngIf"],[1,"card-footer"],[1,"participant-popup"],[4,"ngFor","ngForOf"],["disabled","",1,"action-button","enrolled-button"],["name","checkmark-circle",1,"success-icon"],["class","action-button",3,"ngClass","disabled","click",4,"ngIf"],["class","action-button",3,"disabled","ngClass","click",4,"ngIf"],[1,"action-button",3,"click","ngClass","disabled"],["name","crescent"],["name","close-circle",1,"error-icon"],[1,"action-button",3,"click","disabled","ngClass"]],template:function(o,s){if(1&o){const g=t.RV6();t.j41(0,"ion-content",1,0),t.nrm(2,"div",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"ion-segment",6),t.mxI("ngModelChange",function(T){return t.eBV(g),t.DH7(s.selectedFilterAllFav,T)||(s.selectedFilterAllFav=T),t.Njj(T)}),t.bIt("ionChange",function(T){return t.eBV(g),t.Njj(s.filterFavAll(T))}),t.DNE(7,pt,3,0,"ion-segment-button",7)(8,nt,3,0,"ion-segment-button",8),t.j41(9,"ion-segment-button",9)(10,"ion-label"),t.EFF(11,"\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd"),t.k0s()()()(),t.DNE(12,Kt,5,4,"div",10)(13,Pt,4,3,"ion-list",10)(14,Ft,21,17,"div",11),t.k0s()()()}2&o&&(t.R7$(6),t.R50("ngModel",s.selectedFilterAllFav),t.R7$(),t.Y8G("ngIf","\u05d1\u05df \u05d9\u05d4\u05d5\u05d3\u05d4"===s.userFavLocation||"\u05d4\u05db\u05dc"===s.userFavLocation),t.R7$(),t.Y8G("ngIf","\u05e9\u05dc\u05d5\u05dd \u05e2\u05dc\u05d9\u05db\u05dd"===s.userFavLocation||"\u05d4\u05db\u05dc"===s.userFavLocation),t.R7$(4),t.Y8G("ngIf",!s.showSkeleton),t.R7$(),t.Y8G("ngIf",s.showSkeleton),t.R7$(),t.Y8G("ngForOf",s.filteredAppointments))},dependencies:[Y.YU,Y.Sq,Y.bT,Y.B3,dt.BC,dt.vS,w.Jm,w.W9,w.iq,w.uz,w.he,w.nf,w.AF,w.JI,w.Gp,w.eP,w.Nm,w.Ip,w.ds,w.w2,w.Zx,w.Je,Y.vh],styles:['@charset "UTF-8";.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#fff}.scrollable-list[_ngcontent-%COMP%]{height:calc(100vh - 130px);overflow-y:auto}.filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative}.calendar-icon[_ngcontent-%COMP%]{position:absolute;left:16px;font-size:24px;top:50%;transform:translateY(-50%)}.filter-button[_ngcontent-%COMP%]{font-size:16px;padding:8px 16px}.training-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin-bottom:20px;width:100%;box-sizing:border-box}.training-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.favorite-icon[_ngcontent-%COMP%]{font-size:24px;color:#5a5a5a}.training-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;margin-top:-30px;color:#333;font-family:Alef}.training-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:-20px;font-family:Alef}.progress-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}ion-progress-bar[_ngcontent-%COMP%]{--progress-background: #E0E0E0;--background: #9B59B6;border-radius:10px;height:10px;flex-grow:1;margin-left:10px}ion-label[_ngcontent-%COMP%]{font-size:2em;color:#333}ion-button[_ngcontent-%COMP%]{font-weight:700;--border-radius: 25px}.segment-tab[_ngcontent-%COMP%]   .days-tabs[_ngcontent-%COMP%]{overflow-x:hidden;--background: #fff;--border-radius: 10px;margin-top:10px}.filter-segment[_ngcontent-%COMP%]{color:red}ion-segment-button[_ngcontent-%COMP%]{--color-checked: #000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}ion-segment-button[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1em;color:#666;font-weight:700;font-family:Alef}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0;--inner-padding-start: 0;--padding-start: 0;--padding-end: 0;padding:0}.header-tab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{display:flex;width:100%}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab[_ngcontent-%COMP%]{transition:all .3s ease}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab.dragging-mode[_ngcontent-%COMP%]{cursor:move;opacity:.7;transform:scale(1.05)}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab[_ngcontent-%COMP%]   .hide-tab-btn[_ngcontent-%COMP%]{margin-left:10px;color:red;cursor:pointer;opacity:.7;transition:opacity .2s}.header-tab[_ngcontent-%COMP%]   segment-tab[_ngcontent-%COMP%]   .header-tab[_ngcontent-%COMP%]   .hide-tab-btn[_ngcontent-%COMP%]:hover{opacity:1}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;background-color:#f0f0f0}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.custom-tabs[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 4px 12px #0000000d;position:relative;--background-activated: transparent;--background-focused: transparent;--background: transparent;font-size:1em;--color-checked: #333;--color: #666;padding-bottom:10px;width:90%;margin-left:10px;--indicator-color: transparent}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.custom-underline-default.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.custom-underline-shalom.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#ff8366;border-radius:12px;transition:all .3s ease}.custom-underline-favorites.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#373737;border-radius:12px;transition:all .3s ease}.segment-button-checked-shalom[_ngcontent-%COMP%]:after{background:#ff8366}.segment-button-checked-fav[_ngcontent-%COMP%]:after{background:#373737}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto auto}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.clear-filter-icon[_ngcontent-%COMP%]{font-size:24px;color:#e74c3c;margin-left:10px;cursor:pointer}.filter-dropdown[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999;--color: #333;--background: #fff;--border-radius: 10px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1)}.popup-modal-trainings[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:10px;height:1px;background-color:transparent;border-radius:2.5px;margin:0 auto 10px}.content-container[_ngcontent-%COMP%]{padding:15px;justify-content:center}ion-content[_ngcontent-%COMP%]{--background: white}ion-tab-bar[_ngcontent-%COMP%]{--background: #fff;--color-selected: #3498db;--color: #666}ion-tab-button[_ngcontent-%COMP%]{--color-selected: #666;--color: #666}.card[_ngcontent-%COMP%]{background-color:#fff;padding:15px;margin:10px 0;border-radius:12px;box-shadow:0 4px 8px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;font-family:Alef;margin-left:auto}.card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;cursor:pointer;margin-left:10px}.card-header[_ngcontent-%COMP%]   ion-icon.favorite[_ngcontent-%COMP%]{color:red}.time-date[_ngcontent-%COMP%]{font-size:14px;color:gray}.segment-button[_ngcontent-%COMP%]:not(.segment-button-checked):after{height:0}.progress-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.progress-bar[_ngcontent-%COMP%]{width:80%;background-color:#e0e0e0;border-radius:8px;height:6px}.progress-default[_ngcontent-%COMP%]{background-color:#59c7cd}.progress-shalom[_ngcontent-%COMP%]{background-color:#ff8366}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:6px;border-radius:8px;background-color:#59c7cd}.participants[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.participants[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:4px}.card-footer[_ngcontent-%COMP%]{margin-top:10px}.action-button[_ngcontent-%COMP%]{width:100%;background-color:#454545;color:#fff;border:none;padding:10px;border-radius:8px;text-align:center;font-size:14px;cursor:pointer;transition:background-color .3s ease}.action-button.loading[_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.action-button.success[_ngcontent-%COMP%]{background-color:#4caf50}.success-icon[_ngcontent-%COMP%]{color:#fff;font-size:14px}ion-spinner[_ngcontent-%COMP%]{height:10px;width:10px}.action-button.full[_ngcontent-%COMP%]{background-color:#757575}.enrolled-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;cursor:not-allowed}.participants-container[_ngcontent-%COMP%]{background-color:#c5c5c563;position:relative;width:50px;border-radius:7px}.participant-popup[_ngcontent-%COMP%]{position:absolute;top:-10px;left:60px;background-color:#fff;border:none;padding:12px;box-shadow:0 8px 16px #00000026;width:180px;z-index:10;border-radius:12px;max-height:200px;overflow-y:auto;transition:opacity .3s ease,transform .3s ease;opacity:0;transform:translateY(-10px)}.participant-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px}.participant-popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.participant-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.participants[_ngcontent-%COMP%]{cursor:pointer;position:relative;justify-content:center}.participants[_ngcontent-%COMP%]:hover{text-decoration:underline}.participants[_ngcontent-%COMP%]:hover   .participant-popup[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.action-button.standby-enrolled[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#757575;cursor:not-allowed}.action-button.error[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff}.action-button[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:14px;color:#fff}']}),I})()},9584:(Tt,ot,x)=>{x.d(ot,{B:()=>K});var r=x(8359);class D extends r.yU{constructor(F,N){super()}schedule(F,N=0){return this}}const G={setInterval($,F,...N){const{delegate:A}=G;return null!=A&&A.setInterval?A.setInterval($,F,...N):setInterval($,F,...N)},clearInterval($){const{delegate:F}=G;return((null==F?void 0:F.clearInterval)||clearInterval)($)},delegate:void 0};var X=x(7908);const J={now:()=>(J.delegate||Date).now(),delegate:void 0};class t{constructor(F,N=t.now){this.schedulerActionCtor=F,this.now=N}schedule(F,N=0,A){return new this.schedulerActionCtor(this,F).schedule(A,N)}}t.now=J.now;const O=new class w extends t{constructor(F,N=t.now){super(F,N),this.actions=[],this._active=!1}flush(F){const{actions:N}=this;if(this._active)return void N.push(F);let A;this._active=!0;do{if(A=F.execute(F.state,F.delay))break}while(F=N.shift());if(this._active=!1,A){for(;F=N.shift();)F.unsubscribe();throw A}}}(class lt extends D{constructor(F,N){super(F,N),this.scheduler=F,this.work=N,this.pending=!1}schedule(F,N=0){var A;if(this.closed)return this;this.state=F;const Z=this.id,tt=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(tt,Z,N)),this.pending=!0,this.delay=N,this.id=null!==(A=this.id)&&void 0!==A?A:this.requestAsyncId(tt,this.id,N),this}requestAsyncId(F,N,A=0){return G.setInterval(F.flush.bind(F,this),A)}recycleAsyncId(F,N,A=0){if(null!=A&&this.delay===A&&!1===this.pending)return N;null!=N&&G.clearInterval(N)}execute(F,N){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const A=this._execute(F,N);if(A)return A;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(F,N){let Z,A=!1;try{this.work(F)}catch(tt){A=!0,Z=tt||new Error("Scheduled action threw falsy error")}if(A)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:F,scheduler:N}=this,{actions:A}=N;this.work=this.state=this.scheduler=null,this.pending=!1,(0,X.o)(A,this),null!=F&&(this.id=this.recycleAsyncId(N,F,null)),this.delay=null,super.unsubscribe()}}});var Q=x(9974),j=x(4360);function K($,F=O){return(0,Q.N)((N,A)=>{let Z=null,tt=null,dt=null;const _t=()=>{if(Z){Z.unsubscribe(),Z=null;const E=tt;tt=null,A.next(E)}};function vt(){const E=dt+$,z=F.now();if(z<E)return Z=this.schedule(void 0,E-z),void A.add(Z);_t()}N.subscribe((0,j._)(A,E=>{tt=E,dt=F.now(),Z||(Z=F.schedule(vt,$),A.add(Z))},()=>{_t(),A.complete()},void 0,()=>{tt=Z=null}))})}},5262:(Tt,ot,x)=>{x.d(ot,{Bu:()=>Ut,Q_:()=>B,_G:()=>ft,w6:()=>wt});var r=x(177),D=x(3953),G=x(6860),X=x(1413),lt=x(8359),w=(x(4402),x(7673),x(7336)),O=x(8141),Y=x(9584),Q=x(5964),j=x(6354),K=x(6697),F=x(4085),N=x(4572),A=x(8793),Z=x(1985),dt=x(9172),_t=x(6977);const E=new Set;let z,st=(()=>{var h;class i{constructor(d,v){this._platform=d,this._nonce=v,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Lt}matchMedia(d){return(this._platform.WEBKIT||this._platform.BLINK)&&function ut(h,i){if(!E.has(h))try{z||(z=document.createElement("style"),i&&z.setAttribute("nonce",i),z.setAttribute("type","text/css"),document.head.appendChild(z)),z.sheet&&(z.sheet.insertRule(`@media ${h} {body{ }}`,0),E.add(h))}catch(l){console.error(l)}}(d,this._nonce),this._matchMedia(d)}}return(h=i).\u0275fac=function(d){return new(d||h)(D.KVO(G.OD),D.KVO(D.BIS,8))},h.\u0275prov=D.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})();function Lt(h){return{matches:"all"===h||""===h,media:h,addListener:()=>{},removeListener:()=>{}}}let It=(()=>{var h;class i{constructor(d,v){this._mediaMatcher=d,this._zone=v,this._queries=new Map,this._destroySubject=new X.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(d){return Et((0,F.FG)(d)).some(k=>this._registerQuery(k).mql.matches)}observe(d){const k=Et((0,F.FG)(d)).map(R=>this._registerQuery(R).observable);let S=(0,N.z)(k);return S=(0,A.x)(S.pipe((0,K.s)(1)),S.pipe(function tt(h){return(0,Q.p)((i,l)=>h<=l)}(1),(0,Y.B)(0))),S.pipe((0,j.T)(R=>{const H={matches:!1,breakpoints:{}};return R.forEach(({matches:gt,query:Yt})=>{H.matches=H.matches||gt,H.breakpoints[Yt]=gt}),H}))}_registerQuery(d){if(this._queries.has(d))return this._queries.get(d);const v=this._mediaMatcher.matchMedia(d),S={observable:new Z.c(R=>{const H=gt=>this._zone.run(()=>R.next(gt));return v.addListener(H),()=>{v.removeListener(H)}}).pipe((0,dt.Z)(v),(0,j.T)(({matches:R})=>({query:d,matches:R})),(0,_t.Q)(this._destroySubject)),mql:v};return this._queries.set(d,S),S}}return(h=i).\u0275fac=function(d){return new(d||h)(D.KVO(st),D.KVO(D.SKi))},h.\u0275prov=D.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})();function Et(h){return h.map(i=>i.split(",")).reduce((i,l)=>i.concat(l)).map(i=>i.trim())}class kt{constructor(i,l){this._letterKeyStream=new X.B,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new X.B,this.selectedItem=this._selectedItem;const d="number"==typeof(null==l?void 0:l.debounceInterval)?l.debounceInterval:200;null!=l&&l.skipPredicate&&(this._skipPredicateFn=l.skipPredicate),this.setItems(i),this._setupKeyHandler(d)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const l=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(l>=w.A&&l<=w.Z||l>=w.f2&&l<=w.bn)&&this._letterKeyStream.next(String.fromCharCode(l))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe((0,O.M)(l=>this._pressedLetters.push(l)),(0,Y.B)(i),(0,Q.p)(()=>this._pressedLetters.length>0),(0,j.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(l=>{for(let k=1;k<this._items.length+1;k++){var d,v;const R=this._items[(this._selectedItemIndex+k)%this._items.length];if((null===(d=this._skipPredicateFn)||void 0===d||!d.call(this,R))&&0===(null===(v=R.getLabel)||void 0===v?void 0:v.call(R).toLocaleUpperCase().trim().indexOf(l))){this._selectedItem.next(R);break}}this._pressedLetters=[]})}}class Rt{constructor(i,l){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=lt.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=d=>d.disabled,this.tabOut=new X.B,this.change=new X.B,i instanceof D.rOR?this._itemChangesSubscription=i.changes.subscribe(d=>this._itemsChanged(d.toArray())):(0,D.Hps)(i)&&(this._effectRef=(0,D.QZP)(()=>this._itemsChanged(i()),{injector:l}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();const l=this._getItemsArray();return this._typeahead=new kt(l,{debounceInterval:"number"==typeof i?i:void 0,skipPredicate:d=>this._skipPredicateFn(d)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(d=>{this.setActiveItem(d)}),this}cancelTypeahead(){var i;return null===(i=this._typeahead)||void 0===i||i.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,l=10){return this._pageUpAndDown={enabled:i,delta:l},this}setActiveItem(i){const l=this._activeItem;this.updateActiveItem(i),this._activeItem!==l&&this.change.next(this._activeItemIndex)}onKeydown(i){var l;const d=i.keyCode,k=["altKey","ctrlKey","metaKey","shiftKey"].every(R=>!i[R]||this._allowedModifierKeys.indexOf(R)>-1);switch(d){case w.wn:return void this.tabOut.next();case w.n6:if(this._vertical&&k){this.setNextItemActive();break}return;case w.i7:if(this._vertical&&k){this.setPreviousItemActive();break}return;case w.LE:if(this._horizontal&&k){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case w.UQ:if(this._horizontal&&k){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case w.yZ:if(this._homeAndEnd&&k){this.setFirstItemActive();break}return;case w.Kp:if(this._homeAndEnd&&k){this.setLastItemActive();break}return;case w.w_:if(this._pageUpAndDown.enabled&&k){const R=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(R>0?R:0,1);break}return;case w.dB:if(this._pageUpAndDown.enabled&&k){const R=this._activeItemIndex+this._pageUpAndDown.delta,H=this._getItemsArray().length;this._setActiveItemByIndex(R<H?R:H-1,-1);break}return;default:var S;return void((k||(0,w.rp)(i,"shiftKey"))&&(null===(S=this._typeahead)||void 0===S||S.handleKey(i)))}null===(l=this._typeahead)||void 0===l||l.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){var l;const d=this._getItemsArray(),v="number"==typeof i?i:d.indexOf(i),k=d[v];this._activeItem=null==k?null:k,this._activeItemIndex=v,null===(l=this._typeahead)||void 0===l||l.setCurrentSelectedItemIndex(v)}destroy(){var i,l,d;this._typeaheadSubscription.unsubscribe(),null===(i=this._itemChangesSubscription)||void 0===i||i.unsubscribe(),null===(l=this._effectRef)||void 0===l||l.destroy(),null===(d=this._typeahead)||void 0===d||d.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const l=this._getItemsArray();for(let d=1;d<=l.length;d++){const v=(this._activeItemIndex+i*d+l.length)%l.length;if(!this._skipPredicateFn(l[v]))return void this.setActiveItem(v)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,l){const d=this._getItemsArray();if(d[i]){for(;this._skipPredicateFn(d[i]);)if(!d[i+=l])return;this.setActiveItem(i)}}_getItemsArray(){return(0,D.Hps)(this._items)?this._items():this._items instanceof D.rOR?this._items.toArray():this._items}_itemsChanged(i){var l;if(null===(l=this._typeahead)||void 0===l||l.setItems(i),this._activeItem){const v=i.indexOf(this._activeItem);var d;v>-1&&v!==this._activeItemIndex&&(this._activeItemIndex=v,null===(d=this._typeahead)||void 0===d||d.setCurrentSelectedItemIndex(v))}}}class Ut extends Rt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}function ft(h){return 0===h.buttons||0===h.detail}function wt(h){const i=h.touches&&h.touches[0]||h.changedTouches&&h.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}var c=function(h){return h[h.NONE=0]="NONE",h[h.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",h[h.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",h}(c||{});const m="cdk-high-contrast-black-on-white",y="cdk-high-contrast-white-on-black",C="cdk-high-contrast-active";let B=(()=>{var h;class i{constructor(d,v){this._platform=d,this._document=v,this._breakpointSubscription=(0,D.WQX)(It).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return c.NONE;const d=this._document.createElement("div");d.style.backgroundColor="rgb(1,2,3)",d.style.position="absolute",this._document.body.appendChild(d);const v=this._document.defaultView||window,k=v&&v.getComputedStyle?v.getComputedStyle(d):null,S=(k&&k.backgroundColor||"").replace(/ /g,"");switch(d.remove(),S){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return c.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return c.BLACK_ON_WHITE}return c.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const d=this._document.body.classList;d.remove(C,m,y),this._hasCheckedHighContrastMode=!0;const v=this.getHighContrastMode();v===c.BLACK_ON_WHITE?d.add(C,m):v===c.WHITE_ON_BLACK&&d.add(C,y)}}}return(h=i).\u0275fac=function(d){return new(d||h)(D.KVO(G.OD),D.KVO(r.qQ))},h.\u0275prov=D.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),i})()},4085:(Tt,ot,x)=>{x.d(ot,{FG:()=>lt,OE:()=>G,he:()=>D,i8:()=>t});var r=x(3953);function D(O){return null!=O&&"false"!=`${O}`}function G(O,Y=0){return function X(O){return!isNaN(parseFloat(O))&&!isNaN(Number(O))}(O)?Number(O):2===arguments.length?Y:0}function lt(O){return Array.isArray(O)?O:[O]}function t(O){return O instanceof r.aKT?O.nativeElement:O}},7336:(Tt,ot,x)=>{x.d(ot,{A:()=>bt,A$:()=>w,FX:()=>J,Fm:()=>lt,Ge:()=>I,Kp:()=>F,LE:()=>tt,UQ:()=>A,W3:()=>t,Z:()=>f,bn:()=>P,dB:()=>$,eg:()=>ce,f2:()=>st,i7:()=>Z,n6:()=>dt,rp:()=>le,t6:()=>j,w_:()=>K,wn:()=>G,yZ:()=>N});const G=9,lt=13,J=16,t=17,w=18,j=32,K=33,$=34,F=35,N=36,A=37,Z=38,tt=39,dt=40,st=48,P=57,bt=65,f=90,I=91,ce=224;function le(te,...se){return se.length?se.some(de=>te[de]):te.altKey||te.shiftKey||te.ctrlKey||te.metaKey}},6860:(Tt,ot,x)=>{x.d(ot,{BQ:()=>Q,Fb:()=>_t,OD:()=>X,v8:()=>vt,vc:()=>dt});var r=x(3953),D=x(177);let G;try{G=typeof Intl<"u"&&Intl.v8BreakIterator}catch{G=!1}let O,X=(()=>{var E;class z{constructor(ut){this._platformId=ut,this.isBrowser=this._platformId?(0,D.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!G)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(E=z).\u0275fac=function(ut){return new(ut||E)(r.KVO(r.Agw))},E.\u0275prov=r.jDH({token:E,factory:E.\u0275fac,providedIn:"root"}),z})();function Q(E){return function Y(){if(null==O&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>O=!0}))}finally{O=O||!1}return O}()?E:!!E.capture}function dt(){let E=typeof document<"u"&&document?document.activeElement:null;for(;E&&E.shadowRoot;){const z=E.shadowRoot.activeElement;if(z===E)break;E=z}return E}function _t(E){return E.composedPath?E.composedPath()[0]:E.target}function vt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},8834:(Tt,ot,x)=>{x.d(ot,{Hl:()=>mt});var r=x(3953),D=x(8820);let mt=(()=>{var et;class ct{}return(et=ct).\u0275fac=function(L){return new(L||et)},et.\u0275mod=r.$C({type:et}),et.\u0275inj=r.G2t({imports:[D.yE,D.pZ,D.yE]}),ct})()},8820:(Tt,ot,x)=>{x.d(ot,{$E:()=>g,yE:()=>Mt,O5:()=>W,pZ:()=>T,ug:()=>o});var r=x(3953),D=x(5262),G=x(177);let Y=(()=>{var a;class n{}return(a=n).\u0275fac=function(m){return new(m||a)},a.\u0275mod=r.$C({type:a}),a.\u0275inj=r.G2t({}),n})();var j=x(6860),K=x(4085);const Et=new r.nKC("mat-sanity-checks",{providedIn:"root",factory:function It(){return!0}});let Mt=(()=>{var a;class n{constructor(m,y,C){this._sanityChecks=y,this._document=C,this._hasDoneGlobalChecks=!1,m._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(m){return!(0,j.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[m])}}return(a=n).\u0275fac=function(m){return new(m||a)(r.KVO(D.Q_),r.KVO(Et,8),r.KVO(G.qQ))},a.\u0275mod=r.$C({type:a}),a.\u0275inj=r.G2t({imports:[Y,Y]}),n})();var rt=function(a){return a[a.FADING_IN=0]="FADING_IN",a[a.VISIBLE=1]="VISIBLE",a[a.FADING_OUT=2]="FADING_OUT",a[a.HIDDEN=3]="HIDDEN",a}(rt||{});class Bt{constructor(n,c,m,y=!1){this._renderer=n,this.element=c,this.config=m,this._animationForciblyDisabledThroughCss=y,this.state=rt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const At=(0,j.BQ)({passive:!0,capture:!0});class jt{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const c=(0,j.Fb)(n);var m;c&&(null===(m=this._events.get(n.type))||void 0===m||m.forEach((y,C)=>{(C===c||C.contains(c))&&y.forEach(B=>B.handleEvent(n))}))}}addHandler(n,c,m,y){const C=this._events.get(c);if(C){const B=C.get(m);B?B.add(y):C.set(m,new Set([y]))}else this._events.set(c,new Map([[m,new Set([y])]])),n.runOutsideAngular(()=>{document.addEventListener(c,this._delegateEventHandler,At)})}removeHandler(n,c,m){const y=this._events.get(n);if(!y)return;const C=y.get(c);C&&(C.delete(m),0===C.size&&y.delete(c),0===y.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,At)))}}const Ft={enterDuration:225,exitDuration:150},f=(0,j.BQ)({passive:!0,capture:!0}),I=["mousedown","touchstart"],_=["mouseup","mouseleave","touchend","touchcancel"];class o{constructor(n,c,m,y){this._target=n,this._ngZone=c,this._platform=y,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,y.isBrowser&&(this._containerElement=(0,K.i8)(m))}fadeInRipple(n,c,m={}){const y=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),C={...Ft,...m.animation};m.centered&&(n=y.left+y.width/2,c=y.top+y.height/2);const B=m.radius||function s(a,n,c){const m=Math.max(Math.abs(a-c.left),Math.abs(a-c.right)),y=Math.max(Math.abs(n-c.top),Math.abs(n-c.bottom));return Math.sqrt(m*m+y*y)}(n,c,y),ht=n-y.left,h=c-y.top,i=C.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=ht-B+"px",l.style.top=h-B+"px",l.style.height=2*B+"px",l.style.width=2*B+"px",null!=m.color&&(l.style.backgroundColor=m.color),l.style.transitionDuration=`${i}ms`,this._containerElement.appendChild(l);const d=window.getComputedStyle(l),k=d.transitionDuration,S="none"===d.transitionProperty||"0s"===k||"0s, 0s"===k||0===y.width&&0===y.height,R=new Bt(this,l,m,S);l.style.transform="scale3d(1, 1, 1)",R.state=rt.FADING_IN,m.persistent||(this._mostRecentTransientRipple=R);let H=null;return!S&&(i||C.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const gt=()=>{H&&(H.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(R)},Yt=()=>this._destroyRipple(R),re=setTimeout(Yt,i+100);l.addEventListener("transitionend",gt),l.addEventListener("transitioncancel",Yt),H={onTransitionEnd:gt,onTransitionCancel:Yt,fallbackTimer:re}}),this._activeRipples.set(R,H),(S||!i)&&this._finishRippleTransition(R),R}fadeOutRipple(n){if(n.state===rt.FADING_OUT||n.state===rt.HIDDEN)return;const c=n.element,m={...Ft,...n.config.animation};c.style.transitionDuration=`${m.exitDuration}ms`,c.style.opacity="0",n.state=rt.FADING_OUT,(n._animationForciblyDisabledThroughCss||!m.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const c=(0,K.i8)(n);!this._platform.isBrowser||!c||c===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=c,I.forEach(m=>{o._eventManager.addHandler(this._ngZone,m,c,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{_.forEach(c=>{this._triggerElement.addEventListener(c,this,f)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===rt.FADING_IN?this._startFadeOutTransition(n):n.state===rt.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){const c=n===this._mostRecentTransientRipple,{persistent:m}=n.config;n.state=rt.VISIBLE,!m&&(!c||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){var c;const m=null!==(c=this._activeRipples.get(n))&&void 0!==c?c:null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=rt.HIDDEN,null!==m&&(n.element.removeEventListener("transitionend",m.onTransitionEnd),n.element.removeEventListener("transitioncancel",m.onTransitionCancel),null!==m.fallbackTimer&&clearTimeout(m.fallbackTimer)),n.element.remove()}_onMousedown(n){const c=(0,D._G)(n),m=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!c&&!m&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!(0,D.w6)(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const c=n.changedTouches;if(c)for(let m=0;m<c.length;m++)this.fadeInRipple(c[m].clientX,c[m].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(n.state===rt.VISIBLE||n.config.terminateOnPointerUp&&n.state===rt.FADING_IN)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(I.forEach(c=>o._eventManager.removeHandler(c,n,this)),this._pointerUpEventsRegistered&&(_.forEach(c=>n.removeEventListener(c,this,f)),this._pointerUpEventsRegistered=!1))}}o._eventManager=new jt;const g=new r.nKC("mat-ripple-global-options");let T=(()=>{var a;class n{}return(a=n).\u0275fac=function(m){return new(m||a)},a.\u0275mod=r.$C({type:a}),a.\u0275inj=r.G2t({imports:[Mt,Mt]}),n})(),W=(()=>{var a;class n{}return(a=n).\u0275fac=function(m){return new(m||a)},a.\u0275mod=r.$C({type:a}),a.\u0275inj=r.G2t({imports:[Mt]}),n})()},2054:(Tt,ot,x)=>{x.d(ot,{Fg:()=>ne});var r=x(3953),X=(x(4085),x(6860),x(8820));x(8359),x(6365),x(8750),x(983),x(3794),x(6648),x(1413),x(1985),x(6354),x(5964),x(9584);let Z=(()=>{var u;class p{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275prov=r.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),p})(),_t=(()=>{var u;class p{}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275mod=r.$C({type:u}),u.\u0275inj=r.G2t({providers:[Z]}),p})();var vt=x(177);let z=(()=>{var u;class p{}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275mod=r.$C({type:u}),u.\u0275inj=r.G2t({imports:[X.yE,X.yE]}),p})();x(5262),x(4402),x(7673),x(7336),x(4341),x(6977);let ne=(()=>{var u;class p{}return(u=p).\u0275fac=function(e){return new(e||u)},u.\u0275mod=r.$C({type:u}),u.\u0275inj=r.G2t({imports:[_t,vt.MD,X.yE,X.pZ,X.O5,z]}),p})()},5911:(Tt,ot,x)=>{x.d(ot,{s5:()=>w});var r=x(3953),D=x(8820);let w=(()=>{var O;class Y{}return(O=Y).\u0275fac=function(j){return new(j||O)},O.\u0275mod=r.$C({type:O}),O.\u0275inj=r.G2t({imports:[D.yE,D.yE]}),Y})()}}]);