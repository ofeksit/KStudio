"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8912],{3632:(kt,et,v)=>{v.d(et,{T:()=>tt});var o=v(467),T=v(7586),G=v(5312),e=v(3953),J=v(3656),S=v(791),$=v(4938),D=v(1626),q=v(4796),Z=v(3931),N=v(177),U=v(4341);const B=["popup"],E=()=>[1,2,3,4],L=(I,M)=>({loading:I,success:M});function O(I,M){1&I&&(e.j41(0,"ion-item",13)(1,"ion-thumbnail",14),e.nrm(2,"ion-skeleton-text",15),e.k0s(),e.j41(3,"ion-label")(4,"h3"),e.nrm(5,"ion-skeleton-text",16),e.k0s(),e.j41(6,"p"),e.nrm(7,"ion-skeleton-text",17),e.k0s(),e.j41(8,"p"),e.nrm(9,"ion-skeleton-text",18),e.k0s()()()),2&I&&(e.R7$(2),e.Y8G("animated",!0),e.R7$(3),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0))}function Y(I,M){1&I&&(e.j41(0,"ion-list")(1,"ion-list-header"),e.nrm(2,"ion-skeleton-text",11),e.k0s(),e.DNE(3,O,10,4,"ion-item",12),e.k0s()),2&I&&(e.R7$(2),e.Y8G("animated",!0),e.R7$(),e.Y8G("ngForOf",e.lJ4(2,E)))}function it(I,M){if(1&I&&(e.j41(0,"ion-segment-button",25)(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-note"),e.EFF(4),e.k0s()()),2&I){const f=M.$implicit;e.FS9("value",f.date),e.R7$(2),e.JRh(f.day),e.R7$(2),e.JRh(f.formattedDate)}}function bt(I,M){if(1&I&&(e.j41(0,"ion-select-option",34),e.EFF(1),e.k0s()),2&I){const f=M.$implicit;e.Y8G("value",f),e.R7$(),e.JRh(f)}}function ft(I,M){if(1&I){const f=e.RV6();e.j41(0,"ion-button",35),e.bIt("click",function(){e.eBV(f);const _=e.XpG(3);return e.Njj(_.resetTypeFilter())}),e.nrm(1,"ion-icon",36),e.k0s()}}function xt(I,M){if(1&I){const f=e.RV6();e.j41(0,"ion-list",26)(1,"ion-item")(2,"ion-label",27),e.EFF(3,"\u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df"),e.k0s(),e.j41(4,"ion-select",28),e.mxI("ngModelChange",function(_){e.eBV(f);const x=e.XpG(2);return e.DH7(x.selectedType,_)||(x.selectedType=_),e.Njj(_)}),e.bIt("ionChange",function(){e.eBV(f);const _=e.XpG(2);return e.Njj(_.onTypeChange())}),e.DNE(5,bt,2,2,"ion-select-option",29),e.k0s(),e.DNE(6,ft,2,0,"ion-button",30),e.k0s(),e.j41(7,"ion-item")(8,"ion-label",27),e.EFF(9,"\u05d6\u05de\u05d9\u05e0\u05d5\u05ea"),e.k0s(),e.j41(10,"ion-segment",31),e.mxI("ngModelChange",function(_){e.eBV(f);const x=e.XpG(2);return e.DH7(x.availabilityFilter,_)||(x.availabilityFilter=_),e.Njj(_)}),e.bIt("ionChange",function(){e.eBV(f);const _=e.XpG(2);return e.Njj(_.onFilterChange())}),e.j41(11,"ion-segment-button",32)(12,"ion-label"),e.EFF(13,"\u05d4\u05db\u05dc"),e.k0s()(),e.j41(14,"ion-segment-button",33)(15,"ion-label"),e.EFF(16,"\u05d6\u05de\u05d9\u05df \u05d1\u05dc\u05d1\u05d3"),e.k0s()()()()()}if(2&I){const f=e.XpG(2);e.R7$(4),e.R50("ngModel",f.selectedType),e.R7$(),e.Y8G("ngForOf",f.availableTypes),e.R7$(),e.Y8G("ngIf",f.selectedType),e.R7$(4),e.R50("ngModel",f.availabilityFilter)}}function k(I,M){if(1&I){const f=e.RV6();e.j41(0,"div")(1,"ion-segment",19),e.mxI("ngModelChange",function(_){e.eBV(f);const x=e.XpG();return e.DH7(x.selectedDay,_)||(x.selectedDay=_),e.Njj(_)}),e.bIt("ionChange",function(){e.eBV(f);const _=e.XpG();return e.Njj(_.onDayChange())}),e.DNE(2,it,5,3,"ion-segment-button",20),e.k0s(),e.j41(3,"div",21)(4,"ion-button",22),e.bIt("click",function(){e.eBV(f);const _=e.XpG();return e.Njj(_.toggleFilterDropdown())}),e.nrm(5,"ion-icon",23),e.EFF(6," \u05e1\u05d9\u05e0\u05d5\u05df "),e.k0s()(),e.DNE(7,xt,17,4,"ion-list",24),e.k0s()}if(2&I){const f=e.XpG();e.R7$(),e.R50("ngModel",f.selectedDay),e.R7$(),e.Y8G("ngForOf",f.days),e.R7$(5),e.Y8G("ngIf",f.showDropdown)}}function j(I,M){if(1&I&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&I){const f=M.$implicit;e.R7$(),e.SpI(" ",f," ")}}function st(I,M){if(1&I&&(e.j41(0,"div",52)(1,"ul"),e.DNE(2,j,2,1,"li",53),e.k0s()()),2&I){const f=e.XpG().$implicit;e.R7$(2),e.Y8G("ngForOf",f.current_participants)}}function ut(I,M){if(1&I){const f=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){e.eBV(f);const _=e.XpG().$implicit,x=e.XpG();return e.Njj(x.enrollUser(_))}),e.EFF(1," \u05d4\u05e8\u05e9\u05de\u05d4 "),e.k0s()}}function Et(I,M){1&I&&(e.qex(0),e.EFF(1,"\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d4\u05de\u05ea\u05e0\u05d4"),e.bVm())}function It(I,M){1&I&&(e.qex(0),e.nrm(1,"ion-spinner",56),e.bVm())}function Tt(I,M){1&I&&(e.qex(0),e.nrm(1,"ion-icon",57),e.bVm())}function wt(I,M){if(1&I){const f=e.RV6();e.j41(0,"button",55),e.bIt("click",function(){let _;e.eBV(f);const x=e.XpG().$implicit,A=e.XpG();return e.Njj(A.addToStandbyList(null!==(_=null==x?null:x.id)&&void 0!==_?_:0,A.userId,A.userEmail))}),e.DNE(1,Et,2,0,"ng-container",9)(2,It,2,0,"ng-container",9)(3,Tt,2,0,"ng-container",9),e.k0s()}if(2&I){const f=e.XpG(2);e.Y8G("disabled",f.isStandbyLoading||f.isStandbySuccess)("ngClass",e.l_i(5,L,f.isStandbyLoading,f.isStandbySuccess)),e.R7$(),e.Y8G("ngIf",!f.isStandbyLoading&&!f.isStandbySuccess),e.R7$(),e.Y8G("ngIf",f.isStandbyLoading),e.R7$(),e.Y8G("ngIf",f.isStandbySuccess)}}function dt(I,M){if(1&I){const f=e.RV6();e.j41(0,"div",37)(1,"div",38)(2,"h3"),e.EFF(3),e.k0s(),e.j41(4,"ion-icon",39),e.bIt("click",function(){const _=e.eBV(f).$implicit,x=e.XpG();return e.Njj(x.toggleFavorite(_))}),e.k0s()(),e.j41(5,"div",40)(6,"div",41),e.EFF(7),e.nI1(8,"date"),e.k0s(),e.j41(9,"div",42)(10,"div",43),e.nrm(11,"div",44),e.k0s(),e.j41(12,"div",45)(13,"div",46),e.bIt("mouseenter",function(){const _=e.eBV(f).$implicit,x=e.XpG();return e.Njj(x.showParticipantsPopup(_))})("mouseleave",function(){e.eBV(f);const _=e.XpG();return e.Njj(_.hideParticipantsPopup())}),e.EFF(14),e.nrm(15,"ion-icon",47),e.DNE(16,st,3,1,"div",48),e.k0s()()()(),e.j41(17,"div",49),e.DNE(18,ut,2,0,"button",50)(19,wt,4,8,"button",51),e.k0s()()}if(2&I){const f=M.$implicit,m=e.XpG();e.R7$(3),e.JRh(f.title.name),e.R7$(),e.AVh("favorite",f.favorite),e.R7$(3),e.SpI(" ",e.i5U(8,11,f.start_time,"HH:mm")," "),e.R7$(4),e.xc7("width",m.calculateProgress(f)+"%"),e.R7$(3),e.Lme(" ",f.booked,"/",f.total_participants," "),e.R7$(2),e.Y8G("ngIf",m.isPopupVisible&&m.activeAppointment===f),e.R7$(2),e.Y8G("ngIf",f.booked<f.total_participants),e.R7$(),e.Y8G("ngIf",f.booked==f.total_participants)}}let tt=(()=>{var I;class M{constructor(m,_,x,A,R,z,V,X){this.platform=m,this.toastController=_,this.ameliaService=x,this.gestureCtrl=A,this.modalCtrl=R,this.http=z,this.authService=V,this.httpA=X,this.selectedFilterAllFav="all",this.selectedType="",this.availabilityFilter="all",this.showDropdown=!1,this.availableTypes=[],this.availableTimeslots=[],this.bookedAppointments=[],this.combinedList=[],this.days=[],this.showingParticipants=!1,this.isPopupVisible=!1,this.activeAppointment=null,this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.userEmail="",this.isLoading=!0,this.filteredAppointments=[],this.unfilteredList=[],this.showToast=!1,this.toastMessage="",this.toastColor="success",this.errorMessage="",this.isStandbyLoading=!1,this.isStandbySuccess=!1,this.userId=this.authService.getUserID(),this.userEmail=this.authService.getUserEmail()}ngOnInit(){var m=this;return(0,o.A)(function*(){"inactive"==m.authService.getUserRole()&&(m.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d8\u05e2\u05d5\u05df \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd,  \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc",m.presentToast(m.errorMessage,"danger")),m.isLoading=!0,m.trainingsByDay=m.ameliaService.getTrainingsTitles(),(!m.trainingsByDay||Object.keys(m.trainingsByDay).every(_=>0===m.trainingsByDay[_].length))&&(yield m.ameliaService.fetchTitleTrainings(),m.trainingsByDay=m.ameliaService.getTrainingsTitles()),Promise.all([m.fetchAvailableTimeslots(),m.fetchBookedAppointments()]).then(()=>{m.combineTimeslotsAndAppointments(),m.unfilteredList=[...m.combinedList],m.selectedDay=m.days.length>0?m.days[0].date:"",m.updateFilteredAppointments();const _=m.getFavoriteTrainings();m.combinedList.forEach(x=>{x.id&&_.includes(x.id)&&(x.favorite=!0)}),m.isLoading=!1}).catch(()=>{m.isLoading=!1})})()}presentToast(m,_){var x=this;return(0,o.A)(function*(){yield(yield x.toastController.create({message:m,duration:3e3,color:_,position:"bottom"})).present()})()}ngAfterViewInit(){setTimeout(()=>{this.gestureCtrl.create({el:this.popup.nativeElement,gestureName:"swipe-to-close",onMove:_=>{_.deltaY>100&&this.modalCtrl.dismiss()}}).enable(!0)})}getServicesByRole(){const _=localStorage.getItem("user_role");return this.http.get(`https://k-studio.co.il/wp-json/angular/v1/get-services/${_||"guest"}`)}fetchAvailableTimeslots(){var m=this;return(0,o.A)(function*(){const _=new Date,x=new Date(_);x.setDate(_.getDate()+20);const A=new Date(_);A.setDate(_.getDate()+7);const R=z=>`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`;return new Promise((z,V)=>{m.getServicesByRole().subscribe(function(){var X=(0,o.A)(function*(at){if(0===at.length)return V("No service IDs found");const ct=at.map(nt=>{const pt=`${G.c.apiBaseUrl}/slots&serviceId=${nt}&page=booking&startDateTime=${R(_)}&endDateTime=${R(x)}`;return m.platform.is("cordova")?m.httpA.get(pt,{},{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}).then(Q=>JSON.parse(Q.data)).catch(Q=>{V(`Error fetching timeslots for service ID ${nt}: ${Q}`)}):m.http.get(pt,{headers:{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}}).toPromise().then(Q=>Q).catch(Q=>{V(`Error fetching timeslots for service ID ${nt}: ${Q}`)})});Promise.all(ct).then(function(){var nt=(0,o.A)(function*(pt){m.availableTimeslots=[];for(const Q of pt)if(Q&&Q.data&&Q.data.slots){const gt=Q.data.slots;for(const vt of Object.keys(gt))for(const lt of Object.keys(gt[vt])){const W=new Date(`${vt}T${lt}`).toISOString(),ot=new Date(`${vt}T${lt}`).toISOString();let rt;rt=new Date(W)<=A?{name:yield m.getAppointmentTitleByDateTime(vt,lt)}:{name:"\u05d0\u05d9\u05de\u05d5\u05df \u05e7\u05d1\u05d5\u05e6\u05ea\u05d9"},m.availableTimeslots.push({start_time:W,end_time:ot,type:"timeslot",title:rt,favorite:!1,current_participants:[],total_participants:8,booked:0})}}z()});return function(pt){return nt.apply(this,arguments)}}()).catch(nt=>V(nt))});return function(at){return X.apply(this,arguments)}}(),X=>V(X))})})()}fetchBookedAppointments(){var m=this;const _=new Date,x=new Date(_);x.setDate(_.getDate()+30);const A=new Date(_);A.setDate(_.getDate()+7);const R=z=>`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`;return new Promise((z,V)=>{this.platform.ready().then(()=>{this.getServicesByRole().subscribe(X=>{const at=`${G.c.apiBaseUrl}/appointments&dates=${R(_)},${R(x)}&page=1&skipServices=1&skipProviders=1`;this.platform.is("cordova")?this.httpA.get(at,{},{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}).then(function(){var ct=(0,o.A)(function*(nt){const Q=JSON.parse(nt.data).data.appointments;console.log("appointments",Q);const gt=new Date,vt=Object.values(Q).flatMap(lt=>lt.appointments.filter(W=>"approved"===W.status&&!1===W.past&&new Date(W.bookingStart)>gt&&X.includes(W.serviceId)).map(function(){var W=(0,o.A)(function*(ot){let rt;return rt=new Date(ot.bookingStart)<=A?yield m.getAppointmentTitleByAppointment(ot):"\u05d0\u05d9\u05de\u05d5\u05df \u05e7\u05d1\u05d5\u05e6\u05ea\u05d9",{id:ot.id,start_time:ot.bookingStart,end_time:ot.bookingEnd,type:"appointment",title:{name:rt},serviceID:ot.serviceId,favorite:!1,current_participants:ot.bookings.filter(ht=>"approved"===ht.status).map(ht=>`${ht.customer.firstName} ${ht.customer.lastName}`),total_participants:8,booked:ot.bookings.filter(ht=>"approved"===ht.status).length,providerId:ot.providerId}});return function(ot){return W.apply(this,arguments)}}()));m.bookedAppointments=yield Promise.all(vt),z()});return function(nt){return ct.apply(this,arguments)}}()).catch(ct=>{V(`Error fetching appointments: ${ct}`)}):this.http.get(at,{headers:{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"}}).toPromise().then(function(){var ct=(0,o.A)(function*(nt){const pt=nt.data.appointments;console.log("appointments",pt);const Q=new Date,gt=Object.values(pt).flatMap(vt=>vt.appointments.filter(lt=>"approved"===lt.status&&!1===lt.past&&new Date(lt.bookingStart)>Q&&X.includes(lt.serviceId)).map(function(){var lt=(0,o.A)(function*(W){let Mt;return Mt=new Date(W.bookingStart)<=A?yield m.getAppointmentTitleByAppointment(W):"\u05d0\u05d9\u05de\u05d5\u05df \u05e7\u05d1\u05d5\u05e6\u05ea\u05d9",{id:W.id,start_time:W.bookingStart,end_time:W.bookingEnd,type:"appointment",title:{name:Mt},serviceID:W.serviceId,favorite:!1,current_participants:W.bookings.filter(rt=>"approved"===rt.status).map(rt=>`${rt.customer.firstName} ${rt.customer.lastName}`),total_participants:8,booked:W.bookings.filter(rt=>"approved"===rt.status).length,providerId:W.providerId}});return function(W){return lt.apply(this,arguments)}}()));m.bookedAppointments=yield Promise.all(gt),z()});return function(nt){return ct.apply(this,arguments)}}()).catch(ct=>{V(`Error fetching appointments: ${ct}`)})},X=>V(X))})})}combineTimeslotsAndAppointments(){this.combinedList=[...this.availableTimeslots,...this.bookedAppointments],this.unfilteredList=[...this.combinedList],this.combinedList=this.combinedList.filter(m=>{const _=new Date(m.start_time),x=new Date(m.end_time);return!isNaN(_.getTime())&&!isNaN(x.getTime())}),this.extractAvailableDays(),this.combinedList.sort((m,_)=>new Date(m.start_time).getTime()-new Date(_.start_time).getTime())}extractAvailableDays(){const m=["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],_=(new Date).toISOString().split("T")[0],x=this.combinedList.filter(A=>{const R=new Date(A.start_time);return!isNaN(R.getTime())}).map(A=>new Date(A.start_time).toISOString().split("T")[0]);this.days=Array.from(new Set(x)).map(A=>{const R=new Date(A);return{date:A,day:m[R.getDay()],formattedDate:`${R.getDate()}.${R.getMonth()+1}`}}),this.days.sort((A,R)=>A.date===_?-1:R.date===_?1:new Date(A.date).getTime()-new Date(R.date).getTime()),this.selectedDay=this.days.length>0?this.days[0].date:""}extractAvailableTypes(){const m=new Set(this.filteredAppointments.map(_=>_.title.name));this.availableTypes=Array.from(m)}getAppointmentsForSelectedDay(){return this.combinedList.filter(m=>{const _=T(m.start_time);return _.isValid()&&_.format("YYYY-MM-DD")===this.selectedDay})}onDayChange(){this.updateFilteredAppointments()}filterFavAll(m){this.selectedFilterAllFav=m.detail.value,this.updateFilteredAppointments()}toggleAvailabilityFilter(){this.availabilityFilter="all"===this.availabilityFilter?"available":"all",this.updateFilteredAppointments()}updateFilteredAppointments(){let m=[...this.unfilteredList];this.selectedDay&&(m=m.filter(_=>T(_.start_time).format("YYYY-MM-DD")===this.selectedDay)),"available"===this.availabilityFilter&&(m=m.filter(_=>_.booked<_.total_participants)),this.selectedType&&(console.log("Applying type filter:",this.selectedType),m=m.filter(_=>_.title.name===this.selectedType)),"favorites"===this.selectedFilterAllFav&&(m=m.filter(_=>_.favorite)),this.filteredAppointments=m,this.extractAvailableTypes()}onFilterChange(){this.updateFilteredAppointments()}onTypeChange(){console.log("Selected type:",this.selectedType),this.updateFilteredAppointments()}resetTypeFilter(){this.selectedType="",this.updateFilteredAppointments()}removePastFavorites(){const m=new Date,x=this.getFavoriteTrainings().filter(A=>{const R=this.combinedList.find(z=>z.id===A);return R&&new Date(R.start_time)>m});this.saveFavoriteTrainings(x)}closeModal(){document.body.classList.remove("no-scroll"),this.modalCtrl.dismiss()}toggleFavorite(m){m.favorite=!m.favorite;const _=this.getFavoriteTrainings();if(m.favorite)_.push(m.id);else{const x=_.indexOf(m.id);x>-1&&_.splice(x,1)}this.saveFavoriteTrainings(_)}getFavoriteTrainings(){const m=localStorage.getItem("favoriteTrainings");return m?JSON.parse(m):[]}saveFavoriteTrainings(m){localStorage.setItem("favoriteTrainings",JSON.stringify(m))}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}calculateProgress(m){if(!m.current_participants||!m.total_participants)return 0;const _=m.current_participants.length/m.total_participants*100;return _>100?100:_}isFull(m){return m.current_participants>=m.total_participants}showParticipantsPopup(m){this.activeAppointment=m,this.isPopupVisible=!0}hideParticipantsPopup(){this.activeAppointment=null,this.isPopupVisible=!1}getAppointmentTitleByAppointment(m){var _=this;return(0,o.A)(function*(){const x=T(m.bookingStart,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"),A=_.getDayFromDate(x.trim()),R=T(m.bookingStart,"YYYY-MM-DD HH:mm:ss").format("HH:mm");if(_.trainingsByDay[A]){const z=_.trainingsByDay[A].find(V=>V.time===R);if(z)return z.title}return"\u05db\u05dc\u05dc\u05d9"})()}getDayFromDate(m){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][T(m,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(m,_){var x=this;return(0,o.A)(function*(){const A=T(m,"YYYY-MM-DD").format("DD/MM/YYYY"),R=x.getDayFromDate(A);if(x.trainingsByDay[R]){const z=x.trainingsByDay[R].find(V=>V.time===_);if(z)return z.title}return"\u05db\u05dc\u05dc\u05d9"})()}addToStandbyList(m,_,x){this.isStandbyLoading=!0,this.isStandbySuccess=!1,this.http.post("https://k-studio.co.il/wp-json/standby-list/v1/add",{appointment_id:m,customer_id:_,email:x}).subscribe(z=>{console.log("User added to standby list",z),this.isStandbyLoading=!1,this.isStandbySuccess=!0,setTimeout(()=>{this.isStandbySuccess=!1},2e3)},z=>{console.error("Error adding user to standby list",z),this.isStandbyLoading=!1,this.presentToast("Error adding user to standby list","danger")})}enrollUser(m){let _=m.serviceID;const A=m.start_time.slice(0,16);console.log(A);let R=m.providerId,z=this.authService.getCustomerID();this.authService.getUserEmail();const at={type:"appointment",serviceId:_,providerId:R,locationId:null,notifyParticipants:0,bookings:[{customerId:z,status:"approved",duration:3600,persons:1,extras:[],customFields:{},packageCustomerService:{packageCustomer:{id:this.authService.getPackageCustomerId()}}}],bookingStart:A};console.log("data",at),this.http.post("/api/appointments",at,{headers:{Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk","Content-Type":"application/json"}}).subscribe(ct=>{console.log("Enrollment successful",ct)},ct=>{console.error("Enrollment failed",ct)})}}return(I=M).\u0275fac=function(m){return new(m||I)(e.rXU(J.OD),e.rXU(S.K_),e.rXU($.J),e.rXU(S.wH),e.rXU(S.W3),e.rXU(D.Qq),e.rXU(q.u),e.rXU(Z.B))},I.\u0275cmp=e.VBU({type:I,selectors:[["app-trainings"]],viewQuery:function(m,_){if(1&m&&e.GBs(B,5),2&m){let x;e.mGM(x=e.lsd())&&(_.popup=x.first)}},decls:16,vars:4,consts:[["popup",""],[1,"popup-modal-trainings"],[1,"drag-handle"],[1,"content-container"],[1,"sticky-header"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","all",1,"header-tab"],["value","favorites",1,"header-tab"],[4,"ngIf"],["class","card",4,"ngFor","ngForOf"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["scrollable","","mode","md",1,"days-tabs",3,"ngModelChange","ionChange","ngModel"],["class","custom-tabs",3,"value",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],["class","filter-dropdown",4,"ngIf"],[1,"custom-tabs",3,"value"],[1,"filter-dropdown"],[2,"text-indent","8px"],["interface","popover","placeholder","\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d0\u05d9\u05de\u05d5\u05df",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger","fill","clear",3,"click",4,"ngIf"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","available"],[3,"value"],["color","danger","fill","clear",3,"click"],["name","close-circle"],[1,"card"],[1,"card-header"],["name","heart-outline",3,"click"],[1,"card-content"],[1,"time-date"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"progress"],[1,"participants-container"],[1,"participants",3,"mouseenter","mouseleave"],["name","people-outline"],["class","participant-popup",4,"ngIf"],[1,"card-footer"],["class","action-button",3,"click",4,"ngIf"],["class","action-button",3,"disabled","ngClass","click",4,"ngIf"],[1,"participant-popup"],[4,"ngFor","ngForOf"],[1,"action-button",3,"click"],[1,"action-button",3,"click","disabled","ngClass"],["name","crescent"],["name","checkmark-circle",1,"success-icon"]],template:function(m,_){if(1&m){const x=e.RV6();e.j41(0,"ion-content",1,0),e.nrm(2,"div",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"ion-segment",6),e.mxI("ngModelChange",function(R){return e.eBV(x),e.DH7(_.selectedFilterAllFav,R)||(_.selectedFilterAllFav=R),e.Njj(R)}),e.bIt("ionChange",function(R){return e.eBV(x),e.Njj(_.filterFavAll(R))}),e.j41(7,"ion-segment-button",7)(8,"ion-label"),e.EFF(9,"\u05d4\u05db\u05dc"),e.k0s()(),e.j41(10,"ion-segment-button",8)(11,"ion-label"),e.EFF(12,"\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd"),e.k0s()()()(),e.DNE(13,Y,4,3,"ion-list",9)(14,k,8,3,"div",9)(15,dt,20,14,"div",10),e.k0s()()()}2&m&&(e.R7$(6),e.R50("ngModel",_.selectedFilterAllFav),e.R7$(7),e.Y8G("ngIf",_.isLoading),e.R7$(),e.Y8G("ngIf",!_.isLoading),e.R7$(),e.Y8G("ngForOf",_.filteredAppointments))},dependencies:[N.YU,N.Sq,N.bT,U.BC,U.vS,S.Jm,S.W9,S.iq,S.uz,S.he,S.nf,S.AF,S.JI,S.Gp,S.eP,S.Nm,S.Ip,S.ds,S.w2,S.Zx,S.Je,N.vh],styles:['.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#fff}.scrollable-list[_ngcontent-%COMP%]{height:calc(100vh - 130px);overflow-y:auto}.training-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin-bottom:20px;width:100%;box-sizing:border-box}.training-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.favorite-icon[_ngcontent-%COMP%]{font-size:24px;color:#5a5a5a}.training-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;margin-top:-30px;color:#333;font-family:Alef}.training-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:-20px;font-family:Alef}.progress-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}ion-progress-bar[_ngcontent-%COMP%]{--progress-background: #E0E0E0;--background: #9B59B6;border-radius:10px;height:10px;flex-grow:1;margin-left:10px}ion-label[_ngcontent-%COMP%]{font-size:2em;color:#333}ion-button[_ngcontent-%COMP%]{font-weight:700;--border-radius: 25px}.segment-tab[_ngcontent-%COMP%]   .days-tabs[_ngcontent-%COMP%]{overflow-x:hidden;--background: #fff;--border-radius: 10px;margin-top:10px}.filter-segment[_ngcontent-%COMP%]{color:red}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}ion-segment-button[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1em;color:#666;font-weight:700;font-family:Alef}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0;--inner-padding-start: 0;--padding-start: 0;--padding-end: 0;padding:0}.header-tab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.custom-tabs[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 4px 12px #0000000d;position:relative;--background-activated: transparent;--background-focused: transparent;--background: transparent;font-size:1em;--color-checked: #333;--color: #666;padding-bottom:10px;width:90%;margin-left:10px;--indicator-color: transparent}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#59c7cd;border-radius:12px;transition:all .3s ease}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto auto}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.clear-filter-icon[_ngcontent-%COMP%]{font-size:24px;color:#e74c3c;margin-left:10px;cursor:pointer}.filter-dropdown[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999;--color: #333;--background: #fff;--border-radius: 10px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1)}.popup-modal-trainings[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a;overflow-y:auto;max-height:100vh}.drag-handle[_ngcontent-%COMP%]{width:10px;height:1px;background-color:transparent;border-radius:2.5px;margin:0 auto 10px}.content-container[_ngcontent-%COMP%]{padding:15px;justify-content:center}ion-content[_ngcontent-%COMP%]{--background: white}ion-tab-bar[_ngcontent-%COMP%]{--background: #fff;--color-selected: #3498db;--color: #666}ion-tab-button[_ngcontent-%COMP%]{--color-selected: #666;--color: #666}.card[_ngcontent-%COMP%]{background-color:#fff;padding:15px;margin:10px 0;border-radius:12px;box-shadow:0 4px 8px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;font-family:Alef}.card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;cursor:pointer}.card-header[_ngcontent-%COMP%]   ion-icon.favorite[_ngcontent-%COMP%]{color:red}.time-date[_ngcontent-%COMP%]{font-size:14px;color:gray}.segment-button[_ngcontent-%COMP%]:not(.segment-button-checked):after{height:0}.progress-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.progress-bar[_ngcontent-%COMP%]{width:80%;background-color:#e0e0e0;border-radius:8px;height:6px}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:6px;border-radius:8px;background-color:#59c7cd}.participants[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.participants[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:4px}.card-footer[_ngcontent-%COMP%]{margin-top:10px}.action-button[_ngcontent-%COMP%]{width:100%;background-color:#454545;color:#fff;border:none;padding:10px;border-radius:8px;text-align:center;font-size:14px;cursor:pointer;transition:background-color .3s ease}.action-button.loading[_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.action-button.success[_ngcontent-%COMP%]{background-color:#4caf50}.success-icon[_ngcontent-%COMP%]{color:#fff;font-size:14px}ion-spinner[_ngcontent-%COMP%]{height:10px;width:10px}.action-button.full[_ngcontent-%COMP%]{background-color:#757575}.participants-container[_ngcontent-%COMP%]{background-color:#c5c5c563;position:relative;width:50px;border-radius:7px}.participant-popup[_ngcontent-%COMP%]{position:absolute;top:-10px;left:60px;background-color:#fff;border:none;padding:12px;box-shadow:0 8px 16px #00000026;width:180px;z-index:10;border-radius:12px;transition:opacity .3s ease,transform .3s ease;opacity:0;transform:translateY(-10px)}.participant-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px}.participant-popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.participant-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.participants[_ngcontent-%COMP%]{cursor:pointer;position:relative;justify-content:center}.participants[_ngcontent-%COMP%]:hover{text-decoration:underline}.participants[_ngcontent-%COMP%]:hover   .participant-popup[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}']}),M})()},5312:(kt,et,v)=>{v.d(et,{c:()=>o});const o={production:!0,apiBaseUrl:"https://k-studio.co.il/wp-admin/admin-ajax.php?action=wpamelia_api&call=/api/v1"}},9584:(kt,et,v)=>{v.d(et,{B:()=>U});var o=v(8359);class T extends o.yU{constructor(E,L){super()}schedule(E,L=0){return this}}const H={setInterval(B,E,...L){const{delegate:O}=H;return null!=O&&O.setInterval?O.setInterval(B,E,...L):setInterval(B,E,...L)},clearInterval(B){const{delegate:E}=H;return((null==E?void 0:E.clearInterval)||clearInterval)(B)},delegate:void 0};var G=v(7908);const J={now:()=>(J.delegate||Date).now(),delegate:void 0};class S{constructor(E,L=S.now){this.schedulerActionCtor=E,this.now=L}schedule(E,L=0,O){return new this.schedulerActionCtor(this,E).schedule(O,L)}}S.now=J.now;const D=new class $ extends S{constructor(E,L=S.now){super(E,L),this.actions=[],this._active=!1}flush(E){const{actions:L}=this;if(this._active)return void L.push(E);let O;this._active=!0;do{if(O=E.execute(E.state,E.delay))break}while(E=L.shift());if(this._active=!1,O){for(;E=L.shift();)E.unsubscribe();throw O}}}(class e extends T{constructor(E,L){super(E,L),this.scheduler=E,this.work=L,this.pending=!1}schedule(E,L=0){var O;if(this.closed)return this;this.state=E;const Y=this.id,it=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(it,Y,L)),this.pending=!0,this.delay=L,this.id=null!==(O=this.id)&&void 0!==O?O:this.requestAsyncId(it,this.id,L),this}requestAsyncId(E,L,O=0){return H.setInterval(E.flush.bind(E,this),O)}recycleAsyncId(E,L,O=0){if(null!=O&&this.delay===O&&!1===this.pending)return L;null!=L&&H.clearInterval(L)}execute(E,L){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const O=this._execute(E,L);if(O)return O;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(E,L){let Y,O=!1;try{this.work(E)}catch(it){O=!0,Y=it||new Error("Scheduled action threw falsy error")}if(O)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:E,scheduler:L}=this,{actions:O}=L;this.work=this.state=this.scheduler=null,this.pending=!1,(0,G.o)(O,this),null!=E&&(this.id=this.recycleAsyncId(L,E,null)),this.delay=null,super.unsubscribe()}}});var Z=v(9974),N=v(4360);function U(B,E=D){return(0,Z.N)((L,O)=>{let Y=null,it=null,bt=null;const ft=()=>{if(Y){Y.unsubscribe(),Y=null;const k=it;it=null,O.next(k)}};function xt(){const k=bt+B,j=E.now();if(j<k)return Y=this.schedule(void 0,k-j),void O.add(Y);ft()}L.subscribe((0,N._)(O,k=>{it=k,bt=E.now(),Y||(Y=E.schedule(xt,B),O.add(Y))},()=>{ft(),O.complete()},void 0,()=>{it=Y=null}))})}},5262:(kt,et,v)=>{v.d(et,{Bu:()=>nt,Q_:()=>P,_G:()=>Zt,w6:()=>Wt});var o=v(177),T=v(3953),H=v(6860),G=v(1413),e=v(8359),$=(v(4402),v(7673),v(7336)),D=v(8141),q=v(9584),Z=v(5964),N=v(6354),U=v(6697),E=v(4085),L=v(4572),O=v(8793),Y=v(1985),bt=v(9172),ft=v(6977);const k=new Set;let j,st=(()=>{var p;class i{constructor(c,b){this._platform=c,this._nonce=b,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Et}matchMedia(c){return(this._platform.WEBKIT||this._platform.BLINK)&&function ut(p,i){if(!k.has(p))try{j||(j=document.createElement("style"),i&&j.setAttribute("nonce",i),j.setAttribute("type","text/css"),document.head.appendChild(j)),j.sheet&&(j.sheet.insertRule(`@media ${p} {body{ }}`,0),k.add(p))}catch(s){console.error(s)}}(c,this._nonce),this._matchMedia(c)}}return(p=i).\u0275fac=function(c){return new(c||p)(T.KVO(H.OD),T.KVO(T.BIS,8))},p.\u0275prov=T.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),i})();function Et(p){return{matches:"all"===p||""===p,media:p,addListener:()=>{},removeListener:()=>{}}}let It=(()=>{var p;class i{constructor(c,b){this._mediaMatcher=c,this._zone=b,this._queries=new Map,this._destroySubject=new G.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(c){return Tt((0,E.FG)(c)).some(y=>this._registerQuery(y).mql.matches)}observe(c){const y=Tt((0,E.FG)(c)).map(F=>this._registerQuery(F).observable);let C=(0,L.z)(y);return C=(0,O.x)(C.pipe((0,U.s)(1)),C.pipe(function it(p){return(0,Z.p)((i,s)=>p<=s)}(1),(0,q.B)(0))),C.pipe((0,N.T)(F=>{const K={matches:!1,breakpoints:{}};return F.forEach(({matches:yt,query:St})=>{K.matches=K.matches||yt,K.breakpoints[St]=yt}),K}))}_registerQuery(c){if(this._queries.has(c))return this._queries.get(c);const b=this._mediaMatcher.matchMedia(c),C={observable:new Y.c(F=>{const K=yt=>this._zone.run(()=>F.next(yt));return b.addListener(K),()=>{b.removeListener(K)}}).pipe((0,bt.Z)(b),(0,N.T)(({matches:F})=>({query:c,matches:F})),(0,ft.Q)(this._destroySubject)),mql:b};return this._queries.set(c,C),C}}return(p=i).\u0275fac=function(c){return new(c||p)(T.KVO(st),T.KVO(T.SKi))},p.\u0275prov=T.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),i})();function Tt(p){return p.map(i=>i.split(",")).reduce((i,s)=>i.concat(s)).map(i=>i.trim())}class X{constructor(i,s){this._letterKeyStream=new G.B,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new G.B,this.selectedItem=this._selectedItem;const c="number"==typeof(null==s?void 0:s.debounceInterval)?s.debounceInterval:200;null!=s&&s.skipPredicate&&(this._skipPredicateFn=s.skipPredicate),this.setItems(i),this._setupKeyHandler(c)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){const s=i.keyCode;i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(s>=$.A&&s<=$.Z||s>=$.f2&&s<=$.bn)&&this._letterKeyStream.next(String.fromCharCode(s))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe((0,D.M)(s=>this._pressedLetters.push(s)),(0,q.B)(i),(0,Z.p)(()=>this._pressedLetters.length>0),(0,N.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(s=>{for(let y=1;y<this._items.length+1;y++){var c,b;const F=this._items[(this._selectedItemIndex+y)%this._items.length];if((null===(c=this._skipPredicateFn)||void 0===c||!c.call(this,F))&&0===(null===(b=F.getLabel)||void 0===b?void 0:b.call(F).toLocaleUpperCase().trim().indexOf(s))){this._selectedItem.next(F);break}}this._pressedLetters=[]})}}class at{constructor(i,s){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=e.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=c=>c.disabled,this.tabOut=new G.B,this.change=new G.B,i instanceof T.rOR?this._itemChangesSubscription=i.changes.subscribe(c=>this._itemsChanged(c.toArray())):(0,T.Hps)(i)&&(this._effectRef=(0,T.QZP)(()=>this._itemsChanged(i()),{injector:s}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();const s=this._getItemsArray();return this._typeahead=new X(s,{debounceInterval:"number"==typeof i?i:void 0,skipPredicate:c=>this._skipPredicateFn(c)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(c=>{this.setActiveItem(c)}),this}cancelTypeahead(){var i;return null===(i=this._typeahead)||void 0===i||i.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,s=10){return this._pageUpAndDown={enabled:i,delta:s},this}setActiveItem(i){const s=this._activeItem;this.updateActiveItem(i),this._activeItem!==s&&this.change.next(this._activeItemIndex)}onKeydown(i){var s;const c=i.keyCode,y=["altKey","ctrlKey","metaKey","shiftKey"].every(F=>!i[F]||this._allowedModifierKeys.indexOf(F)>-1);switch(c){case $.wn:return void this.tabOut.next();case $.n6:if(this._vertical&&y){this.setNextItemActive();break}return;case $.i7:if(this._vertical&&y){this.setPreviousItemActive();break}return;case $.LE:if(this._horizontal&&y){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case $.UQ:if(this._horizontal&&y){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case $.yZ:if(this._homeAndEnd&&y){this.setFirstItemActive();break}return;case $.Kp:if(this._homeAndEnd&&y){this.setLastItemActive();break}return;case $.w_:if(this._pageUpAndDown.enabled&&y){const F=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(F>0?F:0,1);break}return;case $.dB:if(this._pageUpAndDown.enabled&&y){const F=this._activeItemIndex+this._pageUpAndDown.delta,K=this._getItemsArray().length;this._setActiveItemByIndex(F<K?F:K-1,-1);break}return;default:var C;return void((y||(0,$.rp)(i,"shiftKey"))&&(null===(C=this._typeahead)||void 0===C||C.handleKey(i)))}null===(s=this._typeahead)||void 0===s||s.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){var s;const c=this._getItemsArray(),b="number"==typeof i?i:c.indexOf(i),y=c[b];this._activeItem=null==y?null:y,this._activeItemIndex=b,null===(s=this._typeahead)||void 0===s||s.setCurrentSelectedItemIndex(b)}destroy(){var i,s,c;this._typeaheadSubscription.unsubscribe(),null===(i=this._itemChangesSubscription)||void 0===i||i.unsubscribe(),null===(s=this._effectRef)||void 0===s||s.destroy(),null===(c=this._typeahead)||void 0===c||c.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const s=this._getItemsArray();for(let c=1;c<=s.length;c++){const b=(this._activeItemIndex+i*c+s.length)%s.length;if(!this._skipPredicateFn(s[b]))return void this.setActiveItem(b)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,s){const c=this._getItemsArray();if(c[i]){for(;this._skipPredicateFn(c[i]);)if(!c[i+=s])return;this.setActiveItem(i)}}_getItemsArray(){return(0,T.Hps)(this._items)?this._items():this._items instanceof T.rOR?this._items.toArray():this._items}_itemsChanged(i){var s;if(null===(s=this._typeahead)||void 0===s||s.setItems(i),this._activeItem){const b=i.indexOf(this._activeItem);var c;b>-1&&b!==this._activeItemIndex&&(this._activeItemIndex=b,null===(c=this._typeahead)||void 0===c||c.setCurrentSelectedItemIndex(b))}}}class nt extends at{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}function Zt(p){return 0===p.buttons||0===p.detail}function Wt(p){const i=p.touches&&p.touches[0]||p.changedTouches&&p.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}var r=function(p){return p[p.NONE=0]="NONE",p[p.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",p[p.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",p}(r||{});const l="cdk-high-contrast-black-on-white",g="cdk-high-contrast-white-on-black",w="cdk-high-contrast-active";let P=(()=>{var p;class i{constructor(c,b){this._platform=c,this._document=b,this._breakpointSubscription=(0,T.WQX)(It).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return r.NONE;const c=this._document.createElement("div");c.style.backgroundColor="rgb(1,2,3)",c.style.position="absolute",this._document.body.appendChild(c);const b=this._document.defaultView||window,y=b&&b.getComputedStyle?b.getComputedStyle(c):null,C=(y&&y.backgroundColor||"").replace(/ /g,"");switch(c.remove(),C){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return r.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return r.BLACK_ON_WHITE}return r.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const c=this._document.body.classList;c.remove(w,l,g),this._hasCheckedHighContrastMode=!0;const b=this.getHighContrastMode();b===r.BLACK_ON_WHITE?c.add(w,l):b===r.WHITE_ON_BLACK&&c.add(w,g)}}}return(p=i).\u0275fac=function(c){return new(c||p)(T.KVO(H.OD),T.KVO(o.qQ))},p.\u0275prov=T.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),i})()},4085:(kt,et,v)=>{v.d(et,{FG:()=>e,OE:()=>H,he:()=>T,i8:()=>S});var o=v(3953);function T(D){return null!=D&&"false"!=`${D}`}function H(D,q=0){return function G(D){return!isNaN(parseFloat(D))&&!isNaN(Number(D))}(D)?Number(D):2===arguments.length?q:0}function e(D){return Array.isArray(D)?D:[D]}function S(D){return D instanceof o.aKT?D.nativeElement:D}},7336:(kt,et,v)=>{v.d(et,{A:()=>A,A$:()=>$,FX:()=>J,Fm:()=>e,Ge:()=>Lt,Kp:()=>E,LE:()=>it,UQ:()=>O,W3:()=>S,Z:()=>Dt,bn:()=>M,dB:()=>B,eg:()=>ce,f2:()=>st,i7:()=>Y,n6:()=>bt,rp:()=>le,t6:()=>N,w_:()=>U,wn:()=>H,yZ:()=>L});const H=9,e=13,J=16,S=17,$=18,N=32,U=33,B=34,E=35,L=36,O=37,Y=38,it=39,bt=40,st=48,M=57,A=65,Dt=90,Lt=91,ce=224;function le(Kt,...se){return se.length?se.some(de=>Kt[de]):Kt.altKey||Kt.shiftKey||Kt.ctrlKey||Kt.metaKey}},6860:(kt,et,v)=>{v.d(et,{BQ:()=>Z,Fb:()=>ft,OD:()=>G,v8:()=>xt,vc:()=>bt});var o=v(3953),T=v(177);let H;try{H=typeof Intl<"u"&&Intl.v8BreakIterator}catch{H=!1}let D,G=(()=>{var k;class j{constructor(ut){this._platformId=ut,this.isBrowser=this._platformId?(0,T.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!H)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(k=j).\u0275fac=function(ut){return new(ut||k)(o.KVO(o.Agw))},k.\u0275prov=o.jDH({token:k,factory:k.\u0275fac,providedIn:"root"}),j})();function Z(k){return function q(){if(null==D&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>D=!0}))}finally{D=D||!1}return D}()?k:!!k.capture}function bt(){let k=typeof document<"u"&&document?document.activeElement:null;for(;k&&k.shadowRoot;){const j=k.shadowRoot.activeElement;if(j===k)break;k=j}return k}function ft(k){return k.composedPath?k.composedPath()[0]:k.target}function xt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},8834:(kt,et,v)=>{v.d(et,{Hl:()=>dt});var o=v(3953),T=v(8820);let dt=(()=>{var tt;class I{}return(tt=I).\u0275fac=function(f){return new(f||tt)},tt.\u0275mod=o.$C({type:tt}),tt.\u0275inj=o.G2t({imports:[T.yE,T.pZ,T.yE]}),I})()},8820:(kt,et,v)=>{v.d(et,{$E:()=>$t,yE:()=>wt,O5:()=>zt,pZ:()=>Ut,ug:()=>At});var o=v(3953),T=v(5262),H=v(177);let q=(()=>{var n;class a{}return(n=a).\u0275fac=function(l){return new(l||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({}),a})();var N=v(6860),U=v(4085);const Tt=new o.nKC("mat-sanity-checks",{providedIn:"root",factory:function It(){return!0}});let wt=(()=>{var n;class a{constructor(l,g,w){this._sanityChecks=g,this._document=w,this._hasDoneGlobalChecks=!1,l._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(l){return!(0,N.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[l])}}return(n=a).\u0275fac=function(l){return new(l||n)(o.KVO(T.Q_),o.KVO(Tt,8),o.KVO(H.qQ))},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[q,q]}),a})();var mt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(mt||{});class Nt{constructor(a,r,l,g=!1){this._renderer=a,this.element=r,this.config=l,this._animationForciblyDisabledThroughCss=g,this.state=mt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ct=(0,N.BQ)({passive:!0,capture:!0});class Pt{constructor(){this._events=new Map,this._delegateEventHandler=a=>{const r=(0,N.Fb)(a);var l;r&&(null===(l=this._events.get(a.type))||void 0===l||l.forEach((g,w)=>{(w===r||w.contains(r))&&g.forEach(P=>P.handleEvent(a))}))}}addHandler(a,r,l,g){const w=this._events.get(r);if(w){const P=w.get(l);P?P.add(g):w.set(l,new Set([g]))}else this._events.set(r,new Map([[l,new Set([g])]])),a.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,Ct)})}removeHandler(a,r,l){const g=this._events.get(a);if(!g)return;const w=g.get(r);w&&(w.delete(l),0===w.size&&g.delete(r),0===g.size&&(this._events.delete(a),document.removeEventListener(a,this._delegateEventHandler,Ct)))}}const Ft={enterDuration:225,exitDuration:150},Dt=(0,N.BQ)({passive:!0,capture:!0}),Lt=["mousedown","touchstart"],Bt=["mouseup","mouseleave","touchend","touchcancel"];class At{constructor(a,r,l,g){this._target=a,this._ngZone=r,this._platform=g,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,g.isBrowser&&(this._containerElement=(0,U.i8)(l))}fadeInRipple(a,r,l={}){const g=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),w={...Ft,...l.animation};l.centered&&(a=g.left+g.width/2,r=g.top+g.height/2);const P=l.radius||function Rt(n,a,r){const l=Math.max(Math.abs(n-r.left),Math.abs(n-r.right)),g=Math.max(Math.abs(a-r.top),Math.abs(a-r.bottom));return Math.sqrt(l*l+g*g)}(a,r,g),_t=a-g.left,p=r-g.top,i=w.enterDuration,s=document.createElement("div");s.classList.add("mat-ripple-element"),s.style.left=_t-P+"px",s.style.top=p-P+"px",s.style.height=2*P+"px",s.style.width=2*P+"px",null!=l.color&&(s.style.backgroundColor=l.color),s.style.transitionDuration=`${i}ms`,this._containerElement.appendChild(s);const c=window.getComputedStyle(s),y=c.transitionDuration,C="none"===c.transitionProperty||"0s"===y||"0s, 0s"===y||0===g.width&&0===g.height,F=new Nt(this,s,l,C);s.style.transform="scale3d(1, 1, 1)",F.state=mt.FADING_IN,l.persistent||(this._mostRecentTransientRipple=F);let K=null;return!C&&(i||w.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const yt=()=>{K&&(K.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(F)},St=()=>this._destroyRipple(F),re=setTimeout(St,i+100);s.addEventListener("transitionend",yt),s.addEventListener("transitioncancel",St),K={onTransitionEnd:yt,onTransitionCancel:St,fallbackTimer:re}}),this._activeRipples.set(F,K),(C||!i)&&this._finishRippleTransition(F),F}fadeOutRipple(a){if(a.state===mt.FADING_OUT||a.state===mt.HIDDEN)return;const r=a.element,l={...Ft,...a.config.animation};r.style.transitionDuration=`${l.exitDuration}ms`,r.style.opacity="0",a.state=mt.FADING_OUT,(a._animationForciblyDisabledThroughCss||!l.exitDuration)&&this._finishRippleTransition(a)}fadeOutAll(){this._getActiveRipples().forEach(a=>a.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(a=>{a.config.persistent||a.fadeOut()})}setupTriggerEvents(a){const r=(0,U.i8)(a);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,Lt.forEach(l=>{At._eventManager.addHandler(this._ngZone,l,r,this)}))}handleEvent(a){"mousedown"===a.type?this._onMousedown(a):"touchstart"===a.type?this._onTouchStart(a):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Bt.forEach(r=>{this._triggerElement.addEventListener(r,this,Dt)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(a){a.state===mt.FADING_IN?this._startFadeOutTransition(a):a.state===mt.FADING_OUT&&this._destroyRipple(a)}_startFadeOutTransition(a){const r=a===this._mostRecentTransientRipple,{persistent:l}=a.config;a.state=mt.VISIBLE,!l&&(!r||!this._isPointerDown)&&a.fadeOut()}_destroyRipple(a){var r;const l=null!==(r=this._activeRipples.get(a))&&void 0!==r?r:null;this._activeRipples.delete(a),this._activeRipples.size||(this._containerRect=null),a===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),a.state=mt.HIDDEN,null!==l&&(a.element.removeEventListener("transitionend",l.onTransitionEnd),a.element.removeEventListener("transitioncancel",l.onTransitionCancel),null!==l.fallbackTimer&&clearTimeout(l.fallbackTimer)),a.element.remove()}_onMousedown(a){const r=(0,T._G)(a),l=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!l&&(this._isPointerDown=!0,this.fadeInRipple(a.clientX,a.clientY,this._target.rippleConfig))}_onTouchStart(a){if(!this._target.rippleDisabled&&!(0,T.w6)(a)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const r=a.changedTouches;if(r)for(let l=0;l<r.length;l++)this.fadeInRipple(r[l].clientX,r[l].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(a=>{!a.config.persistent&&(a.state===mt.VISIBLE||a.config.terminateOnPointerUp&&a.state===mt.FADING_IN)&&a.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const a=this._triggerElement;a&&(Lt.forEach(r=>At._eventManager.removeHandler(r,a,this)),this._pointerUpEventsRegistered&&(Bt.forEach(r=>a.removeEventListener(r,this,Dt)),this._pointerUpEventsRegistered=!1))}}At._eventManager=new Pt;const $t=new o.nKC("mat-ripple-global-options");let Ut=(()=>{var n;class a{}return(n=a).\u0275fac=function(l){return new(l||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[wt,wt]}),a})(),zt=(()=>{var n;class a{}return(n=a).\u0275fac=function(l){return new(l||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[wt]}),a})()},2054:(kt,et,v)=>{v.d(et,{Fg:()=>qt});var o=v(3953),G=(v(4085),v(6860),v(8820));v(8359),v(6365),v(8750),v(983),v(3794),v(6648),v(1413),v(1985),v(6354),v(5964),v(9584);let Y=(()=>{var d;class u{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return(d=u).\u0275fac=function(t){return new(t||d)},d.\u0275prov=o.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),u})(),ft=(()=>{var d;class u{}return(d=u).\u0275fac=function(t){return new(t||d)},d.\u0275mod=o.$C({type:d}),d.\u0275inj=o.G2t({providers:[Y]}),u})();var xt=v(177);let j=(()=>{var d;class u{}return(d=u).\u0275fac=function(t){return new(t||d)},d.\u0275mod=o.$C({type:d}),d.\u0275inj=o.G2t({imports:[G.yE,G.yE]}),u})();v(5262),v(4402),v(7673),v(7336),v(4341),v(6977);let qt=(()=>{var d;class u{}return(d=u).\u0275fac=function(t){return new(t||d)},d.\u0275mod=o.$C({type:d}),d.\u0275inj=o.G2t({imports:[ft,xt.MD,G.yE,G.pZ,G.O5,j]}),u})()},5911:(kt,et,v)=>{v.d(et,{s5:()=>$});var o=v(3953),T=v(8820);let $=(()=>{var D;class q{}return(D=q).\u0275fac=function(N){return new(N||D)},D.\u0275mod=o.$C({type:D}),D.\u0275inj=o.G2t({imports:[T.yE,T.yE]}),q})()}}]);