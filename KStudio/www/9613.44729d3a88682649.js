"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9613],{9613:(yt,w,d)=>{d.r(w),d.d(w,{HomePageModule:()=>Mt});var h=d(177),M=d(4341),A=d(2054),T=d(8834),R=d(5911),s=d(791),t=d(3953),F=d(8820);let Y=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[F.yE,h.MD,F.yE]}),i})();var D=d(5559),g=d(467),L=d(8132);function H(n,i){if(1&n&&(t.j41(0,"ion-item"),t.nrm(1,"ion-icon",2),t.j41(2,"ion-label")(3,"h2",3),t.EFF(4),t.k0s(),t.j41(5,"p",4),t.EFF(6),t.k0s()()()),2&n){const o=i.$implicit;t.R7$(4),t.JRh(o.title),t.R7$(2),t.JRh(o.description)}}let X=(()=>{var n;class i{constructor(e){this.modalCtrl=e,this.notifications=[{title:"\u05db\u05d5\u05ea\u05e8\u05ea \u05d4\u05d5\u05d3\u05e2\u05d4 1",description:"\u05d6\u05d4 \u05d4\u05ea\u05d9\u05d0\u05d5\u05e8 \u05e9\u05dc \u05d4\u05d5\u05d3\u05e2\u05d4 \u05e8\u05d0\u05e9\u05d5\u05e0\u05d4."},{title:"\u05db\u05d5\u05ea\u05e8\u05ea \u05d4\u05d5\u05d3\u05e2\u05d4 2",description:"\u05d6\u05d4 \u05d4\u05ea\u05d9\u05d0\u05d5\u05e8 \u05e9\u05dc \u05d4\u05d5\u05d3\u05e2\u05d4 \u05e9\u05e0\u05d9\u05d9\u05d4."},{title:"\u05db\u05d5\u05ea\u05e8\u05ea \u05d4\u05d5\u05d3\u05e2\u05d4 3",description:"\u05d6\u05d4 \u05d4\u05ea\u05d9\u05d0\u05d5\u05e8 \u05e9\u05dc \u05d4\u05d5\u05d3\u05e2\u05d4 \u05e9\u05dc\u05d9\u05e9\u05d9\u05ea."}]}dismiss(){this.modalCtrl.dismiss()}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(s.W3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-notification-popup"]],decls:3,vars:1,consts:[[1,"notification-popup-content"],[4,"ngFor","ngForOf"],["name","megaphone-outline","slot","start"],[1,"notification-title"],[1,"notification-desc"]],template:function(e,a){1&e&&(t.j41(0,"ion-content",0)(1,"ion-list"),t.DNE(2,H,7,2,"ion-item",1),t.k0s()()),2&e&&(t.R7$(2),t.Y8G("ngForOf",a.notifications))},dependencies:[h.Sq,s.W9,s.iq,s.uz,s.he,s.nf],styles:[".notification-popup-content[_ngcontent-%COMP%]{background-color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;padding:20px;box-shadow:0 -5px 20px #0003}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{height:50vh;top:auto;bottom:0;border-top-left-radius:20px;border-top-right-radius:20px;transition:height .3s ease-in-out}.notification-title[_ngcontent-%COMP%]{color:#3a3a3a;font-family:Alef;font-size:1.5em}.notification-desc[_ngcontent-%COMP%]{color:#000;font-family:Alef;font-size:1em}.notification-popup[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .4s ease-out}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}"]}),i})();var V=d(3632),C=d(7586),v=d(1626),W=d(1985),S=d(6354),O=d(9437),I=d(7673),J=d(5312),Q=d(3656),K=d(3931),y=d(4796);let Z=(()=>{var n;class i{constructor(e,a,r,c){this.platform=e,this.httpA=a,this.http=r,this.authService=c,this.headers=new v.Lr({"Content-Type":"application/json",Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"})}getLast60DaysAppointmentsForUser(){const e=new Date,a=this.formatDate(new Date(e.setDate(e.getDate()+30))),r=this.formatDate(new Date(e.setDate(e.getDate()-60))),c=`${J.c.apiBaseUrl}/appointments&dates=${r},${a}&skipServices=1&skipProviders=1`,l=this.authService.getUserEmail(),p={Amelia:"C7YZnwLJ90FF42GOCkEFT9z856v6r5SQ2QWpdhGBexQk"};return new W.c(u=>{this.platform.ready().then(()=>{this.platform.is("cordova")?this.httpA.get(c,{},p).then(m=>{var b;const f=(null===(b=JSON.parse(m.data).data)||void 0===b?void 0:b.appointments)||{};let E=[];for(const P in f)f.hasOwnProperty(P)&&Array.isArray(f[P].appointments)&&f[P].appointments.forEach(_=>{_.bookings&&Array.isArray(_.bookings)&&_.bookings.forEach(x=>{var k;if((null===(k=x.customer)||void 0===k?void 0:k.email)===l){x.googleCalendarEventId=_.googleCalendarEventId;const Dt={..._,matchedBooking:x,userBookingStatus:x.status};E.push(Dt)}})});u.next(E),u.complete()}).catch(m=>{u.error(`Error fetching appointments: ${m}`)}):u.error("Cordova is not available. Please run on a device or emulator.")})})}fetchAvailablePackageSlots(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/package-purchases/${e}`,{}).pipe((0,S.T)(r=>{if(r&&r.data&&r.data.length>0){const c=r.data[0].packages;if(c&&c.length>0){const l=c[0].purchases;if(l&&l.length>0){const p=l[0].purchase[0].available,m=new Date(l[0].purchased);return m.setDate(m.getDate()+30),{availableSlots:p,expiryDate:`${m.getDate().toString().padStart(2,"0")}/${(m.getMonth()+1).toString().padStart(2,"0")}/${m.getFullYear()}`}}}}return{availableSlots:0,expiryDate:""}}),(0,O.W)(r=>(console.error("API Error:",r),(0,I.of)({availableSlots:0,expiryDate:""}))))}fetchUserPurchases(e){return this.http.get(`https://k-studio.co.il/wp-json/wn/v1/user-purchases/${e}`,{}).pipe((0,S.T)(r=>(r.forEach(c=>{c.invoice_link||(c.invoice_link="")}),r||[])),(0,O.W)(r=>(console.error("Error fetching user purchases:",r),(0,I.of)([]))))}cancelBooking(e){return this.http.post(`https://k-studio.co.il/wp-json/wn/v1/cancel-booking/${e}`,{})}formatDate(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}}return(n=i).\u0275fac=function(e){return new(e||n)(t.KVO(Q.OD),t.KVO(K.B),t.KVO(v.Qq),t.KVO(y.u))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();var q=d(4938);const tt=["popup"],et=()=>[1,2,3,4];function nt(n,i){if(1&n&&(t.j41(0,"p",12),t.EFF(1),t.k0s()),2&n){const o=t.XpG(2);t.R7$(),t.Lme(" \u05e0\u05d5\u05ea\u05e8\u05d5 ",o.slotsLeft," \u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05d1\u05d7\u05d1\u05d9\u05dc\u05d4 \u25cf \u05ea\u05d5\u05e7\u05e3: ",o.nextRenewalDate," ")}}function at(n,i){if(1&n&&(t.j41(0,"div"),t.DNE(1,nt,2,2,"p",11),t.k0s()),2&n){const o=t.XpG();t.R7$(),t.Y8G("ngIf",null!==o.slotsLeft&&o.nextRenewalDate)}}function ot(n,i){1&n&&(t.j41(0,"ion-item",15)(1,"ion-thumbnail",16),t.nrm(2,"ion-skeleton-text",17),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.nrm(5,"ion-skeleton-text",18),t.k0s(),t.j41(6,"p"),t.nrm(7,"ion-skeleton-text",19),t.k0s(),t.j41(8,"p"),t.nrm(9,"ion-skeleton-text",20),t.k0s()()()),2&n&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function it(n,i){1&n&&(t.j41(0,"ion-list")(1,"ion-list-header"),t.nrm(2,"ion-skeleton-text",13),t.k0s(),t.DNE(3,ot,10,4,"ion-item",14),t.k0s()),2&n&&(t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",t.lJ4(2,et)))}function rt(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",24)(1,"ion-button",25),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.toggleFilterDropdown())}),t.nrm(2,"ion-icon",26),t.EFF(3," \u05e1\u05d9\u05e0\u05d5\u05df "),t.k0s()()}}function st(n,i){if(1&n){const o=t.RV6();t.j41(0,"ion-list",27)(1,"ion-item")(2,"ion-label",28),t.EFF(3,"\u05d4\u05e6\u05d2"),t.k0s(),t.j41(4,"ion-segment",29),t.mxI("ngModelChange",function(a){t.eBV(o);const r=t.XpG(2);return t.DH7(r.availabilityFilter,a)||(r.availabilityFilter=a),t.Njj(a)}),t.bIt("ionChange",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.onFilterChange())}),t.j41(5,"ion-segment-button",30)(6,"ion-label",31),t.EFF(7,"\u05d4\u05db\u05dc"),t.k0s()(),t.j41(8,"ion-segment-button",32)(9,"ion-label",31),t.nrm(10,"ion-icon",33),t.k0s()(),t.j41(11,"ion-segment-button",34)(12,"ion-label",31),t.nrm(13,"ion-icon",35),t.k0s()()()()()}if(2&n){const o=t.XpG(2);t.R7$(4),t.R50("ngModel",o.availabilityFilter)}}function ct(n,i){1&n&&t.nrm(0,"ion-icon",41)}function lt(n,i){if(1&n){const o=t.RV6();t.j41(0,"ion-card",36),t.bIt("click",function(){const a=t.eBV(o).$implicit,r=t.XpG(2);return t.Njj("approved"===a.userBookingStatus?r.showActions(a):null)}),t.j41(1,"ion-card-header")(2,"div",37),t.nrm(3,"ion-icon",38),t.DNE(4,ct,1,0,"ion-icon",39),t.k0s(),t.j41(5,"ion-label",40)(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"date"),t.nI1(11,"date"),t.k0s()()()()}if(2&n){const o=i.$implicit,e=t.XpG(2);t.R7$(3),t.Y8G("name",e.getStatusIcon(o.userBookingStatus))("color",e.getStatusColor(o.userBookingStatus)),t.R7$(),t.Y8G("ngIf","approved"==o.userBookingStatus),t.R7$(3),t.JRh(o.title),t.R7$(2),t.Lme("",t.i5U(10,6,o.bookingStart,"shortDate")," | ",t.i5U(11,9,o.bookingStart,"HH:mm")," ")}}function dt(n,i){if(1&n&&(t.j41(0,"div"),t.DNE(1,rt,4,0,"div",21)(2,st,14,1,"ion-list",22),t.j41(3,"ion-list"),t.DNE(4,lt,12,12,"ion-card",23),t.k0s()()),2&n){const o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.isLoading),t.R7$(),t.Y8G("ngIf",o.showDropdown),t.R7$(2),t.Y8G("ngForOf",o.filteredAppointments)}}function pt(n,i){if(1&n){const o=t.RV6();t.j41(0,"ion-card",36),t.bIt("click",function(){const a=t.eBV(o).$implicit,r=t.XpG(2);return t.Njj(r.downloadInvoice(a))}),t.j41(1,"ion-card-header")(2,"div",37),t.nrm(3,"ion-icon",38)(4,"ion-icon",41),t.k0s(),t.j41(5,"ion-label",40)(6,"h2"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.k0s()()()()}if(2&n){const o=i.$implicit,e=t.XpG(2);t.R7$(3),t.Y8G("name",e.getStatusIcon(o.status))("color",e.getStatusColor(o.status)),t.R7$(4),t.SpI("\u05d4\u05d6\u05de\u05e0\u05d4 \u05de\u05e1' ",o.orderNumber,""),t.R7$(2),t.JRh(o.products[0].name)}}function ut(n,i){if(1&n&&(t.j41(0,"div")(1,"ion-list"),t.DNE(2,pt,10,4,"ion-card",23),t.k0s()()),2&n){const o=t.XpG();t.R7$(2),t.Y8G("ngForOf",o.userPurchases)}}let mt=(()=>{var n;class i{constructor(e,a,r,c,l,p,u,m){this.gestureCtrl=e,this.modalCtrl=a,this.actionSheetCtrl=r,this.profileService=c,this.authService=l,this.http=p,this.toastController=u,this.ameliaService=m,this.userRole="",this.userPhoto="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",this.userEmail="",this.userID="",this.customerID="",this.knownTrainingTypes=["\u05e4\u05d9\u05dc\u05d0\u05d8\u05d9\u05e1","\u05d9\u05d5\u05d2\u05d4","\u05d0\u05d9\u05de\u05d5\u05df \u05db\u05d5\u05d7","Parallel 15","Spinning","TRX","Booty&ABS","All In","HiiT","POWER",""],this.selectedTab="trainings",this.isLoading=!0,this.errorMessage="",this.availabilityFilter="",this.showDropdown=!1,this.selectedType="",this.userAppointments=[],this.filteredAppointments=[],this.unfilteredAppointments=[],this.userPurchases=[],this.userName=this.authService.getUserFullName(),this.userRole=this.translateUserRole(this.authService.getUserRole()),this.customerID=this.authService.getCustomerID(),this.userID=this.authService.getUserID()}ngOnInit(){var e=this;return(0,g.A)(function*(){e.profileService.fetchAvailablePackageSlots(e.customerID).subscribe(({availableSlots:r,expiryDate:c})=>{e.slotsLeft=r,e.nextRenewalDate=c},r=>{console.error("Error fetching available slots and expiry date:",r),e.slotsLeft=0,e.nextRenewalDate=""}),e.trainingsByDay=e.ameliaService.getTrainingsTitles(),(!e.trainingsByDay||Object.keys(e.trainingsByDay).every(r=>0===e.trainingsByDay[r].length))&&(yield e.ameliaService.fetchTitleTrainings(),e.trainingsByDay=e.ameliaService.getTrainingsTitles());const a=localStorage.getItem("userFilterChoice");a&&(e.availabilityFilter=a),e.authService.fetchUserRole().subscribe(r=>{e.authService.storeUserRole(r.roles[0]),e.userRole=e.translateUserRole(r.roles[0])}),e.loadUserAppointmentsLast60Days(),e.updateFilteredAppointments()})()}presentToast(e,a){var r=this;return(0,g.A)(function*(){yield(yield r.toastController.create({message:e,duration:3e3,color:a,position:"bottom"})).present()})()}loadUserAppointmentsLast60Days(){var e=this;this.isLoading=!0,this.profileService.getLast60DaysAppointmentsForUser().subscribe(function(){var a=(0,g.A)(function*(r){const c=[];for(const l of r)if(l.matchedBooking){l.userBookingStatus=l.userBookingStatus;const m=C(l.bookingStart).format("YYYY-MM-DD"),b=C(l.bookingStart).format("HH:mm"),j=e.getAppointmentTitleByDateTime(m,b).then(f=>{l.title=f||"\u05db\u05dc\u05dc\u05d9"}).catch(f=>{console.error("Error fetching appointment title:",f),l.title="\u05db\u05dc\u05dc\u05d9"});c.push(j)}yield Promise.all(c),e.userAppointments=r.sort((l,p)=>C(p.bookingStart).diff(C(l.bookingStart))),e.filteredAppointments=[...e.userAppointments],e.updateFilteredAppointments(),e.isLoading=!1});return function(r){return a.apply(this,arguments)}}(),a=>{this.isLoading=!1,console.error("Error loading appointments:",a)})}getDayFromDate(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][C(e,"DD/MM/YYYY").toDate().getDay()]}getAppointmentTitleByDateTime(e,a){var r=this;return(0,g.A)(function*(){const c=C(e,"YYYY-MM-DD").format("DD/MM/YYYY"),l=r.getDayFromDate(c);if(r.trainingsByDay[l]){const p=r.trainingsByDay[l].find(u=>u.time===a);if(p)return p.title}return"NONE"})()}translateUserRole(e){return"author"===e?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea":"administrator"===e?"\u05de\u05e0\u05d4\u05dc":"activesubscription"===e?"\u05de\u05e0\u05d5\u05d9 \u05e4\u05e2\u05d9\u05dc":"trainer"===e?"\u05de\u05d0\u05de\u05df":"team"===e?"\u05e6\u05d5\u05d5\u05ea":"trial-users"===e?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea \u05e0\u05d9\u05e1\u05d9\u05d5\u05df":"inactive"===e?"\u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc\u05d4":"personal"===e?"\u05de\u05ea\u05d0\u05de\u05e0\u05ea \u05d0\u05d9\u05e9\u05d9\u05ea":""}checksUserPackage(){}ngAfterViewInit(){this.gestureCtrl.create({el:this.popup.nativeElement,gestureName:"swipe-to-close",onMove:a=>{a.deltaY>100&&this.modalCtrl.dismiss()}}).enable(!0)}closePopup(){this.modalCtrl.dismiss()}showActions(e){var a=this;return(0,g.A)(function*(){yield(yield a.actionSheetCtrl.create({header:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea",buttons:[{text:"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d0\u05d9\u05de\u05d5\u05df",role:"destructive",icon:"close-circle-outline",handler:()=>{a.cancelBooking(e.matchedBooking.id)}},{text:"\u05ea\u05d6\u05de\u05d5\u05df \u05de\u05d7\u05d3\u05e9",icon:"time-outline",handler:()=>{console.log("Reschedule training:",e)}},{text:"\u05e1\u05d2\u05d5\u05e8",icon:"close",role:"cancel"}]})).present()})()}downloadInvoice(e){e.invoice_link?window.open(e.invoice_link,"_blank"):(console.error("No invoice link available for this order."),this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e4\u05d9\u05e7 \u05d7\u05e9\u05d1\u05d5\u05e0\u05d9\u05ea \u05d1\u05e2\u05d1\u05d5\u05e8 \u05d4\u05d6\u05de\u05e0\u05d4 \u05d6\u05d5.",this.presentToast(this.errorMessage,"danger"))}getStatusIcon(e){switch(e){case"approved":case"completed":return"checkmark-circle-outline";case"canceled":case"cancelled":return"close-circle-outline";case"pending":return"time-outline";case"refunded":return"cash-outline";default:return"alert-circle-outline"}}getStatusColor(e){switch(e){case"approved":case"completed":return"success";case"canceled":case"cancelled":return"danger";case"pending":case"refunded":return"warning";default:return"medium"}}translateStatus(e){switch(e){case"approved":return"\u05de\u05d0\u05d5\u05e9\u05e8";case"cancelled":return"\u05d1\u05d5\u05d8\u05dc";case"pending":return"\u05de\u05de\u05ea\u05d9\u05df";default:return"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2"}}cancelBooking(e){this.profileService.cancelBooking(e).subscribe(a=>{a.data.cancelBookingUnavailable?(this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4",this.presentToast(this.errorMessage,"danger")):(this.errorMessage="\u05d4\u05d0\u05d9\u05de\u05d5\u05df \u05d1\u05d5\u05d8\u05dc \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4",this.presentToast(this.errorMessage,"success"),console.log("data in cancelling",a))},a=>{this.errorMessage="\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d1\u05d8\u05dc \u05d0\u05d9\u05de\u05d5\u05df \u05d6\u05d4, \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea",this.presentToast(this.errorMessage,"danger"),console.error("Error occurred while canceling the booking",a)})}showSettings(){var e=this;return(0,g.A)(function*(){yield(yield e.actionSheetCtrl.create({header:"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea",buttons:[{text:"\u05d4\u05ea\u05e0\u05ea\u05e7",role:"destructive",icon:"log-out-outline",handler:()=>{e.authService.logout(),e.modalCtrl.dismiss(),window.location.reload(),console.log("Logged out")}},{text:"\u05e1\u05d2\u05d5\u05e8",icon:"close",role:"cancel"}]})).present()})()}loadUserPurchases(){this.profileService.fetchUserPurchases(this.userID).subscribe(e=>{console.log("purchases",e),this.userPurchases=e})}onTabChange(e){this.selectedTab=e.detail.value,"purchases"==this.selectedTab&&this.loadUserPurchases()}toggleFilterDropdown(){this.showDropdown=!this.showDropdown}onFilterChange(){this.updateFilteredAppointments(),localStorage.setItem("userFilterChoice",this.availabilityFilter)}updateFilteredAppointments(){let e=[...this.userAppointments];"approved"===this.availabilityFilter?e=e.filter(a=>"approved"===a.userBookingStatus):"cancelled"===this.availabilityFilter&&(e=e.filter(a=>"canceled"===a.userBookingStatus)),this.filteredAppointments=e}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(s.wH),t.rXU(s.W3),t.rXU(s.GD),t.rXU(Z),t.rXU(y.u),t.rXU(v.Qq),t.rXU(s.K_),t.rXU(q.J))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-profile-popup"]],viewQuery:function(e,a){if(1&e&&t.GBs(tt,5),2&e){let r;t.mGM(r=t.lsd())&&(a.popup=r.first)}},decls:22,vars:8,consts:[["popup",""],[1,"popup-modal"],[1,"drag-handle"],[1,"profile-section"],["alt","User Avatar",1,"avatar",3,"src"],["name","settings-outline",1,"settings-icon",3,"click"],[4,"ngIf"],[1,"header-tabs"],["mode","md",1,"segment-tab",3,"ngModelChange","ionChange","ngModel"],["value","trainings",1,"header-tab"],["value","purchases",1,"header-tab"],["class","packageInfo",4,"ngIf"],[1,"packageInfo"],[2,"width","80px",3,"animated"],["lines","none","class","skeleton-item",4,"ngFor","ngForOf"],["lines","none",1,"skeleton-item"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],["class","filter-header",4,"ngIf"],["class","filter-dropdown",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"filter-header"],["fill","outline",1,"filter-button",3,"click"],["name","options-outline","slot","start"],[1,"filter-dropdown"],[2,"text-indent","8px"],[3,"ngModelChange","ionChange","ngModel"],["value","all",1,"sub-label-segment"],[1,"sub-label"],["value","approved",1,"sub-label-segment"],["name","checkmark-circle-outline","slot","start","color","success"],["value","cancelled",1,"sub-label-segment"],["name","close-circle-outline","slot","start","color","danger"],[3,"click"],[1,"icon-container"],[1,"status-icon",3,"name","color"],["name","chevron-forward-outline","class","arrow-icon",4,"ngIf"],[1,"training-details"],["name","chevron-forward-outline",1,"arrow-icon"]],template:function(e,a){if(1&e){const r=t.RV6();t.j41(0,"ion-content",1,0),t.nrm(2,"div",2),t.j41(3,"div",3),t.nrm(4,"img",4),t.j41(5,"h2"),t.EFF(6),t.k0s(),t.j41(7,"p"),t.EFF(8),t.k0s(),t.j41(9,"ion-icon",5),t.bIt("click",function(){return t.eBV(r),t.Njj(a.showSettings())}),t.k0s()(),t.DNE(10,at,2,1,"div",6),t.j41(11,"div",7)(12,"ion-segment",8),t.mxI("ngModelChange",function(l){return t.eBV(r),t.DH7(a.selectedTab,l)||(a.selectedTab=l),t.Njj(l)}),t.bIt("ionChange",function(l){return t.eBV(r),t.Njj(a.onTabChange(l))}),t.j41(13,"ion-segment-button",9)(14,"ion-label"),t.EFF(15,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),t.k0s()(),t.j41(16,"ion-segment-button",10)(17,"ion-label"),t.EFF(18,"\u05e8\u05db\u05d9\u05e9\u05d5\u05ea"),t.k0s()()()(),t.DNE(19,it,4,3,"ion-list",6)(20,dt,5,3,"div",6)(21,ut,3,1,"div",6),t.k0s()}2&e&&(t.R7$(4),t.Y8G("src",a.userPhoto,t.B4B),t.R7$(2),t.JRh(a.userName),t.R7$(2),t.JRh(a.userRole),t.R7$(2),t.Y8G("ngIf",a.nextRenewalDate),t.R7$(2),t.R50("ngModel",a.selectedTab),t.R7$(7),t.Y8G("ngIf",a.isLoading),t.R7$(),t.Y8G("ngIf","trainings"===a.selectedTab),t.R7$(),t.Y8G("ngIf","purchases"===a.selectedTab))},dependencies:[h.Sq,h.bT,M.BC,M.vS,s.Jm,s.b_,s.ME,s.W9,s.iq,s.uz,s.he,s.nf,s.AF,s.Gp,s.eP,s.ds,s.Zx,s.Je,h.vh],styles:['.popup-modal[_ngcontent-%COMP%]{height:80vh;border-top-left-radius:20px;border-top-right-radius:20px;background-color:#fff;padding:10px;box-shadow:0 -4px 12px #0000001a}.drag-handle[_ngcontent-%COMP%]{width:40px;height:5px;background-color:transparent;border-radius:2.5px;margin:0 auto 15px}.profile-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.packageInfo[_ngcontent-%COMP%]{font-family:Alef;text-align:center;font-weight:700}.header-tab[_ngcontent-%COMP%]{justify-content:center;align-items:center;width:100%;padding:0;border:none;box-shadow:none;padding:none;--indicator-color: transparent}.header-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10px;width:100%;padding:0;border:none;box-shadow:none}.segment-button-checked[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:12px;--indicator-color: transparent;color:#000}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1em;font-weight:700;font-family:Alef}.sub-label-segment[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;justify-content:center;text-align:center;gap:4px}.sub-label-segment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em;vertical-align:middle}.ion-segment-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:4px;background:#826251;border-radius:12px;transition:all .3s ease}.settings-icon[_ngcontent-%COMP%]{font-size:24px;position:absolute;top:5%;right:15px;color:#888;cursor:pointer;opacity:.7}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:10px}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#333;text-align:right;line-height:10px}p[_ngcontent-%COMP%]{font-size:1em;color:#666;text-align:right}ion-card[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:15px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:row;align-items:center}ion-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;padding-left:35%;width:100%}.training-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:0 auto}.training-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-top:15px}.training-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin:0}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-self:center;position:absolute;left:10px;top:35%}.status-icon[_ngcontent-%COMP%]{font-size:24px;color:red;margin-left:10px}.arrow-icon[_ngcontent-%COMP%]{font-size:24px;color:#888}ion-segment-button.ion-activated[_ngcontent-%COMP%]{--background: #3498db;--color: red;box-shadow:0 4px 12px #007bff4d}.ios[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{font-size:1.1em;padding:12px 20px}.filter-segment[_ngcontent-%COMP%]{color:red}.filter-button[_ngcontent-%COMP%]{--border-radius: 30px;--padding-start: 15px;--padding-end: 15px;--background: #fff;--box-shadow: 0px 4px 6px rgba(0, 0, 0, .1);--color: #000;--icon-size: 20px;--border-color: #E5E5E5;display:flex;justify-content:center;align-items:center;width:150px;margin:20px auto 10px}.filter-button[_ngcontent-%COMP%]:hover{--background: #f5f5f5}.filter-dropdown[_ngcontent-%COMP%]{margin-bottom:15px;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;width:100%}.sub-label[_ngcontent-%COMP%]{color:#2c2c2c;font-weight:400!important;font-size:18px}']}),i})();var gt=d(345);let ft=(()=>{var n;class i{constructor(e,a,r){this.http=e,this.sanitizer=a,this.router=r,this.sanitizedWordPressUrl=null}ngOnInit(){this.loadWordPressPage(),window.addEventListener("message",this.handlePostMessage.bind(this))}loadWordPressPage(){this.sanitizedWordPressUrl=this.sanitizer.bypassSecurityTrustResourceUrl("https://k-studio.co.il/purchases-angular/")}handlePostMessage(e){e.data&&e.data.productId&&e.data.checkoutUrl&&this.purchaseProduct(e.data.productId,e.data.checkoutUrl)}purchaseProduct(e,a){const r=localStorage.getItem("auth_token");if(!r)return void alert("User is not logged in.");const l=new v.Lr({"Content-Type":"application/json",Authorization:`Bearer ${r}`});this.http.post("https://k-studio.co.il/wp-json/jwt-auth/v1/token/validate",{},{headers:l}).subscribe(p=>{console.log("User authenticated successfully:",p),window.location.href=`${a}?jwt_token=${r}`},p=>{console.error("Error authenticating user:",p),alert("Authentication failed. Please log in again.")})}loginAndRedirectToCart(){const e=localStorage.getItem("auth_token");if(!e)return void console.error("No auth token found");const a=new v.Lr({Authorization:`Bearer ${e}`});this.http.post("https://k-studio.co.il/wp-json/jwt-auth/v1/token/validate",{},{headers:a}).subscribe(r=>{r.success?window.location.href="https://k-studio.co.il/?add-to-cart=9735":console.error("Authentication failed")},r=>{console.error("Error during login",r)})}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(v.Qq),t.rXU(gt.up),t.rXU(D.Ix))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-purchase"]],decls:4,vars:1,consts:[[3,"click"],["width","100%","height","100%","frameborder","0",3,"src"]],template:function(e,a){1&e&&(t.j41(0,"ion-content")(1,"button",0),t.bIt("click",function(){return a.loginAndRedirectToCart()}),t.EFF(2,"Add to Cart"),t.k0s(),t.nrm(3,"iframe",1),t.k0s()),2&e&&(t.R7$(3),t.Y8G("src",a.sanitizedWordPressUrl,t.f$h))},dependencies:[s.W9]}),i})();var ht=d(5058);let vt=(()=>{var n;class i{constructor(e){this.http=e,this.apiURL="https://k-studio.co.il/wp-json/wn/v1/blocks"}getBlocks(){return this.http.get(this.apiURL)}}return(n=i).\u0275fac=function(e){return new(e||n)(t.KVO(v.Qq))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const bt=["mainContent"];function Ct(n,i){if(1&n&&(t.j41(0,"div",20),t.nrm(1,"img",21),t.j41(2,"ion-card-header",22)(3,"ion-card-title",23),t.EFF(4),t.k0s()(),t.j41(5,"ion-card-content",24),t.EFF(6),t.k0s()()),2&n){const o=i.$implicit;t.R7$(),t.Y8G("src",o.image,t.B4B),t.R7$(3),t.JRh(o.title),t.R7$(2),t.SpI(" ",o.description," ")}}(0,ht.kz)();const _t=[{path:"",component:(()=>{var n;class i{constructor(e,a,r,c,l){this.blocksService=e,this.modalCtrl=a,this.modalCtrl1=r,this.modalCtrl2=c,this.authService=l,this.userName="Ruth Black",this.userMembershipType="Premium Member",this.upcomingLessons=[],this.fitnessTips=[]}ngOnInit(){setTimeout(()=>{new L.S(".swiper-container",{slidesPerView:"auto",spaceBetween:10,centeredSlides:!1,loop:!0,freeMode:!1,pagination:{el:".swiper-pagination",clickable:!0}})},0),this.blocksService.getBlocks().subscribe(e=>this.fitnessTips=e,e=>console.error("Error fetching blocks",e))}openNotifications(){var e=this;return(0,g.A)(function*(){return yield(yield e.modalCtrl1.create({component:X,cssClass:"notification-popup",presentingElement:yield e.modalCtrl1.getTop(),breakpoints:[0,.5,1],initialBreakpoint:.5})).present()})()}openWhatsApp(){window.open("https://wa.me/+972547937089","_blank")}openTrainings(){var e=this;return(0,g.A)(function*(){const a=yield e.modalCtrl.create({component:V.T,cssClass:"trainings-popup",breakpoints:[0,.85,1],initialBreakpoint:.85,backdropDismiss:!1});return yield a.present(),e.setDisableScroll(!0),a.onDidDismiss().then(()=>{e.setDisableScroll(!1)}),yield a.present()})()}setDisableScroll(e){var a=this;return(0,g.A)(function*(){(yield a.mainContent.getScrollElement()).style.overflowY=e?"hidden":"scroll"})()}openProfile(){var e=this;return(0,g.A)(function*(){if(e.authService.isLoggedIn()){const a=yield e.modalCtrl2.create({component:mt,cssClass:"profile-popup",presentingElement:yield e.modalCtrl2.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85});yield a.present(),e.setDisableScroll(!0),a.onDidDismiss().then(()=>{e.setDisableScroll(!1)})}else console.log("User Not Logged In!")})()}openPurchase(){var e=this;return(0,g.A)(function*(){if(e.authService.isLoggedIn())return yield(yield e.modalCtrl2.create({component:ft,cssClass:"app-purchase",presentingElement:yield e.modalCtrl2.getTop(),breakpoints:[0,.85,1],initialBreakpoint:.85})).present();console.log("User Not Logged In!")})()}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(vt),t.rXU(s.W3),t.rXU(s.W3),t.rXU(s.W3),t.rXU(y.u))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-home"]],viewQuery:function(e,a){if(1&e&&t.GBs(bt,5),2&e){let r;t.mGM(r=t.lsd())&&(a.mainContent=r.first)}},decls:33,vars:1,consts:[["mainContent",""],[1,"ion-padding"],[1,"header-row"],["fill","clear",1,"bell-icon",3,"click"],["slot","icon-only","name","notifications-outline"],["color","dark"],[1,"page-title","home"],["fill","clear",1,"whatsapp-icon",3,"click"],["slot","icon-only","name","logo-whatsapp"],[1,"news-card"],[1,"swiper-container"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"custom-nav-bar"],[1,"nav-item"],["name","home-outline"],[1,"nav-item",3,"click"],["name","barbell-outline"],["name","person-outline"],[1,"swiper-slide"],["alt","tip image",1,"fitness-card-img",3,"src"],[1,"fitness-card-header"],[1,"fitness-card-title"],[1,"fitness-card-content"]],template:function(e,a){if(1&e){const r=t.RV6();t.j41(0,"ion-content",1,0)(2,"div",2)(3,"ion-button",3),t.bIt("click",function(){return t.eBV(r),t.Njj(a.openNotifications())}),t.nrm(4,"ion-icon",4),t.k0s(),t.j41(5,"ion-text",5)(6,"h1",6),t.EFF(7,"K Studio"),t.k0s()(),t.j41(8,"ion-button",7),t.bIt("click",function(){return t.eBV(r),t.Njj(a.openWhatsApp())}),t.nrm(9,"ion-icon",8),t.k0s()(),t.j41(10,"ion-card",9)(11,"ion-card-header")(12,"ion-card-title"),t.EFF(13,"\u05de\u05d4 \u05d7\u05d3\u05e9?"),t.k0s()(),t.j41(14,"ion-card-content"),t.EFF(15," \u05d4\u05d9\u05e9\u05d0\u05e8 \u05de\u05e2\u05d5\u05d3\u05db\u05df \u05e2\u05dd \u05d4\u05d7\u05d3\u05e9\u05d5\u05ea \u05d4\u05d0\u05d7\u05e8\u05d5\u05e0\u05d5\u05ea \u05d5\u05d4\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd \u05de\u05d4\u05e1\u05d8\u05d5\u05d3\u05d9\u05d5! "),t.k0s()(),t.j41(16,"div",10)(17,"div",11),t.DNE(18,Ct,7,3,"div",12),t.k0s(),t.nrm(19,"div",13),t.k0s(),t.j41(20,"div",14)(21,"div",15),t.nrm(22,"ion-icon",16),t.j41(23,"ion-label"),t.EFF(24,"\u05d1\u05d9\u05ea"),t.k0s()(),t.j41(25,"div",17),t.bIt("click",function(){return t.eBV(r),t.Njj(a.openTrainings())}),t.nrm(26,"ion-icon",18),t.j41(27,"ion-label"),t.EFF(28,"\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd"),t.k0s()(),t.j41(29,"div",17),t.bIt("click",function(){return t.eBV(r),t.Njj(a.openProfile())}),t.nrm(30,"ion-icon",19),t.j41(31,"ion-label"),t.EFF(32,"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"),t.k0s()()()()}2&e&&(t.R7$(18),t.Y8G("ngForOf",a.fitnessTips))},dependencies:[h.Sq,s.Jm,s.b_,s.I9,s.ME,s.tN,s.W9,s.iq,s.he,s.IO],styles:[".swiper-container[_ngcontent-%COMP%]{width:100%;height:auto;margin-bottom:20px}.swiper-wrapper[_ngcontent-%COMP%]{display:flex;width:120vh}.swiper-slide[_ngcontent-%COMP%]{width:900px;max-width:900px;height:10%;background-color:#fff;border-radius:15px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:20px;margin-right:10px}.fitness-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:15px;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}.fitness-card-img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;border-radius:15px 15px 0 0}.fitness-card-header[_ngcontent-%COMP%]{height:60px;padding:15px;text-align:center;display:flex;align-items:center;justify-content:center}.fitness-card-title[_ngcontent-%COMP%]{font-size:1.4em;color:#333;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fitness-card-content[_ngcontent-%COMP%]{-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;padding:15px;height:auto;font-size:1em;line-height:1.5;color:#5d5d5d;font-weight:400}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-bottom:20px;text-align:right;font-family:Alef}ion-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #feca57, #ff6b6b);--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, rgba(173, 232, 244, .8), rgba(255, 255, 255, .6));display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:20px}.page-title[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin:0;flex-grow:1;text-align:center}.home[_ngcontent-%COMP%]{font-family:Playwrite CU;font-size:18px}.news-card[_ngcontent-%COMP%]{border-radius:20px;background:linear-gradient(135deg,#1dd1a1,#54a0ff);color:#fff}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:10px 15px;position:relative}ion-button[_ngcontent-%COMP%]   .whatsapp-icon[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #25D366, #128C7E);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[_ngcontent-%COMP%]   .bell-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #ff6b6b, #feca57);--box-shadow: 0 4px 12px rgba(255, 107, 107, .4);border-radius:10px;font-family:Alef,sans-serif;font-weight:500}ion-button[color=secondary][_ngcontent-%COMP%]{--background: #54a0ff}ion-header[_ngcontent-%COMP%]{--background: #2e86de;--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;align-items:center}ion-icon[_ngcontent-%COMP%]{font-size:24px}.bell-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#feca57,#ff6b6b);border-radius:10px;box-shadow:0 4px 12px #0000001a}.whatsapp-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;background:linear-gradient(135deg,#25d366,#128c7e);border-radius:10px;box-shadow:0 4px 12px #0000001a}.app-logo[_ngcontent-%COMP%]{height:35px;width:auto;margin:0 auto}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;color:#333;margin-top:20px;margin-bottom:20px;text-align:right}ion-card[_ngcontent-%COMP%]{background:#fffc;border-radius:15px;box-shadow:0 4px 12px #0000001a;padding:15px;margin:20px 0}.custom-nav-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:60px;background-color:#fff;border-top:1px solid #e0e0e0;display:flex;justify-content:space-around;align-items:center;box-shadow:0 -2px 10px #0000001a;z-index:1000}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;color:#666;font-size:12px}.nav-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;--color: #666}.nav-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#666}.nav-item-active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .nav-item-active[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:hover   ion-label[_ngcontent-%COMP%]{color:#3498db}.nav-item[_ngcontent-%COMP%]:active   ion-icon[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]:active   ion-label[_ngcontent-%COMP%]{color:#2980b9}"]}),i})()}];let xt=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[D.iI.forChild(_t),D.iI]}),i})(),Mt=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[h.MD,M.YN,s.bv,xt,A.Fg,T.Hl,R.s5,Y]}),i})()}}]);