<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/trainer/attendance-dashboard"></ion-back-button>
    </ion-buttons>
    <ion-title>Mark Attendance</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div *ngIf="training">
    <h2>{{ training.title.name }}</h2>
    <p>{{ training.start_time | date: 'fullDate' }} at {{ training.start_time | date: 'shortTime' }}</p>
  </div>

  <ion-list>
    <ion-item *ngFor="let customer of attendanceList">
      <ion-label>{{ customer.name }}</ion-label>
      <div slot="end" class="status-buttons">
        <ion-button fill="clear" (click)="markStatus(customer, 'attended')" [class.selected]="customer.status === 'attended'">
          <ion-icon name="checkmark-circle" color="success"></ion-icon>
        </ion-button>
        <ion-button fill="clear" (click)="markStatus(customer, 'absent')" [class.selected]="customer.status === 'absent'">
          <ion-icon name="close-circle" color="danger"></ion-icon>
        </ion-button>
      </div>
    </ion-item>
  </ion-list>

  <ion-button expand="block" (click)="submitAttendance()" [disabled]="!isReadyToSubmit() || isSubmitting">
    <ion-spinner *ngIf="isSubmitting"></ion-spinner>
    <span *ngIf="!isSubmitting">Submit Attendance</span>
  </ion-button>
</ion-content>